{"version":3,"sources":["utils/config.js","flux/reducers/register.js","utils/validator.js","flux/reducers/authReducer.js","flux/reducers/product.js","flux/reducers/index.js","flux/store.js","flux/actions/productActions.js","containers/Register/subpage/step1.js","containers/Register/subpage/step2.js","containers/Register/subpage/step3.js","containers/Register/index.js","utils/setAuth.js","flux/actions/authActions.js","containers/Login/subpage/Account.js","containers/Login/subpage/PhoneLogin.js","containers/Login/index.js","components/Header/index.js","containers/Home/subpage/Slide.js","containers/Home/subpage/SmaillType.js","components/Search/index.js","containers/Home/index.js","components/Goods/subpage/Wait.js","components/Goods/subpage/ErrorPage.js","components/Goods/subpage/Empty.js","components/Goods/subpage/GoodsList.js","components/Goods/index.js","containers/SearchProduct/subpage/SubStore.js","containers/SearchProduct/index.js","containers/SearchProduct/GotoSearchProduct.js","components/StoreHeader/index.js","containers/ProductDetail/subpage/Spec.js","containers/ProductDetail/subpage/ProductInfo.js","containers/ProductDetail/index.js","containers/UserInfo/subpage/Safety.js","containers/UserInfo/subpage/MyInfo.js","containers/UserInfo/subpage/EditMyInfo.js","containers/UserInfo/subpage/Address.js","containers/UserInfo/subpage/ShopCat.js","containers/UserInfo/subpage/Message.js","containers/UserInfo/subpage/MyOrder.js","containers/UserInfo/index.js","App.js","index.js"],"names":["config","initialState","step","phone","isEmpty","value","undefined","Object","keys","length","isPhone","number","test","isLogin","loginWay","user","isVerify","address","authReducer","state","arguments","action","type","objectSpread","payload","searchGoods","searchStores","searchKey","productDetail","comments","goodDetail","goodInfo","infoPicture","smaillPicture","message","productReducer","rootReducer","combineReducers","register","auth","product","middleWare","thunk","composeMiddlewares","applyMiddleware","apply","window","__REDUX_DEVTOOLS_EXTENSION__","push","store","createStore","compose","subscribe","HOST","getState","setSearchKeyAction","dispatch","Step1","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","isCheck","smsCode","sendSMSCode","errors","validator","bind","assertThisInitialized","sendSMS","onChange","changeStep","e","setState","defineProperty","target","name","sms","_this2","axios","post","then","res","data","success","getPhone","console","log","catch","err","history","refs","slideBlock","addEventListener","start","screenX","width","parseInt","getComputedStyle","slide","document","mousemove","move","style","left","slideRate","mouseup","removeEventListener","end","slideCheck","_react_16_8_1_react_default","a","createElement","className","placeholder","ref","onClick","nextStep","Component","connect","Step2","password","password2","nickname","debounce","nicknameRepeat","key","valid","isLegal","msg","callback","_this3","response","result","timer","handler","clearTimeout","setTimeout","_this4","newUser","getUser","submit","classnames","border-err","onSubmit","Step3","users","Link","to","Register","registerInfo","showStep","Route","exact","path","component","setAuthToken","token","defaults","headers","common","localStorage","setItem","removeItem","setCurrentUser","setLoginWay","way","Account","account","inputChange","opts","info","min","max","values","htmlFor","id","formSubmit","React","protTypes","PropTypes","object","isRequired","func","PhoneLogin","_ref","sms_code","Login","classPhone","classAccount","AppHeader","hello","userinfo","loginOut","href","slideboxs","slideImg","bgimg","bgcolor","slideStop","slideIndex","slideInterval","slideTimeout","slideAnimate","gotoSlide","slideStart","getElementsByClassName","opacity","setInterval","clearInterval","next","before","beforeOpa","nextOpa","interval","time","timeout","nowtime","Date","index","Number","currentTarget","getAttribute","onMouseLeave","map","item","backgroundColor","background","concat","onMouseOver","_","cnames","slide-nav-selected","SmaillType","historyPush","smaillType","_id","smaillName","detail","detailName","Home","navTop","bigType","selectedBigid","onBigTypeSelect","CurrentSmaillType","get","error","bigid","getSmaill","i","len","preventDefault","components_Header","searchProduct","searchInputChange","height","src","alt","onBigTypeLeave","nav-l-item-sel","bigName","subpage_SmaillType","Slide","beforeKey","Search","defaultValue","propType","string","Wait","ErrorPage","Empty","GoodsList","goods","rowlast","logo","nowPrice","goodName","substring","storeName","Goods","status","searchUrl","getGoods","subpage_Wait","subpage_ErrorPage","subpage_Empty","subpage_GoodsList","SubStore","stores","detailTypes","nextProps","Array","isArray","detailId","storeIds","storeId","repeat","j","len2","jsonStoreIds","JSON","stringify","smaillId","find","detailType","crum-selected","SearchProduct","match","params","q","location","search","getSearchProductUrl","setSearchGoodsAction","queryString","parse","url","isvalid","bigId","order","sort","limit1","limit2","components_Search","subpage_SubStore","components_Goods","GotoSearchProduct","StoreHeader","onSearchInputChange","storeInfo","searchAllProduct","searchStoreProduct","withRouter","Spec","smaillx","smailly","bigImg","selectImg","link","allAmount","specChoice","choiceProductDetail","choiceNumber","specConfig","specValueClick","onSmaillMouseOver","newConfig","detailIndex","specNameIndex","specValueIndex","amount","indexx","toConsumableArray","isOK","price","specName","specValue","value-item-selected","choiceNumberChange","d","display","ProductInfo","ProductDetail","goodId","goBack","setProductDetailAction","src_components_StoreHeader","subpage_Spec","subpage_ProductInfo","Safety","MyInfo","EditMyInfo","Address","memberId","receiveName","postcode","ShopCat","Message","Order","UserInfo","avatar","MyOrder","jwtToken","App","ReactDOM","render","es","BrowserRouter","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.55355526.chunk.js","sourcesContent":["export default {\r\n\t// HOST: 'http://127.0.0.1:5000'\r\n\tHOST: 'http://118.126.108.36'\r\n}","let initialState = {\r\n\tstep: 0,\r\n\tphone: '13888888888'\r\n}\r\nexport default (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase \"STEP_CHANGE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstep: action.step\r\n\t\t\t}\r\n\t\tcase \"GET_PHONE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tphone: action.phone\r\n\t\t\t}\r\n\t\tcase \"NEW_USER\":\r\n\t\t\treturn action.user;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","export const isEmpty = value => {\r\n\treturn value === undefined || value === null ||\r\n\t\t(typeof value === 'object' && Object.keys(value).length === 0) ||\r\n\t\t(typeof value === 'string' && value.length === 0)\r\n}\r\n\r\nexport const isPhone = number => {\r\n\treturn /^1[0-9]{10}$/.test(number);\r\n}\r\n\r\nexport const isLength = (value, opts) => {\r\n\tif (typeof values !== 'string') return false;\r\n\treturn (value.length > opts.min && value.length < opts.max)\r\n}","import {isEmpty} from '../../utils/validator'\n\nvar initialState = {\n\tisLogin: false,\n\tloginWay: 'phone',\n\tuser: {},\n  isVerify: true,  // 账号验证中\n  address: []  // 收货地址\n}\nconst authReducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase 'SET_LOGIN_WAY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloginWay: action.payload\n\t\t\t}\n\t\tcase 'SET_CURRENT_USER': // 登陆或 App.js 验证 localStorage中 token 时触发\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLogin: !isEmpty(action.payload),\n\t\t\t\tuser: action.payload,\n        isVerify: false  // 设置 auth.isVerifu = false (验证结束)\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\nexport default authReducer;\n","var initialState = {\n  searchGoods: [],\n  searchStores: [],\n  searchKey: '',\n  productDetail: {\n    comments: [],\n    goodDetail: [],\n    goodInfo: {},\n    infoPicture: [],\n    smaillPicture: [{}],\n    message: '加载中。。。'\n  }\n}\n\nvar productReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case 'SET_SEARCH_GOODS':\n      return {\n        ...state,\n        searchGoods: action.payload\n      }\n    case 'SET_SEARCH_STORES':\n      return {\n        ...state,\n        searchStores: action.payload\n      }\n    case 'SET_SEARCH_KEY':\n      return {\n        ...state,\n        searchKey: action.payload\n      }\n    case 'SET_PRODUCT_DETAIL':\n      return {\n        ...state,\n        productDetail: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default productReducer\n","/**\n * 合并多个 reducer 成一个大的reducer\n */\n\nimport {combineReducers} from 'redux'\n\nimport register from './register'\nimport auth from './authReducer'\nimport product from './product'\n\nlet rootReducer = combineReducers({\n\tregister,\n\tauth,\n  product\n});\nexport default rootReducer;\n","import {createStore, applyMiddleware, compose} from 'redux'\nimport thunk from 'redux-thunk'\n\nimport rootReducer from './reducers/index.js'\n\nlet middleWare = [thunk];\nlet initialState = {};\n// 需要合并的中间件\nlet composeMiddlewares = [applyMiddleware(...middleWare),];\n//激活 chrome 浏览器 redux 插件\nif (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\n\tcomposeMiddlewares.push(window.__REDUX_DEVTOOLS_EXTENSION__())\n}\nconst store = createStore(rootReducer, initialState, compose(...composeMiddlewares));\n\n// 订阅更新函数，每次状态更新都会执行\nstore.subscribe(() => {\n\t// console.log(\"状态更新\");\n})\n\nexport default store;\n","import store from '../store'\nimport axios from 'axios'\nimport config from '../../utils/config'\nconst HOST = config.HOST\nconst state = store.getState()\n\n// 搜索的 goods\nexport const setSearchGoodsAction = goods => dispatch => {\n  dispatch({\n    type: 'SET_SEARCH_GOODS',\n    payload: goods\n  })\n}\n\n// 设置搜索的 Store\nexport const setSearchStoresAction = stores => dispatch => {\n  dispatch({\n    type: 'SET_SEARCH_STORES',\n    payload: stores\n  })\n}\n\n// 设置搜索关键字\nexport const setSearchKeyAction = searchKey => dispatch => {\n  dispatch({\n    type: 'SET_SEARCH_KEY',\n    payload: searchKey\n  })\n}\n\n// 设置商品详情页数据\nexport const setProductDetailAction = goodId => dispatch => {\n  if (state.product.productDetail._id === goodId) return;\n  axios.get(`${HOST}/api/goods/product_detail?goodId=${goodId}`)\n    .then(res => {\n      if (res.data.success) {\n        dispatch({\n          type: 'SET_PRODUCT_DETAIL',\n          payload: res.data.payload\n        })\n      }else {\n        dispatch({\n          type: 'SET_PRODUCT_DETAIL',\n          payload: { ...state.product.productDetail, message: res.data.message, error: '' }\n        })\n      }\n    })\n    .catch(err => {\n      dispatch({\n        type: 'SET_PRODUCT_DETAIL',\n        payload: { ...state.product.productDetail, error: err.message, message: '' }\n      })\n    })\n}\n","import React, {Component} from 'react'\nimport axios from 'axios'\nimport {Link} from 'react-router-dom'\nimport {connect} from 'react-redux'\n\nimport config from '../../../utils/config.js'\n\nclass Step1 extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tphone: '',\n\t\t\tisCheck: false,\n\t\t\tsmsCode: '',\n\t\t\tsendSMSCode: '',  // 发送的验证码\n\t\t\terrors: {}\n\t\t}\n\t\tthis.validator = this.validator.bind(this);\n\t\tthis.sendSMS = this.sendSMS.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t}\n\tcomponentWillMount() {\n\t\t// 进入 Step1 改变 store.register.step = 1 中\n\t\tthis.props.changeStep(1);\n\t}\n\tonChange(e) {\n\t\tthis.setState({\n\t\t\t[e.target.name]: e.target.value\n\t\t});\n\t}\n\tvalidator(phone) {\n\t\tif (phone) {\n\t\t\treturn /^1[0-9]{10}$/.test(phone);\n\t\t}\n\t\treturn {\n\t\t\tphone: /^1[0-9]{10}$/.test(this.state.phone),\n\t\t\tsms: this.state.sendSMSCode && this.state.smsCode === this.state.sendSMSCode\n\t\t}\n\t}\n\tsendSMS() {\n\t\tif (!this.validator().phone) {\n\t\t\tthis.setState({\n\t\t\t\terrors: {\n\t\t\t\t\t...this.state.errors,\n\t\t\t\t\tphone: '手机号码格式不正确'\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({\n\t\t\terrors: {}\n\t\t});\n\t\taxios.post(config.HOST + '/api/operator/testsms', {phone: this.state.phone})\n\t\t\t.then(res => {\n\t\t\t\tif (!res.data.success) {\n\t\t\t\t\tthis.setState({errors: {...this.state.errors, phone: '服务器忙，稍后重试'}});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tsendSMSCode: res.data.payload.smsCode\n\t\t\t\t}, () => {\n\t\t\t\t\t// dispatch 手机号码\n\t\t\t\t\tthis.props.getPhone(this.state.phone);\n\t\t\t\t});\n\t\t\t\tconsole.log(res.data.payload.smsCode); // 打印验证码\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis.setState({\n\t\t\t\t\terrors: {\n\t\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t\tphone: err.message\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\tnextStep() {\n\t\tif (!(this.validator(this.props.register.phone) && this.validator().sms)) {\n\t\t\t// 验证不通过\n\t\t\tthis.setState({\n\t\t\t\terrors: {\n\t\t\t\t\t...this.state.errors,\n\t\t\t\t\tsmsCode: '验证码有误'\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t// 验证通过，下一步\n\t\tthis.props.history.push('/register/step2')\n\t}\n\tcomponentDidMount() {\n    if (typeof window !== 'object') return;\n\t\t// 组件挂载完毕，绑定原生事件\n\t\tconst _this = this;\n\t\t// 鼠标按下\n\t\tthis.refs.slideBlock.addEventListener(\"mousedown\", slideCheck);\n\t\tfunction slideCheck(e) {\n\t\t\tlet start = e.screenX;\n\t\t\t// 滑块滑动总长度\n\t\t\tlet width = window.parseInt(window.getComputedStyle(_this.refs.slide, false)[\"width\"]) -\n\t\t\t\twindow.parseInt(window.getComputedStyle(_this.refs.slideBlock, false)[\"width\"]);\n\t\t\tconsole.log(width);\n\t\t\t// 鼠标移动\n\t\t\tdocument.addEventListener(\"mousemove\", mousemove);\n\t\t\tfunction mousemove(e) {\n\t\t\t\tlet move = e.screenX - start;\n\t\t\t\tif (0 < move && move <= width) {\n\t\t\t\t\t_this.refs.slideBlock.style.left = move + \"px\";  // 滑块移动\n\t\t\t\t\t_this.refs.slideRate.style.width = move + \"px\";  // 验证块变宽\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 鼠标抬起\n\t\t\tdocument.addEventListener(\"mouseup\", mouseup)\n\t\t\tfunction mouseup(e) {\n\t\t\t\tconsole.log(\"mouseup\");\n\t\t\t\t// 接触监听事件\n\t\t\t\t_this.refs.slideBlock.removeEventListener(\"mousemove\", mousemove);\n\t\t\t\tdocument.removeEventListener(\"mousemove\", mousemove);\n\t\t\t\tdocument.removeEventListener(\"mouseup\", mouseup);\n\n\t\t\t\tlet end = parseInt(_this.refs.slideRate.style.width); // 验证块长度\n\t\t\t\tconsole.log(end, width);\n\t\t\t\tif (end >= width-3) {  // 验证精度\n\t\t\t\t\t// \"验证成功\"\n\t\t\t\t\t_this.refs.slideBlock.removeEventListener(\"mousedown\", slideCheck);\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tisCheck: true\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\t_this.refs.slideBlock.style.left = \"0px\"; // 滑块还原\n\t\t\t\t\t_this.refs.slideRate.style.width = \"0px\"; // 验证块还原\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"Step1\">\n\t\t\t\t<div className=\"s1-item phone\">\n\t\t\t\t\t<div className=\"prefix\">手机号</div>\n\t\t\t\t\t<div className=\"s1-item-body\">\n\t\t\t\t\t\t<div className=\"s1-phone-prefix\">\n\t\t\t\t\t\t\t<span>中国大陆</span>\n\t\t\t\t\t\t\t<span> +86</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"s1-phone-input\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"请输入手机号\"\n\t\t\t\t\t\t\t\tname=\"phone\"\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tvalue={this.state.phone}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tthis.state.errors.phone &&\n\t\t\t\t\t(<p>{this.state.errors.phone}</p>)\n\t\t\t\t}\n\t\t\t\t<div className=\"s1-item\">\n\t\t\t\t\t<div className=\"prefix\">手机号</div>\n\t\t\t\t\t<div className=\"s1-item-body\">\n\t\t\t\t\t\t<div ref=\"slide\" className=\"slide\">\n\t\t\t\t\t\t\t<p>{this.state.isCheck ? \"验证通过\" : \"请按住滑块，拖动到最右边\"}</p>\n\t\t\t\t\t\t\t<div ref=\"slideRate\" style={{width: 0}} className=\"slide-rate\"></div>\n\t\t\t\t\t\t\t<div ref=\"slideBlock\" style={{left: 0}} className=\"slide-block\">>></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tthis.state.isCheck ?\n\t\t\t\t\t<div className=\"s1-item s1-smscode\">\n\t\t\t\t\t\t<div className=\"-prefix\">验证码</div>\n\t\t\t\t\t\t<div className=\"s1-item-body\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"输入手机验证码\"\n\t\t\t\t\t\t\t\tname=\"smsCode\"\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tvalue={this.state.smsCode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button onClick={this.sendSMS}>发送</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t{/*<Link to=\"/register/step2\">下一步</Link>*/}\n\t\t\t\t<div><span onClick={this.nextStep.bind(this)}>下一步</span></div>\n\t\t\t</div>\n\t\t)\n\t}\n}\nfunction mapStateToProps(state) {\n\treturn {\n\t\tregister: state.register\n\t}\n}\nfunction mapActionToProps(dispatch) {\n\treturn {\n\t\tchangeStep(step) {\n\t\t\tdispatch({\n\t\t\t\ttype: \"STEP_CHANGE\",\n\t\t\t\tstep\n\t\t\t});\n\t\t},\n\t\tgetPhone(phone) {\n\t\t\tdispatch({\n\t\t\t\ttype: \"GET_PHONE\",\n\t\t\t\tphone\n\t\t\t});\n\t\t}\n\t}\n}\nexport default connect(mapStateToProps, mapActionToProps)(Step1);\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\n\r\nimport config from '../../../utils/config.js'\r\n\r\nclass Step2 extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: props.register.phone,\r\n\t\t\tpassword: '',\r\n\t\t\tpassword2: '',\r\n\t\t\tnickname: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.debounce = this.debounce();\r\n\t\tthis.validator = this.validator.bind(this);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.nicknameRepeat = this.nicknameRepeat.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.props.changeStep(2);\r\n\t}\r\n\tonChange(e) {\r\n\t\t// 同步值\r\n\t\tvar key = e.target.name;\r\n\t\tthis.setState({\r\n\t\t\t[key]: e.target.value\r\n\t\t});\r\n\t\t// 防抖 验证格式\r\n\t\tthis.debounce(() => {\r\n\t\t\tconsole.log(\"防抖验证\");\r\n\t\t\tvar valid = this.validator(key);\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t[key]: valid.isLegal ? '' : valid.msg\r\n\t\t\t\t}\r\n\t\t\t}, () => {\r\n\t\t\t\t// 格式验证成功, nickname 是否已存在\r\n\t\t\t\tkey === 'nickname' && valid.isLegal && this.nicknameRepeat();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tnicknameRepeat(callback) {\r\n\t// 验证名字重复\r\n\t\taxios.post(config.HOST + '/api/users/nickname', {nickname: this.state.nickname})\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\tcallback && callback(false);  // 提交时用,只要结果，防抖验证不用\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tnickname: res.data.msg\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tnickname: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcallback && callback(true);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tcallback && callback(false);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tnickname: err.response.data\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\tvalidator(target) {\r\n\t\tvar result = {\r\n\t\t\tkey: target,\r\n\t\t\tisLegal: true,\r\n\t\t\tmsg: ''\r\n\t\t};\r\n\t\tswitch (target) {\r\n\t\t\tcase \"nickname\":\r\n\t\t\t\t// 不能以数字开头，长度 2-10 位\r\n\t\t\t\tif (!/^[^0-9][\\w\\W]{1,9}$/.test(this.state.nickname)){\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"不能以数字开头，长度 2-10 位\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"password2\":\r\n\t\t\t\tif (this.state.password2 !== this.state.password) {\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"两次密码不一致\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tcase \"password\":\r\n\t\t\t\t// 0-9 A-z _ . + - # @ ! ^ & $ (6,18)\r\n\t\t\t\tif (!/^[\\w\\d\\.\\+\\-#@!\\^\\&\\$]{6,18}$/.test(this.state.password)) {\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"密码长度6-18位，可包含0-9 A-z _ . + - # @ ! ^ & $\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresult.isLegal = false;\r\n\t\t\t\tresult.msg = '未定义类型';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t// 防抖函数：停止输入后延迟一秒执行传入函数\r\n\tdebounce() {\r\n\t\tvar timer = null;\r\n\t\treturn function (handler) {\r\n\t\t\twindow.clearTimeout(timer);\r\n\t\t\ttimer = window.setTimeout(function () {\r\n\t\t\t\thandler && handler();\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\tonSubmit() {\r\n\t\t// 提交，验证所有，发送注册请求\r\n\t\tif (this.validator(\"nickname\").isLegal && this.validator(\"password\").isLegal && this.validator(\"password2\").isLegal) {\r\n\t\t\t// 验证名字\r\n\t\t\tthis.nicknameRepeat((result) => {\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\t// 验证成功，进行注册\r\n\t\t\t\tconst newUser = {\r\n\t\t\t\t\tnickname: this.state.nickname,\r\n\t\t\t\t\tpassword: this.state.password,\r\n\t\t\t\t\tphone: this.props.register.phone\r\n\t\t\t\t}\r\n\t\t\t\taxios.post(config.HOST + \"/api/users/register\", newUser)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\t\t\t// 验证通过\r\n\t\t\t\t\t\t\tthis.props.getUser(newUser); // dispatch NEW_USER\r\n\t\t\t\t\t\t\tthis.props.history.push('/register/step3');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\t\tsubmit: err.response.data\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"step2\">\r\n\t\t\t\t<h2>Step2</h2>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">登录名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t{this.state.phone}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">请设置登录密码</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录时验证，保护账号信息</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录密码</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tplaceholder=\"设置你的登录密码\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.password\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.password && \r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.password}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">密码确认</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tplaceholder=\"再次输入你的密码\"\r\n\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password2}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.password2\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.password2 && \r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.password2}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">设置会员名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tplaceholder=\"会员名一旦设置成功，无法修改\"\r\n\t\t\t\t\t\t\tname=\"nickname\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.nickname}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.nickname\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.nickname && \r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.nickname}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-submit-wrap\">\r\n\t\t\t\t\t<button onClick={this.onSubmit.bind(this)} className=\"s2-submit\">提交</button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.errors.submit && \r\n\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.submit}</div>)\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nfunction mapActionToProps(dispatch) {\r\n\treturn {\r\n\t\tchangeStep(step) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"STEP_CHANGE\",\r\n\t\t\t\tstep\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetUser(user) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"NEW_USER\",\r\n\t\t\t\tuser\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapActionToProps)(Step2);","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {Link} from 'react-router-dom'\n\nclass Step3 extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.props.changeStep(3);\n\t}\n\trender() {\n\t\tconst users = this.props.register\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<h1>Step3</h1>\n\t\t\t\t<h2>{users.nickname},{users.phone}注册成功</h2>\n\t\t\t\t<Link to=\"/login\">现在登录</Link>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (state) => ({register: state.register})\n\nfunction mapActionToProps(dispatch) {\n\treturn {\n\t\tchangeStep(step) {\n\t\t\tdispatch({\n\t\t\t\ttype: \"STEP_CHANGE\",\n\t\t\t\tstep\n\t\t\t});\n\t\t}\n\t}\n}\nexport default connect(mapStateToProps, mapActionToProps)(Step3);\n","import './index.scss'\r\nimport Step1 from './subpage/step1'\t// 注册第一步\r\nimport Step2 from './subpage/step2'\t// 注册第二步\r\nimport Step3 from './subpage/step3'\t// 注册成功\r\n\r\nimport React, {Component} from 'react'\r\nimport {Route, Link} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nclass Register extends Component {\r\n\tcomponentWillMount() {\r\n\t\tthis.props.history.push('/register/step1');\r\n\t}\r\n\tshowStep() {\r\n\t\tlet registerInfo = this.props.register; // redux 中 register\r\n\t\tlet step = '';\r\n\t\tif (registerInfo.step === 3) {\r\n\t\t\tstep = (<h3>1.设置用户名</h3>)\r\n\t\t}else if (registerInfo.step === 2) {\r\n\t\t\tstep = (<h3>2.填写账号信息</h3>)\r\n\t\t}else if (registerInfo.step === 1) {\r\n\t\t\tstep = (<h3>1.设置用户名</h3>)\r\n\t\t}else {\r\n\t\t\tstep = (<h3>look like some error...</h3>)\r\n\t\t}\r\n\t\treturn step;\r\n\t}\r\n\trender() {\r\n\t\tlet registerInfo = this.props.register; // redux 中 register\r\n\t\treturn (\r\n\t\t\t<div className=\"register-wrap\">\r\n\t\t\t\t<Link to=\"/login\">登录</Link><br/>\r\n\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.showStep.call(this)\r\n\t\t\t\t}\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<Route exact path=\"/register/step1\" component={Step1} />\r\n\t\t\t\t\t<Route exact path=\"/register/step2\" component={Step2} />\r\n\t\t\t\t\t<Route exact path=\"/register/step3\" component={Step3} />\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, null)(Register);","import axios from 'axios'\nimport store from '../flux/store'\n\nexport const setAuthToken = token => {\n\tif (token) {\n\t\t// 让每个请求头携带 token\n\t\taxios.defaults.headers.common[\"Authorization\"] = token;\n\t\t // 添加localStorage 储存token\n\t\twindow.localStorage.setItem(\"jwtToken\", token);\n\t} else {\n\t\t// 删除请求头 token\n\t\tdelete axios.defaults.headers.common[\"Authorization\"];\n\t\t// 删除localStorage储存的 token\n\t\twindow.localStorage.removeItem(\"jwtToken\");\n\t}\n}\n\nexport const setCurrentUser = payload => {\n\tstore.dispatch({\n\t\ttype: 'SET_CURRENT_USER',\n\t\tpayload\n\t})\n}\n\n","\nexport const setLoginWay = way => dispatch => {\n\tdispatch({\n\t\ttype: 'SET_LOGIN_WAY',\n\t\tpayload: way\n\t});\n}\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport config from '../../../utils/config.js'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport {setLoginWay} from '../../../flux/actions/authActions'\r\nimport {isPhone, isEmpty, isLength} from '../../../utils/validator'\r\n\r\nclass Account extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\taccount: '',\r\n\t\t\tpassword: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.inputChange = this.inputChange.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\t// store 中登录方式修改为 'account'\r\n\t\tif (this.props.auth.loginWay !== 'account') {\r\n\t\t\tthis.props.setLoginWay('account');\r\n\t\t}\r\n\t}\r\n\tinputChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\tformSubmit() {\r\n\t\tlet info = {account: this.state.account, password: this.state.password};\r\n\t\tlet errors = {};\r\n\t\tif (isEmpty(this.state.account)) {\r\n\t\t\terrors.account = '账号不能为空';\r\n\t\t}else if (!isLength(this.state.password, {min: 6, max: 18})) {\r\n\t\t\terrors.password = '密码长度 6-18 位';\r\n\t\t}\r\n\t\tif (!isEmpty(errors)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t...errors\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (isPhone(this.state.account)) {\r\n\t\t\tinfo.way = 'phone'\r\n\t\t}else {\r\n\t\t\tinfo.way = 'nickname'\r\n\t\t}\r\n\t\taxios.post(config.HOST + '/api/users/login', info)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\t...res.data.errors\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 验证通过\r\n\t\t\t\tsetAuthToken(res.data.payload.token); // 请求头附加token\r\n\t\t\t\tsetCurrentUser(res.data.payload.user);\r\n\t\t\t\tthis.props.history.push('/');\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"l-input-wrap\">\r\n\t\t\t\t<div className=\"log-input1\">\r\n\t\t\t\t\t<label htmlFor=\"account\"></label>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.account}\r\n\t\t\t\t\t\tplaceholder=\"昵称 / 手机号码\"\r\n\t\t\t\t\t\tname=\"account\"\r\n\t\t\t\t\t\tid=\"account\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"log-input2\">\r\n\t\t\t\t\t<label htmlFor=\"password\"></label>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\tplaceholder=\"密码\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"submit\" onClick={this.formSubmit.bind(this)} value=\"登录\"/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nAccount.protTypes = {\r\n\tauth: PropTypes.object.isRequired,\r\n\tsetLoginWay: PropTypes.func.isRequired\r\n}\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, {setLoginWay})(Account);","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport config from '../../../utils/config.js'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport {setLoginWay} from '../../../flux/actions/authActions'\r\nimport {isPhone, isEmpty} from '../../../utils/validator'\r\n\r\n/**\r\n * 发送手机号到 sms接口，\r\n * 手机号合法 md5存储验证码并返回，\r\n * 登录发送手机号验证码，服务端入数据库匹配成功返回 token\r\n */\r\nclass PhoneLogin extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tphone: '',\r\n\t\t\tsms: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.inputChange = this.inputChange.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\t// store 中登录方式修改为 'phone'\r\n\t\tif (this.props.auth.loginWay !== 'phone') {\r\n\t\t\tthis.props.setLoginWay('phone');\r\n\t\t}\r\n\t}\r\n\tinputChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\tsendSMS() {\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '手机号码错误'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 格式正确\r\n\t\tif (this.state.errors.phone) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tsms: ''\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\taxios.post(config.HOST + \"/api/operator/testsms\", {phone: this.state.phone})\r\n\t\t\t.then(({data}) => {\r\n\t\t\t\tconsole.log(data.payload.smsCode);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\tsubmit() {\r\n\t\tlet errors = false;\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\terrors = {phone: '手机号码错误'}\r\n\t\t}else if (isEmpty(this.state.sms)) {\r\n\t\t\terrors = {sms: '验证码为空'}\r\n\t\t}\r\n\t\tif (errors) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t...errors\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 格式验证成功\r\n\t\tconst user = {phone: this.state.phone, sms_code: this.state.sms}\r\n\t\taxios.post(config.HOST + '/api/users/phonelogin', user)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tsubmit: res.data.message\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 验证通过\r\n\t\t\t\tsetAuthToken(res.data.payload.token); // 请求头附加token\r\n\t\t\t\tsetCurrentUser(res.data.payload.user);\r\n\t\t\t\tthis.props.history.push('/');\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"l-input-wrap\">\r\n\t\t\t\t<div className=\"log-input1\">\r\n\t\t\t\t\t<label htmlFor=\"phone\"></label>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tplaceholder=\"输入手机号码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.phone}\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\tid=\"phone\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.phone ? \r\n\t\t\t\t\t<span>{this.state.errors.phone}</span>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"log-input2\">\r\n\t\t\t\t\t<label htmlFor=\"sms\"></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"填写验证码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.sms}\r\n\t\t\t\t\t\tname=\"sms\"\r\n\t\t\t\t\t\tid=\"sms\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t\t<button className=\"btn\" onClick={this.sendSMS.bind(this)}>发送验证码</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.sms ? \r\n\t\t\t\t\t<span>{this.state.errors.sms}</span>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t\t<input type=\"submit\" onClick={this.submit.bind(this)} value=\"登录\"/>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.submit ? \r\n\t\t\t\t\t<span>{this.state.errors.submit}</span>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nPhoneLogin.protTypes = {\r\n\tauth: PropTypes.object.isRequired,\r\n\tsetLoginWay: PropTypes.func.isRequired\r\n}\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, {setLoginWay})(PhoneLogin);","import React, {Component} from 'react'\r\nimport {Link, Route} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport cnames from 'classnames'\r\n\r\nimport './login.scss'\r\nimport Account from './subpage/Account'\r\nimport PhoneLogin from './subpage/PhoneLogin'\r\n\r\nclass Login extends Component {\r\n\trender() {\r\n\t\t/**\r\n\t\t * v4 包含路由 和 精准路由\r\n\t\t */\r\n\t\t// 登录样式\r\n\t\tlet loginWay = this.props.auth.loginWay;\r\n\t\tconst classPhone = loginWay === 'phone' ? 'f1' : 'f2';\r\n\t\tconst classAccount = loginWay === 'account' ? 'f1' : 'f2';\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"login-wrap\">\r\n\t\t\t\t\t<div className=\"login-title\"></div>\r\n\t\t\t\t\t<div className=\"login-form\">\r\n\t\t\t\t\t\t<div className=\"form\">\r\n\t\t\t\t\t\t\t<div className=\"form-t\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t\t\t\t<div className={'t-l ' + classPhone}>手机登录</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<Link to=\"/login/account\">\r\n\t\t\t\t\t\t\t\t\t<div className={'t-r ' + classAccount}>账户登录</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/login/account\" component={Account} />\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/login\" component={PhoneLogin} />\r\n\t\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Login);","import React, {Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport './index.scss'\nimport {setAuthToken, setCurrentUser} from '../../utils/setAuth'\nclass AppHeader extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\n\t\t}\n\t}\n\t// 退出\n\tloginOut() {\n\t\tsetAuthToken(false); // axios token 头清除，localStorage token清除\n\t\tsetCurrentUser({}); // dispatch 当前空用户\n\t}\n\trender() {\n\t\tconst auth = this.props.auth;\n\t\tconsole.log(auth);\n\t\tconst hello = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>哈，欢迎来到xx</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/login\">请登录</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/register\">免费注册</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\tconst userinfo = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>Hi，<Link to=\"/member\">{auth.user.nickname}</Link></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<span to=\"/login\">积分0</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/\">消息0</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a onClick={this.loginOut.bind(this)} href=\"javascript:void(0)\">退出</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\treturn (\n\t\t\t<div className=\"app-header-wrap\">\n\t\t\t\t<div className=\"app-header\">\n\t\t\t\t\t{\n\t\t\t\t\t\tauth.isLogin ?\n\t\t\t\t\t\tuserinfo :\n\t\t\t\t\t\thello\n\t\t\t\t\t}\n\t\t\t\t\t<ul className=\"ul-r\">\n\t\t\t\t\t\t<li><Link to=\"/member\">我的淘宝</Link></li>\n\t\t\t\t\t\t<li><Link to=\"/member\">购物车0件</Link></li>\n\t\t\t\t\t\t<li>商家支持</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nAppHeader.propTypes = {\n\tauth: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\nexport default connect(mapStateToProps, null)(AppHeader);\n","/**\n * 轮播图组件\n */\nimport React,{Component} from 'react'\nimport PropTypes from 'prop-types'\nimport cnames from 'classnames'\nimport config from '../../../utils/config'\n\n\nclass slide extends Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tslideboxs: null,\n\t\t\t// 轮播图图片\n\t\t\tslideImg: [\n\t\t\t\t{bgimg: '/image/slide_wall/TB1FmwTvHZnBKNjSZFGSuvt3FXa.jpg', bgcolor: '#fff'},\n\t\t\t\t{bgimg: '/image/slide_wall/红米Note7.webp', bgcolor: '#00f'},\n\t\t\t\t{bgimg: '/image/slide_wall/O1CN01Tms3Pn1D7tpGbFK5a_!!170-0-luban.jpg_q100.jpg_.webp', bgcolor: '#00f'},\n\t\t\t\t{bgimg: '/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg', bgcolor: '#06f'},\n\t\t\t\t{bgimg: '/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg', bgcolor: '#06f'},\n\t\t\t\t{bgimg: '/image/slide_wall/TB10lfQxpzqK1RjSZSgSuwpAVXa.jpg', bgcolor: '#dff'}\n\t\t\t],\n\t\t\tslideStop: false,  // 是否停止轮播图\n\t\t\tslideIndex: 0,  // 轮播图索引\n\t\t\tslideInterval: -1,  // 主定时器\n      slideTimeout: -1\n\t\t}\n\t\tthis.slideAnimate = this.slideAnimate.bind(this);\n\t\tthis.gotoSlide = this.gotoSlide().bind(this);\n\t\tthis.slideStart = this.slideStart.bind(this);\n\t\tthis.slideStop = this.slideStop.bind(this);\n\t}\n\tcomponentDidMount() {\n    if (typeof window !== 'object') return;\n\t\t// 组件挂载完毕,获取轮播图组件，开启轮播图\n\t\tthis.setState({\n\t\t\tslideboxs: window.document.getElementsByClassName(\"slide-img-box\")\n\t\t}, () => {\n\t\t\tthis.state.slideboxs[this.state.slideIndex].style.opacity = 1;\n\t\t\tvar _this = this;\n\t\t\tvar slideInterval = window.setInterval(function(){\n\t\t\t\tif (!_this.state.slideStop)\n\t\t\t\t\t_this.slideAnimate();\n\t\t\t}, 5000);\n\t\t\tthis.setState({\n\t\t\t\tslideInterval\n\t\t\t});\n\t\t});\n\t}\n\t// 组件卸载\n\tcomponentWillUnmount() {\n    if (typeof window !== 'object') return;\n      // 清除轮播图主定时器\n    window.clearInterval(this.state.slideInterval);\n    window.clearTimeout(this.state.slideTimeout);\n\t}\n\t// 动画切换函数，before 消失，next 显示\n\tslideAnimate(next) {\n\t\tvar before = this.state.slideIndex;\n\t\tif (next === undefined) {next = ((before + 1) % this.state.slideboxs.length)};\n\t\tvar _this = this;\n\t\tvar slideboxs = this.state.slideboxs;\n\t\tvar beforeOpa = 1,nextOpa = 0;\n\t\t// 开始动画\n\t\tvar interval = window.setInterval(function() {\n\t\t\tbeforeOpa -= 0.2; nextOpa += 0.2;\n\t\t\tslideboxs[before].style.opacity = beforeOpa;\n\t\t\tslideboxs[next].style.opacity = nextOpa;\n\t\t}, 50);\n\t\t// 停止动画，完成转换\n\t\tvar slideTimeout = window.setTimeout(function() {\n\t\t\twindow.clearInterval(interval);\n\t\t\tslideboxs[before].style.opacity = 0;\n\t\t\tslideboxs[next].style.opacity = 1;\n\t\t\t// 更新显示索引\n      _this.setState({\n        slideIndex: next,\n        slideTimeout: slideTimeout\n      });\n\t\t}, 200);\n\t}\n\t// 切换动画索引\n\tgotoSlide() {\n\t\tvar time = 0,timeout = null;\n\t\treturn function (e) {\n\t\t\twindow.clearTimeout(timeout);\n\t\t\t// this.slideStop();\n\t\t\tvar nowtime = new Date();\n\t\t\tvar _this = this;\n\t\t\tvar index = Number(e.currentTarget.getAttribute('index'));\n\t\t\tif (nowtime - time > 500) {\n\t\t\t\tif (index !== _this.state.slideIndex)\n\t\t\t\t\t_this.slideAnimate(index);\n\t\t\t\t\ttime = nowtime;\n\t\t\t}else {\n\t\t\t\ttimeout = window.setTimeout(function(){\n\t\t\t\t\tif (index !== _this.state.slideIndex)\n\t\t\t\t\t\t_this.slideAnimate(index);\n\t\t\t\t\t\ttime = nowtime;\n\t\t\t\t}, 300);\n\t\t\t}\n\n\t\t}\n\t}\n\t// 停止动画\n\tslideStop(){\n\t\tif (!this.state.slideStop) {\n\t\t\tthis.setState({\n\t\t\t\tslideStop: true\n\t\t\t});\n\t\t}\n\t}\n\t// 开启动画\n\tslideStart() {\n\t\tif (this.state.slideStop) {\n\t\t\tthis.setState({\n\t\t\t\tslideStop: false\n\t\t\t});\n\t\t}\n\t}\n\trender(){\n\t\tvar slideImg = this.state.slideImg;\n\t\treturn(\n\t\t<div className=\"nav-slide-wrap\" onMouseLeave={this.slideStart}>\n\t\t{/*轮播图图片*/}\n\t\t{\n\t\t\tslideImg.map((item,index) => (\n\t\t\t\t<div key={index} className=\"slide-img-box\" style={{backgroundColor: item.bgcolor}}>\n\t\t\t\t\t<div\n\t\t\t\t\tclassName=\"slide-img-box-i\"\n\t\t\t\t\tstyle={{background: `url(${config.HOST}${item.bgimg}) no-repeat center`}}\n\t\t\t\t\tonMouseOver={this.slideStop}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t))\n\t\t}\n\t\t\t{/*小按钮*/}\n\t\t\t<ul className=\"slide-nav\">\n\t\t\t{\n\t\t\t\tslideImg.map((_, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={index}\n\t\t\t\t\t\t\tclassName={cnames(\"slide-nav-item\",{\n\t\t\t\t\t\t\t\t'slide-nav-selected': index === this.state.slideIndex\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\tonMouseOver={this.gotoSlide}\n\t\t\t\t\t\t></li>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\t\t\t</ul>\n\t\t</div>\n\t)\n\t}\n}\n\nexport default slide;\n","import React from 'react'\r\n\r\nfunction SmaillType(props) {\r\n\tvar smaillType = props.smaillType || [];\r\n\treturn (\r\n\t\t<div className=\"smaillType\">\r\n\t\t<h1>Detail</h1>\r\n\t\t{\r\n\t\t\tsmaillType.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item._id} className=\"smaill-item\">\r\n\t\t\t\t\t\t<div className=\"smaill-item-title\">{item.smaillName}</div>\r\n\t\t\t\t\t\t<div className=\"smaill-detail\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.detail.map(detail => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<span key={detail._id}>{detail.detailName}</span>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SmaillType;","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport config from '../../utils/config'\n\nimport './search.scss'\n\nimport { setSearchKeyAction } from '../../flux/actions/productActions'\n\nvar beforeKey = ''\nvar searchKey = ''\nvar historyPush;\n\nfunction searchInputChange(e) {\n  searchKey = e.target.value\n}\n\nfunction searchProduct() {\n  if (searchKey === beforeKey) return;\n  // url 第一个参数没有改变页面不会重新渲染\n  // historyPush('/404')\n  // setTimeout(function() {\n    historyPush(`/search_product?q=${searchKey}&limit1=0&limit2=50`)\n  // }, 100)\n}\n\nconst Search = (props) => {\n  searchKey = beforeKey = props.searchKey || ''\n  historyPush = props.historyPush || function(){}\n  return (\n    <div className=\"sear\">\n      <div className=\"sear-logo\"><Link to=\"/\"><img src={`${config.HOST}/image/ui/search_home_logo.png`} alt=\"\"/></Link></div>\n      <div className=\"sear-input-wrap\">\n        <div>\n          <div>\n            <input defaultValue={searchKey} onChange={searchInputChange}  className=\"sear-input\" type=\"text\"/>\n          </div>\n          <div>\n            <button onClick={searchProduct} className=\"com-search-btn\">搜索</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nSearch.propType = {\n  searchKey: PropTypes.string,\n  historyPush: PropTypes.func.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    searchKey: state.product.searchKey\n  }\n}\n\nexport default connect(mapStateToProps, {setSearchKeyAction})(Search)\n","import React, {Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport axios from 'axios'\nimport cnames from 'classnames'\nimport { connect } from 'react-redux'\n\nimport { setSearchKeyAction } from '../../flux/actions/productActions'\n\nimport './home.scss'\nimport config from '../../utils/config.js'\nimport Register from '../Register'\nimport Login from '../Login'\nimport AppHeader from '../../components/Header'\nimport Slide from './subpage/Slide'\nimport SmaillType from './subpage/SmaillType'\n\nclass Home extends Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tnavTop: ['超市', '会员', '电器城', '鲜生', '医药馆', '营业厅', '旅行', '图书'],\n\t\t\t// 大分类信息\n\t\t\tbigType:[],\n\t\t\tselectedBigid: -1, // -1 不展示，其他为 bigType的 id\n      searchKey: ''\n\t\t}\n\t\tthis.onBigTypeSelect = this.onBigTypeSelect.bind(this);\n\t\tthis.CurrentSmaillType = this.CurrentSmaillType.bind(this);\n\t}\n\tcomponentWillMount() {\n\t\t// 获取大分类表中数据\n\t\taxios.get(config.HOST + '/api/goods/type?type=big&limit=16')\n\t\t\t.then(res => {\n\t\t\t\tif (!res.data.success) {\n\t\t\t\t\treturn console.error('商品分类列表获取失败');\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tbigType: res.data.payload\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\t// 设置或获取 state的bigType 的 smaillType\n\tCurrentSmaillType(bigid, smaillType, getSmaill = false) {\n\t\tvar bigType = this.state.bigType;\n\t\tif (bigType.length === 0) return;\n\n\t\tfor (var i = 0,len = bigType.length; i < len; i++) {\n\t\t\tif (bigType[i]._id === bigid) {\n\t\t\t\t// 获取smaillType\n\t\t\t\tif (getSmaill) {\n\t\t\t\t\treturn bigType[i].smaillType;\n\t\t\t\t}\n\t\t\t\t// 设置 smaillType\n\t\t\t\tbigType[i].smaillType = smaillType;\n\t\t\t\tthis.setState({\n\t\t\t\t\tbigType: bigType\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n  // 获取小分类表\n\tonBigTypeSelect(e) {\n\t\t// showsmaill => true\n\t\tvar bigid = Number(e.currentTarget.getAttribute('bigid'));\n\t\tthis.setState({\n\t\t\tselectedBigid:bigid\n\t\t});\n\t\taxios.get(config.HOST + '/api/goods/type?type=smaill&bigid=' + bigid)\n\t\t\t.then(res => {\n\t\t\t\tif (!res.data.success) return;\n\t\t\t\tthis.CurrentSmaillType(bigid, res.data.payload);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\tonBigTypeLeave(){\n\t\tthis.setState({selectedBigid: -1});\n\t}\n  searchInputChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    })\n  }\n  searchProduct(e) {\n    e.preventDefault();\n    this.props.setSearchKeyAction(this.state.searchKey)\n    this.props.history.push(`/search_product?q=${this.state.searchKey}&limit1=0&limit2=50`);\n  }\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<AppHeader />\n\t\t\t\t<div className=\"headerCon\">\n\t\t\t\t\t<form onSubmit={this.searchProduct.bind(this)}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"search-text\"\n              value={this.state.searchKey}\n              onChange={this.searchInputChange.bind(this)}\n\t\t\t\t\t\t\tplaceholder=\"搜索 优选 商品/品牌/店铺\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type=\"submit\" className=\"search-btn\">搜索</button>\n\t\t\t\t\t</form>\n\t\t\t\t\t<ul className=\"hot-query\">\n\t\t\t\t\t{/*搜索框下面展示*/}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.navTop.map((item,index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">{item}</Link>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main-nav\">\n\t\t\t\t\t<ul className=\"nav-t-wrap\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.navTop.map((item, i) => {\n\t\t\t\t\t\t\t\treturn (<li key={i}>{item}</li>)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t\t{/*商品主分类*/}\n\t\t\t\t\t<div className=\"nav-l-box\">\n\t\t\t\t\t\t<div className=\"main-logo-wrap\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<a href={config.HOST}>\n\t\t\t\t\t\t\t\t\t<img width=\"240px\" height=\"130px\" src={config.HOST + \"/image/ui/home_logo.png\"} alt=\"优选\"/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"nav-l-wrap\" onMouseLeave={this.onBigTypeLeave.bind(this)}>\n\t\t\t\t\t\t\t<div className=\"nav-l-title\">商品分类</div>\n\t\t\t\t\t\t\t<div className=\"nav-l-typewrap\">\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.bigType.map(item => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\t\t\tclassName={cnames(\"nav-l-item\", {\n\t\t\t\t\t\t\t\t\t\t\t'nav-l-item-sel': this.state.selectedBigid===item._id\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tbigid={item._id}\n\t\t\t\t\t\t\t\t\t\tonMouseOver={this.onBigTypeSelect}\n\t\t\t\t\t\t\t\t\t>{item.bigName}</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.selectedBigid === -1 ? null :\n\t\t\t\t\t\t\t\t<SmaillType smaillType={this.CurrentSmaillType(this.state.selectedBigid,null,true)} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*轮播图组件，传递slideImg图片组*/}\n\t\t\t\t\t<Slide />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default connect(null, { setSearchKeyAction })(Home);\n","import React from 'react'\n\nconst Wait = () => {\n  return (\n    <div>\n      <h2>加载中。。。。</h2>\n    </div>\n  )\n}\nexport default Wait\n","import React from 'react'\n\nconst ErrorPage = (props) => {\n  return (\n    <div>\n      <h2>错误：{props.message}</h2>\n    </div>\n  )\n}\nexport default ErrorPage\n","import React from 'react'\n\nconst Empty = () => {\n  return (\n    <div>\n      <h2>没有搜索到数据。。。。</h2>\n    </div>\n  )\n}\nexport default Empty\n","import React from 'react'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\nimport { Link } from 'react-router-dom'\n\nfunction splitName(name) {\n  if (name.length <= 50) return name;\n  return name.substring(0,50) + '...'\n}\n\nconst GoodsList = (props) => {\n  const HOST = config.HOST\n  return (\n    <div className=\"goodlist-wrap\">\n      {\n        props.goods.map((product, index) => {\n          return (\n            <div className={classnames(\"good-wrap\", {\n              rowlast: index>0 && index % 4 === 0\n            })} key={index}>\n              <Link to={`/product_detail?goodId=${product._id}`}>\n                <div className=\"goodlogo-box\"><img src={`${HOST}/image/goods/logo/${product.logo}`} alt=\"\"/></div>\n              </Link>\n              <div className=\"good-price\"><span className=\"p_f1\">￥</span><span className=\"p_f2\">{product.nowPrice}</span></div>\n              <Link to={`/product_detail?goodId=${product._id}`}>\n                <div className=\"good-name\"><span>{splitName(product.goodName)}</span></div>\n              </Link>\n              <div className=\"good-store\"><span className=\"s_f1\">店铺：</span><span className=\"s_f2\">{product.storeName}</span></div>\n              <div className=\"good-number-box\">\n                <div className=\"good-number\">\n                  <span className=\"n_f1\">成交量：</span><span className=\"n_f2\">{product.number}笔</span>\n                </div>\n                <div className=\"good-number-chat\">\n                  聊\n                </div>\n              </div>\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}\nexport default GoodsList\n","import React from 'react'\nimport axios from 'axios'\nimport PropTypes from 'prop-types'\nimport config from '../../utils/config'\n\nimport './goods.scss'\nimport Wait from './subpage/Wait'\nimport ErrorPage from './subpage/ErrorPage'\nimport Empty from './subpage/Empty'\nimport GoodsList from './subpage/GoodsList'\n\nconst HOST = config.HOST\n\n// props.goods 为undefined 或空数组，显示默认空结果页面\nclass Goods extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      goods: [],\n      status: 'wait',\n      error: ''\n    }\n  }\n  componentWillMount() {\n    const searchUrl = this.props.searchUrl\n    if (!searchUrl) {\n      // 参数错误\n      return this.setState({\n        status: 'empty'\n      })\n    }\n    axios.get(HOST + searchUrl)\n      .then(res => {\n        if (res.data.success) {\n          // 请求成功\n          this.setState({\n            status: 'end',\n            goods: res.data.payload\n          }, () => {\n            // 给父组件回调 goods\n            this.props.getGoods && this.props.getGoods(res.data.payload)\n          })\n        } else {\n          // 请求失败\n          this.setState({\n            status: 'error',\n            error: res.message\n          })\n        }\n      })\n      .catch(err => {\n        // 请求错误\n        console.error(err)\n        this.setState({\n          status: 'error',\n          error: err.message\n        })\n      })\n  }\n  render() {\n    return (\n      <div>\n        {\n          this.state.status === 'wait' ? <Wait /> :\n          this.state.status === 'error' ? <ErrorPage message={this.state.error} /> :\n          this.state.goods.length === 0 ? <Empty /> :\n          <GoodsList goods={this.state.goods} />\n        }\n      </div>\n    )\n  }\n}\nGoods.propTypes = {\n  searchUrl: PropTypes.string.isRequired,\n  getGoods: PropTypes.func\n}\n\nexport default Goods\n","import React from 'react'\nimport axios from 'axios'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport classnames from 'classnames'\nimport { connect } from 'react-redux'\nimport config from '../../../utils/config'\n\nconst HOST = config.HOST\n\nfunction subStoreName(name) {\n  if (typeof name !== 'string' || name.length < 6) return name;\n  return name.substring(0,5) + '...';\n}\nclass SubStore extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      stores: [],\n      detailTypes: []\n    }\n  }\n\n  // props.goods 参数更新, 根据 goods 请求 store 的信息\n  componentWillReceiveProps(nextProps) {\n    const goods = nextProps.goods\n    if (!Array.isArray(goods) || goods.length < 1) return;\n    // 根据detailType 请求 smaillType\n    axios.get(`${HOST}/api/goods/type?type=detail&detailId=${goods[0].detailId}`)\n      .then(res => {\n        if (res.data.success) {\n          this.setState({\n            detailTypes: res.data.payload\n          })\n        }\n      })\n      .catch(err => {\n        console.error(err)\n      })\n    // 获取 goods 中的 storeId\n    let storeIds = [];\n    storeIds.push(goods[0].storeId)\n    for (var i = 1, len = goods.length; i < len; i ++) {\n      var storeId = goods[i].storeId\n      var repeat = false\n        // 去重\n      for (var j = 0, len2 = storeIds.length; j < len2; j++) {\n        if (storeId === storeIds[j]) {\n          repeat = true\n          break\n        }\n      }\n      if (!repeat) storeIds.push(storeId)\n    }\n    // 请求 stores\n    if (storeIds.length < 1) return;\n    const jsonStoreIds = JSON.stringify(storeIds)\n    axios.get(`${HOST}/api/goods/search_store?storeIds=${jsonStoreIds}`)\n      .then(res => {\n        if (res.data.success) {\n          this.setState({\n            stores: res.data.payload\n          })\n        }\n      })\n      .catch(err => {\n        console.error(err)\n      })\n  }\n\n  render() {\n    return (\n      <div className=\"substore\">\n        {\n          /*展示首页 > 小分类 > 详细分类s */\n          this.state.detailTypes.length > 0 && (\n            <div className=\"crum\">\n              <div className=\"crum-1\"><Link to=\"/\"><span>首页</span></Link></div>\n              <div className=\"crum-2\">\n                <Link to={`/search_product?smaillId=${this.state.detailTypes[0].smaillId}`}>\n                  <span>{this.state.detailTypes[0].smaillName}</span>\n                </Link>\n              </div>\n              <div  className=\"crum-3\">\n                <Link to={`/search_product?detailId=${this.props.goods[0].detailId}`}>\n                  <span>\n                  {\n                    this.state.detailTypes.find((detail, index) => {\n                      return detail.detailId === this.props.goods[0].detailId\n                    }).detailName\n                  }\n                  </span>\n                </Link>\n                <ul className=\"crum-details\">\n                {\n                  this.state.detailTypes.map((detailType, index) => (\n                    <li className=\"\" key={index}>\n                      <Link\n                        className={classnames({'crum-selected': detailType.detailId === this.props.goods[0].detailId})}\n                        to={`/search_product?detailId=${detailType.detailId}`}\n                      >{detailType.detailName}</Link>\n                    </li>\n                  ))\n                }\n                </ul>\n              </div>\n            </div>\n          )\n        }\n        <div className=\"substore-logo-box\">\n          <div className=\"s-logo-title\">店铺</div>\n          <div className=\"s-logo-wrap\">\n          {\n            /*展示店铺图片*/\n            this.state.stores.map((store, index) => {\n              if (index > 8) return null\n              return (\n                <div className=\"s-logo-item\" key={index}>\n                  <div className=\"s-store-logo\"><img src={`${HOST}/image/store/logo/${store.logo}`} alt=\"\"/></div>\n                  <div className=\"s-store-name\"><span>{subStoreName(store.storeName)}</span></div>\n                </div>\n              )\n            })\n          }\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\nSubStore.propTypes = {\n  goods: PropTypes.array.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    goods: state.product.searchGoods\n  }\n}\n\nexport default connect(mapStateToProps, null)(SubStore)\n","import React, { Component } from 'react'\nimport axios from 'axios'\nimport queryString from 'query-string'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport config from '../../utils/config'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport Search from '../../components/Search'\nimport Goods from '../../components/Goods'\nimport SubStore from './subpage/SubStore'\n\nimport { setSearchGoodsAction, setSearchKeyAction } from '../../flux/actions/productActions'\n\nclass SearchProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchKey: props.match.params.q, // 游戏本\n      searchUrl: props.history.location.search, // /?limit1=0&limit2=50\n    }\n    // 刷新后 store.searchKey 为空\n    if (props.searchKey === '') {\n      props.setSearchKeyAction(this.state.searchKey)\n    }\n    this.getGoods = this.getGoods.bind(this)\n    this.getSearchProductUrl = this.getSearchProductUrl.bind(this)\n  }\n\n  componentWillMount() {\n    this.getSearchProductUrl()\n  }\n\n  getGoods(goods) {\n    this.props.setSearchGoodsAction(goods)\n  }\n\n  getSearchProductUrl() {\n    var search = queryString.parse(this.props.location.search);\n    console.log(search)\n    var url = '/api/goods/search_product?'\n    var isvalid = false\n    if (search.q) {\n      url += `q=${search.q}&`\n      isvalid = true\n    }\n    if (/^\\d+$/.test(search.detailId)) {\n      url += `detailId=${search.detailId}&`\n      isvalid = true\n    }else if (/^\\d+$/.test(search.smaillId)) {\n      url += `smaillId=${search.smaillId}&`\n      isvalid = true\n    }else if (/^\\d+$/.test(search.bigId)) {\n      url += `bigId=${search.bigId}&`\n      isvalid = true\n    }\n    if (search.storeId) {\n      url += `storeId=${search.storeId}&`\n    }\n    if (!isvalid) {\n      return '';\n    }\n    if (search.order === 'price' || search.order === 'number') {\n      url += `order=${search.order}&sort=`\n      url += search.sort === 'asc' ? 'asc&' : 'desc&'\n    }\n    url += (/^\\d+$/.test(search.limit1) ? `limit1=${search.limit1}&` : '')\n    url += (/^\\d+$/.test(search.limit2) ? `limit2=${search.limit2}` : 'limit2=10')\n    return url;\n  }\n\n  render() {\n    const goods = this.props.searchGoods\n    return (\n      <div>\n        <Header />\n        <Search historyPush={this.props.history.push}  />\n        <div className=\"search-product\">\n          <hr className=\"search-hr\" />\n          <SubStore />\n          <Goods getGoods={this.getGoods} searchUrl={this.getSearchProductUrl()} />\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    searchGoods: state.product.searchGoods,\n    searchKey: state.product.searchKey\n  }\n}\n\nexport default connect(mapStateToProps, { setSearchGoodsAction,setSearchKeyAction })(SearchProduct)\n\n","import React from 'react'\nimport { historyPush } from './index'\n\nclass GotoSearchProduct extends React.Component {\n  componentWillMount() {\n    this.props.history.push('/search_products' + this.props.location.search)\n  }\n  render() {\n    return (\n      <div>404</div>\n    )\n  }\n}\nexport default GotoSearchProduct\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withRouter, Link } from 'react-router-dom'\n\nimport './index.scss'\nimport config from '../../utils/config'\nconst HOST = config.HOST\n\nclass StoreHeader extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      searchKey: ''\n    }\n    this.onSearchInputChange = this.onSearchInputChange.bind(this)\n  }\n  onSearchInputChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    })\n  }\n  // 搜所有\n  searchAllProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}`)\n  }\n  // 搜本店\n  searchStoreProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}&storeId=${this.props.storeInfo.storeId}`)\n  }\n  render() {\n    const storeInfo = this.props.storeInfo\n    return (\n      <div className=\"store-header\">\n          <div className=\"store-cp-logo\">\n            <Link to=\"/\">\n              <img src={`${HOST}/image/ui/storetitle.png`} height=\"60px\" />\n            </Link>\n          </div>\n        <div className=\"store-info-wrap\">\n          <div className=\"store-info-logo\">\n              <img height=\"60px\" src={`${HOST}/image/store/logo/${storeInfo.logo || 'default.jpg'}`} alt=\"优选\"/>\n          </div>\n\n          <div className=\"store-info\">\n            <p className=\"store-name\">店铺：{storeInfo.storeName}</p>\n            <p className=\"store-boos\">掌柜：{storeInfo.nickname}</p>\n          </div>\n        </div>\n        <div className=\"store-search\">\n          <div className=\"store-search-input\"><input value={this.state.searchKey} onChange={this.onSearchInputChange} type=\"text\"/></div>\n          <button style={{background: `url(\"${HOST}/image/ui/TB1ZWVhJpXXXXa4XVXXs1m4TXXX-458-36.png\") top right no-repeat`}} className=\"store-search-btn-all\" onClick={this.searchAllProduct.bind(this)}>搜索</button>\n          <button className=\"store-search-btn-this\" onClick={this.searchStoreProduct.bind(this)}>搜本店</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nStoreHeader.propTypes = {\n  storeInfo: PropTypes.object.isRequired\n}\n\nexport default withRouter(StoreHeader)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\nconst HOST = config.HOST\n\nfunction transPrice(price) {\n  return /^\\d+$/.test(price) ? price + '.00' :  // 没有小数\n  /^\\d+\\.\\d$/.test(price) ? price + '0' : price  // 一位小数\n}\n\nclass Spec extends React.Component {\n  constructor(props) {\n    super(props)\n    console.log('xxx', props)\n    this.state = {\n      smaillx: 0,\n      smailly: 0,\n      bigImg: false, // 是否展示大图\n      selectImg: props.smaillPicture[0].link,\n      nowPrice: 99999,\n      allAmount: 0, // 商品总库存\n      specChoice: [],  // 选中的属性组合\n      choiceProductDetail: {},  // 选中属性组合的商品详情\n      choiceNumber: 1,\n      specConfig: [] // 重新组合后的属性关系映射\n    }\n    this.specValueClick = this.specValueClick.bind(this)\n    this.onSmaillMouseOver = this.onSmaillMouseOver.bind(this)\n  }\n\n  componentWillMount() {\n    // 重新组合属性关系映射\n    var config = this.props.specConfig\n    var newConfig = []\n    for (var j = 0; j < config.length; j++) {\n      if (newConfig[config[j].detailIndex - 1] === undefined) {\n         newConfig[config[j].detailIndex - 1] = []\n      }\n      newConfig[config[j].detailIndex - 1][config[j].specNameIndex-1] = config[j].specValueIndex\n    }\n    // 计算总库存\n    var allAmount = 0\n    for (var i = 0, len = this.props.goodDetail.length; i < len; i++) {\n      allAmount += this.props.goodDetail[i].amount\n    }\n    this.setState({\n      nowPrice: this.props.goodInfo.nowPrice || 99999,\n      specConfig: newConfig,\n      allAmount\n    })\n  }\n\n  // 点击选择属性\n  specValueClick(value) {\n    var _this = this\n    return function () {\n      // 更新选择的属性\n      if (_this.state.specChoice[value.specNameIndex-1] === value.indexx) return;\n      var specChoice = [..._this.state.specChoice]\n      specChoice[value.specNameIndex-1] = value.indexx\n\n      // 更新选择的商品详情和价格\n      var specConfig = _this.state.specConfig\n      var choiceProductDetail = _this.state.choiceProductDetail\n      for (var i = 0, len = specConfig.length; i < len; i++) {\n        var isOK = true\n        for (var j = 0, len2 = specConfig[i].length; j < len2; j++) {\n          if (specChoice[j] !== specConfig[i][j]) {\n            isOK = false\n            break;\n          }\n        }\n        if (isOK) {\n          choiceProductDetail = _this.props.goodDetail.find(item => item.indexx === i+1)\n          break;\n        }\n      }\n      _this.setState({\n        specChoice,\n        choiceProductDetail\n      })\n    }\n  }\n\n  // 点击选择数量\n  choiceNumberChange(e) {\n    var number = e.target.value\n    var before = this.state.choiceNumber\n    var _this = this\n    this.setState({\n      choiceNumber: number\n    }, function () {\n      if (!/^[1-9]\\d{0,}$/.test(number)) {\n        setTimeout(function () {\n          _this.setState({\n            choiceNumber: /^[1-9]\\d{0,}$/.test(before) ? before : 1\n          })\n        }, 200)\n      }\n    })\n  }\n\n  onSmaillMouseOver(link) {\n    var _this = this\n    return function () {\n      _this.setState({\n        selectImg: link\n      })\n    }\n  }\n\n  render() {\n    const goodInfo = this.props.goodInfo\n    const smaillPicture = this.props.smaillPicture\n    return (\n      <div className=\"spec-wrap\">\n        {/*图片组*/}\n        <div className=\"spec-smail-picture-wrap\">\n          <div className=\"spec-smail-bigone-wrap\"><img className=\"spec-smail-bigone\" height=\"430px\" src={`${HOST}/image/goods/smaill/${this.state.selectImg}_430x430q90.jpg`} alt=\"\"/></div>\n          <div className=\"spec-smaill-item-wrap\">\n            {\n              this.props.smaillPicture.map((item, index) => (\n                <div key={index} className=\"spec-priture-item\">\n                  <div className={this.state.selectImg === item.link ? \"spec-img-selected\" : \"spec-item-img-box\"}\n                      onMouseOver={this.onSmaillMouseOver(item.link)}\n                  >\n                    <img src={`${HOST}/image/goods/smaill/${item.link}_60x60q90.jpg`} alt=\"\"/>\n                  </div>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n        {/*spec属性信息*/}\n        <div className=\"spec-goodinfo\">\n          <h3 className=\"spec-good-name\">{goodInfo.goodName}</h3>\n          <div className=\"spec-good-price\" style={{background: `url(${HOST}/image/ui/price_background.png) left top`}}>\n            <span className=\"sgp-f1\">价格</span>\n            <span className=\"sgp-f2\">￥</span>\n            <span className=\"sgp-f3\">{transPrice(this.state.nowPrice)}</span>\n          </div>\n          <div className=\"sell-count\">\n            <div className=\"sell-count-l\"><span className=\"sc-f1\">总销量</span><span className=\"sc-f2\">{goodInfo.number}</span></div>\n            <div className=\"sell-count-r\"><span className=\"sc-f1\">累计评价</span><span className=\"sc-f2\">{this.props.comments.length}</span></div>\n          </div>\n          {\n            this.props.specName && this.props.specName.map((name, index) => (\n              <div className=\"specName-wrap\" key={index}>\n                <div className=\"spec-name\">{name.specName}</div>\n                <div className=\"spec-value\">\n                {\n                  this.props.specValue && this.props.specValue.map((value, index) => {\n                    return value.specNameIndex === name.indexx ?  (\n                      <div\n                        className={classnames('spec-value-item', {'value-item-selected':this.state.specChoice[name.indexx-1] === value.indexx})}\n                        onClick={this.specValueClick(value)}\n                        key={index}\n                      >\n                        <span>{value.specValue}</span>\n                        <i className=\"item-selected-i\" style={{\n                          background: `url(${HOST}/image/ui/background_selected.png) 0px 0px no-repeat`\n                        }}></i>\n                      </div>\n                    ) : null\n                  })\n                }\n                </div>\n              </div>\n            ))\n          }\n          <div>\n            <span>数量</span>\n            <input value={this.state.choiceNumber} onChange={this.choiceNumberChange.bind(this)} type=\"text\"/>\n            <span>件</span>\n            <div>\n              <div><svg className=\"icon\" style={{width: '1em',height: '1em'}}><path d=\"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3c-3.8 5.3-0.1 12.7 6.5 12.7h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z\"></path></svg></div>\n            </div>\n            <span>库存{this.state.choiceProductDetail.amount || this.state.allAmount}件</span>\n          </div>\n          <div\n            style={{display: this.state.choiceProductDetail.amount ? (this.state.choiceNumber > this.state.choiceProductDetail.amount ? 'block' : 'none') : (this.state.choiceNumber > this.state.allAmount ? 'block' : 'none')}}\n          >您所填写数量商品超过库存！</div>\n          <Link to=\"/\">立即购买</Link>\n          <button>加入购物车</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nSpec.propTypes = {\n  goodDetail: PropTypes.array.isRequired,\n  goodInfo: PropTypes.object.isRequired,\n  smaillPicture: PropTypes.array.isRequired,\n  specConfig: PropTypes.array,\n  specName: PropTypes.array,\n  specValue: PropTypes.array,\n  comments: PropTypes.array.isRequired,\n}\nfunction mapStateToProps(state) {\n  return {\n    goodDetail: state.product.productDetail.goodDetail,\n    goodInfo: state.product.productDetail.goodInfo,\n    smaillPicture: state.product.productDetail.smaillPicture,\n    specConfig: state.product.productDetail.specConfig,\n    specName: state.product.productDetail.specName,\n    specValue: state.product.productDetail.specValue,\n    comments: state.product.productDetail.comments,\n  }\n}\nexport default connect(mapStateToProps)(Spec)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport config from '../../../utils/config'\nconst HOST = config.HOST\n\n/**\n * 未实现懒加载\n */\nclass ProductInfo extends React.Component {\n  render() {\n    return (\n      <div>\n        {\n          this.props.infoPicture.map((item, index) => (\n            <div key={index}><img src={`${HOST}/image/goods/info/${item.link}`} alt=\"\"/></div>\n          ))\n        }\n      </div>\n    )\n  }\n}\nProductInfo.propTypes = {\n  infoPicture: PropTypes.array.isRequired\n}\n\nexport default ProductInfo\n","import React from 'react'\nimport queryString from 'query-string'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport { setProductDetailAction } from '../../flux/actions/productActions'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport StoreHeader from '../../components/StoreHeader'\nimport Spec from './subpage/Spec'\nimport ProductInfo from './subpage/ProductInfo'\n\nclass ProductDetail extends React.Component {\n  componentWillMount() {\n    const info = queryString.parse(this.props.location.search)\n    // 没有 goodId 返回上一级路由\n    if (!/^\\d+/.test(info.goodId)) {this.props.history.goBack()}\n    this.props.setProductDetailAction(info.goodId)\n  }\n  render() {\n    const product = this.props.productDetail\n    return (\n      <div>\n        <Header />\n        {\n          product.goodDetail.length < 1 ?\n            <div>{product.error || product.message}</div> :\n            <div>\n              {/*店铺头信息*/}\n              <StoreHeader storeInfo={product.goodInfo} />\n              <hr className=\"store-hr\" />\n              {/*商品信息属性*/}\n              <Spec />\n              {/*商品介绍信息*/}\n              <ProductInfo infoPicture={product.infoPicture} />\n            </div>\n        }\n      </div>\n    )\n  }\n}\n\n\nProductDetail.propTypes = {\n  productDetail: PropTypes.object.isRequired,\n  setProductDetailAction: PropTypes.func.isRequired,\n}\n\nfunction mapStateToProps(state) {\n  return {\n    productDetail: state.product.productDetail\n  }\n}\nexport default connect(mapStateToProps, { setProductDetailAction })(ProductDetail)\n","import React from 'react'\n\nconst Safety = function (props) {\n  return (\n    <div>Safety</div>\n  )\n}\nexport default Safety\n","import React from 'react'\n\nconst MyInfo = function (props) {\n  return (\n    <div>MyInfo</div>\n  )\n}\nexport default MyInfo\n","import React from 'react'\n\nconst EditMyInfo = function (props) {\n  return (\n    <div>EditMyInfo</div>\n  )\n}\nexport default EditMyInfo\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport config from '../../../utils/config'\nconst HOST = config.HOST\n\nclass Address extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      address: [],\n      message: ''\n    }\n  }\n  componentWillMount() {\n    if (this.props.memberId === -1) return;\n    // 请求收货地址\n    axios.post(HOST + '/api/users/address', {memberId: this.props.memberId})\n      .then(res => {\n        if (res.data.success) {\n          this.setState({\n            address: res.data.payload,\n            message: ''\n          })\n        }else {\n          this.setState({\n            address: [],\n            message: res.data.message\n          })\n        }\n      })\n      .catch(err => {\n        this.setState({\n          address: [],\n          message: err.message\n        })\n      })\n  }\n  render() {\n    return (\n      <div>\n        <div>收货地址</div>\n        <div><span>编辑收货地址</span></div>\n        <div>\n          <span>详细地址:</span>\n          <input type=\"text\"/>\n        </div>\n        <div>\n          <span>邮政编码:</span>\n          <input type=\"text\"/>\n        </div>\n        <div>\n          <span>收货人姓名:</span>\n          <input type=\"text\"/>\n        </div>\n        <div>\n          <span>手机号码:</span>\n          <input type=\"text\"/>\n        </div>\n        <div>\n          <input type=\"checkbox\"/>\n          <span>默认收货地址：</span>\n        </div>\n        <button>保存</button>\n        <div>\n          <table>\n            <thead>\n              <tr>\n                <th>收货人</th>\n                <th>详细地址</th>\n                <th>邮编</th>\n                <th>电话/手机</th>\n                <th>操作</th>\n              </tr>\n            </thead>\n            <tbody>\n            {\n              this.state.address.map((item, index) => (\n                <tr key={index}>\n                  <td>{item.receiveName}</td>\n                  <td>{item.address}</td>\n                  <td>{item.postcode}</td>\n                  <td>{item.phone}</td>\n                  <td>编辑/删除</td>\n                </tr>\n              ))\n            }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    address: state.auth.address,\n    memberId: state.auth.user._id === undefined ? -1 : state.auth.user._id\n  }\n}\nAddress.propTypes = {\n  address: PropTypes.array.isRequired,\n  memberId: PropTypes.number.isRequired\n}\nexport default connect(mapStateToProps)(Address)\n","import React from 'react'\n\nclass ShopCat extends React.Component {\n  render() {\n    return (\n      <div>ShopCat</div>\n    )\n  }\n}\n\nexport default ShopCat\n","import React from 'react'\n\nconst Message = function (props) {\n  return (\n    <div>Message</div>\n  )\n}\nexport default Message\n","/**\n * 我的订单\n */\nimport React from 'react'\n\nclass Order extends React.Component {\n  render() {\n    return (\n      <div>Order</div>\n    )\n  }\n}\nexport default Order\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link, Route } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport './index.scss'\nimport Header from '../../components/Header'\n\nimport config from '../../utils/config'\nimport Safety from './subpage/Safety'\nimport MyInfo from './subpage/MyInfo'\nimport EditMyInfo from './subpage/EditMyInfo'\nimport Address from './subpage/Address'\nimport ShopCat from './subpage/ShopCat'\nimport Message from './subpage/Message'\nimport MyOrder from './subpage/MyOrder'\n\nconst HOST = config.HOST\n/**\n * 安全设置\n *    修改手机，关闭手机登陆\n * 个人资料\n * 编辑资料\n * 收货地址\n * 资金管理\n * 购物车\n * 消息-\n *\n */\n\nclass UserInfo extends React.Component {\n  render() {\n    // 未登陆，并且未在验证中\n    // warning无法在现有状态转换期间更新(如在“render”中)。渲染方法应该是道具和状态的纯函数。\n    if (!this.props.auth.isLogin && !this.props.auth.isVerify) { this.props.history.push('/login') }\n    return (\n      <div>\n        <Header />\n        <div className=\"member-header\">\n          {/*头部*/}\n          <div className=\"member-header-wrap\">\n            <div><img height=\"34px\" width=\"140px\" src={`${HOST}/image/ui/member-logo.png`} alt=\"\"/></div>\n            <div className=\"mh-choice-box\">\n              <Link to=\"/member\">\n                <div className=\"member-header-home\">首页</div>\n              </Link>\n            </div>\n          </div>\n        </div>\n        {\n          !this.props.auth.isLogin ?\n          <div>加载中。。。</div> :\n          <div className=\"member-wrap\">\n            {/*导航区*/}\n            <div className=\"member-nav\">\n              <div><img src={`${HOST}/image/member/avatar/${this.props.auth.user.avatar}`} alt=\"\"/></div>\n              <ul>\n                <li><Link to=\"/member/safety\">安全设置</Link></li>\n                <li><Link to=\"/member\">个人资料</Link></li>\n                <li><Link to=\"/member/edit_myinfo\">编辑资料</Link></li>\n                <li><Link to=\"/member/myorder\">我的订单</Link></li>\n                <li><Link to=\"/member/address\">收货地址</Link></li>\n                <li><Link to=\"/member/shop_cat\">购物车</Link></li>\n                <li><Link to=\"/member/message\">消息</Link></li>\n              </ul>\n            </div>\n            {/*信息展示区*/}\n            <div className=\"member-info\">\n              <Route path=\"/member/safety\" component={Safety} />\n              <Route path=\"/member\" exact component={MyInfo} />\n              <Route path=\"/member/edit_myinfo\" component={EditMyInfo} />\n              <Route path=\"/member/address\" component={Address} />\n              <Route path=\"/member/shop_cat\" component={ShopCat} />\n              <Route path=\"/member/message\" component={Message} />\n              <Route path=\"/member/myorder\" component={MyOrder} />\n            </div>\n          </div>\n        }\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth\n  }\n}\nUserInfo.propTypes = {\n  auth: PropTypes.object.isRequired\n}\nexport default connect(mapStateToProps)(UserInfo)\n","import React, { Component } from 'react';\nimport {Route, Redirect} from 'react-router-dom';\nimport axios from 'axios'\n\nimport \"./App.scss\"\nimport config from './utils/config.js'\nimport Home from './containers/Home'\nimport Register from './containers/Register'\nimport Login from './containers/Login'\nimport SearchProduct from './containers/SearchProduct'\nimport GotoSearchProduct from './containers/SearchProduct/GotoSearchProduct'\nimport ProductDetail from './containers/ProductDetail'\nimport UserInfo from './containers/UserInfo'\n\nimport { setAuthToken, setCurrentUser } from './utils/setAuth'\nif (typeof(window) === 'object') {\n  // 验证本地 token\n  const jwtToken = window.localStorage.jwtToken;\n  if (jwtToken) {\n    setAuthToken(jwtToken); // 设置请求头 token\n    // 验证请求头token\n    axios.get(config.HOST + '/api/users/current')\n      .then(res => {\n        if (!res.data.success) {\n          setAuthToken(false);\n          setCurrentUser({});\n        } else {\n          // token 验证成功\n          setAuthToken(jwtToken);\n          setCurrentUser(res.data.payload.user);\n        }\n      })\n      .catch(err => {\n        setAuthToken(false);\n        setCurrentUser({});\n      });\n  }\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/register\" component={Register} />\n        <Route path=\"/login\" component={Login} />\n        {/*路径参数变化不会触发组件刷新，此处需要跳转*/}\n        <Route path=\"/search_product\" exact component={GotoSearchProduct} />\n        <Route path=\"/search_products\" exact component={SearchProduct} />\n        <Route path=\"/product_detail\" exact component={ProductDetail} />\n        <Route path=\"/member\" component={UserInfo} />\n        {/*<Redirect to=\"/\" />*/}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\n\nimport App from './App';\nimport store from './flux/store'\n\nconst ReactBody = () => {\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  )\n}\n\nReactDOM.render(<ReactBody />, document.getElementById('root'));\n"],"sourceRoot":""}