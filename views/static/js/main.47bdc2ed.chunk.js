(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(85)},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(34),c=a.n(r),o=a(88),i=a(9),l=a(3),u=a(4),m=a(7),d=a(5),p=a(6),h=a(87),v=a(10),b=a.n(v),g=(a(67),"http://118.126.108.36"),E="ws://118.126.108.36",f=a(18),y=a(36),O=a(8),N={step:0,phone:"13888888888"},j=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.length},k=function(e){return/^1[0-9]{10}$/.test(e)},S={location:"",isLogin:!1,loginWay:"phone",user:{},isVerify:!0,address:[]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGIN_WAY":return Object(O.a)({},e,{loginWay:t.payload});case"SET_CURRENT_USER":return Object(O.a)({},e,{isLogin:!j(t.payload),user:j(t.payload)?{}:t.payload.user,isVerify:!1,address:t.payload.address||[]});case"SET_ROUTER_LOCATION":return Object(O.a)({},e,{location:t.payload});default:return e}},C={searchGoods:[],searchStores:[],searchKey:"",productDetail:{comments:[],goodDetail:[],goodInfo:{},infoPicture:[],smaillPicture:[{}],message:"\u52a0\u8f7d\u4e2d\u3002\u3002\u3002"}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_GOODS":return Object(O.a)({},e,{searchGoods:t.payload});case"SET_SEARCH_STORES":return Object(O.a)({},e,{searchStores:t.payload});case"SET_SEARCH_KEY":return Object(O.a)({},e,{searchKey:t.payload});case"SET_PRODUCT_DETAIL":return Object(O.a)({},e,{productDetail:t.payload});default:return e}},I=C,_={buyProducts:[],payOrder:{},payStatus:"nosuccess"},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BUY_PRODUCTS":return Object(O.a)({},e,{buyProducts:t.payload});case"SET_PAY_ORDER":return Object(O.a)({},e,{payOrder:t.payload});case"PAY_SUCCESS":return Object(O.a)({},e,{payStatus:"success"});default:return e}},P=Object(f.c)({register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STEP_CHANGE":return Object(O.a)({},e,{step:t.step});case"GET_PHONE":return Object(O.a)({},e,{phone:t.phone});case"NEW_USER":return t.user;default:return e}},auth:w,product:x,order:T}),D=[y.a],A={};if("object"===typeof window){var L=window.localStorage.getItem("localStoreState");if(L)try{A=JSON.parse(L)}catch(St){console.error(St)}}var R=[f.a.apply(void 0,D)];"object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&R.push(window.__REDUX_DEVTOOLS_EXTENSION__());var M=Object(f.e)(P,A,f.d.apply(void 0,R));M.subscribe(function(){if("object"===typeof window){var e=M.getState();window.localStorage.setItem("localStoreState",JSON.stringify({order:e.order,auth:e.auth}))}});var B=M,K=function(e){e?(b.a.defaults.headers.common.Authorization=e,window.localStorage.setItem("jwtToken",e),"close"===$.status&&$.initSocket(e)):(delete b.a.defaults.headers.common.Authorization,window.localStorage.removeItem("jwtToken"))},W=function(e){B.dispatch({type:"SET_CURRENT_USER",payload:e})},U=E,G={status:"close",ws:null,initSocket:function(e){if("object"===typeof window&&e){var t=new WebSocket("".concat(U,"?token=").concat(e));t.onclose=function(e){console.log("socket close!"),G.status="close"},t.onmessage=function(e){var t=e.data;try{t=JSON.parse(t)}catch(St){return}switch(t.type){case"transToken":return K(t.content);case"payOrderSuccess":return t.content,void B.dispatch({type:"PAY_SUCCESS"});default:return}},t.onerror=function(e){console.error("socket error",e)},t.onopen=function(e){console.log("socket open"),G.status="open",setTimeout(function(){t.send(JSON.stringify({type:"transToken",target:"koa"}))},9e5)},G.ws=t}}},$=G,V=a(2),X=a(86),q=a(11),H=a.n(q),F=g,Y=B.getState(),J=function(e){return function(t){t({type:"SET_SEARCH_KEY",payload:e})}},z=function(e){return function(t){t({type:"SET_LOGIN_WAY",payload:e})}},Z=function(e){return function(t){t({type:"SET_ROUTER_LOCATION",payload:e})}},Q=(a(68),a(69),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loginOut",value:function(){K(!1),W({})}},{key:"render",value:function(){var e=this.props.auth,t=s.a.createElement("ul",{className:"ul-l"},s.a.createElement("li",null,"\u54c8\uff0c\u6b22\u8fce\u6765\u5230xx"),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/login"},"\u8bf7\u767b\u5f55")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/register"},"\u514d\u8d39\u6ce8\u518c"))),a=s.a.createElement("ul",{className:"ul-l"},s.a.createElement("li",null,"Hi\uff0c",s.a.createElement(X.a,{to:"/member"},e.user.nickname)),s.a.createElement("li",null,s.a.createElement("span",{to:"/login"},"\u79ef\u52060")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/"},"\u6d88\u606f0")),s.a.createElement("li",null,s.a.createElement("a",{onClick:this.loginOut.bind(this),href:"javascript:void(0)"},"\u9000\u51fa")));return s.a.createElement("div",{className:"app-header-wrap"},s.a.createElement("div",{className:"app-header"},e.isLogin?a:t,s.a.createElement("ul",{className:"ul-r"},s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member"},"\u6211\u7684\u6dd8\u5b9d")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member"},"\u8d2d\u7269\u8f660\u4ef6")),s.a.createElement("li",null,"\u5546\u5bb6\u652f\u6301"))))}}]),t}(n.Component)),ee=Object(i.b)(function(e){return{auth:e.auth}},null)(Q),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).state={slideboxs:null,slideImg:[{bgimg:"/image/slide_wall/TB1FmwTvHZnBKNjSZFGSuvt3FXa.jpg",bgcolor:"#fff"},{bgimg:"/image/slide_wall/\u7ea2\u7c73Note7.webp",bgcolor:"#00f"},{bgimg:"/image/slide_wall/O1CN01Tms3Pn1D7tpGbFK5a_!!170-0-luban.jpg_q100.jpg_.webp",bgcolor:"#00f"},{bgimg:"/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg",bgcolor:"#06f"},{bgimg:"/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg",bgcolor:"#06f"},{bgimg:"/image/slide_wall/TB10lfQxpzqK1RjSZSgSuwpAVXa.jpg",bgcolor:"#dff"}],slideStop:!1,slideIndex:0,slideInterval:-1,slideTimeout:-1},a.slideAnimate=a.slideAnimate.bind(Object(V.a)(Object(V.a)(a))),a.gotoSlide=a.gotoSlide().bind(Object(V.a)(Object(V.a)(a))),a.slideStart=a.slideStart.bind(Object(V.a)(Object(V.a)(a))),a.slideStop=a.slideStop.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;"object"===typeof window&&this.setState({slideboxs:window.document.getElementsByClassName("slide-img-box")},function(){e.state.slideboxs[e.state.slideIndex].style.opacity=1;var t=e,a=window.setInterval(function(){t.state.slideStop||t.slideAnimate()},5e3);e.setState({slideInterval:a})})}},{key:"componentWillUnmount",value:function(){"object"===typeof window&&(window.clearInterval(this.state.slideInterval),window.clearTimeout(this.state.slideTimeout))}},{key:"slideAnimate",value:function(e){var t=this.state.slideIndex;void 0===e&&(e=(t+1)%this.state.slideboxs.length);var a=this,n=this.state.slideboxs,s=1,r=0,c=window.setInterval(function(){s-=.2,r+=.2,n[t].style.opacity=s,n[e].style.opacity=r},50),o=window.setTimeout(function(){window.clearInterval(c),n[t].style.opacity=0,n[e].style.opacity=1,a.setState({slideIndex:e,slideTimeout:o})},200)}},{key:"gotoSlide",value:function(){var e=0,t=null;return function(a){window.clearTimeout(t);var n=new Date,s=this,r=Number(a.currentTarget.getAttribute("index"));n-e>500?(r!==s.state.slideIndex&&s.slideAnimate(r),e=n):t=window.setTimeout(function(){r!==s.state.slideIndex&&s.slideAnimate(r),e=n},300)}}},{key:"slideStop",value:function(){this.state.slideStop||this.setState({slideStop:!0})}},{key:"slideStart",value:function(){this.state.slideStop&&this.setState({slideStop:!1})}},{key:"render",value:function(){var e=this,t=this.state.slideImg;return s.a.createElement("div",{className:"nav-slide-wrap",onMouseLeave:this.slideStart},t.map(function(t,a){return s.a.createElement("div",{key:a,className:"slide-img-box",style:{backgroundColor:t.bgcolor}},s.a.createElement("div",{className:"slide-img-box-i",style:{background:"url(".concat(g).concat(t.bgimg,") no-repeat center")},onMouseOver:e.slideStop}))}),s.a.createElement("ul",{className:"slide-nav"},t.map(function(t,a){return s.a.createElement("li",{key:a,className:H()("slide-nav-item",{"slide-nav-selected":a===e.state.slideIndex}),index:a,onMouseOver:e.gotoSlide})})))}}]),t}(n.Component);var ae=function(e){var t=e.smaillType||[];return s.a.createElement("div",{className:"smaillType"},s.a.createElement("h1",null,"Detail"),t.map(function(e){return s.a.createElement("div",{key:e._id,className:"smaill-item"},s.a.createElement("div",{className:"smaill-item-title"},e.smaillName),s.a.createElement("div",{className:"smaill-detail"},e.detail.map(function(e){return s.a.createElement("span",{key:e._id},e.detailName)})))}))},ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this))).state={navTop:["\u8d85\u5e02","\u4f1a\u5458","\u7535\u5668\u57ce","\u9c9c\u751f","\u533b\u836f\u9986","\u8425\u4e1a\u5385","\u65c5\u884c","\u56fe\u4e66"],bigType:[],selectedBigid:-1,searchKey:""},a.onBigTypeSelect=a.onBigTypeSelect.bind(Object(V.a)(Object(V.a)(a))),a.CurrentSmaillType=a.CurrentSmaillType.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.setRouterLocationAction("/"),b.a.get(g+"/api/goods/type?type=big&limit=16").then(function(t){if(!t.data.success)return console.error("\u5546\u54c1\u5206\u7c7b\u5217\u8868\u83b7\u53d6\u5931\u8d25");e.setState({bigType:t.data.payload})}).catch(function(e){console.error(e)})}},{key:"CurrentSmaillType",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.state.bigType;if(0!==n.length)for(var s=0,r=n.length;s<r;s++)if(n[s]._id===e){if(a)return n[s].smaillType;n[s].smaillType=t,this.setState({bigType:n})}}},{key:"onBigTypeSelect",value:function(e){var t=this,a=Number(e.currentTarget.getAttribute("bigid"));this.setState({selectedBigid:a}),b.a.get(g+"/api/goods/type?type=smaill&bigid="+a).then(function(e){e.data.success&&t.CurrentSmaillType(a,e.data.payload)}).catch(function(e){console.error(e)})}},{key:"onBigTypeLeave",value:function(){this.setState({selectedBigid:-1})}},{key:"searchInputChange",value:function(e){this.setState({searchKey:e.target.value})}},{key:"searchProduct",value:function(e){e.preventDefault(),this.props.setSearchKeyAction(this.state.searchKey),this.props.history.push("/search_product?q=".concat(this.state.searchKey,"&limit1=0&limit2=50"))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(ee,null),s.a.createElement("div",{className:"headerCon"},s.a.createElement("form",{onSubmit:this.searchProduct.bind(this)},s.a.createElement("input",{type:"text",className:"search-text",value:this.state.searchKey,onChange:this.searchInputChange.bind(this),placeholder:"\u641c\u7d22 \u4f18\u9009 \u5546\u54c1/\u54c1\u724c/\u5e97\u94fa"}),s.a.createElement("button",{type:"submit",className:"search-btn"},"\u641c\u7d22")),s.a.createElement("ul",{className:"hot-query"},this.state.navTop.map(function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(X.a,{to:"/"},e))}))),s.a.createElement("div",{className:"main-nav"},s.a.createElement("ul",{className:"nav-t-wrap"},this.state.navTop.map(function(e,t){return s.a.createElement("li",{key:t},e)})),s.a.createElement("div",{className:"nav-l-box"},s.a.createElement("div",{className:"main-logo-wrap"},s.a.createElement("div",null,s.a.createElement("a",{href:g},s.a.createElement("img",{width:"240px",height:"130px",src:g+"/image/ui/home_logo.png",alt:"\u4f18\u9009"})))),s.a.createElement("div",{className:"nav-l-wrap",onMouseLeave:this.onBigTypeLeave.bind(this)},s.a.createElement("div",{className:"nav-l-title"},"\u5546\u54c1\u5206\u7c7b"),s.a.createElement("div",{className:"nav-l-typewrap"},this.state.bigType.map(function(t){return s.a.createElement("div",{key:t._id,className:H()("nav-l-item",{"nav-l-item-sel":e.state.selectedBigid===t._id}),bigid:t._id,onMouseOver:e.onBigTypeSelect},t.bigName)})),-1===this.state.selectedBigid?null:s.a.createElement(ae,{smaillType:this.CurrentSmaillType(this.state.selectedBigid,null,!0)}))),s.a.createElement(te,null)))}}]),t}(n.Component),se=Object(i.b)(null,{setSearchKeyAction:J,setRouterLocationAction:Z})(ne),re=(a(70),a(16)),ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={phone:"",isCheck:!1,smsCode:"",sendSMSCode:"",errors:{}},a.validator=a.validator.bind(Object(V.a)(Object(V.a)(a))),a.sendSMS=a.sendSMS.bind(Object(V.a)(Object(V.a)(a))),a.onChange=a.onChange.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.changeStep(1)}},{key:"onChange",value:function(e){this.setState(Object(re.a)({},e.target.name,e.target.value))}},{key:"validator",value:function(e){return e?/^1[0-9]{10}$/.test(e):{phone:/^1[0-9]{10}$/.test(this.state.phone),sms:this.state.sendSMSCode&&this.state.smsCode===this.state.sendSMSCode}}},{key:"sendSMS",value:function(){var e=this;this.validator().phone?(this.setState({errors:{}}),b.a.post(g+"/api/operator/testsms",{phone:this.state.phone}).then(function(t){t.data.success?(e.setState({sendSMSCode:t.data.payload.smsCode},function(){e.props.getPhone(e.state.phone)}),console.log(t.data.payload.smsCode)):e.setState({errors:Object(O.a)({},e.state.errors,{phone:"\u670d\u52a1\u5668\u5fd9\uff0c\u7a0d\u540e\u91cd\u8bd5"})})}).catch(function(t){console.log(t),e.setState({errors:Object(O.a)({},e.state.errors,{phone:t.message})})})):this.setState({errors:Object(O.a)({},this.state.errors,{phone:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"})})}},{key:"nextStep",value:function(){this.validator(this.props.register.phone)&&this.validator().sms?this.props.history.push("/register/step2"):this.setState({errors:Object(O.a)({},this.state.errors,{smsCode:"\u9a8c\u8bc1\u7801\u6709\u8bef"})})}},{key:"componentDidMount",value:function(){if("object"===typeof window){var e=this;this.refs.slideBlock.addEventListener("mousedown",function(a){var n=a.screenX;var s=window.parseInt(window.getComputedStyle(e.refs.slide,!1).width)-window.parseInt(window.getComputedStyle(e.refs.slideBlock,!1).width);console.log(s);document.addEventListener("mousemove",r);function r(t){var a=t.screenX-n;0<a&&a<=s&&(e.refs.slideBlock.style.left=a+"px",e.refs.slideRate.style.width=a+"px")}document.addEventListener("mouseup",function a(n){console.log("mouseup");e.refs.slideBlock.removeEventListener("mousemove",r);document.removeEventListener("mousemove",r);document.removeEventListener("mouseup",a);var c=parseInt(e.refs.slideRate.style.width);console.log(c,s);c>=s-3?(e.refs.slideBlock.removeEventListener("mousedown",t),e.setState({isCheck:!0})):(e.refs.slideBlock.style.left="0px",e.refs.slideRate.style.width="0px")})})}function t(a){var n=a.screenX;var s=window.parseInt(window.getComputedStyle(e.refs.slide,false)["width"])-window.parseInt(window.getComputedStyle(e.refs.slideBlock,false)["width"]);console.log(s);document.addEventListener("mousemove",r);function r(t){var a=t.screenX-n;if(0<a&&a<=s){e.refs.slideBlock.style.left=a+"px";e.refs.slideRate.style.width=a+"px"}}document.addEventListener("mouseup",c);function c(a){console.log("mouseup");e.refs.slideBlock.removeEventListener("mousemove",r);document.removeEventListener("mousemove",r);document.removeEventListener("mouseup",c);var n=parseInt(e.refs.slideRate.style.width);console.log(n,s);if(n>=s-3){e.refs.slideBlock.removeEventListener("mousedown",t);e.setState({isCheck:true})}else{e.refs.slideBlock.style.left="0px";e.refs.slideRate.style.width="0px"}}}}},{key:"render",value:function(){return s.a.createElement("div",{className:"Step1"},s.a.createElement("div",{className:"s1-item phone"},s.a.createElement("div",{className:"prefix"},"\u624b\u673a\u53f7"),s.a.createElement("div",{className:"s1-item-body"},s.a.createElement("div",{className:"s1-phone-prefix"},s.a.createElement("span",null,"\u4e2d\u56fd\u5927\u9646"),s.a.createElement("span",null," +86")),s.a.createElement("div",{className:"s1-phone-input"},s.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",name:"phone",onChange:this.onChange,value:this.state.phone})))),this.state.errors.phone&&s.a.createElement("p",null,this.state.errors.phone),s.a.createElement("div",{className:"s1-item"},s.a.createElement("div",{className:"prefix"},"\u624b\u673a\u53f7"),s.a.createElement("div",{className:"s1-item-body"},s.a.createElement("div",{ref:"slide",className:"slide"},s.a.createElement("p",null,this.state.isCheck?"\u9a8c\u8bc1\u901a\u8fc7":"\u8bf7\u6309\u4f4f\u6ed1\u5757\uff0c\u62d6\u52a8\u5230\u6700\u53f3\u8fb9"),s.a.createElement("div",{ref:"slideRate",style:{width:0},className:"slide-rate"}),s.a.createElement("div",{ref:"slideBlock",style:{left:0},className:"slide-block"},">>")))),this.state.isCheck?s.a.createElement("div",{className:"s1-item s1-smscode"},s.a.createElement("div",{className:"-prefix"},"\u9a8c\u8bc1\u7801"),s.a.createElement("div",{className:"s1-item-body"},s.a.createElement("input",{type:"text",placeholder:"\u8f93\u5165\u624b\u673a\u9a8c\u8bc1\u7801",name:"smsCode",onChange:this.onChange,value:this.state.smsCode}),s.a.createElement("button",{onClick:this.sendSMS},"\u53d1\u9001"))):null,s.a.createElement("div",null,s.a.createElement("span",{onClick:this.nextStep.bind(this)},"\u4e0b\u4e00\u6b65")))}}]),t}(n.Component);var oe=Object(i.b)(function(e){return{register:e.register}},function(e){return{changeStep:function(t){e({type:"STEP_CHANGE",step:t})},getPhone:function(t){e({type:"GET_PHONE",phone:t})}}})(ce),ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={phone:e.register.phone,password:"",password2:"",nickname:"",errors:{}},a.debounce=a.debounce(),a.validator=a.validator.bind(Object(V.a)(Object(V.a)(a))),a.onChange=a.onChange.bind(Object(V.a)(Object(V.a)(a))),a.nicknameRepeat=a.nicknameRepeat.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.changeStep(2)}},{key:"onChange",value:function(e){var t=this,a=e.target.name;this.setState(Object(re.a)({},a,e.target.value)),this.debounce(function(){console.log("\u9632\u6296\u9a8c\u8bc1");var e=t.validator(a);t.setState({errors:Object(O.a)({},t.state.errors,Object(re.a)({},a,e.isLegal?"":e.msg))},function(){"nickname"===a&&e.isLegal&&t.nicknameRepeat()})})}},{key:"nicknameRepeat",value:function(e){var t=this;b.a.post(g+"/api/users/nickname",{nickname:this.state.nickname}).then(function(a){if(console.log(a),!a.data.success)return e&&e(!1),t.setState({errors:Object(O.a)({},t.state.errors,{nickname:a.data.msg})});t.setState({errors:Object(O.a)({},t.state.errors,{nickname:""})}),e&&e(!0)}).catch(function(a){e&&e(!1),t.setState({errors:Object(O.a)({},t.state.errors,{nickname:a.response.data})})})}},{key:"validator",value:function(e){var t={key:e,isLegal:!0,msg:""};switch(e){case"nickname":/^[^0-9][\w\W]{1,9}$/.test(this.state.nickname)||(t.isLegal=!1,t.msg="\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\uff0c\u957f\u5ea6 2-10 \u4f4d");break;case"password2":if(this.state.password2!==this.state.password){t.isLegal=!1,t.msg="\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4";break}case"password":/^[\w\d\.\+\-#@!\^\&\$]{6,18}$/.test(this.state.password)||(t.isLegal=!1,t.msg="\u5bc6\u7801\u957f\u5ea66-18\u4f4d\uff0c\u53ef\u5305\u542b0-9 A-z _ . + - # @ ! ^ & $");break;default:t.isLegal=!1,t.msg="\u672a\u5b9a\u4e49\u7c7b\u578b"}return t}},{key:"debounce",value:function(){var e=null;return function(t){window.clearTimeout(e),e=window.setTimeout(function(){t&&t()},1e3)}}},{key:"onSubmit",value:function(){var e=this;this.validator("nickname").isLegal&&this.validator("password").isLegal&&this.validator("password2").isLegal&&this.nicknameRepeat(function(t){if(t){var a={nickname:e.state.nickname,password:e.state.password,phone:e.props.register.phone};b.a.post(g+"/api/users/register",a).then(function(t){t.data.success&&(e.props.getUser(a),e.props.history.push("/register/step3"))}).catch(function(t){e.setState({errors:Object(O.a)({},e.state.errors,{submit:t.response.data})})})}})}},{key:"render",value:function(){return s.a.createElement("div",{className:"step2"},s.a.createElement("h2",null,"Step2"),s.a.createElement("div",{className:"s2-item"},s.a.createElement("div",{className:"s2-i-left"},s.a.createElement("span",{className:"s2-font1"},"\u767b\u5f55\u540d")),s.a.createElement("div",{className:"s2-i-right s2-font1"},this.state.phone)),s.a.createElement("div",{className:"s2-item"},s.a.createElement("div",{className:"s2-i-left"},s.a.createElement("span",{className:"s2-font1"},"\u8bf7\u8bbe\u7f6e\u767b\u5f55\u5bc6\u7801")),s.a.createElement("div",{className:"s2-i-right s2-font1"},s.a.createElement("span",{className:"s2-font2"},"\u767b\u5f55\u65f6\u9a8c\u8bc1\uff0c\u4fdd\u62a4\u8d26\u53f7\u4fe1\u606f"))),s.a.createElement("div",{className:"s2-item"},s.a.createElement("div",{className:"s2-i-left"},s.a.createElement("span",{className:"s2-font2"},"\u767b\u5f55\u5bc6\u7801")),s.a.createElement("div",{className:"s2-i-right s2-font1"},s.a.createElement("input",{type:"password",placeholder:"\u8bbe\u7f6e\u4f60\u7684\u767b\u5f55\u5bc6\u7801",name:"password",onChange:this.onChange,value:this.state.password,className:H()({"border-err":this.state.errors.password})}),this.state.errors.password&&s.a.createElement("div",{className:"register-err"},this.state.errors.password))),s.a.createElement("div",{className:"s2-item"},s.a.createElement("div",{className:"s2-i-left"},s.a.createElement("span",{className:"s2-font2"},"\u5bc6\u7801\u786e\u8ba4")),s.a.createElement("div",{className:"s2-i-right s2-font1"},s.a.createElement("input",{type:"password",placeholder:"\u518d\u6b21\u8f93\u5165\u4f60\u7684\u5bc6\u7801",name:"password2",onChange:this.onChange,value:this.state.password2,className:H()({"border-err":this.state.errors.password2})}),this.state.errors.password2&&s.a.createElement("div",{className:"register-err"},this.state.errors.password2))),s.a.createElement("div",{className:"s2-item"},s.a.createElement("div",{className:"s2-i-left"},s.a.createElement("span",{className:"s2-font1"},"\u8bbe\u7f6e\u4f1a\u5458\u540d"))),s.a.createElement("div",{className:"s2-item"},s.a.createElement("div",{className:"s2-i-left"},s.a.createElement("span",{className:"s2-font2"},"\u767b\u5f55\u540d")),s.a.createElement("div",{className:"s2-i-right s2-font1"},s.a.createElement("input",{type:"text",placeholder:"\u4f1a\u5458\u540d\u4e00\u65e6\u8bbe\u7f6e\u6210\u529f\uff0c\u65e0\u6cd5\u4fee\u6539",name:"nickname",onChange:this.onChange,value:this.state.nickname,className:H()({"border-err":this.state.errors.nickname})}),this.state.errors.nickname&&s.a.createElement("div",{className:"register-err"},this.state.errors.nickname))),s.a.createElement("div",{className:"s2-submit-wrap"},s.a.createElement("button",{onClick:this.onSubmit.bind(this),className:"s2-submit"},"\u63d0\u4ea4"),this.state.errors.submit&&s.a.createElement("div",{className:"register-err"},this.state.errors.submit)))}}]),t}(n.Component);var le=Object(i.b)(function(e){return{register:e.register}},function(e){return{changeStep:function(t){e({type:"STEP_CHANGE",step:t})},getUser:function(t){e({type:"NEW_USER",user:t})}}})(ie),ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).props.changeStep(3),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.register;return s.a.createElement("div",null,s.a.createElement("h1",null,"Step3"),s.a.createElement("h2",null,e.nickname,",",e.phone,"\u6ce8\u518c\u6210\u529f"),s.a.createElement(X.a,{to:"/login"},"\u73b0\u5728\u767b\u5f55"))}}]),t}(n.Component);var me=Object(i.b)(function(e){return{register:e.register}},function(e){return{changeStep:function(t){e({type:"STEP_CHANGE",step:t})}}})(ue),de=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.history.push("/register/step1")}},{key:"showStep",value:function(){var e=this.props.register;return 3===e.step?s.a.createElement("h3",null,"1.\u8bbe\u7f6e\u7528\u6237\u540d"):2===e.step?s.a.createElement("h3",null,"2.\u586b\u5199\u8d26\u53f7\u4fe1\u606f"):1===e.step?s.a.createElement("h3",null,"1.\u8bbe\u7f6e\u7528\u6237\u540d"):s.a.createElement("h3",null,"look like some error...")}},{key:"render",value:function(){this.props.register;return s.a.createElement("div",{className:"register-wrap"},s.a.createElement(X.a,{to:"/login"},"\u767b\u5f55"),s.a.createElement("br",null),s.a.createElement("h1",null,"Register"),this.showStep.call(this),s.a.createElement("main",null,s.a.createElement(h.a,{exact:!0,path:"/register/step1",component:oe}),s.a.createElement(h.a,{exact:!0,path:"/register/step2",component:le}),s.a.createElement(h.a,{exact:!0,path:"/register/step3",component:me})))}}]),t}(n.Component);var pe=Object(i.b)(function(e){return{register:e.register}},null)(de),he=(a(72),a(1)),ve=a.n(he),be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={account:"",password:"",errors:{}},a.inputChange=a.inputChange.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){"account"!==this.props.auth.loginWay&&this.props.setLoginWay("account")}},{key:"inputChange",value:function(e){this.setState(Object(re.a)({},e.target.name,e.target.value))}},{key:"formSubmit",value:function(){var e,t,a=this,n={};if(j(this.state.account)?n.account="\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a":(e=this.state.password,t={min:6,max:18},"string"===typeof e&&e.length>=t.min&&e.length<=t.max||(n.password="\u5bc6\u7801\u957f\u5ea6 6-18 \u4f4d")),!j(n))return this.setState({errors:Object(O.a)({},this.state.errors,n)});var s={account:this.state.account,password:this.state.password};b.a.post(g+"/api/users/login",s).then(function(e){if(console.log(e),!e.data.success)return a.setState({errors:Object(O.a)({},a.state.errors,{submit:e.data.message})});K(e.data.payload.token),W(e.data.payload),a.props.history.push(a.props.auth.location||"/")}).catch(function(e){a.setState({errors:Object(O.a)({},a.state.errors,{submit:e.response?e.response.message:"\u670d\u52a1\u5668\u5fd9"})})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"l-input-wrap"},s.a.createElement("div",{className:"log-input1"},s.a.createElement("label",{htmlFor:"account"}),s.a.createElement("input",{onChange:this.inputChange,value:this.state.account,placeholder:"\u6635\u79f0 / \u624b\u673a\u53f7\u7801",name:"account",id:"account",type:"text"})),this.state.errors.account?s.a.createElement("div",null,this.state.errors.account):null,s.a.createElement("div",{className:"log-input2"},s.a.createElement("label",{htmlFor:"password"}),s.a.createElement("input",{type:"password",placeholder:"\u5bc6\u7801",name:"password",id:"password",onChange:this.inputChange,value:this.state.password})),this.state.errors.password?s.a.createElement("div",null,this.state.errors.password):null,s.a.createElement("input",{type:"submit",onClick:this.formSubmit.bind(this),value:"\u767b\u5f55"}),this.state.errors.submit?s.a.createElement("div",null,this.state.errors.submit):null)}}]),t}(s.a.Component);be.protTypes={auth:ve.a.object.isRequired,setLoginWay:ve.a.func.isRequired};var ge=Object(i.b)(function(e){return{auth:e.auth}},{setLoginWay:z})(be),Ee=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={phone:"",sms:"",errors:{}},e.inputChange=e.inputChange.bind(Object(V.a)(Object(V.a)(e))),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){"phone"!==this.props.auth.loginWay&&this.props.setLoginWay("phone")}},{key:"inputChange",value:function(e){this.setState(Object(re.a)({},e.target.name,e.target.value))}},{key:"sendSMS",value:function(){if(!k(this.state.phone))return this.setState({errors:Object(O.a)({},this.state.errors,{phone:"\u624b\u673a\u53f7\u7801\u9519\u8bef"})});this.state.errors.phone&&this.setState({errors:Object(O.a)({},this.state.errors,{phone:"",sms:""})}),b.a.post(g+"/api/operator/testsms",{phone:this.state.phone}).then(function(e){var t=e.data;console.log(t.smsCode)}).catch(function(e){console.log(e)})}},{key:"submit",value:function(){var e=this,t=!1;if(k(this.state.phone)?j(this.state.sms)&&(t={sms:"\u9a8c\u8bc1\u7801\u4e3a\u7a7a"}):t={phone:"\u624b\u673a\u53f7\u7801\u9519\u8bef"},t)return this.setState({errors:Object(O.a)({},this.state.errors,t)});var a={phone:this.state.phone,sms_code:this.state.sms};b.a.post(g+"/api/users/phonelogin",a).then(function(t){if(console.log(t),!t.data.success)return e.setState({errors:Object(O.a)({},e.state.errors,{submit:t.data.message})});K(t.data.payload.token),W(t.data.payload),e.props.history.push(e.props.auth.location||"/")}).catch(function(t){e.setState({errors:Object(O.a)({},e.state.errors,{submit:t.response?t.response.message:"\u670d\u52a1\u5668\u5fd9"})})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"l-input-wrap"},s.a.createElement("div",{className:"log-input1"},s.a.createElement("label",{htmlFor:"phone"}),s.a.createElement("input",{placeholder:"\u8f93\u5165\u624b\u673a\u53f7\u7801",onChange:this.inputChange,value:this.state.phone,name:"phone",id:"phone",type:"text"})),this.state.errors.phone?s.a.createElement("span",null,this.state.errors.phone):null,s.a.createElement("div",{className:"log-input2"},s.a.createElement("label",{htmlFor:"sms"}),s.a.createElement("input",{placeholder:"\u586b\u5199\u9a8c\u8bc1\u7801",onChange:this.inputChange,value:this.state.sms,name:"sms",id:"sms",type:"text"}),s.a.createElement("button",{className:"btn",onClick:this.sendSMS.bind(this)},"\u53d1\u9001\u9a8c\u8bc1\u7801")),this.state.errors.sms?s.a.createElement("span",null,this.state.errors.sms):null,s.a.createElement("input",{type:"submit",onClick:this.submit.bind(this),value:"\u767b\u5f55"}),this.state.errors.submit?s.a.createElement("span",null,this.state.errors.submit):null)}}]),t}(s.a.Component);Ee.protTypes={auth:ve.a.object.isRequired,setLoginWay:ve.a.func.isRequired};var fe=Object(i.b)(function(e){return{auth:e.auth}},{setLoginWay:z})(Ee),ye=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.auth.isLogin&&this.props.history.goBack()}},{key:"render",value:function(){var e=this.props.auth.loginWay,t="phone"===e?"f1":"f2",a="account"===e?"f1":"f2";return s.a.createElement("div",null,s.a.createElement("div",{className:"login-wrap"},s.a.createElement("div",{className:"login-title"}),s.a.createElement("div",{className:"login-form"},s.a.createElement("div",{className:"form"},s.a.createElement("div",{className:"form-t"},s.a.createElement(X.a,{to:"/login"},s.a.createElement("div",{className:"t-l "+t},"\u624b\u673a\u767b\u5f55")),s.a.createElement(X.a,{to:"/login/account"},s.a.createElement("div",{className:"t-r "+a},"\u8d26\u6237\u767b\u5f55"))),s.a.createElement("main",null,s.a.createElement(h.a,{exact:!0,path:"/login/account",component:ge}),s.a.createElement(h.a,{exact:!0,path:"/login",component:fe}))))))}}]),t}(n.Component);var Oe,Ne=Object(i.b)(function(e){return{auth:e.auth}},null)(ye),je=a(20),ke=a.n(je),Se=(a(79),a(80),""),we="";function Ce(e){we=e.target.value}function xe(){we!==Se&&Oe("/search_product?q=".concat(we,"&limit1=0&limit2=50"))}var Ie=function(e){return we=Se=e.searchKey||"",Oe=e.historyPush||function(){},s.a.createElement("div",{className:"sear"},s.a.createElement("div",{className:"sear-logo"},s.a.createElement(X.a,{to:"/"},s.a.createElement("img",{src:"".concat(g,"/image/ui/search_home_logo.png"),alt:""}))),s.a.createElement("div",{className:"sear-input-wrap"},s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("input",{defaultValue:we,onChange:Ce,className:"sear-input",type:"text"})),s.a.createElement("div",null,s.a.createElement("button",{onClick:xe,className:"com-search-btn"},"\u641c\u7d22")))))};Ie.propType={searchKey:ve.a.string,historyPush:ve.a.func.isRequired};var _e=Object(i.b)(function(e){return{searchKey:e.product.searchKey}},{setSearchKeyAction:J})(Ie),Te=(a(81),function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"\u52a0\u8f7d\u4e2d\u3002\u3002\u3002\u3002"))}),Pe=function(e){return s.a.createElement("div",null,s.a.createElement("h2",null,"\u9519\u8bef\uff1a",e.message))},De=function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"\u6ca1\u6709\u641c\u7d22\u5230\u6570\u636e\u3002\u3002\u3002\u3002"))};var Ae=function(e){var t=g;return s.a.createElement("div",{className:"goodlist-wrap"},e.goods.map(function(e,a){return s.a.createElement("div",{className:H()("good-wrap",{rowlast:a>0&&a%4===0}),key:a},s.a.createElement(X.a,{to:"/product_detail?goodId=".concat(e._id)},s.a.createElement("div",{className:"goodlogo-box"},s.a.createElement("img",{src:"".concat(t,"/image/goods/logo/").concat(e.logo),alt:""}))),s.a.createElement("div",{className:"good-price"},s.a.createElement("span",{className:"p_f1"},"\uffe5"),s.a.createElement("span",{className:"p_f2"},e.nowPrice)),s.a.createElement(X.a,{to:"/product_detail?goodId=".concat(e._id)},s.a.createElement("div",{className:"good-name"},s.a.createElement("span",null,(n=e.goodName).length<=50?n:n.substring(0,50)+"..."))),s.a.createElement("div",{className:"good-store"},s.a.createElement("span",{className:"s_f1"},"\u5e97\u94fa\uff1a"),s.a.createElement("span",{className:"s_f2"},e.storeName)),s.a.createElement("div",{className:"good-number-box"},s.a.createElement("div",{className:"good-number"},s.a.createElement("span",{className:"n_f1"},"\u6210\u4ea4\u91cf\uff1a"),s.a.createElement("span",{className:"n_f2"},e.number,"\u7b14")),s.a.createElement("div",{className:"good-number-chat"},"\u804a")));var n}))},Le=g,Re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={goods:[],status:"wait",error:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.searchUrl;if(!t)return this.setState({status:"empty"});b.a.get(Le+t).then(function(t){console.log(t),t.data.success?e.setState({status:"end",goods:t.data.payload},function(){e.props.getGoods&&e.props.getGoods(t.data.payload)}):e.setState({status:"error",error:t.message})}).catch(function(t){console.error(t),e.setState({status:"error",error:t.message})})}},{key:"render",value:function(){return s.a.createElement("div",null,"wait"===this.state.status?s.a.createElement(Te,null):"error"===this.state.status?s.a.createElement(Pe,{message:this.state.error}):0===this.state.goods.length?s.a.createElement(De,null):s.a.createElement(Ae,{goods:this.state.goods}))}}]),t}(s.a.Component),Me=g;var Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={stores:[],detailTypes:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.goods;if(Array.isArray(a)&&!(a.length<1)){b.a.get("".concat(Me,"/api/goods/type?type=detail&detailId=").concat(a[0].detailId)).then(function(e){e.data.success&&t.setState({detailTypes:e.data.payload})}).catch(function(e){console.error(e)});var n=[];n.push(a[0].storeId);for(var s=1,r=a.length;s<r;s++){for(var c=a[s].storeId,o=!1,i=0,l=n.length;i<l;i++)if(c===n[i]){o=!0;break}o||n.push(c)}if(!(n.length<1)){var u=JSON.stringify(n);b.a.get("".concat(Me,"/api/goods/search_store?storeIds=").concat(u)).then(function(e){e.data.success&&t.setState({stores:e.data.payload})}).catch(function(e){console.error(e)})}}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"substore"},this.state.detailTypes.length>0&&s.a.createElement("div",{className:"crum"},s.a.createElement("div",{className:"crum-1"},s.a.createElement(X.a,{to:"/"},s.a.createElement("span",null,"\u9996\u9875"))),s.a.createElement("div",{className:"crum-2"},s.a.createElement(X.a,{to:"/search_product?smaillId=".concat(this.state.detailTypes[0].smaillId)},s.a.createElement("span",null,this.state.detailTypes[0].smaillName))),s.a.createElement("div",{className:"crum-3"},s.a.createElement(X.a,{to:"/search_product?detailId=".concat(this.props.goods[0].detailId)},s.a.createElement("span",null,this.state.detailTypes.find(function(t,a){return t.detailId===e.props.goods[0].detailId}).detailName)),s.a.createElement("ul",{className:"crum-details"},this.state.detailTypes.map(function(t,a){return s.a.createElement("li",{className:"",key:a},s.a.createElement(X.a,{className:H()({"crum-selected":t.detailId===e.props.goods[0].detailId}),to:"/search_product?detailId=".concat(t.detailId)},t.detailName))})))),s.a.createElement("div",{className:"substore-logo-box"},s.a.createElement("div",{className:"s-logo-title"},"\u5e97\u94fa"),s.a.createElement("div",{className:"s-logo-wrap"},this.state.stores.map(function(e,t){return t>8?null:s.a.createElement("div",{className:"s-logo-item",key:t},s.a.createElement("div",{className:"s-store-logo"},s.a.createElement("img",{src:"".concat(Me,"/image/store/logo/").concat(e.logo),alt:""})),s.a.createElement("div",{className:"s-store-name"},s.a.createElement("span",null,"string"!==typeof(a=e.storeName)||a.length<6?a:a.substring(0,5)+"...")));var a}))))}}]),t}(s.a.Component);var Ke=Object(i.b)(function(e){return{goods:e.product.searchGoods}},null)(Be),We=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={searchKey:e.match.params.q,searchUrl:e.history.location.search},""===e.searchKey&&e.setSearchKeyAction(a.state.searchKey),a.getGoods=a.getGoods.bind(Object(V.a)(Object(V.a)(a))),a.getSearchProductUrl=a.getSearchProductUrl.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.getSearchProductUrl()}},{key:"getGoods",value:function(e){this.props.setSearchGoodsAction(e)}},{key:"getSearchProductUrl",value:function(){var e=ke.a.parse(this.props.location.search),t="/api/goods/search_product?",a=!1;return e.q&&(t+="q=".concat(e.q,"&"),a=!0),/^\d+$/.test(e.detailId)?(t+="detailId=".concat(e.detailId,"&"),a=!0):/^\d+$/.test(e.smaillId)?(t+="smaillId=".concat(e.smaillId,"&"),a=!0):/^\d+$/.test(e.bigId)&&(t+="bigId=".concat(e.bigId,"&"),a=!0),e.storeId&&(t+="storeId=".concat(e.storeId,"&")),a?("price"!==e.order&&"number"!==e.order||(t+="order=".concat(e.order,"&sort="),t+="asc"===e.sort?"asc&":"desc&"),t+=/^\d+$/.test(e.limit1)?"limit1=".concat(e.limit1,"&"):"",t+=/^\d+$/.test(e.limit2)?"limit2=".concat(e.limit2):"limit2=10"):""}},{key:"render",value:function(){this.props.searchGoods;return s.a.createElement("div",null,s.a.createElement(ee,null),s.a.createElement(_e,{historyPush:this.props.history.push}),s.a.createElement("div",{className:"search-product"},s.a.createElement("hr",{className:"search-hr"}),s.a.createElement(Ke,null),s.a.createElement(Re,{getGoods:this.getGoods,searchUrl:this.getSearchProductUrl()})))}}]),t}(n.Component);var Ue=Object(i.b)(function(e){return{searchGoods:e.product.searchGoods,searchKey:e.product.searchKey}},{setSearchGoodsAction:function(e){return function(t){t({type:"SET_SEARCH_GOODS",payload:e})}},setSearchKeyAction:J})(We),Ge=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.history.push("/search_products"+this.props.location.search)}},{key:"render",value:function(){return s.a.createElement("div",null,"404")}}]),t}(s.a.Component),$e=(a(82),a(89)),Ve=(a(83),g),Xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={searchKey:""},a.onSearchInputChange=a.onSearchInputChange.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onSearchInputChange",value:function(e){this.setState({searchKey:e.target.value})}},{key:"searchAllProduct",value:function(){""!==this.state.searchKey&&this.props.history.push("/search_products?q=".concat(this.state.searchKey))}},{key:"searchStoreProduct",value:function(){""!==this.state.searchKey&&this.props.history.push("/search_products?q=".concat(this.state.searchKey,"&storeId=").concat(this.props.storeInfo.storeId))}},{key:"render",value:function(){var e=this.props.storeInfo;return s.a.createElement("div",{className:"store-header"},s.a.createElement("div",{className:"store-cp-logo"},s.a.createElement(X.a,{to:"/"},s.a.createElement("img",{src:"".concat(Ve,"/image/ui/storetitle.png"),height:"60px"}))),s.a.createElement("div",{className:"store-info-wrap"},s.a.createElement("div",{className:"store-info-logo"},s.a.createElement("img",{height:"60px",src:"".concat(Ve,"/image/store/logo/").concat(e.logo||"default.jpg"),alt:"\u4f18\u9009"})),s.a.createElement("div",{className:"store-info"},s.a.createElement("p",{className:"store-name"},"\u5e97\u94fa\uff1a",e.storeName),s.a.createElement("p",{className:"store-boos"},"\u638c\u67dc\uff1a",e.nickname))),s.a.createElement("div",{className:"store-search"},s.a.createElement("div",{className:"store-search-input"},s.a.createElement("input",{value:this.state.searchKey,onChange:this.onSearchInputChange,type:"text"})),s.a.createElement("button",{style:{background:'url("'.concat(Ve,'/image/ui/TB1ZWVhJpXXXXa4XVXXs1m4TXXX-458-36.png") top right no-repeat')},className:"store-search-btn-all",onClick:this.searchAllProduct.bind(this)},"\u641c\u7d22"),s.a.createElement("button",{className:"store-search-btn-this",onClick:this.searchStoreProduct.bind(this)},"\u641c\u672c\u5e97")))}}]),t}(s.a.Component),qe=Object($e.a)(Xe),He=a(19),Fe=function(e,t){t+="";var a=0;/^\d+\.\d+$/.test(e+="")&&(a+=e.replace(/^\d+\.(?=\d+$)/,"").length,e=e.replace(".","")),/^\d+\.\d+$/.test(t)&&(a+=t.replace(/^\d+\.(?=\d+$)/,"").length,t=t.replace(".",""));var n=Number(e)*Number(t)+"";return a>0?n.substring(0,n.length-a)+"."+n.substring(n.length-a):n},Ye=function(e,t){t+="";var a=0,n=0;if(/^\d+\.\d+$/.test(e+="")&&(a=e.replace(/^\d+\.(?=\d+$)/,"").length,e=e.replace(".","")),/^\d+\.\d+$/.test(t)&&(n+=t.replace(/^\d+\.(?=\d+$)/,"").length,t=t.replace(".","")),a!==n)for(var s=0,r=Math.abs(a-n);s<r;s++)a<n?e+="0":t+="0";var c=Number(e)+Number(t)+"",o=Math.max(a,n);return 0!==o?c.substring(0,c.length-o)+"."+c.substring(c.length-o):c},Je=function(e){return/^\d+$/.test(e)?e+".00":/^\d+\.\d$/.test(e)?e+"0":e},ze=g,Ze=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={smaillx:0,smailly:0,bigImg:!1,showMustChoice:!1,selectImg:e.smaillPicture[0].link,nowPrice:99999,allAmount:0,specChoice:[],choiceProductDetail:{},choiceNumber:1,specConfig:[]},a.specValueClick=a.specValueClick.bind(Object(V.a)(Object(V.a)(a))),a.onSmaillMouseOver=a.onSmaillMouseOver.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.specConfig,t=[];if(Array.isArray(e)){for(var a=0;a<e.length;a++)void 0===t[e[a].detailIndex-1]&&(t[e[a].detailIndex-1]=[]),t[e[a].detailIndex-1][e[a].specNameIndex-1]=e[a].specValueIndex;for(var n=0,s=0,r=this.props.goodDetail.length;s<r;s++)n+=this.props.goodDetail[s].amount}this.setState({nowPrice:this.props.goodInfo.nowPrice||99999,specConfig:t,allAmount:n,selectImg:this.props.smaillPicture[0].link,choiceProductDetail:Array.isArray(this.props.specName)&&this.props.specName.length>0?{}:this.props.goodDetail[0]})}},{key:"specValueClick",value:function(e){var t=this;return function(){if(t.state.specChoice[e.specNameIndex-1]!==e.indexx){var a=Object(He.a)(t.state.specChoice);a[e.specNameIndex-1]=e.indexx;for(var n=t.state.specConfig,s=t.state.choiceProductDetail,r=0,c=n.length;r<c;r++){for(var o=!0,i=0,l=n[r].length;i<l;i++)if(a[i]!==n[r][i]){o=!1;break}if(o){s=t.props.goodDetail.find(function(e){return e.indexx===r+1});break}}t.setState({specChoice:a,choiceProductDetail:s})}}}},{key:"choiceNumberChange",value:function(e){var t=e.target.value,a=this.state.choiceNumber,n=this;this.setState({choiceNumber:t},function(){/^[1-9]\d{0,}$/.test(t)||setTimeout(function(){n.setState({choiceNumber:/^[1-9]\d{0,}$/.test(a)?a:1})},200)})}},{key:"minusNumber",value:function(){this.choiceNumberChange({target:{value:this.state.choiceNumber-1}})}},{key:"plusNumber",value:function(){this.choiceNumberChange({target:{value:this.state.choiceNumber+1}})}},{key:"onSmaillMouseOver",value:function(e){var t=this;return function(){t.setState({selectImg:e})}}},{key:"closeMustChoice",value:function(){this.setState({showMustChoice:!1})}},{key:"buyNow",value:function(){if(console.log(this.state),void 0===this.state.choiceProductDetail.amount||this.state.choiceProductDetail.amount<this.state.choiceNumber)return this.setState({showMustChoice:!0});var e=[{goodId:this.props.goodId,productName:this.props.goodInfo.goodName,specName:this.props.specName,specValue:this.props.specValue,specChoice:this.state.specChoice,productDetail:this.state.choiceProductDetail,number:this.state.choiceNumber,storeName:this.props.storeInfo.storeName,nickname:this.props.storeInfo.nickname}];this.props.setBuyProductsAction(e),this.props.history.push("/order")}},{key:"render",value:function(){var e=this,t=this.props.goodInfo;this.props.smaillPicture;return s.a.createElement("div",{className:"spec-wrap"},s.a.createElement("div",{className:"spec-smail-picture-wrap"},s.a.createElement("div",{className:"spec-smail-bigone-wrap"},s.a.createElement("img",{className:"spec-smail-bigone",height:"430px",src:"".concat(ze,"/image/goods/smaill/").concat(this.state.selectImg,"_430x430q90.jpg"),alt:""})),s.a.createElement("div",{className:"spec-smaill-item-wrap"},this.props.smaillPicture.map(function(t,a){return s.a.createElement("div",{key:a,className:"spec-priture-item"},s.a.createElement("div",{className:e.state.selectImg===t.link?"spec-img-selected":"spec-item-img-box",onMouseOver:e.onSmaillMouseOver(t.link)},s.a.createElement("img",{src:"".concat(ze,"/image/goods/smaill/").concat(t.link,"_60x60q90.jpg"),alt:""})))}))),s.a.createElement("div",{className:"spec-goodinfo"},s.a.createElement("h3",{className:"spec-good-name"},t.goodName),s.a.createElement("div",{className:"spec-good-price",style:{background:"url(".concat(ze,"/image/ui/price_background.png) left top")}},s.a.createElement("span",{className:"sgp-f1"},"\u4ef7\u683c"),s.a.createElement("span",{className:"sgp-f2"},"\uffe5"),s.a.createElement("span",{className:"sgp-f3"},Je(this.state.choiceProductDetail.price||this.state.nowPrice))),s.a.createElement("div",{className:"sell-count"},s.a.createElement("div",{className:"sell-count-l"},s.a.createElement("span",{className:"sc-f1"},"\u603b\u9500\u91cf"),s.a.createElement("span",{className:"sc-f2"},t.number)),s.a.createElement("div",{className:"sell-count-r"},s.a.createElement("span",{className:"sc-f1"},"\u7d2f\u8ba1\u8bc4\u4ef7"),s.a.createElement("span",{className:"sc-f2"},this.props.comments.length))),s.a.createElement("div",{className:H()({"show-choice":this.state.showMustChoice})},s.a.createElement("div",{style:{display:this.state.showMustChoice?"block":"none"},className:"show-choice-title"},s.a.createElement("div",{className:"sct-l"},"\u8bf7\u9009\u62e9\u60a8\u8981\u7684\u5546\u54c1\u4fe1\u606f"),s.a.createElement("div",{onClick:this.closeMustChoice.bind(this),className:"sct-r"},"X")),this.props.specName&&this.props.specName.map(function(t,a){return s.a.createElement("div",{className:"specName-wrap",key:a},s.a.createElement("div",{className:"spec-name"},t.specName),s.a.createElement("div",{className:"spec-value"},e.props.specValue&&e.props.specValue.map(function(a,n){return a.specNameIndex===t.indexx?s.a.createElement("div",{className:H()("spec-value-item",{"value-item-selected":e.state.specChoice[t.indexx-1]===a.indexx}),onClick:e.specValueClick(a),key:n},s.a.createElement("span",null,a.specValue),s.a.createElement("i",{className:"item-selected-i",style:{background:"url(".concat(ze,"/image/ui/background_selected.png) 0px 0px no-repeat")}})):null})))}),s.a.createElement("div",{className:"g-num-wrap"},s.a.createElement("div",{className:"good-number-name"},"\u6570\u91cf"),s.a.createElement("div",{className:"good-number-wrap"},s.a.createElement("div",{className:"spec-num-input-wrap"},s.a.createElement("input",{className:"spec-number-input",value:this.state.choiceNumber,onChange:this.choiceNumberChange.bind(this),type:"text"})),s.a.createElement("div",{className:"good-number-plus-minus"},s.a.createElement("div",{onClick:this.plusNumber.bind(this),className:"spec-number-plus",style:{background:"url(".concat(ze,"/image/ui/plus.png) no-repeat"),backgroundSize:"11px 11px",marginBottom:"4px",border:"1px solid #a7a6ab"}}),s.a.createElement("div",{onClick:this.minusNumber.bind(this),className:"spec-number-minus",style:{background:"url(".concat(ze,"/image/ui/minus.png) no-repeat"),backgroundSize:"11px 11px",border:"1px solid #a7a6ab"}}))),s.a.createElement("div",{className:"good-num-unit"},"\u4ef6"),s.a.createElement("div",{className:"good-num-kucun"},"\u5e93\u5b58",void 0===this.state.choiceProductDetail.amount?this.state.allAmount:this.state.choiceProductDetail.amount,"\u4ef6")),s.a.createElement("div",{style:{display:void 0!==this.state.choiceProductDetail.amount?this.state.choiceNumber>this.state.choiceProductDetail.amount?"block":"none":this.state.choiceNumber>this.state.allAmount?"block":"none",marginTop:"10px",marginLeft:"70px"}},s.a.createElement("span",{className:"good-num-over"},s.a.createElement("span",{style:{display:"inline-block",background:"url(".concat(ze,"/image/ui/msg.png) -61px -1px no-repeat"),width:"23px",height:"22px",marginBottom:"-5px"}}),s.a.createElement("span",null,"\u60a8\u6240\u586b\u5199\u6570\u91cf\u5546\u54c1\u8d85\u8fc7\u5e93\u5b58\uff01")))),s.a.createElement("div",{className:"good-buy-wrap"},s.a.createElement("button",{onClick:this.buyNow.bind(this),className:H()("good-buy-now",{"buy-now-noPost":void 0!==this.state.choiceProductDetail.amount?this.state.choiceNumber>this.state.choiceProductDetail.amount||0===this.state.choiceProductDetail.amount:this.state.choiceNumber>this.state.allAmount}),to:"/"},"\u7acb\u5373\u8d2d\u4e70"),s.a.createElement("button",{className:H()("add-shopcat",{"add-shopcat-noPost":void 0!==this.state.choiceProductDetail.amount?this.state.choiceNumber>this.state.choiceProductDetail.amount||0===this.state.choiceProductDetail.amount:this.state.choiceNumber>this.state.allAmount})},"\u52a0\u5165\u8d2d\u7269\u8f66"))))}}]),t}(s.a.Component);var Qe=Object($e.a)(Object(i.b)(function(e){return{goodDetail:e.product.productDetail.goodDetail,goodInfo:e.product.productDetail.goodInfo,smaillPicture:e.product.productDetail.smaillPicture,specConfig:e.product.productDetail.specConfig,specName:e.product.productDetail.specName,specValue:e.product.productDetail.specValue,comments:e.product.productDetail.comments,goodId:e.product.productDetail.goodId}},{setBuyProductsAction:function(e){return function(t){t({type:"SET_BUY_PRODUCTS",payload:e})}}})(Ze)),et=g,tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={showDetail:!0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"showDetial",value:function(e){return function(){this.setState({showDetail:e})}}},{key:"render",value:function(){return s.a.createElement("div",{className:"product-info-wrap"},s.a.createElement("div",{className:"product-info-box"},s.a.createElement("div",{className:"product-info-nav"},s.a.createElement("div",{className:H()("pin-1",{"product-info-selected":this.state.showDetail}),onClick:this.showDetial(!0).bind(this)},"\u5546\u54c1\u8be6\u60c5"),s.a.createElement("div",{className:H()("pin-2",{"product-info-selected":!this.state.showDetail}),onClick:this.showDetial(!1).bind(this)},"\u7d2f\u8ba1\u8bc4\u4ef7")),this.state.showDetail&&this.props.infoPicture.map(function(e,t){return s.a.createElement("div",{className:"info-picture-item",key:t},s.a.createElement("img",{src:"".concat(et,"/image/goods/info/").concat(e.link)}))}),this.props.comments.map(function(e,t){return s.a.createElement("div",{key:t},s.a.createElement("div",null,e.nickname),s.a.createElement("div",null,e.content),s.a.createElement("div",null,e.creaTime))})))}}]),t}(s.a.Component),at=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=ke.a.parse(this.props.location.search);/^\d+/.test(e.goodId)||this.props.history.push(this.props.auth.location||"/"),this.props.setProductDetailAction(e.goodId),this.props.setRouterLocationAction("/product_detail"+this.props.location.search)}},{key:"componentWillUnmount",value:function(){this.props.setProductDetailAction(-1)}},{key:"render",value:function(){var e=this.props.productDetail;return s.a.createElement("div",null,s.a.createElement(ee,null),e.goodDetail.length<1?s.a.createElement("div",null,e.error||e.message||"\u5546\u54c1\u8fd8\u6ca1\u6709\u8be6\u60c5"):s.a.createElement("div",null,s.a.createElement(qe,{storeInfo:e.goodInfo}),s.a.createElement("hr",{className:"store-hr"}),s.a.createElement(Qe,{storeInfo:e.goodInfo}),s.a.createElement(tt,{comments:e.comments,infoPicture:e.infoPicture})))}}]),t}(s.a.Component);var nt=Object(i.b)(function(e){return{auth:e.auth,productDetail:e.product.productDetail}},{setProductDetailAction:function(e){return function(t){-1===e&&t({type:"SET_PRODUCT_DETAIL",payload:I}),b.a.get("".concat(F,"/api/goods/product_detail?goodId=").concat(e)).then(function(e){console.log(e),e.data.success?t({type:"SET_PRODUCT_DETAIL",payload:e.data.payload}):t({type:"SET_PRODUCT_DETAIL",payload:Object(O.a)({},Y.product.productDetail,{message:e.data.message,error:""})})}).catch(function(e){t({type:"SET_PRODUCT_DETAIL",payload:Object(O.a)({},Y.product.productDetail,{error:e.message,message:""})})})}},setRouterLocationAction:Z})(at),st=(a(84),function(e){return s.a.createElement("div",null,"Safety")}),rt=function(e){return s.a.createElement("div",null,"MyInfo")},ct=Object(i.b)(null,{setRouterLocationAction:Z})(function(e){return e.setRouterLocationAction("/member/edit_myinfo"),s.a.createElement("div",null,"EditMyInfo")}),ot=g,it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={address:[],message:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.setRouterLocationAction("/member/address"),-1!==this.props.memberId&&b.a.post(ot+"/api/users/address",{memberId:this.props.memberId}).then(function(t){t.data.success?e.setState({address:t.data.payload,message:""}):e.setState({address:[],message:t.data.message})}).catch(function(t){e.setState({address:[],message:t.message})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,"\u6536\u8d27\u5730\u5740"),s.a.createElement("div",null,s.a.createElement("span",null,"\u7f16\u8f91\u6536\u8d27\u5730\u5740")),s.a.createElement("div",null,s.a.createElement("span",null,"\u8be6\u7ec6\u5730\u5740:"),s.a.createElement("input",{type:"text"})),s.a.createElement("div",null,s.a.createElement("span",null,"\u90ae\u653f\u7f16\u7801:"),s.a.createElement("input",{type:"text"})),s.a.createElement("div",null,s.a.createElement("span",null,"\u6536\u8d27\u4eba\u59d3\u540d:"),s.a.createElement("input",{type:"text"})),s.a.createElement("div",null,s.a.createElement("span",null,"\u624b\u673a\u53f7\u7801:"),s.a.createElement("input",{type:"text"})),s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox"}),s.a.createElement("span",null,"\u9ed8\u8ba4\u6536\u8d27\u5730\u5740\uff1a")),s.a.createElement("button",null,"\u4fdd\u5b58"),s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u6536\u8d27\u4eba"),s.a.createElement("th",null,"\u8be6\u7ec6\u5730\u5740"),s.a.createElement("th",null,"\u90ae\u7f16"),s.a.createElement("th",null,"\u7535\u8bdd/\u624b\u673a"),s.a.createElement("th",null,"\u64cd\u4f5c"))),s.a.createElement("tbody",null,this.state.address.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.receiveName),s.a.createElement("td",null,e.address),s.a.createElement("td",null,e.postcode),s.a.createElement("td",null,e.phone),s.a.createElement("td",null,"\u7f16\u8f91/\u5220\u9664"))})))))}}]),t}(s.a.Component);var lt=Object(i.b)(function(e){return{address:e.auth.address,memberId:void 0===e.auth.user._id?-1:e.auth.user._id}},{setRouterLocationAction:Z})(it),ut=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"ShopCat")}}]),t}(s.a.Component),mt=function(e){return s.a.createElement("div",null,"Message")},dt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"Order")}}]),t}(s.a.Component),pt=g,ht=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.auth.isLogin||this.props.auth.isVerify||this.props.history.push("/login"),s.a.createElement("div",null,s.a.createElement(ee,null),s.a.createElement("div",{className:"member-header"},s.a.createElement("div",{className:"member-header-wrap"},s.a.createElement("div",null,s.a.createElement("img",{height:"34px",width:"140px",src:"".concat(pt,"/image/ui/member-logo.png"),alt:""})),s.a.createElement("div",{className:"mh-choice-box"},s.a.createElement(X.a,{to:"/member"},s.a.createElement("div",{className:"member-header-home"},"\u9996\u9875"))))),this.props.auth.isLogin?s.a.createElement("div",{className:"member-wrap"},s.a.createElement("div",{className:"member-nav"},s.a.createElement("div",null,s.a.createElement("img",{src:"".concat(pt,"/image/member/avatar/").concat(this.props.auth.user.avatar),alt:""})),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member/safety"},"\u5b89\u5168\u8bbe\u7f6e")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member"},"\u4e2a\u4eba\u8d44\u6599")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member/edit_myinfo"},"\u7f16\u8f91\u8d44\u6599")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member/myorder"},"\u6211\u7684\u8ba2\u5355")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member/address"},"\u6536\u8d27\u5730\u5740")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member/shop_cat"},"\u8d2d\u7269\u8f66")),s.a.createElement("li",null,s.a.createElement(X.a,{to:"/member/message"},"\u6d88\u606f")))),s.a.createElement("div",{className:"member-info"},s.a.createElement(h.a,{path:"/member/safety",component:st}),s.a.createElement(h.a,{path:"/member",exact:!0,component:rt}),s.a.createElement(h.a,{path:"/member/edit_myinfo",component:ct}),s.a.createElement(h.a,{path:"/member/address",component:lt}),s.a.createElement(h.a,{path:"/member/shop_cat",component:ut}),s.a.createElement(h.a,{path:"/member/message",component:mt}),s.a.createElement(h.a,{path:"/member/myorder",component:dt}))):s.a.createElement("div",null,"\u52a0\u8f7d\u4e2d\u3002\u3002\u3002"))}}]),t}(s.a.Component);var vt=Object(i.b)(function(e){return{auth:e.auth}})(ht),bt=g,gt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={choiceAddress:{},numbers:[],totalPrice:0,comments:[],errors:{}},a.computeTotal=a.computeTotal.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){if(console.log(this.props),(!Array.isArray(this.props.order.buyProducts)||this.props.order.buyProducts.length<1)&&this.props.history.push(this.props.auth.location||"/"),this.props.setRouterLocationAction("/order"),!this.props.auth.isLogin&&!this.props.auth.isVerify)return this.props.history.push("/login");for(var e=this.props.order.buyProducts,t=[],a=[],n=0,s=0,r=e.length;s<r;s++)a[s]="",t[s]=e[s].number,n=Ye(n,Fe(e[s].productDetail.price,e[s].number));this.setState({numbers:t,totalPrice:n,comments:a})}},{key:"computeTotal",value:function(e,t){for(var a=this.props.order.buyProducts,n=0,s=0,r=a.length;s<r;s++)n=Ye(n,Fe(a[s].productDetail.price,s===e?t:this.state.numbers[s]));return n}},{key:"addressChoice",value:function(e){return function(){this.setState({choiceAddress:e})}}},{key:"numberChange",value:function(e,t){return function(a){var n=a.target.value;if(/^[1-9]\d{0,}$/.test(n)&&!(Number(n)>Number(t))){var s=Object(He.a)(this.state.numbers);s[e]=n,this.setState({numbers:s,totalPrice:this.computeTotal(e,n)})}}}},{key:"numberMinus",value:function(e,t){return function(){this.numberChange(e,t).call(this,{target:{value:Number(this.state.numbers[e])-1}})}}},{key:"numberPlus",value:function(e,t){return function(){this.numberChange(e,t).call(this,{target:{value:Number(this.state.numbers[e])+1}})}}},{key:"commentChange",value:function(e){return function(t){if(!(t.target.value.length>200)){var a=Object(He.a)(this.state.comments);a[e]=t.target.value,this.setState({comments:a})}}}},{key:"submitOrder",value:function(){for(var e=this,t={goodDetailIds:[],numbers:this.state.numbers,addressId:this.state.choiceAddress._id,messages:this.state.comments},a=0,n=this.props.order.buyProducts.length;a<n;a++)t.goodDetailIds.push(this.props.order.buyProducts[a].productDetail._id);b.a.post("".concat(bt,"/api/order/submit_order"),t).then(function(t){if(!t.data.success)return e.setState({errors:Object(O.a)({},e.state.errors,{submitOrder:t.data.message})});e.props.setPayOrderAction(t.data.payload),e.props.history.push("/payorder")}).catch(function(t){e.setState({errors:Object(O.a)({},e.state.errors,{submitOrder:t.message})})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(ee,null),s.a.createElement("h3",null,"\u9009\u62e9\u6536\u8d27\u5730\u5740"),s.a.createElement("div",null,this.props.auth.address.map(function(t,a){return s.a.createElement("div",{onClick:e.addressChoice(t).bind(e),key:a},s.a.createElement("div",null,t.receiveName),s.a.createElement("div",null,t.address),s.a.createElement("div",null,t.postcode),s.a.createElement("div",null,t.phone))}),s.a.createElement(X.a,{to:"/member/address"},s.a.createElement("div",null,"\u6dfb\u52a0\u6536\u8d27\u5730\u5740"))),s.a.createElement("h3",null,"\u786e\u8ba4\u8ba2\u5355\u4fe1\u606f"),this.props.order.buyProducts.map(function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("div",null,t.storeName,", ",t.nickname),s.a.createElement("div",null,s.a.createElement("img",{width:"50px",height:"50px",src:"".concat(bt,"/api/goods/product_logo?goodId=").concat(t.goodId),alt:""})),s.a.createElement("div",null,t.productName),Array.isArray(t.specChoice)?t.specChoice.map(function(e,a){return s.a.createElement("div",{key:a},t.specName[a].specName,":",t.specValue[e-1].specValue)}):null,s.a.createElement("div",null,"\u5355\u4ef7",Je(t.productDetail.price)),s.a.createElement("div",null,s.a.createElement("span",{onClick:e.numberMinus(a,t.productDetail.amount).bind(e)},"-"),"\u6570\u91cf",s.a.createElement("input",{onChange:e.numberChange(a,t.productDetail.amount).bind(e),value:e.state.numbers[a],type:"text"}),s.a.createElement("span",{onClick:e.numberPlus(a,t.productDetail.amount).bind(e)},"+")),s.a.createElement("div",null,"\u5e93\u5b58\uff1a",t.productDetail.amount),s.a.createElement("div",null,"\u5c0f\u8ba1",Je(Fe(t.productDetail.price,e.state.numbers[a]))),s.a.createElement("div",null,"\u7ed9\u5356\u5bb6\u7559\u8a00\uff1a",s.a.createElement("input",{onChange:e.commentChange(a).bind(e),value:e.state.comments[a],type:"text"})))}),s.a.createElement("div",null,"\u603b\u8ba1\uff1a",Je(this.state.totalPrice)),s.a.createElement("button",{onClick:this.submitOrder.bind(this)},"\u63d0\u4ea4\u8ba2\u5355"),this.state.errors.submitOrder&&s.a.createElement("div",null,this.state.errors.submitOrder))}}]),t}(s.a.Component);var Et=Object(i.b)(function(e){return{auth:e.auth,order:e.order}},{setRouterLocationAction:Z,setPayOrderAction:function(e){return function(t){t({type:"SET_PAY_ORDER",payload:e})}}})(gt);var ft=Object(i.b)(function(e){return{auth:e.auth}})(function(e){return s.a.createElement("div",null,s.a.createElement("h2",null,"\u4f18\u9009 \u6536\u94f6\u53f0"),s.a.createElement("span",null,e.auth.user.nickname))}),yt=g,Ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={payway:"alipay",property:-1,errors:{}},a.paywayChange=a.paywayChange.bind(Object(V.a)(Object(V.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.setRouterLocationAction("/payorder"),this.props.auth.isLogin||this.props.history.push("/login"),b.a.get("".concat(yt,"/api/users/get_property")).then(function(t){if(!t.data.success)return e.setState({errors:Object(O.a)({},e.state.errors,{wallet:t.data.message})});e.setState({property:t.data.payload,errors:Object(O.a)({},e.state.errors,{wallet:""})})}).catch(function(t){e.setState({errors:Object(O.a)({},e.state.errors,{wallet:"\u670d\u52a1\u5668\u5fd9"})})})}},{key:"paywayChange",value:function(e){this.setState({payway:e.target.value})}},{key:"setPayway",value:function(e){return function(){this.setState({payway:e})}}},{key:"render",value:function(){console.log("payprops",this.props),console.log("paystate",this.state);var e=this.props.order.payOrder,t=this.props.order.buyProducts;return s.a.createElement("div",null,s.a.createElement(ft,null),"success"!==this.props.order.payStatus?null:s.a.createElement("h1",null,"\u4ed8\u6b3e\u6210\u529f"),[j(t)?null:t.map(function(e,t){return s.a.createElement("div",{key:t},s.a.createElement("div",null,e.productName),s.a.createElement("div",null,"\u5356\u5bb6\uff1a",e.nickname))}),j(e)?null:s.a.createElement("div",{key:"sumPrice"},e.sumPrice,"\u5143")],s.a.createElement("h2",null,"\u4ed8\u6b3e\u65b9\u5f0f"),s.a.createElement("div",{onClick:this.setPayway("alipay").bind(this)},s.a.createElement("input",{onChange:this.paywayChange,checked:"alipay"===this.state.payway,name:"payway",type:"radio",value:"alipay"}),s.a.createElement("span",null,"\u652f\u4ed8\u5b9d\u626b\u7801\u652f\u4ed8")),s.a.createElement("div",{onClick:this.setPayway("wallet").bind(this)},s.a.createElement("input",{onChange:this.paywayChange,checked:"wallet"===this.state.payway,name:"payway",type:"radio",value:"wallet"}),s.a.createElement("span",null,"\u94b1\u5305\u4f59\u989d\u652f\u4ed8")),j(e)?null:"alipay"===this.state.payway?s.a.createElement("div",null,s.a.createElement("iframe",{height:"835px",width:"100%",src:e.alipayURL,frameBorder:"0"})):s.a.createElement("div",null,this.state.errors.wallet?s.a.createElement("div",null,this.state.errors.wallet):-1===this.state.property?null:s.a.createElement("div",null,s.a.createElement("div",null,"\u8ba2\u5355\u53f7\uff1a",e.orderno),s.a.createElement("div",null,"\u8d26\u6237\u4f59\u989d\uff1a",this.state.property),s.a.createElement("div",null,s.a.createElement("input",{type:"text"}),s.a.createElement("button",null,"\u70b9\u51fb\u53d1\u9001\u9a8c\u8bc1\u7801")))))}}]),t}(s.a.Component);var Nt=Object(i.b)(function(e){return{order:e.order,auth:e.auth}},{setRouterLocationAction:Z})(Ot);if("object"===typeof window){var jt=window.localStorage.jwtToken;jt&&(K(jt),b.a.get(g+"/api/users/current").then(function(e){e.data.success?(K(jt),W(e.data.payload)):(K(!1),W({}))}).catch(function(e){K(!1),W({})}))}var kt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(h.a,{path:"/",exact:!0,component:se}),s.a.createElement(h.a,{path:"/register",component:pe}),s.a.createElement(h.a,{path:"/login",component:Ne}),s.a.createElement(h.a,{path:"/search_product",exact:!0,component:Ge}),s.a.createElement(h.a,{path:"/search_products",exact:!0,component:Ue}),s.a.createElement(h.a,{path:"/product_detail",exact:!0,component:nt}),s.a.createElement(h.a,{path:"/member",component:vt}),s.a.createElement(h.a,{path:"/order",exact:!0,component:Et}),s.a.createElement(h.a,{path:"/payorder",exact:!0,component:Nt}))}}]),t}(n.Component);c.a.render(s.a.createElement(function(){return s.a.createElement(i.a,{store:B},s.a.createElement(o.a,null,s.a.createElement(kt,null)))},null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.47bdc2ed.chunk.js.map