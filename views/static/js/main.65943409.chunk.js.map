{"version":3,"sources":["utils/config.js","components/PrivateRoute/subpage/WaitVerify.js","utils/tools.js","components/PrivateRoute/index.js","flux/reducers/register.js","utils/validator.js","flux/reducers/authReducer.js","flux/reducers/product.js","flux/reducers/order.js","flux/reducers/myOrders.js","flux/reducers/chat.js","flux/reducers/messageBox.js","flux/reducers/index.js","flux/store.js","flux/actions/productActions.js","flux/actions/messageAction.js","flux/actions/orderActions.js","flux/actions/authActions.js","flux/actions/chatActions.js","utils/socket.js","utils/setAuth.js","components/Header/index.js","containers/Home/subpage/Slide.js","containers/Home/subpage/SmaillType.js","containers/Home/subpage/ProductBox.js","components/Footer/index.js","containers/Home/index.js","containers/Register/subpage/Success.js","containers/Register/index.js","containers/Login/subpage/Account.js","containers/Login/subpage/PhoneLogin.js","containers/Login/index.js","components/Goods/SearchProductsList.js","containers/SearchProduct/subpage/SubStore.js","containers/SearchProduct/index.js","containers/SearchProduct/GotoSearchProduct.js","components/StoreHeader/index.js","containers/ProductDetail/subpage/Spec.js","containers/ProductDetail/subpage/ProductInfo.js","containers/ProductDetail/index.js","containers/UserInfo/subpage/Safety.js","containers/UserInfo/subpage/MyInfo.js","containers/UserInfo/subpage/Address.js","components/OrderItem/index.js","components/CommentBox/index.js","containers/UserInfo/subpage/MyOrder.js","containers/UserInfo/index.js","containers/Order/index.js","containers/PayOrder/subpage/PayHeader.js","containers/PayOrder/subpage/Success.js","containers/PayOrder/index.js","containers/ShopingCart/index.js","components/Chat/subpage/Message.js","components/Chat/subpage/Contacts.js","components/Chat/subpage/Search.js","components/Chat/subpage/ChatWindow.js","components/Chat/index.js","components/MessageBox/index.js","components/MessageBox/Confirm.js","components/MessageBox/Loading.js","App.js","index.js"],"names":["config","WaitVerify","props","_react_16_8_5_react_default","a","createElement","className","message","intMultiplication","b","deci","test","replace","length","result","Number","substring","intAdd","deci1","deci2","i","len","Math","abs","maxDeci","max","transPrice","price","formatDate","date","year","d","Date","isNaN","getDay","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","month","days","push","transSearchKeyword","q","trim","encodeURIComponent","transURL","url","reverse","cutString","str","connect","state","isLogin","auth","isVerify","_ref","Component","component","rest","Object","objectWithoutProperties","Route","assign","render","subpage_WaitVerify","Redirect","to","concat","location","pathname","search","initialState","step","phone","isEmpty","value","undefined","keys","isPhone","number","user","address","shopCar","authReducer","arguments","action","type","objectSpread","payload","searchGoods","searchStores","searchKey","productDetail","comments","goodDetail","goodInfo","infoPicture","smaillPicture","productReducer","productDetailInitialState","buyProducts","payOrder","payStatus","orderReducer","end","limit","orders","status","waitPay","waitSend","waitSign","waitComment","finish","myOrdersInitState","myOrdersReducer","contacts","messagesNotRead","chatnow","messages","sendingMessages","hideWindow","hideChat","chatReducer","map","userId","target","content","toConsumableArray","sender","origin","msg","filter","find","notRead","Array","isArray","newMsg","nickname","avatar","m","n","newState","here","wait","showAlert","showConfirm","confirmMessage","sure","cancel","messageBoxReducer","rootReducer","combineReducers","register","product","order","myOrders","chat","messageBox","middleWare","thunk","window","localStore","localStorage","getItem","JSON","parse","err","console","error","composeMiddlewares","applyMiddleware","apply","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","compose","subscribe","s","getState","setItem","stringify","HOST","alertMessageAction","dispatch","setBuyProductsAction","products","setPayOrderAction","setRouterLocationAction","setAddressAction","initContacts","contactItemToChatAction","item","contactId","WS_HOST","socket","ws","initSocket","token","WebSocket","onopen","e","setInterval","send","onmessage","data","setAuthToken","shopCarInfo","storeId","storeName","j","len2","setShopCarAction","receiveChatMessageAction","onclose","log","onerror","axios","defaults","headers","common","removeItem","setCurrentUser","close","AppHeader","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","history","hello","Link","userinfo","onClick","loginOut","bind","href","withRouter","slide","slideboxs","slideImg","goodId","bgimg","bgcolor","load","0","1","2","3","4","slideStop","slideIndex","slideInterval","slideTimeout","slideAnimate","assertThisInitialized","gotoSlide","slideStart","_this2","setState","document","getElementsByClassName","style","opacity","clearInterval","clearTimeout","next","before","setAttribute","beforeOpa","nextOpa","interval","setTimeout","zIndex","defineProperty","time","timeout","nowtime","index","currentTarget","getAttribute","_this3","onMouseLeave","key","backgroundColor","src","onMouseOver","_","cnames","slide-nav-selected","SmaillType","smaillType","_id","smaillName","detail","classnames","bigTypeIndex","random","detailName","ProductBox","loading","success","productBigTypeId","get","then","catch","background","productBackImage","color","productBigType","logo","title","goodName","name","nowPrice","React","gotoTop","height","documentElement","scrollHeight","ms","scrollTop","Footer","Home","bigType","selectedBigid","recommendProducts","bigId","bgImg","navTop","tit","detailId","onBigTypeSelect","CurrentSmaillType","res","bigid","getSmaill","preventDefault","keyword","setSearchKeyAction","_this4","components_Header","onSubmit","searchProduct","onChange","searchInputChange","placeholder","width","alt","onBigTypeLeave","nav-l-item-sel","bigName","subpage_SmaillType","Slide","lib_default","offset","subpage_ProductBox","src_components_Footer","RegisterSuccess","textAlign","marginTop","sendingSMS","waitSecond","Register","smscode","password","password2","registerSuccess","edit","errors","inputTextChange","inputTextFocus","inputTextBlur","innerText","post","submit","id","subpage_Success","registerSubmit","method","onFocus","onBlur","regi-inp-err","sendSMS","loging","Account","account","inputChange","inputFocus","refs","info","prev","formSubmit","htmlFor","ref","waitSMS","PhoneLogin","sms","msm","sms_code","response","Login","loginWay","params","queryString","way","changeLoginWay","subpage_PhoneLogin","subpage_Account","SearchProductsList","rowlast","SubStore","stores","detailTypes","nextProps","goods","storeIds","repeat","jsonStoreIds","smaillId","detailType","crum-selected","SearchProduct","condition","onscroll","bodyScrollTop","documentScrollTop","body","getScrollTop","compatMode","clientHeight","bodyScrollHeight","documentScrollHeight","getDocumentHeight","group","reduce","count","searchProductSubmit","keywordChangeHandler","subpage_SubStore","Goods_SearchProductsList","lineHeight","GotoSearchProduct","StoreHeader","onSearchInputChange","storeInfo","searchAllProduct","searchStoreProduct","initShopCar","Spec","smaillx","smailly","bigImg","showMustChoice","selectImg","link","allAmount","specChoice","choiceProductDetail","choiceNumber","specConfig","specValueClick","onSmaillMouseOver","newConfig","detailIndex","specNameIndex","specValueIndex","amount","specName","indexx","isOK","choiceNumberChange","buyProduct","goodDetailId","spec","v","specValue","val","addShopCar","show-choice","display","closeMustChoice","value-item-selected","plusNumber","backgroundSize","marginBottom","border","minusNumber","marginLeft","buyNow","buy-now-noPost","add-shopcat-noPost","ProductInfo","showDetail","product-info-selected","showDetial","creaTime","ProductDetail","setProductDetailAction","src_components_StoreHeader","subpage_Spec","subpage_ProductInfo","Safety","newEmail","newPhone","newPhone2","smsCode1","smsCode2","newPassword","smsCode3","smsState","property","pay","showProperty","btn","email","smsCode","emailSubmit","phoneSubmit","_this5","passwordSubmit","_this6","editChange","checkProperty","editInputChange","editEmailSubmit","editPhoneSubmit","editPasswordSubmit","paySubmit","transDate","sending","MyInfo","birthDate","birthMonth","birthYear","reallyName","idCard","gender","years","genderRadioChange","birthChange","diff","userInfo","birth","parseInt","_this$setState","files","size","formData","FormData","append","updateUserInfo","avatarChange","hidefocus","reallyNameInputChange","idCardInputChange","checked","defaultValue","day","lastLogin","initState","editState","detailAddress","postcode","receiveName","receivePhone","isDefault","Address","opts","min","formInputChange","setDefailtChange","saveAddress","cancelEdit","borderColor","cellSpacing","cellPadding","default-ads","editStateChange","deleteAddress","memberId","OrderItem","orderno","sumPrice","sellerId","sellerName","sellerAvatar","nav","hasNullArray","handler","postWay","expNumber","isPay","isComment","isSign","isSend","CommentBox","comment","pictures","commentTypeChange","orderDetailId","closeCommentBox","picture","p","indexOf","commentChange","cols","rows","choicePicture","pictureChange","deletePicture","submitComment","Order","showCommentBox","commentOrderDetailId","route","orderDetail","sign","confirmMessageAction","prevPageOrdersAction","prod","productArray","isNullArray","_this$props$myOrders$","routeChangeHandler","uoi-hit","nextPage","u-o-next-void","prevPage","u-o-prev-void","src_components_OrderItem","orderItemOperatorHandler","src_components_CommentBox","UserInfo","mn-navselected","Switch","components_PrivateRoute","path","exact","MyOrder","choiceAddress","numbers","totalPrice","computeTotal","defaultAddress","nums","numberChange","submitOrder","request","goodDetailIds","addressId","shopCarIds","shopCarId","wo-add-item-choi","addressChoice","numberMinus","numberPlus","commentFocus","commentBlur","payOrderEnd","PayOrder","payway","paywayChange","wallet","subpage_PayHeader","PayOrder_subpage_Success","productName","setPayway","alipayURL","frameBorder","ShopingCart","bodyStatus","navStatus","choiceAll","choiceStores","choiceProducts","onresize","isHide","inter","out","shopCarBody","marginRight","timer","now","shopCarProductsLength","forEach","showCarBody","computeChoice","computeChoiceCount","shopcar-nav-transparent","showNav","hideNav","shop-mab-focus","toggleChat","allCheckboxChange","storeCheckboxChange","productCheckboxChange","deleteShopProduct","cashierShopCar","sc-empty","subMessage","messageNotReadItemToChatAction","messageItemToChatAction","msg-item-select","contactClick","online","offline","isOnline","Search","searchAns","shakeGetAns","stopPropagation","keywordChange","contactsClick","addContactsClick","transMessage","images","match","msgs","split","ChatWindow","hasError","showChatImage","chatImage","scrollToButton","textarea","ondragenter","ondragleave","ondragover","ondrop","file","dataTransfer","setWaitMessageAction","innerHTML","onclick","img","msgNow","msgNext","focus","chatMessageBox","swingChatWindowAction","wss","sendingMessageAction","html","sendMessage","swingChatWindow","dangerouslySetInnerHTML","__html","onInput","textareaInput","contentEditable","suppressContentEditableWarning","onKeyPress","textareaPress","closeChatImage","hide","Chat","getElementById","onmousedown","startX","clientX","startY","clientY","top","getComputedStyle","left","onmousemove","onmouseup","onmouseleave","routeChange","crr-select-bg","subpage_Message","subpage_Contacts","subpage_Search","subpage_ChatWindow","MessageBox","box","closeAlertAction","closeConfirmAction","jwtToken","src_containers_ShopingCart","src_components_Chat","src_components_MessageBox","MessageBox_Confirm","ReactDOM","hydrate","es","BrowserRouter","src_App_0"],"mappings":"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","file":"static/js/main.65943409.chunk.js","sourcesContent":["export default {\r\n //  HOST: 'http://127.0.0.1:5000',\r\n\t// WS_HOST: 'ws://127.0.0.1:5000'\r\n  HOST: 'http://118.126.108.36',\r\n\tWS_HOST: 'ws://118.126.108.36'\r\n}\r\n","import React from 'react'\r\n\r\nimport './index.scss'\r\n\r\nconst WaitVerify = props => (\r\n  <div className=\"wait-verify\">\r\n    <h2>{props.message}</h2>\r\n  </div>\r\n)\r\n\r\nexport default WaitVerify\r\n","// 将两个数转换成整数相乘\r\nexport const intMultiplication = function (a, b) {\r\n  a = a+''\r\n  b = b+''\r\n  var deci = 0  // 2个操作数的小数位数\r\n  // 判断是否小数\r\n  if (/^\\d+\\.\\d+$/.test(a)) {\r\n    deci += a.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    a = a.replace('.', '')\r\n  }\r\n  if (/^\\d+\\.\\d+$/.test(b)) {\r\n    deci += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    b = b.replace('.', '')\r\n  }\r\n  var result = (Number(a) * Number(b)) + ''\r\n  return deci > 0 ? result.substring(0, result.length - deci) + '.' + result.substring(result.length - deci) : result\r\n}\r\n\r\n// 将两个数转换成整数相加\r\nexport const intAdd = function (a, b) {\r\n  a = a + ''\r\n  b = b + ''\r\n  var deci1 = 0;\r\n  var deci2 = 0;\r\n  if (/^\\d+\\.\\d+$/.test(a)) {\r\n    deci1 = a.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    a = a.replace('.', '')\r\n  }\r\n  if (/^\\d+\\.\\d+$/.test(b)) {\r\n    deci2 += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    b = b.replace('.', '')\r\n  }\r\n  if (deci1 !== deci2) {\r\n    for (var i = 0, len = Math.abs(deci1 - deci2); i < len; i++) {\r\n      if (deci1 < deci2) {\r\n        a += '0'\r\n      }else {\r\n        b += '0'\r\n      }\r\n    }\r\n  }\r\n  var result = Number(a) + Number(b) + ''\r\n  var maxDeci = Math.max(deci1, deci2)\r\n  return maxDeci !== 0 ? result.substring(0, result.length - maxDeci) + '.' + result.substring(result.length - maxDeci) : result\r\n}\r\n\r\nexport const transPrice = function (price) {\r\n  return /^\\d+$/.test(price) ? price + '.00' :  // 没有小数\r\n  /^\\d+\\.\\d$/.test(price) ? price + '0' : price  // 一位小数\r\n}\r\n\r\nexport const formatDate = function(date, year) {\r\n  const d = new Date(date)\r\n  if (Number.isNaN(d.getDay())) {\r\n    return ''\r\n  }\r\n  var format = year ? d.getFullYear() + '-' : ''\r\n\r\n  return (format + (d.getMonth() + 1) + '-' +\r\n    d.getDate() + ' ' +\r\n    d.getHours() + ':' +\r\n    d.getMinutes() + ':' +\r\n    d.getSeconds())\r\n}\r\n\r\nexport const getDate = function(year, month) {\r\n  if (!/^(19|20)\\d{2}$/.test(year) || !/^([1-9]|1[012])$/.test(month)) return null\r\n  var date = new Date(year, month, 0).getDate()\r\n  var days = []\r\n  for (var i = 1; i <= date; i++) {\r\n    days.push(i)\r\n  }\r\n  return days;\r\n}\r\n\r\nexport const transSearchKeyword = (q) => {\r\n  if (typeof(q) !== 'string') return null\r\n  q = q.trim()\r\n  if (q === '') return null\r\n  return encodeURIComponent(q.replace(/([ ,.|]+)/g, '+'))\r\n}\r\n\r\nexport const transURL = (url, reverse) => {\r\n  if (typeof url !== 'string' || url === '')\r\n    return ''\r\n  if (reverse)\r\n    return url.replace(/OxO/g, '/').replace(/OdO/g, '=').replace(/OwO/g, '?')\r\n  return url.replace(/\\//g, 'OxO').replace(/\\=/g, 'OdO').replace(/\\?/g, 'OwO')\r\n}\r\n\r\nexport const cutString = (str, len) => {\r\n  if (typeof str !== 'string') return '';\r\n  len = len || 10\r\n  return str.length > len ? str.substring(0, len) + '...' : str\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport WaitVerify from './subpage/WaitVerify'\r\n\r\nimport { transURL } from '../../utils/tools'\r\n\r\nconst PrivateRoute = ({component: Component, isLogin, isVerify, ...rest}) => (\r\n  <Route {...rest} render={(props) => (\r\n      isLogin ? <Component {...props} />\r\n      : isVerify  // 本地 token 验证中\r\n      ? <WaitVerify message=\"账号认证中....\" />\r\n      : <Redirect to={`/login?prev=${transURL(props.location.pathname + props.location.search)}`} />\r\n    )} />\r\n)\r\n\r\n// Redirect 传当前 URL 路径\r\n// to={{\r\n//   pathname: `/login?prev=${transURL(props.location.pathname + props.location.search)}`,\r\n//   state: {from: props.location} //通过将字符串中Redirect的toprop替换为对象并传递一个state键，该键的值是location用户尝试访问的路径的当前值。\r\n// }}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isLogin: state.auth.isLogin,\r\n    isVerify: state.auth.isVerify\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(PrivateRoute)\r\n","let initialState = {\r\n\tstep: 0,\r\n\tphone: '13888888888'\r\n}\r\nexport default (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase \"STEP_CHANGE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstep: action.step\r\n\t\t\t}\r\n\t\tcase \"GET_PHONE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tphone: action.phone\r\n\t\t\t}\r\n\t\tcase \"NEW_USER\":\r\n\t\t\treturn action.user;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","export const isEmpty = value => {\r\n\treturn value === undefined || value === null ||\r\n\t\t(typeof value === 'object' && Object.keys(value).length === 0) ||\r\n\t\t(typeof value === 'string' && value.length === 0)\r\n}\r\n\r\nexport const isPhone = number => {\r\n\treturn /^1[0-9]{10}$/.test(number);\r\n}\r\n\r\nexport const isLength = (value, opts) => {\r\n\tif (typeof value !== 'string') return false;\r\n\treturn (value.length >= opts.min && value.length <= opts.max)\r\n}\r\n\r\nexport const isEmail = email => {\r\n  return /^[A-z\\d]+([-_.][A-z\\d]+)*@([A-z\\d]+[-.])+[A-z\\d]{2,4}$/.test(email)\r\n}\r\n","import {isEmpty} from '../../utils/validator'\r\n\r\nvar initialState = {\r\n  location: '',  // 记录路由地址\r\n\tisLogin: false,\r\n\tuser: {},\r\n  isVerify: true,  // 账号验证中\r\n  address: [],  // 收货地址\r\n  shopCar: [],  // 购物车\r\n}\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_CURRENT_USER': // 登陆或 App.js 验证 localStorage中 token 时触发\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLogin: !isEmpty(action.payload),\r\n\t\t\t\tuser: !isEmpty(action.payload) ? action.payload : {},\r\n        isVerify: false,  // 设置 auth.isVerifu = false (验证结束)\r\n        // address: action.payload.address || []\r\n\t\t\t}\r\n    case 'SET_ROUTER_LOCATION':\r\n      return {\r\n        ...state,\r\n        location: action.payload\r\n      }\r\n    case 'SET_SHOP_CAR':\r\n      return {\r\n        ...state,\r\n        shopCar:action.payload\r\n      }\r\n    case 'SET_ADDRESS':\r\n      return {\r\n        ...state,\r\n        address: action.payload\r\n      }\r\n    case 'UPDATE_USER_INFO':\r\n      return {\r\n        ...state,\r\n        user: action.payload\r\n      }\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport default authReducer;\r\n","var initialState = {\n  searchGoods: [],\n  searchStores: [],\n  searchKey: '',\n  productDetail: {\n    comments: [],\n    goodDetail: [],\n    goodInfo: {},\n    infoPicture: [],\n    smaillPicture: [{}],\n    message: '加载中。。。'\n  }\n}\n\nvar productReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case 'SET_SEARCH_GOODS':\n      return {\n        ...state,\n        searchGoods: action.payload\n      }\n    case 'SET_SEARCH_STORES':\n      return {\n        ...state,\n        searchStores: action.payload\n      }\n    case 'SET_SEARCH_KEY':\n      return {\n        ...state,\n        searchKey: action.payload\n      }\n    case 'SET_PRODUCT_DETAIL':\n      return {\n        ...state,\n        productDetail: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default productReducer\nexport const productDetailInitialState = initialState","const initialState = {\r\n  buyProducts: [],   // 待购买的商品\r\n  payOrder: {},\r\n  payStatus: 'nosuccess',\r\n}\r\n\r\nconst orderReducer = (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n    case 'SET_BUY_PRODUCTS':\r\n      return {\r\n        ...state,\r\n        buyProducts: action.payload\r\n      }\r\n    case 'SET_PAY_ORDER':\r\n      return {\r\n        ...state,\r\n        payOrder: action.payload\r\n      }\r\n    case 'PAY_SUCCESS':\r\n      return {\r\n        ...state,\r\n        payStatus: 'success'\r\n      }\r\n\r\n    case 'PAY_ORDER_SUCCESS':\r\n      return {\r\n        ...state,\r\n        buyProducts: [],   // 待购买的商品\r\n        payOrder: {},\r\n        payStatus: 'nosuccess',\r\n      }\r\n    default:\r\n      return state\r\n\t}\r\n}\r\nexport default orderReducer\r\n","/**\r\n * FireFox 初始 store 深层对象消失，从 order 单独提取出来\r\n */\r\nconst initialState = { // 我的订单\r\n  end: true,\r\n  limit: 0,\r\n  orders: [],\r\n  status: {\r\n    waitPay: 0,\r\n    waitSend: 0,\r\n    waitSign: 0,\r\n    waitComment: 0,\r\n    finish: 0\r\n  }\r\n}\r\nconst myOrdersReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'GET_MY_ORDERS':\r\n      return {\r\n        ...action.payload\r\n      }\r\n    case 'PREV_PAGE_ORDERS':\r\n      return {\r\n        ...state,\r\n        end: false,\r\n        limit: state.limit > 0 ? state.limit -1 : state.limit\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const myOrdersInitState = initialState\r\n\r\nexport default myOrdersReducer\r\n\r\n","const initialState = {\r\n  contacts: [], // 联系人\r\n  messagesNotRead: [],\r\n  chatnow: undefined,\r\n  messages: [],\r\n  sendingMessages: [/*{\r\n    target: 0,\r\n    message: ''\r\n  }*/],  // 发送中的消息\r\n  hideWindow: true,\r\n  hideChat: true\r\n}\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'SEND_CHAT_MESSAGE_BACK':  // 发送消息回执\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId !== action.payload.target ? i : {\r\n            ...i,\r\n            content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}]\r\n          }\r\n        }),\r\n        sendingMessages: state.sendingMessages.filter(i => i.target !== action.payload.target)\r\n      }\r\n    case 'PUT_SENDING_MESSAGE':\r\n      return {\r\n        ...state,\r\n        sendingMessages: [...state.sendingMessages, {target: state.chatnow, message: action.payload}]\r\n      }\r\n    case 'RECEIVE_CHAT_MESSAGE': // 收到聊天消息\r\n      var origin = state.messagesNotRead.find(i => i.userId === action.payload.origin)\r\n      // 聊天人在未读列表中\r\n      if (origin) {\r\n        return {\r\n          ...state,\r\n          messagesNotRead: state.messagesNotRead.map(i => {\r\n            return i.userId === action.payload.origin ? {\r\n              ...i,\r\n              notRead: i.notRead + 1,\r\n              content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}],\r\n            } : i\r\n          })\r\n        }\r\n      }\r\n      origin = state.messages.find(i => i.userId === action.payload.origin)\r\n       // 聊天对象在已读消息列表中\r\n      if (origin) {\r\n         // 是当前聊天对象\r\n        if (origin.userId === state.chatnow) {\r\n          return {\r\n            ...state,\r\n            messages: state.messages.map(i => {\r\n              return i.userId === action.payload.origin ? {\r\n                ...i,\r\n                content: Array.isArray(i.content) ? i.content.concat([{sender: action.payload.origin, msg: action.payload.content}]) : [{sender: action.payload.origin, msg: action.payload.content}]\r\n              } : i\r\n            })\r\n          }\r\n        }else {\r\n          // 不是当前聊天对象，转移到未读列表中\r\n          var newMsg = [{sender: action.payload.origin, msg: action.payload.content}]\r\n          return {\r\n            ...state,\r\n            messages: state.messages.filter(i => i.userId !== action.payload.origin),\r\n            messagesNotRead: [{\r\n              ...origin,\r\n              content: Array.isArray(origin.content) ? origin.content.concat(newMsg) : newMsg,\r\n              notRead: 1,\r\n            }].concat(state.messagesNotRead)\r\n          }\r\n        }\r\n      }\r\n       // 聊天对象新来的\r\n      return {\r\n        ...state,\r\n        messagesNotRead: [{\r\n          userId: action.payload.origin,\r\n          nickname: action.payload.nickname,\r\n          avatar: action.payload.avatar,\r\n          notRead: 1,\r\n          content: [{sender: action.payload.origin, msg: action.payload.content}]\r\n        }].concat(state.messagesNotRead)\r\n      }\r\n    case 'INIT_CONTACTS':\r\n      var m = [], n = [];\r\n      for (let i = 0, len = action.payload.length; i < len; i++) {\r\n        if (action.payload[i].notRead > 0) {\r\n          n.push(action.payload[i])\r\n        }else {\r\n          m.push(action.payload[i])\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        messagesNotRead: n,\r\n        messages: m\r\n      }\r\n\r\n    case 'MESSAGE_NOT_READ_ITEM_TO_CHAT': // 未读消息到聊天窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        messagesNotRead: state.messagesNotRead.filter(i => i.userId !== action.payload.userId),\r\n        messages: [action.payload].concat(state.messages),\r\n        hideWindow: false\r\n      }\r\n    case 'CONTACT_ITEM_TO_CHAT': // 联系人和找人 item 到聊天窗口\r\n      var newState = {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false,\r\n        hideChat: false,\r\n        messagesNotRead: state.messagesNotRead.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n            if (!here) {\r\n              action.payload.content = i.content\r\n            }\r\n          return here\r\n        }),\r\n        messages: state.messages.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n          if (!here) {\r\n            action.payload.content = i.content\r\n          }\r\n          return here\r\n        })\r\n      }\r\n      // 聊天人已在消息列表中\r\n      if (newState.messagesNotRead.length !== state.messagesNotRead.length || newState.messages.length !== state.messages.length) {\r\n        return {\r\n          ...newState,\r\n          messages: [action.payload].concat(newState.messages)\r\n        }\r\n      }\r\n      // 不在消息列表中\r\n      action.payload.content = []\r\n      return {\r\n        ...newState,\r\n        messages: [action.payload].concat(state.messages)\r\n      }\r\n\r\n    case 'MESSAGE_ITEM_TO_CHAT':  // 已读消息到窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false\r\n      }\r\n    case 'SET_CONTACTS':  // 获得联系人\r\n      return {\r\n        ...state,\r\n        contacts: action.payload\r\n      }\r\n    case 'SET_WAIT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId === state.chatnow ? {...i, wait: action.payload} : i\r\n        })\r\n      }\r\n    case 'TOGGLE_CHAT':\r\n      return {\r\n        ...state,\r\n        hideChat: action.payload\r\n      }\r\n    case 'SWING_CHAT_WINDOW':\r\n      return {\r\n        ...state,\r\n        hideWindow: action.payload\r\n      }\r\n    case 'LOGIN_OUT_CHAT':\r\n      return initialState\r\n    default:\r\n      return state\r\n  }\r\n}\r\nexport default chatReducer\r\n","const initialState = {\r\n  showAlert: false,  // 消息框\r\n  message: '',\r\n  showConfirm: false, // 确认框\r\n  confirmMessage: '',\r\n  sure: null,  // 确认函数\r\n  cancel: null  // 取消函数\r\n}\r\n\r\nconst messageBoxReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'ALERT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showAlert: true,\r\n        message: action.payload\r\n      }\r\n    case 'CLOSE_ALERT':\r\n      return {\r\n        ...state,\r\n        showAlert: false,\r\n        message: ''\r\n      }\r\n    case 'CONFIRM_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showConfirm: true,\r\n        confirmMessage: action.payload.message || '',\r\n        sure: action.payload.sure || null,\r\n        cancel: action.payload.cancel || null\r\n      }\r\n    case 'CLOSE_CONFIRM':\r\n      return {\r\n        ...state,\r\n        showConfirm: false,\r\n        confirmMessage: '',\r\n        sure: null,\r\n        cancel: null\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default messageBoxReducer\r\n","/**\r\n * 合并多个 reducer 成一个大的reducer\r\n */\r\n\r\nimport {combineReducers} from 'redux'\r\n\r\nimport register from './register'\r\nimport auth from './authReducer'\r\nimport product from './product'\r\nimport order from './order'\r\nimport myOrders from './myOrders'\r\nimport chat from './chat'\r\nimport messageBox from './messageBox'\r\n\r\nlet rootReducer = combineReducers({\r\n\tregister,\r\n\tauth,\r\n  product,\r\n  order,\r\n  myOrders,\r\n  chat,\r\n  messageBox\r\n});\r\n\r\nexport default rootReducer;\r\n","import {createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducers/index.js'\r\n\r\nlet middleWare = [thunk];\r\nlet initialState = {};\r\n// 从本地储存获取 store 初始状态\r\nif (typeof(window) === 'object') {\r\n  var localStore = window.localStorage.getItem('localStoreState')\r\n  if (localStore) {\r\n    try {\r\n      initialState = JSON.parse(localStore)\r\n    }catch(err) {\r\n      console.error(err)\r\n    }\r\n  }\r\n}\r\n\r\n// 需要合并的中间件\r\nlet composeMiddlewares = [applyMiddleware(...middleWare),];\r\n//激活 chrome 浏览器 redux 插件\r\nif (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\r\n\tcomposeMiddlewares.push(window.__REDUX_DEVTOOLS_EXTENSION__())\r\n}\r\nconst store = createStore(rootReducer, initialState, compose(...composeMiddlewares));\r\n\r\n// 订阅更新函数，每次状态更新都会执行\r\nstore.subscribe((s) => {\r\n  if (typeof(window) !== 'object') return;\r\n  var state = store.getState()\r\n  window.localStorage.setItem('localStoreState', JSON.stringify({\r\n    order: state.order,\r\n    auth: state.auth\r\n  }))\r\n})\r\n\r\nexport default store;\r\n","import store from '../store'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\nimport { productDetailInitialState } from '../reducers/product.js'\r\n\r\nconst HOST = config.HOST\r\nconst state = store.getState()\r\n\r\n// 搜索的 goods\r\nexport const setSearchGoodsAction = goods => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_GOODS',\r\n    payload: goods\r\n  })\r\n}\r\n\r\n// 设置搜索的 Store\r\nexport const setSearchStoresAction = stores => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_STORES',\r\n    payload: stores\r\n  })\r\n}\r\n\r\n// 设置搜索关键字\r\nexport const setSearchKeyAction = searchKey => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_KEY',\r\n    payload: searchKey\r\n  })\r\n}\r\n\r\n// 设置商品详情页数据\r\nexport const setProductDetailAction = goodId => dispatch => {\r\n  // if (state.product.productDetail._id === goodId) return;\r\n  if (goodId === -1) {\r\n    // 清空数据\r\n    dispatch({\r\n      type: 'SET_PRODUCT_DETAIL',\r\n      payload: productDetailInitialState\r\n    })\r\n  }\r\n  axios.get(`${HOST}/api/goods/product_detail?goodId=${goodId}`)\r\n    .then(res => {\r\n      if (res.data.success) {\r\n        dispatch({\r\n          type: 'SET_PRODUCT_DETAIL',\r\n          payload: res.data.payload\r\n        })\r\n      }else {\r\n        dispatch({\r\n          type: 'SET_PRODUCT_DETAIL',\r\n          payload: { ...state.product.productDetail, message: res.data.message, error: '' }\r\n        })\r\n      }\r\n    })\r\n    .catch(err => {\r\n      dispatch({\r\n        type: 'SET_PRODUCT_DETAIL',\r\n        payload: { ...state.product.productDetail, error: err.message, message: '' }\r\n      })\r\n    })\r\n}\r\n","// 弹出消息框\r\nexport const alertMessageAction = message => dispatch => {\r\n  dispatch({\r\n    type: 'ALERT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\nexport const closeAlertAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_ALERT'\r\n  })\r\n}\r\n\r\n// 弹出确认框\r\nexport const confirmMessageAction = (message, sure, cancel) => dispatch => {\r\n  dispatch({\r\n    type: 'CONFIRM_MESSAGE',\r\n    payload: { message, sure, cancel }\r\n  })\r\n}\r\n\r\nexport const closeConfirmAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_CONFIRM'\r\n  })\r\n}\r\n","import store from '../store'\r\n/**\r\n * 订单 Action\r\n */\r\nexport const setBuyProductsAction = products => dispatch => {\r\n  dispatch({\r\n    type: 'SET_BUY_PRODUCTS',\r\n    payload: products\r\n  })\r\n}\r\n\r\n/**\r\n * 付款页面信息\r\n */\r\nexport const setPayOrderAction = payOrder => dispatch => {\r\n  dispatch({\r\n    type: 'SET_PAY_ORDER',\r\n    payload: payOrder\r\n  })\r\n}\r\n/**\r\n * 付款成功\r\n */\r\nexport const payOrderSuccessAction = orderno => {\r\n  store.dispatch({\r\n    type: 'PAY_SUCCESS'\r\n  })\r\n}\r\n\r\n/**\r\n * myOrders Actions\r\n */\r\nexport const getMyOrdersAction = myOrders => {\r\n  store.dispatch({\r\n    type: 'GET_MY_ORDERS',\r\n    payload: myOrders\r\n  })\r\n}\r\n\r\nexport const prevPageOrdersAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'PREV_PAGE_ORDERS'\r\n  })\r\n}\r\n","import store from '../store'\r\n\r\nexport const setRouterLocationAction = location => dispatch => {\r\n  dispatch({\r\n    type: 'SET_ROUTER_LOCATION',\r\n    payload: location\r\n  })\r\n}\r\n\r\nexport const setShopCarAction = shopCarInfo => {\r\n  if (!Array.isArray(shopCarInfo)) return;\r\n  // 将商品按 店铺进行分组\r\n  let shopCar = []\r\n  if (shopCarInfo.length > 0) {\r\n    shopCar[0] = {\r\n      storeId: shopCarInfo[0].product.storeId,\r\n      storeName: shopCarInfo[0].product.storeName,\r\n      products: [shopCarInfo[0]]\r\n    }\r\n    for (let i = 1, len = shopCarInfo.length; i < len; i++) {\r\n      for (let j = 0, len2 = shopCar.length; j < len2; j++) {\r\n        if (shopCarInfo[i].product.storeId === shopCar[j].storeId) {\r\n          shopCar[j].products.push(shopCarInfo[i])\r\n          break\r\n        }\r\n        if (j === len2-1) {\r\n          shopCar.push({\r\n            storeId: shopCarInfo[i].product.storeId,\r\n            storeName: shopCarInfo[i].product.storeName,\r\n            products: [shopCarInfo[i]]\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  store.dispatch({\r\n    type: 'SET_SHOP_CAR',\r\n    payload: shopCar\r\n  })\r\n}\r\n\r\n// 获取收货地址\r\nexport const setAddressAction = address => {\r\n  if (!Array.isArray(address)) return;\r\n  store.dispatch({\r\n    type: 'SET_ADDRESS',\r\n    payload: address\r\n  })\r\n}\r\n\r\nexport const updateUserInfo = userInfo => dispatch => {\r\n  dispatch({\r\n    type: 'UPDATE_USER_INFO',\r\n    payload: userInfo\r\n  })\r\n}\r\n","import store from '../store'\r\nimport socket from '../../utils/socket'\r\n\r\nexport const toggleChatAction = state => { // 隐藏或显示聊天窗口\r\n  store.dispatch({\r\n    type: 'TOGGLE_CHAT',\r\n    payload: state\r\n  })\r\n}\r\n\r\nexport const initContacts = messages => {\r\n  store.dispatch({\r\n    type: 'INIT_CONTACTS',\r\n    payload: messages\r\n  })\r\n}\r\n\r\n// 点击未读消息展示到聊天框\r\nexport const messageNotReadItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({ // 设置消息已读\r\n        type: 'msg_be_read',\r\n        content: item.userId\r\n      }))\r\n    }\r\n    dispatch({\r\n      type: 'MESSAGE_NOT_READ_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\nexport const sendingMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'PUT_SENDING_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 点击已读消息展示到聊天框\r\nexport const messageItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    dispatch({\r\n      type: 'MESSAGE_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\n// 点击联系人和找人 item 到聊天框\r\nexport const contactItemToChatAction = item => {\r\n  item = {...item, userId: item.userId || item.contactId}\r\n  var chat = store.getState().chat\r\n  if (chat.chatnow === item.userId && !chat.hideChat) return;\r\n\r\n  store.dispatch({\r\n    type: 'CONTACT_ITEM_TO_CHAT',\r\n    payload: item\r\n  })\r\n}\r\n\r\nexport const swingChatWindowAction = hide => dispatch => {\r\n  dispatch({\r\n    type: 'SWING_CHAT_WINDOW',\r\n    payload: hide\r\n  })\r\n}\r\n\r\nexport const setWaitMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'SET_WAIT_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 发送消息后回执\r\nexport const sendChatMessageBackAction = message => {\r\n  store.dispatch({\r\n    type: 'SEND_CHAT_MESSAGE_BACK',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到聊天消息\r\nexport const receiveChatMessageAction = message => {\r\n  if (message.origin === store.getState().chat.chatnow && socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'msg_be_read',\r\n      content: message.origin\r\n    }))\r\n  }\r\n  store.dispatch({\r\n    type: 'RECEIVE_CHAT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到联系人列表\r\nexport const getContactsAction = contacts => {\r\n  store.dispatch({\r\n    type: 'SET_CONTACTS',\r\n    payload: contacts\r\n  })\r\n}\r\n","import { setAuthToken } from './setAuth'\r\nimport {\r\n  payOrderSuccessAction,\r\n  getMyOrdersAction\r\n} from '../flux/actions/orderActions'\r\nimport {\r\n  setShopCarAction,\r\n  setAddressAction\r\n} from '../flux/actions/authActions'\r\nimport {\r\n  // setWaitMessageAction,\r\n  sendChatMessageBackAction,\r\n  receiveChatMessageAction,\r\n  getContactsAction,\r\n  initContacts\r\n} from '../flux/actions/chatActions'\r\nimport config from './config'\r\n\r\nconst WS_HOST = config.WS_HOST\r\n\r\n\r\nconst socket = {\r\n  status: 'close',\r\n  ws: null,\r\n  initSocket: function (token) {\r\n    if (typeof(window) !== 'object' || !token) return;\r\n    const ws = new WebSocket(`${WS_HOST}?token=${token}`)\r\n\r\n    ws.onopen = function(e) {\r\n      socket.status = 'open'\r\n      setInterval(function() {  // 设置定时器更新 token\r\n        if (socket.status !== 'open') { return }\r\n        ws.send(JSON.stringify({\r\n          type: 'transToken',\r\n          target: 'koa'\r\n        }))\r\n      }, 1000*60*15)\r\n      ws.send('{\"type\":\"get_shop_cat\"}') // 获取购物车信息\r\n      ws.send('{\"type\":\"init_chat_messages\"}') // 获取聊天信息\r\n    }\r\n\r\n    ws.onmessage = function(e) {\r\n      var msg = e.data\r\n      try {\r\n        msg = JSON.parse(msg)\r\n      }catch(err) {\r\n        return\r\n      }\r\n      switch(msg.type) {\r\n        case 'transToken':\r\n          return setAuthToken(msg.content)\r\n\r\n        case 'payOrderSuccess':  // 付款成功服务端消息\r\n          return payOrderSuccessAction(msg.content)\r\n\r\n        case 'get_shop_cat':  // 获取购物车信息\r\n          // if (!state.initShopCar) {\r\n          //   // 添加购物车\r\n          //   alertMessageBox('添加成功，在购物车等亲')\r\n          // }\r\n          // state.initShopCar = false\r\n          return setShopCarAction(msg.content)\r\n\r\n        case 'send_chat_message':  // 发送消息后回执\r\n          return sendChatMessageBackAction(msg)\r\n\r\n        case 'init_chat_messages':  // 初始化聊天信息\r\n          return initContacts(msg.content)\r\n\r\n        case 'receive_chat_message':  // 收到聊天消息\r\n          return receiveChatMessageAction(msg)\r\n\r\n        case 'get_contacts': // 收到联系人列表信息\r\n          return getContactsAction(msg.content)\r\n\r\n        case 'get_address':\r\n          return setAddressAction(msg.content)\r\n        case 'get_orders':  // 获取所有订单信息\r\n          return getMyOrdersAction(msg.content)\r\n        default:\r\n          return\r\n      }\r\n    }\r\n\r\n    ws.onclose = function(e) {\r\n      console.log('socket close!')\r\n      socket.status = 'close'\r\n    }\r\n\r\n    ws.onerror = function(e) {\r\n      console.error('socket error', e)\r\n    }\r\n\r\n    socket.ws = ws\r\n  }\r\n}\r\n\r\nexport default socket\r\n","import axios from 'axios'\r\nimport store from '../flux/store'\r\nimport socket from './socket'\r\nimport { isEmpty } from '../utils/validator'\r\nimport { myOrdersInitState } from '../flux/reducers/myOrders'\r\nexport const setAuthToken = token => {\r\n\tif (token) {\r\n\t\t// 让每个请求头携带 token\r\n\t\taxios.defaults.headers.common[\"Authorization\"] = token;\r\n\t\t // 添加localStorage 储存token\r\n\t\twindow.localStorage.setItem(\"jwtToken\", token);\r\n    // 初始化 websocket\r\n    if (socket.status === 'close') {\r\n      socket.initSocket(token)\r\n    }\r\n\t} else {\r\n\t\t// 删除请求头 token\r\n\t\tdelete axios.defaults.headers.common[\"Authorization\"];\r\n\t\t// 删除localStorage储存的 token\r\n    window.localStorage.removeItem(\"jwtToken\");\r\n\t\t// window.localStorage.clear();\r\n\t}\r\n}\r\n\r\nexport const setCurrentUser = user => {\r\n  if (isEmpty(user)) {\r\n    if (socket.status === 'open') {\r\n      socket.ws.close()\r\n    }\r\n    store.dispatch({ type: 'LOGIN_OUT_CHAT' })\r\n    store.dispatch({\r\n      type: 'GET_MY_ORDERS',\r\n      payload: myOrdersInitState\r\n    })\r\n  }\r\n\tstore.dispatch({\r\n\t\ttype: 'SET_CURRENT_USER',\r\n\t\tpayload: user\r\n\t})\r\n}\r\n\r\n","import React, {Component} from 'react'\r\nimport {Link, withRouter} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport { setAuthToken, setCurrentUser } from '../../utils/setAuth'\r\nclass AppHeader extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\r\n\t\t}\r\n\t}\r\n\t// 退出\r\n\tloginOut() {\r\n    var url = this.props.location.pathname\r\n    if (/^\\/member/.test(url) || /^\\/order/.test(url) || /^\\/payorder/.test(url)) {\r\n      this.props.history.push('/')  // 跳转到主页\r\n    }\r\n\t\tsetAuthToken(false); // axios token 头清除，localStorage token清除\r\n\t\tsetCurrentUser({}); // dispatch 当前空用户\r\n\t}\r\n\trender() {\r\n\t\tconst auth = this.props.auth;\r\n\t\tconst hello = (<ul className=\"ul-l\">\r\n\t\t\t\t\t\t<li>哈，欢迎来到优选</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/login\">请登录</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/register\">免费注册</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>)\r\n\t\tconst userinfo = (<ul className=\"ul-l\">\r\n\t\t\t\t\t\t<li>Hi，<Link to=\"/member\">{auth.user.nickname}</Link></li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a onClick={this.loginOut.bind(this)} href=\"javascript:void(0)\">退出</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>)\r\n\t\treturn (\r\n\t\t\t<div className=\"app-header-wrap\">\r\n\t\t\t\t<div className=\"app-header\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauth.isLogin ?\r\n\t\t\t\t\t\tuserinfo :\r\n\t\t\t\t\t\thello\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<ul className=\"ul-r\">\r\n            <li><Link to=\"/\">优选首页</Link></li>\r\n\t\t\t\t\t\t<li className=\"h-my\">\r\n              <Link to=\"/member\">我的优选</Link>\r\n              <div className=\"h-my-choi\">\r\n                <div><Link to=\"/member/safety\">安全设置</Link></div>\r\n                <div><Link to=\"/member\">个人资料</Link></div>\r\n                <div><Link to=\"/member/myorder\">我的订单</Link></div>\r\n                <div><Link to=\"/member/address\">收货地址</Link></div>\r\n              </div>\r\n            </li>\r\n\t\t\t\t\t\t<li className=\"h-my\">\r\n              <Link to=\"/member\">商家支持</Link>\r\n              <div className=\"h-my-choi\">\r\n                <div><Link to=\"/member/safety\">注册商家</Link></div>\r\n                <div><a href=\"http://118.126.108.36/image/files/choice_perfect_manager.msi\">管理端下载</a></div>\r\n              </div>\r\n            </li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAppHeader.propTypes = {\r\n\tauth: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default withRouter(connect(mapStateToProps, null)(AppHeader))\r\n","/**\r\n * 轮播图组件\r\n */\r\nimport React,{Component} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport cnames from 'classnames'\r\nimport LazyLoad from 'react-lazyload'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass slide extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tslideboxs: null,\r\n\t\t\t// 轮播图图片\r\n\t\t\tslideImg: [\r\n        {goodId: 43, bgimg: '/image/slide_wall/TB1fxrzI3HqK1RjSZFkSut.WFXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 45, bgimg: '/image/slide_wall/TB1FmwTvHZnBKNjSZFGSuvt3FXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 48, bgimg: '/image/slide_wall/O1CN01Tms3Pn1D7tpGbFK5a_!!170-0-luban.jpg_q100.jpg_.webp', bgcolor: '#CA1124', load: false},\r\n\t\t\t\t{goodId: 49, bgimg: '/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg', bgcolor: '#584BFB'},\r\n\t\t\t\t{goodId: 42, bgimg: '/image/slide_wall/TB13jplKCzqK1RjSZFHwu23CpXa.png', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 50, bgimg: '/image/slide_wall/TB10lfQxpzqK1RjSZSgSuwpAVXa.jpg', bgcolor: '#E9EAEC'}\r\n\t\t\t],\r\n      load: {0: true, 1: false, 2: false, 3: false, 4: false, length: 5},\r\n\t\t\tslideStop: false,  // 是否停止轮播图\r\n\t\t\tslideIndex: 0,  // 轮播图索引\r\n\t\t\tslideInterval: -1,  // 主定时器\r\n      slideTimeout: -1\r\n\t\t}\r\n\t\tthis.slideAnimate = this.slideAnimate.bind(this);\r\n\t\tthis.gotoSlide = this.gotoSlide().bind(this);\r\n\t\tthis.slideStart = this.slideStart.bind(this);\r\n\t\tthis.slideStop = this.slideStop.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n    if (typeof window !== 'object') return;\r\n\t\t// 组件挂载完毕,获取轮播图组件，开启轮播图\r\n\t\tthis.setState({\r\n\t\t\tslideboxs: window.document.getElementsByClassName(\"slide-img-box\")\r\n\t\t}, () => {\r\n\t\t\tthis.state.slideboxs[this.state.slideIndex].style.opacity = 1;\r\n\t\t\tvar _this = this;\r\n\t\t\tvar slideInterval = window.setInterval(function(){\r\n\t\t\t\tif (!_this.state.slideStop)\r\n\t\t\t\t\t_this.slideAnimate();\r\n\t\t\t}, 5000);\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideInterval\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t// 组件卸载\r\n\tcomponentWillUnmount() {\r\n    if (typeof window !== 'object') return;\r\n      // 清除轮播图主定时器\r\n    window.clearInterval(this.state.slideInterval);\r\n    window.clearTimeout(this.state.slideTimeout);\r\n\t}\r\n\t// 动画切换函数，before 消失，next 显示\r\n\tslideAnimate(next) {\r\n\t\tvar before = this.state.slideIndex;\r\n\t\tif (next === undefined) {next = ((before + 1) % this.state.slideboxs.length)};\r\n    if (!this.state.load[next]) { // 延时加载轮播图片\r\n      this.state.slideboxs[next].getElementsByClassName('slide-img-box-i')[0].setAttribute('src', HOST + this.state.slideImg[next].bgimg)\r\n    }\r\n\t\tvar _this = this;\r\n\t\tvar slideboxs = this.state.slideboxs;\r\n\t\tvar beforeOpa = 1,nextOpa = 0;\r\n\t\t// 开始动画\r\n\t\tvar interval = window.setInterval(function() {\r\n\t\t\tbeforeOpa -= 0.2; nextOpa += 0.2;\r\n      // 组件卸载后定时器未及时清除\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = beforeOpa;\r\n        slideboxs[next].style.opacity = nextOpa;\r\n      }\r\n\t\t}, 50);\r\n\t\t// 停止动画，完成转换\r\n\t\tvar slideTimeout = window.setTimeout(function() {\r\n\t\t\twindow.clearInterval(interval);\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = 0;\r\n        slideboxs[next].style.opacity = 1;\r\n        slideboxs[before].style.zIndex = -1;\r\n        slideboxs[next].style.zIndex = 5;\r\n      }\r\n\t\t\t// 更新显示索引\r\n      _this.setState({\r\n        slideIndex: next,\r\n        slideTimeout: slideTimeout,\r\n        load: {..._this.state.load, [next]: true}\r\n      });\r\n\t\t}, 200);\r\n\t}\r\n\t// 切换动画索引\r\n\tgotoSlide() {\r\n\t\tvar time = 0,timeout = null;\r\n\t\treturn function (e) {\r\n\t\t\twindow.clearTimeout(timeout);\r\n\t\t\t// this.slideStop();\r\n\t\t\tvar nowtime = new Date();\r\n\t\t\tvar _this = this;\r\n\t\t\tvar index = Number(e.currentTarget.getAttribute('index'));\r\n\t\t\tif (nowtime - time > 500) {\r\n\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\ttime = nowtime;\r\n\t\t\t}else {\r\n\t\t\t\ttimeout = window.setTimeout(function(){\r\n\t\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\t\ttime = nowtime;\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\t// 停止动画\r\n\tslideStop(){\r\n\t\tif (!this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t// 开启动画\r\n\tslideStart() {\r\n\t\tif (this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tvar slideImg = this.state.slideImg;\r\n\t\treturn(\r\n\t\t<div className=\"nav-slide-wrap\" onMouseLeave={this.slideStart}>\r\n\t\t{/*轮播图图片*/}\r\n\t\t{\r\n\t\t\tslideImg.map((item,i) => (\r\n\t\t\t\t<div key={i} className=\"slide-img-box\" style={{backgroundColor: item.bgcolor}}>\r\n          <Link to={`/product_detail?goodId=${item.goodId}`}>\r\n              <img className=\"slide-img-box-i\" src={i === 0 ? `${HOST}${item.bgimg}` : null}\r\n              onMouseOver={this.slideStop}\r\n              ></img>\r\n          </Link>\r\n\t\t\t\t</div>\r\n\t\t\t))\r\n\t\t}\r\n\t\t\t{/*小按钮*/}\r\n\t\t\t<ul className=\"slide-nav\">\r\n\t\t\t{\r\n\t\t\t\tslideImg.map((_, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={index}\r\n\t\t\t\t\t\t\tclassName={cnames(\"slide-nav-item\",{\r\n\t\t\t\t\t\t\t\t'slide-nav-selected': index === this.state.slideIndex\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\tonMouseOver={this.gotoSlide}\r\n\t\t\t\t\t\t></li>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n\t}\r\n}\r\n\r\nexport default slide\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport classnames from 'classnames'\r\n\r\nfunction SmaillType(props) {\r\n\tvar smaillType = props.smaillType || [];\r\n\treturn (\r\n\t\t<div className=\"smaillType\">\r\n\t\t{\r\n\t\t\tsmaillType.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item._id} className=\"smaill-item\">\r\n\t\t\t\t\t\t<div className=\"smaill-item-title\">{item.smaillName}</div>\r\n\t\t\t\t\t\t<div className=\"smaill-detail\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.detail.map(detail => {\r\n\t\t\t\t\t\t\t\treturn (<div className=\"sd-item\" key={detail._id}>\r\n                  <Link className={classnames({\r\n                    [`color${props.bigTypeIndex}`]: Math.random() > 0.75\r\n                  })} to={`/search_products?detailId=${detail._id}`}>{detail.detailName}</Link>\r\n                </div>)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SmaillType;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport config from '../../../utils/config'\r\nimport { transPrice } from '../../../utils/tools'\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction splitProductName(name) {\r\n  if (typeof(name) !== 'string') return ''\r\n  return name.length < 20 ? name : name.substring(0, 19) + '...'\r\n}\r\n\r\nclass ProductBox extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      products: [],\r\n      loading: true,\r\n      success: true\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (!/^[1-9]\\d*$/.test(this.props.productBigTypeId)) return;\r\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=9&bigId=${this.props.productBigTypeId}`)\r\n      .then(({data}) => {\r\n        console.log('懒加载', data)\r\n        if (!data.success) {\r\n          return this.setState({\r\n            loading: false,\r\n            success: false,\r\n          })\r\n        }\r\n        this.setState({\r\n          success: true,\r\n          loading: false,\r\n          products: data.payload.products\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          loading: false,\r\n          success: false,\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"rec-item\" style={{background: `url(${HOST}/image/ui/${this.props.productBackImage}) left top no-repeat`}}>\r\n      <h3 className=\"rec-item-tit\" style={{\r\n        color: this.props.color\r\n      }}>{ this.props.productBigType }</h3>\r\n      {\r\n        this.state.loading ? <div>加载中</div> :\r\n        !this.state.success ? <div>加载失败</div> :\r\n        this.state.products.length === 0 ? <div>商品为空</div> : (\r\n          this.state.products.map((product, index) => (\r\n            <div className=\"rec-i-item\" key={index}>\r\n              <div className=\"rec-i-item-wrap\">\r\n                <div className=\"rec-i-logo\"><Link to={`/product_detail?goodId=${product._id}`}><img src={`${HOST}/image/goods/logo/${product.logo}_210x210q90.jpg`}/></Link></div>\r\n                <div className=\"rec-i-name\"><Link to={`/product_detail?goodId=${product._id}`}>\r\n                  <p title={product.goodName}>{splitProductName(product.goodName)}</p>\r\n                </Link></div>\r\n                <div className=\"rec-i-number\">购买次数: <span className=\"rec-i-number-font\">{product.number}</span></div>\r\n                <div className=\"rec-i-price\">￥{transPrice(product.nowPrice)}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )\r\n      }\r\n    </div>\r\n  }\r\n}\r\n\r\nProductBox.propTypes = {\r\n  productBigTypeId: PropTypes.number.isRequired,\r\n  productBigType: PropTypes.string.isRequired,\r\n  productBackImage: PropTypes.string.isRequired\r\n}\r\n\r\nexport default ProductBox\r\n","import React from 'react'\r\nimport config from '../../utils/config'\r\n\r\nimport './index.scss'\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction gotoTop() {\r\n  if (typeof window !== 'object') return;\r\n  var height = document.documentElement.scrollHeight\r\n  var ms = 9\r\n  var interval = setInterval(function() {\r\n    console.log()\r\n    document.documentElement.scrollTop = height / 10 * ms\r\n    ms --\r\n  }, 50)\r\n  setTimeout(function() {\r\n    clearInterval(interval)\r\n    document.documentElement.scrollTop = 0\r\n  }, 500)\r\n}\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <div  className=\"body-bottom\">\r\n      <div className=\"footer-wrap\">\r\n        <p onClick={gotoTop} title=\"回到顶部\" className=\"footer-logo\"></p>\r\n        <p>@版权所有:北大青鸟-T121&nbsp;&nbsp;叶谱&nbsp;&nbsp;周围&nbsp;&nbsp;唐铭佑</p>\r\n        <div style={{\r\n          height: '89px',\r\n          background: `url(${HOST}/image/ui/body_footer.jpg) center center no-repeat`\r\n        }}></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Footer\r\n","import React, {Component} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport cnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\nimport Lazyload from 'react-lazyload'\r\n\r\nimport { setSearchKeyAction } from '../../flux/actions/productActions'\r\nimport { alertMessageAction } from '../../flux/actions/messageAction'\r\n// import { setRouterLocationAction } from '../../flux/actions/authActions'\r\n\r\nimport './home.scss'\r\nimport config from '../../utils/config.js'\r\nimport { transSearchKeyword } from '../../utils/tools'\r\nimport AppHeader from '../../components/Header'\r\nimport Slide from './subpage/Slide'\r\nimport SmaillType from './subpage/SmaillType'\r\nimport ProductBox from './subpage/ProductBox'\r\nimport Footer from '../../components//Footer/'\r\n\r\nclass Home extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\t// 大分类信息\r\n\t\t\tbigType:[],\r\n\t\t\tselectedBigid: -1, // -1 不展示，其他为 bigType的 id\r\n      bigTypeIndex: -1,\r\n      searchKey: '',\r\n      recommendProducts: [\r\n        {bigId: 3, type: '女鞋 男鞋 箱包', bgImg: 'nvxie.jpg', color: 'rgb(255,95,95)'},\r\n        {bigId: 6, type: '手机 数码 电脑办公', bgImg: 'shouji_shuma_recommend.jpg', color: '#fff'},\r\n        {bigId: 2, type: '男装 运动户外', bgImg: 'yundong.jpg', color: 'rgb(199,56,56)'},\r\n        {bigId: 10, type: '大家电 生活电器', bgImg: 'dajiadian.jpg', color: '#fff'},\r\n      ],\r\n      navTop: [\r\n        {tit: '游戏本', detailId: 390},\r\n        {tit: '休闲裤', detailId: 1167},\r\n        {tit: '短袖衬衫', detailId: 1157},\r\n        {tit: '夹克', detailId: 1140},\r\n        {tit: '耳机', detailId: 423},\r\n        {tit: 'VR眼镜', detailId: 396},\r\n        {tit: '双肩背包', detailId: 113},\r\n        {tit: '健身服', detailId: 110},\r\n      ],\r\n\t\t}\r\n\t\tthis.onBigTypeSelect = this.onBigTypeSelect.bind(this);\r\n\t\tthis.CurrentSmaillType = this.CurrentSmaillType.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n    // this.props.setRouterLocationAction('/')\r\n    if (typeof(window) === 'object') {  // 从本地储存取出\r\n      var bigType = localStorage.getItem('productType')\r\n      if (bigType) {\r\n        try {\r\n          bigType = JSON.parse(bigType)\r\n          return this.setState({\r\n            bigType\r\n          })\r\n        }catch(err) {\r\n          console.error('bigType', err)\r\n        }\r\n      }\r\n    }\r\n\t\t// 获取大分类表中数据\r\n\t\taxios.get(config.HOST + '/api/goods/type?type=big&limit=16')\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn console.error('商品分类列表获取失败');\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbigType: res.data.payload\r\n\t\t\t\t}, () => {\r\n          if (typeof(window) === 'object') {\r\n            localStorage.setItem('productType', JSON.stringify(res.data.payload))\r\n          }\r\n        });\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n        if (typeof(window) === 'object')\r\n\t\t\t\t  console.error(err);\r\n\t\t\t});\r\n\t}\r\n\r\n\t// 设置或获取 state的bigType 的 smaillType\r\n\tCurrentSmaillType(bigid, smaillType, getSmaill = false) {\r\n\t\tvar bigType = this.state.bigType\r\n\t\tif (bigType.length === 0) return;\r\n\t\tfor (var i = 0,len = bigType.length; i < len; i++) {\r\n\t\t\tif (bigType[i]._id === bigid) {\r\n\t\t\t\t// 获取smaillType\r\n\t\t\t\tif (getSmaill) {\r\n\t\t\t\t\treturn bigType[i].smaillType\r\n\t\t\t\t}\r\n        // 存储到本地储存中\r\n        if (typeof(window) === 'object' && !bigType[i].smaillType) {\r\n          bigType[i].smaillType = smaillType\r\n          localStorage.setItem('productType', JSON.stringify(this.state.bigType))\r\n        }else {\r\n          bigType[i].smaillType = smaillType\r\n        }\r\n\t\t\t\t// 设置 smaillType\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbigType: bigType\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n  // 获取小分类表\r\n\tonBigTypeSelect(e) {\r\n\t\t// showsmaill => true\r\n    var target = e.currentTarget\r\n\t\tvar bigid = Number(target.getAttribute('bigid'));\r\n    var index = target.getAttribute('index')\r\n\t\tthis.setState({\r\n\t\t\tselectedBigid: bigid,\r\n      bigTypeIndex: index\r\n\t\t}, () => {\r\n      var bigType = this.state.bigType.find(i => i._id === bigid)\r\n      if (Array.isArray(bigType.smaillType)) return; // 小分类已存在\r\n\r\n      axios.get(config.HOST + '/api/goods/type?type=smaill&bigid=' + bigid)\r\n        .then(res => {\r\n          if (!res.data.success) return;\r\n          this.CurrentSmaillType(bigid, res.data.payload);\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        })\r\n    })\r\n\t}\r\n\r\n\tonBigTypeLeave(){\r\n\t\tthis.setState({selectedBigid: -1});\r\n\t}\r\n  searchInputChange(e) {\r\n    this.setState({\r\n      searchKey: e.target.value\r\n    })\r\n  }\r\n  searchProduct(e) {\r\n    e.preventDefault();\r\n    var keyword = transSearchKeyword(this.state.searchKey)\r\n    if (!keyword) {\r\n      return this.props.alertMessageAction('请输入搜索的内容')\r\n    }\r\n    this.props.setSearchKeyAction(this.state.searchKey)\r\n    this.props.history.push(`/search_product?q=${keyword}&limit1=0&limit2=50`)\r\n  }\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"home-body\">\r\n\t\t\t\t<AppHeader />\r\n\t\t\t\t<div className=\"headerCon\">\r\n\t\t\t\t\t<form onSubmit={this.searchProduct.bind(this)}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName=\"search-text\"\r\n              value={this.state.searchKey}\r\n              onChange={this.searchInputChange.bind(this)}\r\n\t\t\t\t\t\t\tplaceholder=\"搜索 优选 商品/品牌/店铺\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"search-btn\">搜索</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<ul className=\"hot-query\">\r\n\t\t\t\t\t{/*搜索框下面展示*/}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.navTop.map((item, index) => (\r\n              <li key={index}>\r\n                <Link to={`/search_product?detailId=${item.detailId}`}>{item.tit}</Link>\r\n              </li>\r\n            ))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"main-nav\">\r\n\t\t\t\t\t<ul className=\"nav-t-wrap\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.navTop.map((item, i) => (<li key={i}><Link to={`/search_product?detailId=${item.detailId}`}>{item.tit}</Link></li>))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{/*商品主分类*/}\r\n\t\t\t\t\t<div className=\"nav-l-box\">\r\n\t\t\t\t\t\t<div className=\"main-logo-wrap\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<a href={config.HOST}>\r\n\t\t\t\t\t\t\t\t\t<img width=\"240px\" height=\"130px\" src={config.HOST + \"/image/ui/home_logo.png\"} alt=\"优选\"/>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"nav-l-wrap\" onMouseLeave={this.onBigTypeLeave.bind(this)}>\r\n\t\t\t\t\t\t\t<div className=\"nav-l-title\">商品分类</div>\r\n\t\t\t\t\t\t\t<div className=\"nav-l-typewrap\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.bigType.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tkey={item._id}\r\n\t\t\t\t\t\t\t\t\t\tclassName={cnames(`nav-l-item`, {\r\n\t\t\t\t\t\t\t\t\t\t\t'nav-l-item-sel': this.state.selectedBigid===item._id,\r\n                      [`color${index}`]: this.state.selectedBigid===item._id,\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\tbigid={item._id}\r\n                    index={index}\r\n\t\t\t\t\t\t\t\t\t\tonMouseOver={this.onBigTypeSelect}\r\n\t\t\t\t\t\t\t\t\t>{item.bigName}</div>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.selectedBigid === -1 ? null :\r\n\t\t\t\t\t\t\t\t<SmaillType bigTypeIndex={this.state.bigTypeIndex} smaillType={this.CurrentSmaillType(this.state.selectedBigid,null,true)} />\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/*轮播图组件，传递slideImg图片组*/}\r\n\t\t\t\t\t<Slide />\r\n\t\t\t\t</div>\r\n        <div className=\"product-box\">\r\n          <div className=\"product_recomment_wrap\">\r\n            {\r\n              // 懒加载推荐商品组件\r\n              this.state.recommendProducts.map((item, index) => (\r\n                <Lazyload key={index} height={600} offset={100}>\r\n                  <ProductBox\r\n                    color={item.color}\r\n                    productBigTypeId={item.bigId}\r\n                    productBigType={item.type}\r\n                    productBackImage={item.bgImg} />\r\n                </Lazyload>)\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n//setRouterLocationAction\r\nexport default connect(null, { setSearchKeyAction, alertMessageAction })(Home);\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nconst RegisterSuccess = (props) => {\r\n  return <div>\r\n    <div style={{textAlign: 'center', marginTop: '30px'}}><span className=\"main_font1\">优选注册</span></div>\r\n    <div className=\"regi-success\">\r\n      <div className=\"rs-tit-logo\"><img src={`${HOST}/image/ui/success.png`} alt=\"\"/></div>\r\n      <div className=\"rs-in-wrap\">\r\n        <div className=\"rs-tit\">\r\n          <div className=\"rs-tit-info\">恭喜注册成功，你的账户为：</div>\r\n        </div>\r\n        <div className=\"rs-logname\">登录名：<span className=\"rs-logname-imp\">{props.phone}</span></div>\r\n        <div className=\"rs-nickname\">会员名：{props.nickname}</div>\r\n        <div className=\"rs-operator\">\r\n          <div className=\"rs-to-home\"><Link to=\"/\">去逛逛</Link></div>\r\n          <div className=\"rs-to-log\"><Link to=\"/login\">现在去登录</Link></div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n}\r\n\r\nRegisterSuccess.propTypes = {\r\n  phone: PropTypes.string.isRequired,\r\n  nickname: PropTypes.string.isRequired,\r\n}\r\nexport default RegisterSuccess\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\n\r\nimport config from '../../utils/config'\r\nimport { alertMessageAction } from '../../flux/actions/messageAction'\r\n\r\nimport './index.scss'\r\nimport AppHeader from '../../components/Header/'\r\nimport Success from './subpage/Success'\r\n\r\nconst HOST = config.HOST\r\n\r\nvar sendingSMS = false\r\nvar waitSecond = 59\r\n\r\nclass Register extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      nickname: '',\r\n      phone: '',\r\n      smscode: '',\r\n      password: '',\r\n      password2: '',\r\n      registerSuccess: false,\r\n      edit: '',\r\n      errors: {}\r\n    }\r\n    this.inputTextChange = this.inputTextChange.bind(this)\r\n    this.inputTextFocus = this.inputTextFocus.bind(this)\r\n    this.inputTextBlur = this.inputTextBlur.bind(this)\r\n  }\r\n\r\n  inputTextChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  inputTextFocus(e) {\r\n    this.setState({\r\n      edit: e.target.name,\r\n      errors: {...this.state.errors, [e.target.name]: ''}\r\n    })\r\n  }\r\n\r\n  inputTextBlur(e) {\r\n    if (this.state.edit === e.target.name) {\r\n      this.setState({ edit: '' })\r\n    }\r\n  }\r\n\r\n  sendSMS(e) {\r\n    if (sendingSMS) {\r\n      return this.props.alertMessageAction(`请等待 ${waitSecond} 秒后重新发送`)\r\n    }\r\n    if (!/^1\\d{10}$/.test(this.state.phone)) {\r\n      return this.setState({errors: {...this.state.errors, smscode: '手机号格式有误'}})\r\n    }\r\n    var target = e.currentTarget\r\n    target.style.backgroundColor = 'rgb(226,225,225)'\r\n    target.style.color = 'rgba(148,139,139)'\r\n    waitSecond = 59\r\n    var interval = setInterval(function() {\r\n      target.innerText = `再次发送(${waitSecond})`\r\n      waitSecond--\r\n      if (waitSecond <= 0){\r\n        clearInterval(interval)\r\n        sendingSMS = false\r\n        target.innerText = '获取验证码'\r\n        target.style.backgroundColor = ''\r\n        target.style.color = ''\r\n      }\r\n    }, 1000)\r\n    sendingSMS = true\r\n    axios.post(`${HOST}/api/operator/sms`, {phone: this.state.phone})\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, smscode: res.data.message}\r\n          })\r\n        }\r\n        this.props.alertMessageAction('短信发送成功，请查收')\r\n        console.log(res.data)\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, smscode: err.message}\r\n        })\r\n      })\r\n  }\r\n\r\n  registerSubmit(e) {\r\n    e.preventDefault()\r\n    var errors = {}\r\n    if (!/^[^0-9][\\w\\W]{2,10}$/.test(this.state.nickname)) {\r\n      errors.nickname = '昵称格式有误'\r\n    }\r\n    if (!/^1\\d{10}$/.test(this.state.phone)) {\r\n      errors.phone = '手机号格式有误'\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smscode)) {\r\n      errors.smscode = '验证码格式有误'\r\n    }\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\r\n      errors.password = '密码格式有误，6-20位，可包含,\\';)(!~·`\\/\\\\{}\"<>?+-=_.特殊字符'\r\n    }else if (this.state.password2 !== this.state.password) {\r\n      errors.password2 = '两次输入密码不一致'\r\n    }\r\n    if (this.state.password2 === '') {\r\n      errors.password2 = '请再次输入密码'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({ errors: errors })\r\n    }\r\n    axios.post(`${HOST}/api/users/register`, {\r\n      nickname: this.state.nickname,\r\n      phone: this.state.phone,\r\n      smscode: this.state.smscode,\r\n      password: this.state.password\r\n    }).then(res => {\r\n      if (!res.data.success) {\r\n        return this.setState({\r\n          errors: {submit: res.data.message}\r\n        })\r\n      }\r\n      // 注册成功\r\n      this.setState({\r\n        registerSuccess: true,\r\n        password: '',\r\n        password2: '',\r\n        smscode: ''\r\n      })\r\n    }).catch(err => {\r\n      this.setState({\r\n        errors: {submit: '发生了错误：' + err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div id=\"head0\">\r\n          <div id=\"head1\">\r\n            <div className=\"head_left\"><Link to=\"/\"><img src={`${HOST}/image/ui/home_logo.png`} /></Link></div>\r\n            <div className=\"head_right\"><span className=\"font_sty1\">你好，欢迎光临优选！</span><Link to=\"/login\"><span className=\"font_sty2\">请登陆</span></Link><span className=\"font_sty3\">帮助中心</span></div>\r\n          </div>\r\n        </div>\r\n        {\r\n          this.state.registerSuccess ? <Success nickname={this.state.nickname} phone={this.state.phone} /> : <div id=\"main0\">\r\n            <div id=\"main1\">\r\n              <form onSubmit={this.registerSubmit.bind(this)} method=\"POST\">\r\n                <ul>\r\n                  <li><span className=\"main_font1\">优选注册</span></li>\r\n                  <li>\r\n                    <input\r\n                      onChange={this.inputTextChange}\r\n                      onFocus={this.inputTextFocus}\r\n                      onBlur={this.inputTextBlur}\r\n                      value={this.state.nickname}\r\n                      className={classnames(\"main_li2\", {\r\n                        'regi-inp-err': this.state.errors.nickname\r\n                      })} type=\"text\" name=\"nickname\" placeholder=\"用户名\"\r\n                    ></input>\r\n                    {\r\n                      this.state.edit === \"nickname\" ? <div className=\"regi-hint\">2-10位字符组成，不能以数字开头</div> :\r\n                      this.state.errors.nickname && <div className=\"regi-err\">{this.state.errors.nickname}</div>\r\n                    }\r\n                  </li>\r\n                  <li>\r\n                    <input\r\n                      onChange={this.inputTextChange}\r\n                      onFocus={this.inputTextFocus}\r\n                      onBlur={this.inputTextBlur}\r\n                      value={this.state.phone}\r\n                      className={classnames(\"main_li2\", {\r\n                        'regi-inp-err': this.state.errors.phone\r\n                      })} type=\"text\" name=\"phone\" placeholder=\"手机号\"\r\n                    ></input>\r\n                    {\r\n                      this.state.edit === \"phone\" ? <div className=\"regi-hint\">输入手机号</div> :\r\n                      this.state.errors.phone && <div className=\"regi-err\">{this.state.errors.phone}</div>\r\n                    }\r\n                  </li>\r\n                  <li className=\"li_3\">\r\n                    <input\r\n                      onChange={this.inputTextChange}\r\n                      onFocus={this.inputTextFocus}\r\n                      onBlur={this.inputTextBlur}\r\n                      value={this.state.smscode}\r\n                      className={classnames(\"main_li3\", {\r\n                        'regi-inp-err': this.state.errors.smscode\r\n                      })} type=\"text\" name=\"smscode\" placeholder=\"验证码\"\r\n                    ></input>\r\n                    <div onClick={this.sendSMS.bind(this)} className=\"main_yz\">获取验证码</div>\r\n                    {\r\n                      this.state.edit === \"smscode\" ? <div className=\"regi-hint\">输入短信验证码</div> :\r\n                      this.state.errors.smscode && <div className=\"regi-err\">{this.state.errors.smscode}</div>\r\n                    }\r\n                  </li>\r\n                  <li>\r\n                    <input\r\n                      onChange={this.inputTextChange}\r\n                      onFocus={this.inputTextFocus}\r\n                      onBlur={this.inputTextBlur}\r\n                      value={this.state.password}\r\n                      className={classnames(\"main_li4\", {\r\n                        'regi-inp-err': this.state.errors.password\r\n                      })} type=\"password\" name=\"password\" placeholder=\"密码\"\r\n                    ></input>\r\n                    {\r\n                      this.state.edit === \"password\" ? <div className=\"regi-hint\">6-20位字母数字，可包含,\\';)(!~·`\\/\\\\{}\"&lf;&gt;?+-=_.特殊字符</div> :\r\n                      this.state.errors.password && <div className=\"regi-err\">{this.state.errors.password}</div>\r\n                    }\r\n                  </li>\r\n                  <li>\r\n                    <input\r\n                      onChange={this.inputTextChange}\r\n                      onFocus={this.inputTextFocus}\r\n                      onBlur={this.inputTextBlur}\r\n                      value={this.state.password2}\r\n                      className={classnames(\"main_li4\", {\r\n                        'regi-inp-err': this.state.errors.password2\r\n                      })} type=\"password\" name=\"password2\" placeholder=\"确认密码\"\r\n                    ></input>\r\n                    {\r\n                      this.state.edit === \"password2\" ? <div className=\"regi-hint\">请再次输入密码</div> :\r\n                      this.state.errors.password2 && <div className=\"regi-err\">{this.state.errors.password2}</div>\r\n                    }\r\n                  </li>\r\n                  <li><span className=\"main_li6\">点击注册，表示您同意优选<a href=\"javascript:void(0);\" className=\"main_li6a\">《服务协议》</a></span></li>\r\n                  <li>\r\n                    <button type=\"submit\" className=\"main_li7\">同意协议并注册</button>\r\n                    {\r\n                      this.state.errors.submit && <div className=\"regi-err\">{this.state.errors.submit}</div>\r\n                    }\r\n                  </li>\r\n                  <li><div className=\"main_li8\"><span className=\"main_li8_1\">沪ICP备13044278号丨合字B1.B2-20130004丨营业执照</span><span className=\"main_li8_2\">Copyright&copy; 周围 叶谱 唐铭佑 2018-2019，ALL Rights Reserved</span></div></li>\r\n                </ul>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        }\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction })(Register)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nimport config from '../../../utils/config.js'\r\nimport { alertMessageAction } from '../../../flux/actions/messageAction'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport {isPhone, isEmpty, isLength} from '../../../utils/validator'\r\nconst HOST = config.HOST\r\n\r\nvar loging = false // 判断账户是否在登录中\r\n\r\nclass Account extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      account: '',\r\n      password: '',\r\n      errors: {}\r\n    }\r\n    this.inputChange = this.inputChange.bind(this);\r\n    this.inputFocus = this.inputFocus.bind(this);\r\n  }\r\n\r\n  inputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  inputFocus(e) {\r\n    this.setState({\r\n      errors: {...this.state.errors, [e.target.name]: ''}\r\n    })\r\n  }\r\n\r\n  formSubmit(e) {\r\n    e.preventDefault()\r\n    if (loging) {\r\n      return this.props.alertMessageAction('账户验证中')\r\n    }\r\n    let errors = {};\r\n    if (isEmpty(this.state.account)) {\r\n      errors.account = '账号不能为空';\r\n    }\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\r\n      errors.password = '密码格式有误';\r\n    }\r\n\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors: errors\r\n      })\r\n    }\r\n    loging = true\r\n    var target = this.refs.submit\r\n    target.innerText = '登录中。。。'\r\n    let info = {account: this.state.account, password: this.state.password};\r\n    axios.post(`${HOST}/api/users/login`, info)\r\n      .then(res => {\r\n        loging = false\r\n        target.innerText = '登录'\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: { submit: res.data.message }\r\n          })\r\n        }\r\n        // 验证通过\r\n        setAuthToken(res.data.payload.token); // 请求头附加 token\r\n        setCurrentUser(res.data.payload.user);\r\n        this.props.history.push(this.props.prev)\r\n      })\r\n      .catch(err => {\r\n        loging = false\r\n        target.innerText = '登录'\r\n        this.setState({\r\n          errors: { submit: err.message || '服务器忙' }\r\n        });\r\n      });\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form className=\"l-input-wrap\" onSubmit={this.formSubmit.bind(this)} method=\"POST\">\r\n          <div className=\"log-input1\">\r\n            <label htmlFor=\"account\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.account ? 'account_failed.png' : 'account.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n            <input\r\n              onFocus={this.inputFocus}\r\n              onChange={this.inputChange}\r\n              value={this.state.account}\r\n              placeholder=\"昵称 / 手机号码\"\r\n              name=\"account\"\r\n              id=\"account\"\r\n              type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.account && <div className=\"acc-log-err\">{this.state.errors.account}</div>\r\n          }\r\n          <div className=\"log-input2\">\r\n            <label htmlFor=\"password\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.password ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n            <input\r\n              onFocus={this.inputFocus}\r\n              type=\"password\"\r\n              placeholder=\"密码\"\r\n              name=\"password\"\r\n              id=\"password\"\r\n              onChange={this.inputChange}\r\n              value={this.state.password}\r\n            />\r\n          </div>\r\n          {\r\n            this.state.errors.password && <div className=\"acc-log-err\">{this.state.errors.password}</div>\r\n          }\r\n          <input ref=\"submit\" className=\"account-log-submit\" type=\"submit\" value=\"登录\"/>\r\n          {\r\n            this.state.errors.submit && <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\r\n          }\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nAccount.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToProps, { alertMessageAction })(Account))\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport config from '../../../utils/config.js'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport {isPhone, isEmpty} from '../../../utils/validator'\r\n\r\n/**\r\n * 发送手机号到 sms接口，\r\n * 手机号合法 md5存储验证码并返回，\r\n * 登录发送手机号验证码，服务端入数据库匹配成功返回 token\r\n */\r\nconst HOST = config.HOST\r\n\r\nvar waitSMS = 59\r\nvar sendingSMS = false\r\n\r\nclass PhoneLogin extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: '',\r\n\t\t\tsms: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.inputChange = this.inputChange.bind(this);\r\n\t}\r\n\r\n\tinputChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\r\n\tsendSMS(e) {\r\n    if (sendingSMS) {\r\n      return this.props.alertMessageAction(`请 ${waitSMS} 秒后重试`)\r\n    }\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '手机号码错误'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n    var target = e.currentTarget\r\n    waitSMS = 59\r\n    sendingSMS = true\r\n    target.style.backgroundColor = '#eee'\r\n    var interval = setInterval(function() {\r\n      target.innerText = `再次发送(${waitSMS})`\r\n      waitSMS --\r\n      if (waitSMS === 0) {\r\n        clearInterval(interval)\r\n        target.innerText = '发送验证码'\r\n        target.style.backgroundColor = ''\r\n      }\r\n    }, 1000)\r\n\t\taxios.post(config.HOST + \"/api/operator/testsms\", {phone: this.state.phone})\r\n\t\t\t.then(({data}) => {\r\n        console.log(data);\r\n        if (!data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, sms: data.message}\r\n          })\r\n        }\r\n        this.props.alertMessageAction('发送成功请查收验证码')\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, msm: err.message || 'server busy'}\r\n        })\r\n\t\t\t});\r\n\t}\r\n\tsubmit() {\r\n\t\tlet errors = {};\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\terrors.phone = '手机号格式有误'\r\n\t\t}\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.sms)) {\r\n\t\t\terrors.sms = '验证码格式有误'\r\n\t\t}\r\n\t\tif (Object.keys(errors).length > 0) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: errors\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 格式验证成功\r\n\t\tconst user = {phone: this.state.phone, sms_code: this.state.sms}\r\n\t\taxios.post(config.HOST + '/api/users/phonelogin', user)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tsubmit: res.data.message\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// 验证通过\r\n\t\t\t\tsetAuthToken(res.data.payload.token) // 请求头附加 token\r\n\t\t\t\tsetCurrentUser(res.data.payload.user)\r\n        this.props.history.push(this.props.prev)\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"l-input-wrap\">\r\n\t\t\t\t<div className=\"log-input1\">\r\n\t\t\t\t\t<label htmlFor=\"phone\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.phone ? 'mobile_failed.png' : 'mobile.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"输入手机号码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.phone}\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\tid=\"phone\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.phone && <div className=\"acc-log-err\">{this.state.errors.phone}</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"log-input2\">\r\n\t\t\t\t\t<label htmlFor=\"sms\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.sms ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"填写验证码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.sms}\r\n\t\t\t\t\t\tname=\"sms\"\r\n\t\t\t\t\t\tid=\"sms\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t\t<button className=\"log-sendsms\" onClick={this.sendSMS.bind(this)}>发送验证码</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.sms && <div className=\"acc-log-err\">{this.state.errors.sms}</div>\r\n\t\t\t\t}\r\n\t\t\t\t<input type=\"submit\" className=\"account-log-submit\" onClick={this.submit.bind(this)} value=\"登录\"/>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.submit &&  <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nPhoneLogin.propTypes = {\r\n\tauth: PropTypes.object.isRequired\r\n}\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default withRouter(connect(mapStateToProps)(PhoneLogin))\r\n","import React, {Component} from 'react'\r\nimport {Link, Route, Redirect} from 'react-router-dom'\r\nimport queryString from 'query-string'\r\nimport {connect} from 'react-redux'\r\nimport classnames from 'classnames'\r\n\r\nimport { transURL } from '../../utils/tools'\r\n\r\nimport './login.scss'\r\nimport AppHeader from '../../components/Header'\r\nimport Account from './subpage/Account'\r\nimport PhoneLogin from './subpage/PhoneLogin'\r\nimport Footer from '../../components/Footer'\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      loginWay: 'phone',  // 登录方式，phone or account\r\n      prev: '/'\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    var params = queryString.parse(this.props.location.search)\r\n    // 已登录，不能访问登录页面\r\n    if (this.props.isLogin) {\r\n      if (params.prev) {\r\n        return this.props.history.push(transURL(params.prev))\r\n      }\r\n      return this.props.history.push('/')\r\n    }\r\n    this.setState({\r\n      prev: params.prev ? transURL(params.prev, true) : '/'\r\n    })\r\n  }\r\n\r\n  changeLoginWay(way) {\r\n    if (way === this.state.loginWay) return;\r\n    this.setState({\r\n      loginWay: way\r\n    })\r\n  }\r\n\r\n\trender() {\r\n\t\t/**\r\n\t\t * v4 包含路由 和 精准路由\r\n\t\t */\r\n    if (this.props.isLogin === true) {  // 已登录带回原始路由\r\n      return <Redirect to={this.state.prev} />\r\n    }\r\n    var path = this.props.location.pathname\r\n\t\treturn (\r\n\t\t\t<div className=\"login-body\">\r\n        <AppHeader />\r\n\t\t\t\t<div className=\"login-wrap\">\r\n\t\t\t\t\t<div className=\"login-title\"></div>\r\n\t\t\t\t\t<div className=\"login-form\">\r\n\t\t\t\t\t\t<div className=\"form\">\r\n\t\t\t\t\t\t\t<div className=\"form-t\">\r\n                <div onClick={this.changeLoginWay.bind(this, 'phone')} className={this.state.loginWay === 'phone' ? 't-l f1' : 't-l f2'}>手机登录</div>\r\n                <div onClick={this.changeLoginWay.bind(this, 'account')} className={this.state.loginWay === 'account' ? 't-l f1' : 't-l f2'}>账户登录</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<main>\r\n                {\r\n                  this.state.loginWay === 'phone'\r\n                  ? <PhoneLogin prev={this.state.prev} />\r\n                  : <Account prev={this.state.prev} />\r\n                }\r\n\t\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n        <Footer />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n    isLogin: state.auth.isLogin\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Login);\r\n","/**\r\n * 搜索页商品列表\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport { Link } from 'react-router-dom'\r\nimport config from '../../utils/config'\r\n\r\nimport { transPrice } from '../../utils/tools'\r\n\r\nimport './goods.scss'\r\n\r\nfunction splitName(name) {\r\n  if (name.length <= 50) return name;\r\n  return name.substring(0,50) + '...'\r\n}\r\n\r\nconst HOST = config.HOST\r\n\r\nconst SearchProductsList = (props) => {\r\n  return (\r\n    <div className=\"goodlist-wrap\">\r\n      {\r\n        props.products.map((product, index) => {\r\n          return (\r\n            <div className={classnames(\"good-wrap\", {\r\n              rowlast: (index + 1) % 5 === 0\r\n            })} key={index}>\r\n              <Link to={`/product_detail?goodId=${product._id}`}>\r\n                <div className=\"goodlogo-box\"><img src={`${HOST}/image/goods/logo/${product.logo}_210x210q90.jpg`} alt=\"\"/></div>\r\n              </Link>\r\n              <div className=\"good-price\"><span className=\"p_f1\">￥</span><span className=\"p_f2\">{transPrice(product.nowPrice)}</span></div>\r\n              <Link to={`/product_detail?goodId=${product._id}`}>\r\n                <div className=\"good-name\"><span>{splitName(product.goodName)}</span></div>\r\n              </Link>\r\n              <div className=\"good-store\"><span className=\"s_f1\">店铺：</span><span className=\"s_f2\">{product.storeName}</span></div>\r\n              <div className=\"good-number-box\">\r\n                <div className=\"good-number\">\r\n                  <span className=\"n_f1\">成交量：</span><span className=\"n_f2\">{product.number}笔</span>\r\n                </div>\r\n                <div className=\"good-number-chat\">\r\n                  聊\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nSearchProductsList.propTypes = {\r\n  products: PropTypes.array.isRequired\r\n}\r\n\r\nexport default SearchProductsList\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction subStoreName(name) {\r\n  if (typeof name !== 'string' || name.length < 6) return name;\r\n  return name.substring(0,5) + '...';\r\n}\r\nclass SubStore extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      stores: [],\r\n      detailTypes: []\r\n    }\r\n  }\r\n\r\n  // props.goods 参数更新, 根据 goods 请求 store 的信息\r\n  componentWillReceiveProps(nextProps) {\r\n    const goods = nextProps.goods\r\n    if (!Array.isArray(goods) || goods.length < 1) return;\r\n    // 根据detailType 请求 smaillType\r\n    axios.get(`${HOST}/api/goods/type?type=detail&detailId=${goods[0].detailId}`)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.setState({\r\n            detailTypes: res.data.payload\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (typeof(window) === 'object')\r\n          console.error(err)\r\n      })\r\n    // 获取 goods 中的 storeId\r\n    let storeIds = [];\r\n    storeIds.push(goods[0].storeId)\r\n    for (var i = 1, len = goods.length; i < len; i ++) {\r\n      var storeId = goods[i].storeId\r\n      var repeat = false\r\n        // 去重\r\n      for (var j = 0, len2 = storeIds.length; j < len2; j++) {\r\n        if (storeId === storeIds[j]) {\r\n          repeat = true\r\n          break\r\n        }\r\n      }\r\n      if (!repeat) storeIds.push(storeId)\r\n    }\r\n    // 请求 stores\r\n    if (storeIds.length < 1) return;\r\n    const jsonStoreIds = JSON.stringify(storeIds)\r\n    axios.get(`${HOST}/api/goods/search_store?storeIds=${jsonStoreIds}`)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.setState({\r\n            stores: res.data.payload\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (typeof(window) === 'object')\r\n          console.error(err)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    var detail = this.state.detailTypes.find((detail, index) => {\r\n                    return detail.detailId === this.props.goods[0].detailId\r\n                  })\r\n    return (\r\n      <div className=\"substore\">\r\n        {\r\n          /*展示首页 > 小分类 > 详细分类s */\r\n          this.state.detailTypes.length > 0 && (\r\n            <div className=\"crum\">\r\n              <div className=\"crum-1\"><Link to=\"/\"><span>首页</span></Link></div>\r\n              <div className=\"crum-2\">\r\n                <Link to={`/search_product?smaillId=${this.state.detailTypes[0].smaillId}`}>\r\n                  <span>{this.state.detailTypes[0].smaillName}</span>\r\n                </Link>\r\n              </div>\r\n              <div  className=\"crum-3\">\r\n                <Link to={`/search_product?detailId=${this.props.goods[0].detailId}`}>\r\n                  <span>\r\n                  {\r\n                    detail ? detail.detailName : this.state.detailTypes[0].detailName\r\n                  }\r\n                  </span>\r\n                </Link>\r\n                <ul className=\"crum-details\">\r\n                {\r\n                  this.state.detailTypes.map((detailType, index) => (\r\n                    <li className=\"\" key={index}>\r\n                      <Link\r\n                        className={classnames({'crum-selected': detailType.detailId === this.props.goods[0].detailId})}\r\n                        to={`/search_product?detailId=${detailType.detailId}`}\r\n                      >{detailType.detailName}</Link>\r\n                    </li>\r\n                  ))\r\n                }\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n        {\r\n          this.state.stores.length > 0 && <div className=\"substore-logo-box\">\r\n            <div className=\"s-logo-title\">推荐店铺</div>\r\n            <div className=\"s-logo-wrap\">\r\n            {\r\n              /*展示店铺图片*/\r\n              this.state.stores.map((store, index) => {\r\n                if (index > 7) return null\r\n                return (\r\n                  <div className=\"s-logo-item\" key={index}>\r\n                    <div className=\"s-store-logo\"><img src={`${HOST}/image/store/logo/${store.logo}`} alt=\"\"/></div>\r\n                    <div className=\"s-store-name\"><Link to={`/search_product?storeId=${store._id}`}><span>{subStoreName(store.storeName)}</span></Link></div>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nSubStore.propTypes = {\r\n  goods: PropTypes.array.isRequired\r\n}\r\n\r\nexport default SubStore\r\n","import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport queryString from 'query-string'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport config from '../../utils/config'\r\nimport { transSearchKeyword } from '../../utils/tools'\r\nimport { alertMessageAction } from '../../flux/actions/messageAction'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\nimport SearchProductsList from '../../components/Goods/SearchProductsList'\r\nimport SubStore from './subpage/SubStore'\r\nimport Loading from '../../components/PrivateRoute/subpage/WaitVerify'\r\nimport Footer from '../../components/Footer'\r\n\r\nimport { setSearchGoodsAction, setSearchKeyAction } from '../../flux/actions/productActions'\r\n\r\n// 获取浏览器视口的高度\r\nfunction getWindowHeight(){\r\n　　var windowHeight = 0;\r\n　　if(document.compatMode == \"CSS1Compat\"){\r\n　　　　windowHeight = document.documentElement.clientHeight;\r\n　　}else{\r\n　　　　windowHeight = document.body.clientHeight;\r\n　　}\r\n　　return windowHeight;\r\n}\r\n\r\n// 获取文档的总高度\r\nfunction getDocumentHeight(){\r\n　　var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;\r\n　　if(document.body){\r\n　　　　bodyScrollHeight = document.body.scrollHeight;\r\n　　}\r\n　　if(document.documentElement){\r\n　　　　documentScrollHeight = document.documentElement.scrollHeight;\r\n　　}\r\n　　scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;\r\n　　return scrollHeight;\r\n}\r\n// 滚动条在 Y 轴上的滚动距离\r\nfunction getScrollTop(){\r\n　　var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;\r\n　　if(document.body){\r\n　　　　bodyScrollTop = document.body.scrollTop;\r\n　　}\r\n　　if(document.documentElement){\r\n　　　　documentScrollTop = document.documentElement.scrollTop;\r\n　　}\r\n　　scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;\r\n　　return scrollTop;\r\n}\r\n\r\nconst HOST = config.HOST\r\n\r\nclass SearchProduct extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      condition: '?', //  搜索关键字\r\n      keyword: '',\r\n      limit: 0, // 搜索页数\r\n      end: false,  // 分页结束\r\n      products: [], // 搜索结果\r\n      loading: true,\r\n      errors: {}\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    var condition = this.props.location.search\r\n    var search = queryString.parse(condition);\r\n\r\n    // 第一次请求 20 条数据，后面每次请求 10 条\r\n    condition = ''\r\n    if (search.q) {\r\n    // 1. 有关键字\r\n      condition += `&q=${encodeURIComponent(search.q)}`\r\n    }else if (/^[1-9]\\d*$/.test(search.storeId)) {\r\n    // 2. 有店铺 id\r\n      condition += `&storeId=${search.storeId}`\r\n    }else if (/^[1-9]\\d*$/.test(search.detailId)) {\r\n    // 3. 有详细分类 id\r\n      condition += `&detailId=${search.detailId}`\r\n    }else if (/^[1-9]\\d*$/.test(search.smaillId)) {\r\n    // 4. else 有小分类 id\r\n      condition += `&smaillId=${search.smaillId}`\r\n    }else if (/^[1-9]\\d*$/.test(search.bigId)) {\r\n    // 5. else 有大分类 id\r\n      condition += `&bigId=${search.bigId}`\r\n    }\r\n    if (condition === '') {\r\n      return this.setState({\r\n        loading: false,\r\n        condition: ''\r\n      })\r\n    }\r\n\r\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=20${condition}`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            loading: false,\r\n            errors: { ...this.state.errors, search: res.data.message }\r\n          })\r\n        }\r\n        this.setState({\r\n          loading: false,\r\n          products: res.data.payload.products,\r\n          end: res.data.payload.end,\r\n          condition,\r\n          keyword: search.q ? search.q.replace(/\\+/g, ' ') : ''\r\n        }, () => {\r\n          this.props.history.push(`/search_products?limit1=0&limit2=10${condition}`)\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          loading: false,\r\n          errors: { ...this.state.errors, search: err.message }\r\n        })\r\n      })\r\n  }\r\n\r\n  componentDidMount() {\r\n    var _this = this\r\n    window.onscroll = function () {\r\n      if (!_this.state.end && !_this.state.loading && getScrollTop() + getWindowHeight() >= getDocumentHeight() - 200) {\r\n        // 先暂停后发送请求\r\n        _this.setState({\r\n          loading: true\r\n        }, function() {\r\n            var get = `limit1=${this.state.products.length}&limit2=10${this.state.condition}`\r\n            axios.get(`${HOST}/api/goods/search_product?${get}`)\r\n              .then(res => {\r\n                if (!res.data.success) {\r\n                  return _this.setState({\r\n                    loading: false,\r\n                    errors: { ..._this.state.errors, search: res.data.message }\r\n                  })\r\n                }\r\n                _this.setState({\r\n                  loading: false,\r\n                  products: _this.state.products.concat(res.data.payload.products),\r\n                  end: res.data.payload.end,\r\n                  // limit: Number(_this.state.limit) + 1\r\n                }, function () {\r\n                  if (res.data.payload.end) {\r\n                    window.onscroll = null\r\n                  }\r\n                  _this.props.history.push(`/search_products?${get}`)\r\n                })\r\n              })\r\n              .catch(err => {\r\n                _this.setState({\r\n                    loading: false,\r\n                  errors: { ..._this.state.errors, search: err.message }\r\n                })\r\n              })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.onscroll = null\r\n  }\r\n\r\n  keywordChangeHandler(e) {\r\n    this.setState({\r\n      keyword: e.target.value\r\n    })\r\n  }\r\n\r\n  // 点击搜索关键字\r\n  searchProductSubmit(e) {\r\n    e.preventDefault()\r\n    if (this.state.keyword.trim() === '') {\r\n      return this.props.alertMessageAction('请输入要搜索的商品描述')\r\n    }\r\n    var condition = `&q=${transSearchKeyword(this.state.keyword)}`\r\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=20${condition}`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: { ...this.state.errors, search: res.data.message }\r\n          })\r\n        }\r\n        this.setState({\r\n          products: res.data.payload.products,\r\n          end: res.data.payload.end,\r\n          condition\r\n        }, () => {\r\n          this.props.history.push(`/search_products?limit1=0&limit2=20${condition}`)\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: { ...this.state.errors, search: err.message }\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.products) {\r\n      return <div><Header /><h2>发生了未知的错误</h2></div>\r\n    }\r\n    // 将 goods 20个一组进行分组\r\n    var group = this.state.products.reduce((prev, next) => {\r\n      if (prev.goods[prev.count].length >= prev.limit) {\r\n        prev.goods.push([next])\r\n        prev.count++\r\n      }else {\r\n        prev.goods[prev.count].push(next)\r\n      }\r\n      return prev\r\n    }, {count: 0, limit: 20, goods: [[]]})\r\n    var products = group.goods[0].length === 0 ? [] : group.goods\r\n\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"sear\">\r\n          <div className=\"sear-logo\"><Link to=\"/\"><img src={`${HOST}/image/ui/search_home_logo.png`} alt=\"\"/></Link></div>\r\n          <div className=\"sear-input-wrap\">\r\n            <form onSubmit={this.searchProductSubmit.bind(this)}>\r\n              <div>\r\n                <input value={this.state.keyword} onChange={this.keywordChangeHandler.bind(this)} placeholder=\"在此输入商品描述\" className=\"sear-input\" type=\"text\"/>\r\n              </div>\r\n              <div>\r\n                <button type=\"submit\" onClick={this.searchProductSubmit.bind(this)} className=\"com-search-btn\">搜索</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <div className=\"search-product\">\r\n          <hr className=\"search-hr\" />\r\n          {\r\n            this.state.products.length > 0 && <SubStore goods={this.state.products} />\r\n          }\r\n         { products.map((item, index) => <SearchProductsList products={item} key={index}/>) }\r\n         {\r\n          this.state.loading && <Loading message=\"努力加载中。。。\" />\r\n         }\r\n         {\r\n          this.state.condition === '' && <h2 style={{height: '200px', lineHeight: '200px'}}>搜索条件为空！</h2>\r\n         }\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction })(SearchProduct)\r\n\r\n","import React from 'react'\nimport { historyPush } from './index'\n\nclass GotoSearchProduct extends React.Component {\n  componentWillMount() {\n    this.props.history.push('/search_products' + this.props.location.search)\n  }\n  render() {\n    return (\n      <div>404</div>\n    )\n  }\n}\nexport default GotoSearchProduct\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withRouter, Link } from 'react-router-dom'\n\nimport './index.scss'\nimport config from '../../utils/config'\nconst HOST = config.HOST\n\nclass StoreHeader extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      searchKey: ''\n    }\n    this.onSearchInputChange = this.onSearchInputChange.bind(this)\n  }\n  onSearchInputChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    })\n  }\n  // 搜所有\n  searchAllProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}`)\n  }\n  // 搜本店\n  searchStoreProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}&storeId=${this.props.storeInfo.storeId}`)\n  }\n  render() {\n    const storeInfo = this.props.storeInfo\n    return (\n      <div className=\"store-header\">\n          <div className=\"store-cp-logo\">\n            <Link to=\"/\">\n              <img src={`${HOST}/image/ui/storetitle.png`} height=\"60px\" />\n            </Link>\n          </div>\n        <div className=\"store-info-wrap\">\n          <div className=\"store-info-logo\">\n              <img height=\"60px\" src={`${HOST}/image/store/logo/${storeInfo.logo || 'default.jpg'}`} alt=\"优选\"/>\n          </div>\n\n          <div className=\"store-info\">\n            <p className=\"store-name\">店铺：{storeInfo.storeName}</p>\n            <p className=\"store-boos\">掌柜：{storeInfo.nickname}</p>\n          </div>\n        </div>\n        <div className=\"store-search\">\n          <div className=\"store-search-input\"><input value={this.state.searchKey} onChange={this.onSearchInputChange} type=\"text\"/></div>\n          <button style={{background: `url(\"${HOST}/image/ui/TB1ZWVhJpXXXXa4XVXXs1m4TXXX-458-36.png\") top right no-repeat`}} className=\"store-search-btn-all\" onClick={this.searchAllProduct.bind(this)}>搜索</button>\n          <button className=\"store-search-btn-this\" onClick={this.searchStoreProduct.bind(this)}>搜本店</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nStoreHeader.propTypes = {\n  storeInfo: PropTypes.object.isRequired\n}\n\nexport default withRouter(StoreHeader)\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport { transPrice, transURL } from '../../../utils/tools'\r\n\r\nimport { setBuyProductsAction } from '../../../flux/actions/orderActions'\r\nimport { alertMessageAction } from '../../../flux/actions/messageAction'\r\nimport socket from '../../../utils/socket'\r\n\r\nconst HOST = config.HOST\r\n\r\nvar initShopCar = true  // 记录是第一次更新购物车\r\n\r\nclass Spec extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      smaillx: 0,\r\n      smailly: 0,\r\n      bigImg: false, // 是否展示大图\r\n      showMustChoice: false,\r\n      selectImg: props.smaillPicture[0].link,\r\n      nowPrice: 99999,\r\n      allAmount: 0, // 商品总库存\r\n      specChoice: [],  // 选中的属性组合\r\n      choiceProductDetail: {},  // 选中属性组合的商品详情\r\n      choiceNumber: 1,\r\n      specConfig: [] // 重新组合后的属性关系映射\r\n    }\r\n    this.specValueClick = this.specValueClick.bind(this)\r\n    this.onSmaillMouseOver = this.onSmaillMouseOver.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.props.shopCar.length > 0) { initShopCar = false } // 购物车已初始化\r\n    // 重新组合属性关系映射\r\n    var config = this.props.specConfig\r\n    var newConfig = []\r\n    if (Array.isArray(config)) {\r\n      for (var j = 0; j < config.length; j++) {\r\n        if (newConfig[config[j].detailIndex - 1] === undefined) {\r\n           newConfig[config[j].detailIndex - 1] = []\r\n        }\r\n        newConfig[config[j].detailIndex - 1][config[j].specNameIndex-1] = config[j].specValueIndex\r\n      }\r\n      // 计算总库存\r\n      var allAmount = 0\r\n      for (var i = 0, len = this.props.goodDetail.length; i < len; i++) {\r\n        allAmount += this.props.goodDetail[i].amount\r\n      }\r\n    }\r\n    // 删除库存为 0 属性\r\n    this.setState({\r\n      nowPrice: this.props.goodInfo.nowPrice || 99999,\r\n      specConfig: newConfig,\r\n      allAmount: allAmount,\r\n      selectImg: this.props.smaillPicture[0].link,\r\n      // 商品没有属性分类\r\n      choiceProductDetail: Array.isArray(this.props.specName) && this.props.specName.length > 0 ? {} : this.props.goodDetail[0]\r\n    })\r\n  }\r\n\r\n  componentWillReceiveProps (nextProps) {\r\n    if (initShopCar) {\r\n      initShopCar = false\r\n      return\r\n    }\r\n    let nowcount = this.props.shopCar.reduce((prev, next) => prev + next.products.length, 0)\r\n    var nextcount = nextProps.shopCar.reduce((prev, next) => prev + next.products.length, 0)\r\n    if (nowcount < nextcount) {\r\n      // 添加商品到购物车成功\r\n      this.props.alertMessageAction('添加成功，在购物车等 亲 >_<')\r\n    }\r\n  }\r\n\r\n  // 点击选择属性\r\n  specValueClick(value) {\r\n    var _this = this\r\n    return function () {\r\n      // 更新选择的属性\r\n      if (_this.state.specChoice[value.specNameIndex-1] === value.indexx) return;\r\n      var specChoice = [..._this.state.specChoice]\r\n      specChoice[value.specNameIndex-1] = value.indexx\r\n\r\n      // 更新选择的商品详情和价格\r\n      var specConfig = _this.state.specConfig\r\n      var choiceProductDetail = _this.state.choiceProductDetail\r\n      for (var i = 0, len = specConfig.length; i < len; i++) {\r\n        var isOK = true\r\n        for (var j = 0, len2 = specConfig[i].length; j < len2; j++) {\r\n          if (specChoice[j] !== specConfig[i][j]) {\r\n            isOK = false\r\n            break;\r\n          }\r\n        }\r\n        if (isOK) {\r\n          choiceProductDetail = _this.props.goodDetail.find(item => item.indexx === i+1)\r\n          break;\r\n        }\r\n      }\r\n      _this.setState({\r\n        specChoice,\r\n        choiceProductDetail\r\n      })\r\n    }\r\n  }\r\n\r\n  // 点击选择数量\r\n  choiceNumberChange(e) {\r\n    var number = e.target.value\r\n    var before = this.state.choiceNumber\r\n    var _this = this\r\n    this.setState({\r\n      choiceNumber: number\r\n    }, function () {\r\n      if (!/^[1-9]\\d{0,}$/.test(number)) {\r\n        setTimeout(function () {\r\n          _this.setState({\r\n            choiceNumber: /^[1-9]\\d{0,}$/.test(before) ? before : 1\r\n          })\r\n        }, 200)\r\n      }\r\n    })\r\n  }\r\n  // 数量减一\r\n  minusNumber() {\r\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) - 1} })\r\n  }\r\n  // 数量加一\r\n  plusNumber() {\r\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) + 1} })\r\n  }\r\n  // 鼠标移到小图片上\r\n  onSmaillMouseOver(link) {\r\n    var _this = this\r\n    return function () {\r\n      _this.setState({\r\n        selectImg: link\r\n      })\r\n    }\r\n  }\r\n  // 关闭必须选择框\r\n  closeMustChoice() {\r\n    this.setState({\r\n      showMustChoice: false\r\n    })\r\n  }\r\n  buyNow() {\r\n    // 如果商品未选择，或选择数量大于库存量\r\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\r\n      return this.setState({\r\n        showMustChoice: true\r\n      })\r\n    }\r\n    // var buyProduct = [{\r\n    //   goodId: this.props.goodId,\r\n    //   productName: this.props.goodInfo.goodName,\r\n    //   specName: this.props.specName,\r\n    //   specValue: this.props.specValue,\r\n    //   specChoice: this.state.specChoice,\r\n    //   productDetail: this.state.choiceProductDetail,\r\n    //   number: this.state.choiceNumber,\r\n    //   storeName: this.props.storeInfo.storeName,\r\n    //   nickname: this.props.storeInfo.nickname\r\n    // }]\r\n    // specName: this.props.specName,\r\n    // specValue: this.props.specValue,\r\n    // specChoice: this.state.specChoice,\r\n    var buyProduct = [{\r\n      goodId: this.props.goodId,\r\n      goodName: this.props.goodInfo.goodName,\r\n      storeName: this.props.storeInfo.storeName,\r\n      storeId: this.props.storeInfo.storeId,\r\n      nickname: this.props.storeInfo.nickname,\r\n      number: this.state.choiceNumber,\r\n      goodDetailId: this.state.choiceProductDetail._id,\r\n      amount: this.state.choiceProductDetail.amount,\r\n      price: this.state.choiceProductDetail.price,\r\n      spec: this.state.specChoice.map((v, n) => ({\r\n        specName: this.props.specName[n].specName,\r\n        specValue: this.props.specValue.find(val => val.indexx === v).specValue\r\n      }))\r\n    }]\r\n    this.props.setBuyProductsAction(buyProduct)\r\n    this.props.history.push('/order')\r\n  }\r\n\r\n  // 添加到购物车\r\n  addShopCar() {\r\n    // 如果商品未选择，或选择数量大于库存量\r\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\r\n      return this.setState({\r\n        showMustChoice: true\r\n      })\r\n    }\r\n    // 未登录跳转到登录页\r\n    if (!this.props.isLogin) {\r\n      let prev = transURL(this.props.location.pathname + this.props.location.search)\r\n      return this.props.history.push(`/login?prev=${prev}`)\r\n    }\r\n\r\n    if (socket.status !== 'open') {\r\n      return this.setState({\r\n        errors: {\r\n          ...this.state.errors,\r\n          addShopCar: '网络未连接'\r\n        }\r\n      })\r\n    }\r\n\r\n    // webSocket 发送添加购物车请求\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'add_shopcar_product',\r\n      target: 'koa',\r\n      content: {\r\n        goodDetailId: this.state.choiceProductDetail._id,\r\n        number: this.state.choiceNumber\r\n      }\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    const goodInfo = this.props.goodInfo\r\n    const smaillPicture = this.props.smaillPicture\r\n    return (\r\n      <div className=\"spec-wrap\">\r\n        {/*图片组*/}\r\n        <div className=\"spec-smail-picture-wrap\">\r\n          <div className=\"spec-smail-bigone-wrap\"><img className=\"spec-smail-bigone\" height=\"430px\" src={`${HOST}/image/goods/smaill/${this.state.selectImg}_430x430q90.jpg`} alt=\"\"/></div>\r\n          <div className=\"spec-smaill-item-wrap\">\r\n            {\r\n              this.props.smaillPicture.map((item, index) => (\r\n                <div key={index} className=\"spec-priture-item\">\r\n                  <div className={this.state.selectImg === item.link ? \"spec-img-selected\" : \"spec-item-img-box\"}\r\n                      onMouseOver={this.onSmaillMouseOver(item.link)}\r\n                  >\r\n                    <img src={`${HOST}/image/goods/smaill/${item.link}_60x60q90.jpg`} alt=\"\"/>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n        </div>\r\n        {/*spec属性信息*/}\r\n        <div className=\"spec-goodinfo\">\r\n          <h3 className=\"spec-good-name\">{goodInfo.goodName}</h3>\r\n          <div className=\"spec-good-price\" style={{background: `url(${HOST}/image/ui/price_background.png) left top`}}>\r\n            <span className=\"sgp-f1\">价格</span>\r\n            <span className=\"sgp-f2\">￥</span>\r\n            <span className=\"sgp-f3\">{transPrice(this.state.choiceProductDetail.price || this.state.nowPrice)}</span>\r\n          </div>\r\n          <div className=\"sell-count\">\r\n            <div className=\"sell-count-l\"><span className=\"sc-f1\">总销量</span><span className=\"sc-f2\">{goodInfo.number}</span></div>\r\n            <div className=\"sell-count-r\"><span className=\"sc-f1\">累计评价</span><span className=\"sc-f2\">{this.props.comments.length}</span></div>\r\n          </div>\r\n          <div className={classnames({\"show-choice\": this.state.showMustChoice})}>\r\n            <div style={{display: this.state.showMustChoice ? 'block':'none'}} className=\"show-choice-title\">\r\n              <div className=\"sct-l\">请选择您要的商品信息</div>\r\n              <div onClick={this.closeMustChoice.bind(this)} className=\"sct-r\">X</div>\r\n            </div>\r\n            {\r\n              this.props.specName && this.props.specName.map((name, index) => (\r\n                <div className=\"specName-wrap\" key={index}>\r\n                  <div className=\"spec-name\">{name.specName}</div>\r\n                  <div className=\"spec-value\">\r\n                  {\r\n                    this.props.specValue && this.props.specValue.map((value, index) => {\r\n                      return value.specNameIndex === name.indexx ?  (\r\n                        <div\r\n                          className={classnames('spec-value-item', {'value-item-selected':this.state.specChoice[name.indexx-1] === value.indexx})}\r\n                          onClick={this.specValueClick(value)}\r\n                          key={index}\r\n                        >\r\n                          <span>{value.specValue}</span>\r\n                          <i className=\"item-selected-i\" style={{\r\n                            background: `url(${HOST}/image/ui/background_selected.png) 0px 0px no-repeat`\r\n                          }}></i>\r\n                        </div>\r\n                      ) : null\r\n                    })\r\n                  }\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n            <div className=\"g-num-wrap\">\r\n              <div className=\"good-number-name\">数量</div>\r\n              <div className=\"good-number-wrap\">\r\n                <div className=\"spec-num-input-wrap\">\r\n                  <input className=\"spec-number-input\" value={this.state.choiceNumber} onChange={this.choiceNumberChange.bind(this)} type=\"text\"/>\r\n\r\n                </div>\r\n                <div className=\"good-number-plus-minus\">\r\n                  <div onClick={this.plusNumber.bind(this)} className=\"spec-number-plus\" style={{background: `url(${HOST}/image/ui/plus.png) no-repeat`, backgroundSize: '11px 11px', marginBottom: '4px', border: '1px solid #a7a6ab'}}></div>\r\n                  <div onClick={this.minusNumber.bind(this)} className=\"spec-number-minus\" style={{background: `url(${HOST}/image/ui/minus.png) no-repeat`, backgroundSize: '11px 11px', border: '1px solid #a7a6ab'}}></div>\r\n                </div>\r\n              </div>\r\n              <div className=\"good-num-unit\">件</div>\r\n              <div className=\"good-num-kucun\">库存{this.state.choiceProductDetail.amount === undefined ? this.state.allAmount : this.state.choiceProductDetail.amount}件</div>\r\n            </div>\r\n            <div\r\n              style={{\r\n                display: this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount ? 'block' : 'none') : (this.state.choiceNumber > this.state.allAmount ? 'block' : 'none'),\r\n                marginTop: '10px',\r\n                marginLeft: '70px',\r\n              }}\r\n            >\r\n              <span className=\"good-num-over\">\r\n                <span style={{\r\n                  display: 'inline-block',\r\n                  background: `url(${HOST}/image/ui/msg.png) -61px -1px no-repeat`,\r\n                  width: '23px',\r\n                  height: '22px',\r\n                  marginBottom: '-5px'\r\n                }}></span>\r\n                <span>您所填写数量商品超过库存！</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"good-buy-wrap\">\r\n            <button onClick={this.buyNow.bind(this)}\r\n              className={classnames(\"good-buy-now\", {\r\n                'buy-now-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\r\n              })} to=\"/\">立即购买</button>\r\n            <button onClick={this.addShopCar.bind(this)} className={classnames(\"add-shopcat\", {\r\n                'add-shopcat-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\r\n              })}>加入购物车</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSpec.propTypes = {\r\n  goodId: PropTypes.string.isRequired,\r\n  goodDetail: PropTypes.array.isRequired,\r\n  goodInfo: PropTypes.object.isRequired,\r\n  smaillPicture: PropTypes.array.isRequired,\r\n  specConfig: PropTypes.array,\r\n  specName: PropTypes.array,\r\n  specValue: PropTypes.array,\r\n  comments: PropTypes.array.isRequired,\r\n  setBuyProductsAction: PropTypes.func.isRequired,\r\n  storeInfo: PropTypes.object.isRequired,\r\n  isLogin: PropTypes.bool.isRequired,\r\n  shopCar: PropTypes.array.isRequired,\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isLogin: state.auth.isLogin,\r\n    shopCar: state.auth.shopCar,\r\n    goodDetail: state.product.productDetail.goodDetail,\r\n    goodInfo: state.product.productDetail.goodInfo,\r\n    smaillPicture: state.product.productDetail.smaillPicture,\r\n    specConfig: state.product.productDetail.specConfig,\r\n    specName: state.product.productDetail.specName,\r\n    specValue: state.product.productDetail.specValue,\r\n    comments: state.product.productDetail.comments,\r\n    goodId: state.product.productDetail.goodId,\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction, alertMessageAction })(Spec))\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport LazyLoad from 'react-lazyload'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\n/**\r\n * 未实现懒加载\r\n */\r\nclass ProductInfo extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      showDetail: true\r\n    }\r\n  }\r\n  showDetial(showDetail) {\r\n    return function() {\r\n      this.setState({\r\n        showDetail\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"product-info-wrap\">\r\n        <div className=\"product-info-box\">\r\n          <div className=\"product-info-nav\">\r\n            <div className={classnames(\"pin-1\", {\r\n              'product-info-selected': this.state.showDetail\r\n            })} onClick={this.showDetial(true).bind(this)}>商品详情</div>\r\n            <div className={classnames(\"pin-2\", {\r\n              'product-info-selected': !this.state.showDetail\r\n            })} onClick={this.showDetial(false).bind(this)}>累计评价</div>\r\n          </div>\r\n          {\r\n            /*商品详情图*/\r\n            this.state.showDetail && this.props.infoPicture.map((item, index) => (\r\n              <div className=\"info-picture-item\" key={index}>\r\n                <LazyLoad height={600} offset={100}>\r\n                  <img src={`${HOST}/image/goods/info/${item.link}`}/>\r\n                </LazyLoad>\r\n              </div>\r\n            ))\r\n          }\r\n          {\r\n            /*评论*/\r\n            this.props.comments.map((item, index) => (\r\n              <div key={index}>\r\n                <div>{item.nickname}</div>\r\n                <div>{item.content}</div>\r\n                <div>{item.creaTime}</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nProductInfo.propTypes = {\r\n  infoPicture: PropTypes.array.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n}\r\n\r\nexport default ProductInfo\r\n","import React from 'react'\r\nimport queryString from 'query-string'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { setProductDetailAction } from '../../flux/actions/productActions'\r\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\nimport StoreHeader from '../../components/StoreHeader'\r\nimport Spec from './subpage/Spec'\r\nimport ProductInfo from './subpage/ProductInfo'\r\nimport Footer from '../../components/Footer'\r\n\r\nclass ProductDetail extends React.Component {\r\n  componentWillMount() {\r\n    const info = queryString.parse(this.props.location.search)\r\n    // 没有 goodId 返回上一级路由\r\n    if (!/^\\d+/.test(info.goodId)) {this.props.history.push(this.props.auth.location || '/')}\r\n    this.props.setProductDetailAction(info.goodId)\r\n\r\n    this.props.setRouterLocationAction('/product_detail' + this.props.location.search)\r\n  }\r\n  componentWillUnmount() {\r\n    // 将 store 中的 productDetail，变成初始状态\r\n    this.props.setProductDetailAction(-1)\r\n  }\r\n  render() {\r\n    const product = this.props.productDetail\r\n    if (!product || !product.goodDetail) {\r\n      return <div>发生了意外的错误！</div>\r\n    }\r\n    return (\r\n      <div>\r\n        <Header />\r\n        {\r\n          product.goodDetail.length < 1 ?\r\n            <div>{product.error || product.message || '商品还没有详情'}</div> :\r\n            <div>\r\n              {/*店铺头信息*/}\r\n              <StoreHeader storeInfo={product.goodInfo} />\r\n              <hr className=\"store-hr\" />\r\n              {/*商品信息属性*/}\r\n              <Spec storeInfo={product.goodInfo} />\r\n              {/*商品介绍信息*/}\r\n              <ProductInfo comments={product.comments} infoPicture={product.infoPicture} />\r\n            </div>\r\n        }\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nProductDetail.propTypes = {\r\n  productDetail: PropTypes.object.isRequired,\r\n  setProductDetailAction: PropTypes.func.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    productDetail: state.product.productDetail\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { setProductDetailAction,setRouterLocationAction })(ProductDetail)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport config from '../../../utils/config'\r\nimport { isEmail, isPhone } from '../../../utils/validator'\r\nconst HOST = config.HOST\r\n\r\nclass Safety extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      edit: '',  // email or phone or success or password\r\n      newEmail: '',\r\n      newPhone: '',\r\n      newPhone2: '',\r\n      smsCode1: '',\r\n      smsCode2: '',\r\n      password: '',\r\n      newPassword: '',\r\n      smsCode3: '',\r\n      smsState: 'normal', // wait or normal\r\n      property: 0,\r\n      pay: 100,  // 充值金额\r\n      showProperty: false,\r\n      errors: {}\r\n    }\r\n  }\r\n\r\n  // 切换修改手机和修改邮箱\r\n  editChange(_, edit) {\r\n    this.setState({\r\n      edit: edit,\r\n      smsState: 'normal'\r\n    })\r\n  }\r\n\r\n  editInputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  // 发短信\r\n  sendSMS(e) {\r\n    if (this.state.smsState !== 'normal') return;\r\n    const btn = e.target\r\n    var _this = this\r\n    axios.get(`${HOST}/api/operator/testsms`)\r\n      .then(res => {\r\n        console.log(res.data)\r\n        if (res.data.success) {\r\n          this.setState({smsState: 'wait'}, function() {\r\n            var count = 60\r\n            var interval = setInterval(function() {\r\n              count--\r\n              if (btn)\r\n                btn.innerText = `重发 ${count}...`\r\n              if (count == 0) {\r\n                clearInterval(interval)\r\n                _this.setState({smsState: 'normal'}, function() {\r\n                  if (btn)\r\n                    btn.innerText = '点击发送';\r\n                })\r\n              }\r\n            }, 1000)\r\n          })\r\n        }else {\r\n          this.setState({\r\n            errors: {...this.state.errors, [btn.name]: res.data.message}\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, [btn.name]: err.message}\r\n        })\r\n      })\r\n  }\r\n\r\n  // 修改邮箱\r\n  editEmailSubmit() {\r\n    var errors = {}\r\n    if (!isEmail(this.state.newEmail)) {\r\n      errors.newEmail = \"邮箱格式有误\"\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode1)) {\r\n      errors.smsCode1 = '验证码有误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      newEmail: this.state.newEmail,\r\n      smsCode: this.state.smsCode1,\r\n    }).then(res => {\r\n      if (res.data.success) {\r\n        return this.setState({\r\n          edit: 'success',\r\n          newEmail: '',\r\n          smsCode1: '',\r\n          errors: {}\r\n        })\r\n      }\r\n      this.setState({\r\n        errors: {...this.state.errors, emailSubmit: res.data.message}\r\n      })\r\n    }).catch(err => {\r\n      this.setState({\r\n        errors: {...this.state.errors, phoneSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  // 修改手机\r\n  editPhoneSubmit() {\r\n    var errors = {}\r\n    if (!isPhone(this.state.newPhone)) {\r\n      errors.newPhone = '手机格式有误'\r\n    }\r\n    if (this.state.newPhone !== this.state.newPhone2) {\r\n      errors.newPhone2 = '两次输入不一致'\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode2)) {\r\n      errors.smsCode2 = '验证码有误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      newPhone: this.state.newPhone,\r\n      smsCode: this.state.smsCode2\r\n    }).then(res => {\r\n      if (!res.data.success) {\r\n        return this.setState({\r\n          errors: {...this.state.errors, phoneSubmit: res.data.message}\r\n        })\r\n      }\r\n      this.setState({\r\n        edit: 'success',\r\n        newPhone: '',\r\n        newPhone2: '',\r\n        smsCode2: '',\r\n        errors: {}\r\n      })\r\n    }).catch(err => {\r\n      this.setState({\r\n        errors: {...this.state.errors, phoneSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  // 修改密码\r\n  editPasswordSubmit() {\r\n    var errors = {}\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\r\n      errors.password = '密码格式有误，6-20位，可包含,\\';)(!~·`\\/\\\\{}\"<>?+-=_.特殊字符'\r\n    }\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.newPassword)) {\r\n      errors.newPassword = '密码格式有误，6-20位，可包含,\\';)(!~·`\\/\\\\{}\"<>?+-=_.特殊字符'\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode3)) {\r\n      errors.smsCode3 = '验证码有误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      password: this.state.password,\r\n      newPassword: this.state.newPassword,\r\n      smsCode: this.state.smsCode3\r\n    }).then(res => {\r\n      if (!res.data.success) {\r\n        return this.setState({\r\n          errors: {...this.state.errors, passwordSubmit: res.data.message}\r\n        })\r\n      }\r\n      this.setState({\r\n        edit: 'success',\r\n        password: '',\r\n        newPassword: '',\r\n        smsCode3: '',\r\n        errors: {}\r\n      })\r\n    })\r\n    .catch(err => {\r\n      this.setState({\r\n        errors: {...this.state.errors, passwordSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  // 立即充值\r\n  paySubmit() {\r\n    console.log(this.state.pay)\r\n  }\r\n\r\n  // 查看余额\r\n  checkProperty() {\r\n    if (this.state.showProperty) return;\r\n    if (!this.state.property) {\r\n      axios.get(`${HOST}/api/users/get_property`)\r\n        .then(res => {\r\n          if (!res.data.success) {\r\n            this.setState({\r\n              errors: {...this.state.errors, property: res.data.message}\r\n            })\r\n          }\r\n          this.setState({\r\n            showProperty: true,\r\n            property: res.data.payload\r\n          })\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            errors: {...this.state.errors, property: err.message}\r\n          })\r\n        })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"user-safe-wrap\">\r\n        <div className=\"uis-title\">你的基础信息</div>\r\n        <div>\r\n          <div className=\"uis-item\">\r\n            <span>会员名：</span>\r\n            <span>{this.props.user.nickname}</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>登录邮箱：</span>\r\n            <span>{this.props.user.email || '空'}</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"email\")}>修改邮箱</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>绑定手机：</span>\r\n            <span>{this.props.user.phone}</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"phone\")}>修改手机</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>我的密码：</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"password\")}>修改密码</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>账户余额：</span>\r\n            {\r\n              this.state.showProperty\r\n              ? <span className=\"uis-i-property\">￥{this.state.property}</span>\r\n              : <span onClick={this.checkProperty.bind(this)} className=\"uis-i-modify\">点击查看</span>\r\n            }\r\n            <span onClick={this.editChange.bind(this, null, \"pay\")} className=\"uis-i-modify\">立即充值</span>\r\n          </div>\r\n          {\r\n            this.state.errors.property && <div className=\"tit-err\">{this.state.errors.property}</div>\r\n          }\r\n        </div>\r\n        <div className=\"uis-edit-wrap\">\r\n          {\r\n            this.state.edit === 'email' ? (  // 修改邮箱\r\n              <div>\r\n                <div className=\"uis-title\">修改您的邮箱</div>\r\n                <div className=\"uis-e-content uis-e-email\">\r\n                {\r\n                  /*this.props.user.email && <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"old-email\">*旧的邮箱：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"oldEmail\" value={this.state.oldEmail} className=\"uis-modify-text\" id=\"old-email\" type=\"text\"/>\r\n                  </div>*/\r\n                }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-email\">*新的邮箱：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newEmail\" value={this.state.newEmail}  className=\"uis-modify-text\" id=\"new-email\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newEmail && <div className=\"form-err\">{this.state.errors.newEmail}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code1\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input onChange={this.editInputChange.bind(this)} name=\"smsCode1\" value={this.state.smsCode1}  id=\"sms-code1\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode1\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode1 && <div className=\"form-err\">{this.state.errors.smsCode1}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editEmailSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.emailSubmit && <div className=\"form-err\">{this.state.errors.emailSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ) : this.state.edit === 'phone' ? (  // 修改手机号码\r\n              <div>\r\n                <div className=\"uis-title\">修改您的手机</div>\r\n                <div className=\"uis-e-content uis-e-phone\">\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-phone\">*新的手机号码：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone\" value={this.state.newPhone} className=\"uis-modify-text\" id=\"new-phone\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPhone && <div className=\"form-err\">{this.state.errors.newPhone}</div>\r\n                  }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-phone2\">*请再次输入以确认：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone2\" value={this.state.newPhone2} className=\"uis-modify-text\" id=\"new-phone2\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPhone2 && <div className=\"form-err\">{this.state.errors.newPhone2}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code2\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input id=\"sms-code2\" onChange={this.editInputChange.bind(this)} value={this.state.smsCode2} name=\"smsCode2\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode2\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode2 && <div className=\"form-err\">{this.state.errors.smsCode2}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editPhoneSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.phoneSubmit && <div className=\"form-err\">{this.state.errors.phoneSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ): this.state.edit === 'password' ? (  // 修改密码\r\n              <div>\r\n                <div className=\"uis-title\">修改您的密码</div>\r\n                <div className=\"uis-e-content uis-e-phone\">\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"password\">*输入当前密码：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"password\" value={this.state.password} className=\"uis-modify-text\" id=\"password\" type=\"password\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.password && <div className=\"form-err\">{this.state.errors.password}</div>\r\n                  }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"newPassword\">*输入新的密码：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPassword\" value={this.state.newPassword} className=\"uis-modify-text\" id=\"newPassword\" type=\"password\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPassword && <div className=\"form-err\">{this.state.errors.newPassword}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code3\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input id=\"sms-code3\" onChange={this.editInputChange.bind(this)} value={this.state.smsCode3} name=\"smsCode3\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode3\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode3 && <div className=\"form-err\">{this.state.errors.smsCode3}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editPasswordSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.passwordSubmit && <div className=\"form-err\">{this.state.errors.passwordSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ) : this.state.edit === 'pay' ? (\r\n              <div>\r\n                <div className=\"uis-title\">余额充值</div>\r\n                <div className=\"uis-item uis-edit-item\">\r\n                  <label htmlFor=\"pay\">*输入充值金额(￥)：</label>\r\n                  <input onChange={this.editInputChange.bind(this)} name=\"pay\" value={this.state.pay} className=\"uis-modify-text uis-pay-test\" id=\"pay\" type=\"number\"/>\r\n                </div>\r\n                {\r\n                  this.state.errors.pay && <div className=\"form-err\">{this.state.errors.pay}</div>\r\n                }\r\n                <div className=\"uis-btn-submit uis-btn-pay\"><button onClick={this.paySubmit.bind(this)}>立即付款</button></div>\r\n              </div>\r\n            ) : this.state.edit === 'success' ? (\r\n              <h3>修改成功</h3>\r\n            ) : null\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSafety.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n   user: state.auth.user || {}\r\n })\r\n\r\nexport default connect(mapStateToProps)(Safety)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport axios from 'axios'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { getDate, formatDate } from '../../../utils/tools'\r\nimport { updateUserInfo } from '../../../flux/actions/authActions'\r\nimport { alertMessageAction } from '../../../flux/actions/messageAction'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\nfunction transDate(date, type) {\r\n  if (typeof(date) !== 'string') return null;\r\n  date = new Date(date)\r\n  if (Number.isNaN(date.getDate())) return null;\r\n  if (type === 'year') return date.getFullYear()\r\n  if (type === 'month') return date.getMonth() + 1\r\n  if (type === 'day') return date.getDate()\r\n  return null\r\n}\r\n\r\nvar sending = false // 记录消息是否发送中\r\nclass MyInfo extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      user: {},\r\n      birthDate: null,\r\n      birthMonth: null,\r\n      birthYear: null,\r\n      reallyName: '',\r\n      idCard: '',\r\n      avatar: '',\r\n      gender: -1,\r\n      years: [1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],\r\n      month: [1,2,3,4,5,6,7,8,9,10,11,12],\r\n      days: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],\r\n      errors: {\r\n        message: ''\r\n      }\r\n    }\r\n    this.genderRadioChange = this.genderRadioChange.bind(this)\r\n    this.birthChange = this.birthChange.bind(this)\r\n    this.diff = this.diff.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    // 请求个人资料\r\n    axios.get(`${HOST}/api/users/user_info`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, message: res.data.message}\r\n          })\r\n        }\r\n        var user = res.data.payload.userInfo\r\n        this.setState({\r\n          birthYear: transDate(user.birth, 'year'), birthMonth: transDate(user.birth, 'month'), birthDate: transDate(user.birth, 'day'), avatar: user.avatar,\r\n          gender: user.gender,\r\n          user,\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, message: err.message}\r\n        })\r\n      })\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.title = '优选 - 个人资料'\r\n  }\r\n\r\n  genderRadioChange(e) {\r\n    this.setState({\r\n      gender: parseInt(e.target.value)\r\n    })\r\n  }\r\n\r\n  reallyNameInputChange(e) {\r\n    this.setState({\r\n      reallyName: e.target.value\r\n    })\r\n  }\r\n\r\n  idCardInputChange(e) {\r\n    this.setState({\r\n      idCard: e.target.value\r\n    })\r\n  }\r\n\r\n  birthChange(e) {\r\n    var name = e.target.name\r\n    var value = e.target.value\r\n    var days = null\r\n    // 年份和日期已选择，计算天数\r\n    if (name === 'birthMonth' && this.state.birthYear) {\r\n      days = getDate(this.state.birthYear, value)\r\n\r\n    }else if (name === 'birthYear' && this.state.birthMonth) {\r\n      days = getDate(value, this.state.birthMonth)\r\n    }\r\n    this.setState({\r\n      [name]: Number(value),\r\n      days: days || this.state.days\r\n    })\r\n  }\r\n\r\n  avatarChange(e) {\r\n    var avatar = e.target.files[0]\r\n    var errors = {}\r\n    if (avatar && !/^image\\/(jpeg|png|gif|x-icon)$/.test(avatar.type)) {\r\n      errors.avatar = \"选择的文件类型不是图片\"\r\n    }\r\n    if (avatar && avatar.size > 5000000) {\r\n      errors.avatar = \"图片大小不能超过5M\"\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors: {...this.state.errors, avatar: errors.avatar}\r\n      })\r\n    }\r\n\r\n    var formData = new FormData()\r\n    formData.append('picture', avatar)\r\n    formData.append('type', 'avatar')\r\n    axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, avatar: res.data.message}\r\n          })\r\n        }\r\n        this.setState({\r\n          avatar: res.data.payload\r\n        })\r\n      })\r\n      .catch(err => {\r\n        return this.setState({\r\n            errors: {...this.state.errors, avatar: err.message}\r\n          })\r\n      })\r\n  }\r\n\r\n  // 用户信息是否改变\r\n  diff() {\r\n    var birth = new Date(this.state.user.birth)\r\n    var diff = {}\r\n    if (this.state.reallyName !== \"\")\r\n        diff.reallyName = this.state.reallyName\r\n    if (this.state.idCard !== \"\")\r\n        diff.idCard = this.state.idCard\r\n    if (this.state.avatar !== this.state.user.avatar)\r\n        diff.avatar = this.state.avatar\r\n    if (this.state.gender !== this.state.user.gender)\r\n      diff.gender = this.state.gender\r\n    if (\r\n      this.state.birthYear !== birth.getFullYear() ||\r\n      this.state.birthMonth !== birth.getMonth() +1 ||\r\n      this.state.birthDate !== birth.getDate()\r\n    ) {\r\n      diff.birthYear = this.state.birthYear\r\n      diff.birthMonth = this.state.birthMonth\r\n      diff.birthDate = this.state.birthDate\r\n    }\r\n    return Object.keys(diff).length > 0 ? diff : false\r\n  }\r\n\r\n  formSubmit(e) {\r\n    e.preventDefault()\r\n    var diff = this.diff()\r\n    if (!diff) {\r\n      return;\r\n    }\r\n    if (sending) {\r\n      return this.props.alertMessageAction(\"更改中。。。\")\r\n    }\r\n    var errors = {}\r\n    if (diff.reallyName && !/^[\\u4e00-\\u9fa5]{2,5}$/.test(diff.reallyName)) {\r\n      errors.reallyName = '真实姓名格式有误'\r\n    }\r\n    if (diff.idCard && !/^\\d{18}$/.test(diff.idCard)) {\r\n      errors.idCard = '身份证格式有误'\r\n    }\r\n    if (diff.avatar && this.state.avatar !== \"default.jpg\" && !/^\\w{10}_\\d{8}\\.(jpg|jpeg|png|icon|gif)$/.test(diff.avatar)) {\r\n      errors.avatar = '头像有误'\r\n    }\r\n    if (diff.gender && !/^[012]$/.test(diff.gender)) {\r\n      errors.gender = '请选择性别'\r\n    }\r\n    if (diff.birthYear && (!/^(19|20)\\d{2}$/.test(diff.birthYear) || !/^([1-9]|1[012])$/.test(diff.birthMonth) || !/^([1-9]|[1-2][0-9]|3[01])$/.test(diff.birthDate))) {\r\n      errors.birth = '日期格式有误'\r\n    }else if (diff.birthYear) {\r\n      diff.birth = `${diff.birthYear}-${diff.birthMonth}-${diff.birthDate}`\r\n      delete diff.birthYear\r\n      delete diff.birthMonth\r\n      delete diff.birthDate\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({ errors })\r\n    }\r\n\r\n    sending = true\r\n    axios.post(`${HOST}/api/users/modify_userinfo`, diff)\r\n      .then(res => {\r\n        sending = false\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, submit: res.data.message}\r\n          })\r\n        }\r\n        var user = res.data.payload.userInfo\r\n        this.setState({\r\n          birthYear: transDate(user.birth, 'year'), birthMonth: transDate(user.birth, 'month'), birthDate: transDate(user.birth, 'day'), avatar: user.avatar,\r\n          gender: user.gender,\r\n          reallyName: '',\r\n          idCard: '',\r\n          user\r\n        }, () => {\r\n          this.props.alertMessageAction('修改成功！')\r\n          this.props.updateUserInfo(user)\r\n        })\r\n      })\r\n      .catch(err => {\r\n        sending = false\r\n        this.setState({\r\n          errors: {...this.state.errors, submit: err}\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"my-info-wrap\">\r\n        <div className=\"mi-base-tit\">基本资料</div>\r\n        {\r\n          this.state.errors.message && <div className=\"mi-err\">{this.state.errors.message}</div>\r\n        }\r\n        <form className=\"mi-form\" name=\"baseInfoForm\" method=\"post\" onSubmit={this.formSubmit.bind(this)}>\r\n          <div className=\"mi-nickname\">\r\n            <span>亲爱的</span>\r\n            <span className=\"mi-nickname-b\">{this.state.user.nickname}</span>\r\n            <span>，填写真实的资料，有助于好友找到你哦。</span>\r\n          </div>\r\n          <div className=\"mi-avatar mi-item\">\r\n            <div className=\"mi-item-sub\">当前头像：</div>\r\n            <div className=\"mi-avatar-wrap mi-item-body\">\r\n              <img src={`${HOST}/image/member/avatar/${this.state.avatar}`} alt=\"当前头像\"/>\r\n              <div className=\"mi-avatar-btn\">\r\n                <input onChange={this.avatarChange.bind(this)} type=\"file\" hidefocus=\"true\"/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.avatar && <div className=\"mi-err\">{this.state.errors.avatar}</div>\r\n          }\r\n          <div className=\"mi-reallyName mi-item\">\r\n            <div className=\"mi-r-a mi-item-sub\">真实姓名：</div>\r\n            <div className=\"mi-item-body mi-r-input\">\r\n              <input onChange={this.reallyNameInputChange.bind(this)} placeholder={this.state.user.reallyName} value={this.state.reallyName} type=\"text\"/>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.reallyName && <div className=\"mi-err\">{this.state.errors.reallyName}</div>\r\n          }\r\n          <div className=\"mi-reallyName mi-item\">\r\n            <div className=\"mi-r-a mi-item-sub\">身份证号：</div>\r\n            <div className=\"mi-item-body mi-r-input\">\r\n              <input onChange={this.idCardInputChange.bind(this)} placeholder={this.state.user.idCard} value={this.state.idCard} type=\"text\"/>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.idCard && <div className=\"mi-err\">{this.state.errors.idCard}</div>\r\n          }\r\n          <div className=\"mi-gender mi-item\">\r\n            <div className=\"mi-gender-l mi-item-sub\">性别：</div>\r\n            <div className=\"mi-gender-r mi-item-body\">\r\n              <label htmlFor=\"gender0\">\r\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 0} id=\"gender0\" value=\"0\" name=\"gender\" type=\"radio\"/>\r\n                男\r\n              </label>\r\n              <label htmlFor=\"gender1\">\r\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 1} id=\"gender1\" value=\"1\" name=\"gender\" type=\"radio\"/>\r\n                女\r\n              </label>\r\n              <label htmlFor=\"gender2\">\r\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 2} id=\"gender2\" value=\"2\" name=\"gender\" type=\"radio\"/>\r\n                保密\r\n              </label>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.gender && <div className=\"mi-err\">{this.state.errors.gender}</div>\r\n          }\r\n          <div className=\"mi-birth-wrap mi-item\">\r\n            <div className=\"mi-item-sub\">生日：</div>\r\n            <div className=\"mi-birth-body mi-item-body\">\r\n              <select className=\"mi-birth-year\" onChange={this.birthChange} value={this.state.birthYear || '0'} name=\"birthYear\" id=\"birth_year\">\r\n                <option defaultValue=\"0\">年</option>\r\n                {\r\n                  this.state.years.map((year, index) => (\r\n                    <option key={index} defaultValue={year}>{year}</option>\r\n                  ))\r\n                }\r\n              </select>\r\n              <select onChange={this.birthChange} value={this.state.birthMonth || '0'} name=\"birthMonth\" id=\"birth_year\">\r\n                <option defaultValue=\"0\">月</option>\r\n                {\r\n                  this.state.month.map((month, index) => (\r\n                    <option key={index} defaultValue={month}>{month}</option>\r\n                  ))\r\n                }\r\n              </select>\r\n              <select onChange={this.birthChange} value={this.state.birthDate || '0'} name=\"birthDate\" id=\"birth_year\">\r\n                <option defaultValue=\"0\">日</option>\r\n                {\r\n                  this.state.days.map((day, index) => (\r\n                    <option key={index} defaultValue={day}>{day}</option>\r\n                  ))\r\n                }\r\n              </select>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.birth && <div className=\"mi-err\">{this.state.errors.birth}</div>\r\n          }\r\n          <div className=\"mi-reallyName mi-item\">\r\n            <div className=\"mi-r-a mi-item-sub\">最后登录时间：</div>\r\n            <div className=\"mi-item-body\">{formatDate(this.state.user.lastLogin, true)}</div>\r\n          </div>\r\n          {\r\n            !this.diff() ? null : <button type=\"submit\" className=\"mi-submit\">保存</button>\r\n          }\r\n          {\r\n            this.state.errors.submit && <div className=\"mi-err\">{this.state.errors.submit}</div>\r\n          }\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nMyInfo.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.auth.user || {}\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { updateUserInfo, alertMessageAction })(MyInfo)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport {\r\n  isEmpty,\r\n  isPhone,\r\n  isLength,\r\n  isEmail\r\n} from '../../../utils/validator'\r\nimport { setRouterLocationAction } from '../../../flux/actions/authActions'\r\n\r\nconst HOST = config.HOST\r\n\r\nvar initState = {\r\n  editState: -1, // >-1编辑 || -1添加\r\n  detailAddress: '',\r\n  postcode: '',\r\n  receiveName: '',\r\n  receivePhone: '',\r\n  isDefault: false,\r\n  errors: {}\r\n}\r\n\r\nclass Address extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = initState\r\n  }\r\n  componentWillMount() {\r\n    this.props.setRouterLocationAction('/member/address')\r\n    // if (this.props.memberId === -1) return;\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({\r\n        type: 'get_address'\r\n      }))\r\n    }\r\n  }\r\n\r\n  setDefailtChange(e) {\r\n    this.setState({\r\n      isDefault: e.target.checked\r\n    })\r\n  }\r\n\r\n  formInputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  editStateChange(_, item) {\r\n    this.setState({\r\n      editState: item._id,\r\n      isDefault: !!item.isDefault,\r\n      detailAddress: item.address,\r\n      postcode: item.postcode,\r\n      receivePhone: item.phone,\r\n      receiveName: item.receiveName,\r\n    })\r\n  }\r\n  deleteAddress(_, item) {\r\n    if (socket.status !== 'open') {\r\n      return this.setState({\r\n        errors: { submit: '网络未连接' }\r\n      })\r\n    }\r\n    if (this.state.editState === item._id) {\r\n      this.setState(initState)\r\n    }\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'delete_address',\r\n      content: item._id\r\n    }))\r\n  }\r\n\r\n  cancelEdit() {\r\n    this.setState(initState)\r\n  }\r\n\r\n  saveAddress() {\r\n    var errors = {}\r\n    if (!/^[\\w\\D]{5,200}$/.test(this.state.detailAddress)) {\r\n      errors.detailAddress = '详细地址最少5位，最多200位'\r\n    }\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.postcode)) {\r\n      errors.postcode = '邮编格式有误'\r\n    }\r\n    if (!isLength(this.state.receiveName, {min:2,max:10})) {\r\n      errors.receiveName = '姓名填写有误'\r\n    }\r\n    if (!isPhone(this.state.receivePhone)) {\r\n      errors.receivePhone = '手机号码填写有误'\r\n    }\r\n    if (socket.status !== 'open') {\r\n      errors.submit = '网络未连接'\r\n    }\r\n    if (!isEmpty(errors)) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'save_address',\r\n      content: {\r\n        ...this.state,\r\n        errors: null\r\n      }\r\n    }))\r\n    this.setState(initState)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"u-info\">\r\n        <div className=\"u-info-title\">收货地址</div>\r\n        <div className=\"u-add-form\">\r\n          <div className=\"u-add-sub\">编辑收货地址</div>\r\n          <div className=\"u-add-form-item u-add-textarea\">\r\n            <span>*详细地址:</span>\r\n            <textarea onChange={this.formInputChange.bind(this)} value={this.state.detailAddress} name=\"detailAddress\" placeholder=\"请输入详细地址信息，如道路、门牌号、小区、楼栋号、单元等信息\" className=\"u-add-i-text\"></textarea>\r\n          </div>\r\n          {\r\n            this.state.errors.detailAddress && <div className=\"u-add-err\">{this.state.errors.detailAddress}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*邮政编码:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.postcode} name=\"postcode\" placeholder=\"请编写邮编\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.postcode && <div className=\"u-add-err\">{this.state.errors.postcode}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*收货人姓名:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receiveName} name=\"receiveName\" placeholder=\"长度不超过10个字符\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.receiveName && <div className=\"u-add-err\">{this.state.errors.receiveName}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*手机号码:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receivePhone} name=\"receivePhone\" placeholder=\"收货时的手机号码\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.receivePhone && <div className=\"u-add-err\">{this.state.errors.receivePhone}</div>\r\n          }\r\n          <div className=\"default-check\">\r\n             <input className=\"u-add-checkbox\" onChange={this.setDefailtChange.bind(this)} checked={this.state.isDefault} type=\"checkbox\"/>\r\n            <div className=\"u-add-text\">默认收货地址：</div>\r\n          </div>\r\n          <div>\r\n            <button onClick={this.saveAddress.bind(this)} className=\"save-btn\">{this.state.editState === -1 ? '添加': '保存'}</button>\r\n            {\r\n              this.state.editState === -1 ? null : <button onClick={this.cancelEdit.bind(this)} className=\"save-btn cancel-btn\">取消</button>\r\n            }\r\n          </div>\r\n          {\r\n            this.state.errors.submit && <div className=\"u-add-err\">{this.state.errors.submit}</div>\r\n          }\r\n        </div>\r\n        <div className=\"u-address-table-wrap\">\r\n          <div className=\"u-add-sub\">我的收货地址</div>\r\n          <table border=\"1\" width=\"750\" style={{borderColor: '#eee', textAlign: 'center'}} cellSpacing=\"0\" cellPadding=\"0\">\r\n            <thead>\r\n              <tr>\r\n                <th>收货人</th>\r\n                <th>详细地址</th>\r\n                <th>邮编</th>\r\n                <th>电话/手机</th>\r\n                <th>操作</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {\r\n              this.props.address.map((item, index) => {\r\n                return (\r\n                  <tr className={classnames({'default-ads': item.isDefault === 1})} key={index}>\r\n                    <td>{item.receiveName}</td>\r\n                    <td className=\"detail-address\">{item.address}</td>\r\n                    <td>{item.postcode}</td>\r\n                    <td>{item.phone}</td>\r\n                    <td>\r\n                      <span onClick={this.editStateChange.bind(this, null, item)} className=\"add-edit-state\">编辑</span>\r\n                      <span> / </span>\r\n                      <span onClick={this.deleteAddress.bind(this, null, item)} className=\"add-edit-state\">删除</span>\r\n                    </td>\r\n                  </tr>\r\n                )\r\n              })\r\n            }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    address: state.auth.address || [],\r\n    memberId: state.auth.user._id === undefined ? -1 : state.auth.user._id\r\n  }\r\n}\r\nAddress.propTypes = {\r\n  address: PropTypes.array.isRequired,\r\n  memberId: PropTypes.number.isRequired\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction })(Address)\r\n","import React from 'react'\r\nimport { formatDate } from '../../utils/tools'\r\nimport { Link } from 'react-router-dom'\r\nimport { contactItemToChatAction } from '../../flux/actions/chatActions'\r\nimport './index.scss'\r\n\r\nfunction hasNullArray(products) {\r\n  for (var i = 0, len = products.length; i < len; i++) {\r\n    if (products[i] === null) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nfunction splitGoodName(name) {\r\n  return typeof(name) !== 'string' ? '' : name.length < 35 ? name : name.substring(0,34) + '...'\r\n}\r\n\r\n// 点击联系商家\r\nfunction contactSeller(userId, nickname, avatar) {\r\n  return function () {\r\n    contactItemToChatAction({ userId, nickname, avatar })\r\n  }\r\n}\r\n\r\nconst OrderItem = (props) => {\r\n  var order = props.order\r\n  return order === null ? <div></div> : (\r\n    <div className=\"order-item\">\r\n      <div className=\"o-i-head\">\r\n        <div className=\"oih-i oi-date\">{formatDate(order.creaTime, true)}</div>\r\n        <div className=\"oih-i oi-no\">订单号：{order.orderno}</div>\r\n        <div className=\"oih-i oi-sumprice\">￥{order.sumPrice}</div>\r\n        <div className=\"oih-i oi-storename\">{order.storeName}</div>\r\n        {\r\n          order.sellerId !== props.userId && <div onClick={contactSeller(order.sellerId, order.sellerName, order.sellerAvatar)} className=\"oih-i oi-callseller\">\r\n            <div className=\"oi-call-logo\"></div>\r\n            <div className=\"oi-contact\">和我联系</div>\r\n          </div>\r\n        }\r\n        {\r\n          /*订单收货*/\r\n          props.nav === 3 && !hasNullArray(order.products) ?\r\n          <div className=\"oih-i oih-sign\" onClick={() => { props.handler('signOrder', order) }}>签收订单</div> : null\r\n        }\r\n      </div>\r\n      <div className=\"oi-product\">\r\n        {\r\n          order.products.map((item, i) => {\r\n            return item === null ? null : (\r\n              <div className=\"oip-i-wrap\" key={i}>\r\n                <div className=\"oip-i oip-i-logo\"><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${item.logo}_210x210q90.jpg`} alt={item.goodName}/></div>\r\n                <div className=\"oip-i oip-i-info\">\r\n                  <div className=\"oip-i-goodname\"><Link to={`/product_detail?goodId=${item.goodId}`}>{splitGoodName(item.goodName)}</Link></div>\r\n                </div>\r\n                <div className=\"oip-i oip-i-price\">￥{item.price}</div>\r\n                <div className=\"oip-i oip-i-number\">{item.number}</div>\r\n                <div className=\"oip-i oip-exp\">\r\n                  {\r\n                    item.postWay && <div>\r\n                      <div className=\"oip-exp-post\">{item.postWay}</div>\r\n                      <div className=\"oip-exp-num\">{item.expNumber}</div>\r\n                    </div>\r\n                  }\r\n                </div>\r\n                <div className=\"oip-i oip-i-operator\">\r\n                 {\r\n                  order.isPay !== 1 ? null :\r\n                  item.isComment === 1 && item.isSign === 1 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\r\n                    <span className=\"opre-i-finish\">订单已完成</span>\r\n                  </div>) : item.isComment === 0 && item.isSign === 1 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\r\n                    <button className=\"opre-i-comment\" onClick={() => { props.handler('comment', order, item) }}>评价</button>\r\n                  </div>) : item.isSign === 0 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\r\n                    <button className=\"opre-i-sign\" onClick={() => { props.handler('sign', order, item) }}>确认收货</button>\r\n                  </div>) : item.isSend === 0 ? (<div className=\"opre-i-wrap\">\r\n                    <span className=\"opre-i-waitsend\">等待卖家发货</span>\r\n                  </div>) : null\r\n                 }\r\n                </div>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n        {\r\n          order.isPay !== 0 ? null : <div className=\"order-i-pay\">\r\n            <button onClick={() => { props.handler('pay', order) }}>立即付款</button>\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\nexport default OrderItem\r\n","/**\r\n * 评论组件\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\nimport socket from '../../utils/socket'\r\nimport { alertMessageAction } from '../../flux/actions/messageAction'\r\n\r\nimport './index.scss'\r\nconst HOST = config.HOST\r\n\r\nclass CommentBox extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      type: -1, // 0 好评，1中评，2差评\r\n      comment: '',\r\n      pictures: [],\r\n      errors: {}\r\n    }\r\n    this.commentTypeChange = this.commentTypeChange.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.props.orderDetailId === -1) {\r\n      this.props.closeCommentBox()\r\n    }\r\n  }\r\n\r\n  commentChange(e) {\r\n    var comment = e.target.value\r\n    if (comment.length > 200) return;\r\n    this.setState({\r\n      comment\r\n    })\r\n  }\r\n\r\n  pictureChange(e) {\r\n    var picture = e.target.files[0]\r\n    if (!picture || this.state.pictures.length >= 5) return;\r\n    if (!/^image\\//.test(picture.type)) {\r\n      return this.setState({ errors:{...this.state.errors, picture: '文件类型不是图片'} })\r\n    }else if (picture.size > 5000000) {\r\n      return this.setState({ errors:{...this.state.errors, picture: '图片超过5M，无法上传'} })\r\n    }\r\n    var formData = new FormData()\r\n    formData.append('picture', picture)\r\n    this.setState({\r\n      pictures: [...this.state.pictures, 'wait.gif']\r\n    }, () => {\r\n      axios.post(`${HOST}/api/order/comment_picture`, formData)\r\n        .then(res => {\r\n          if (!res.data.success) {\r\n            this.setState({ pictures: this.state.pictures.filter(p => p !== 'wait.gif'), errors:{...this.state.errors, picture: res.data.message} })\r\n          }\r\n          this.setState({\r\n            pictures: this.state.pictures.map((picture, i) => {\r\n              return picture === 'wait.gif' ? res.data.payload.picture : picture\r\n            }),\r\n            errors: {...this.state.errors, picture: ''}\r\n          })\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            errors: {...this.state.errors, picture: err.message}\r\n          })\r\n        })\r\n    })\r\n  }\r\n\r\n  choicePicture(e) {\r\n    if (this.state.pictures.length >= 5) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  deletePicture(picture) {\r\n    this.setState({\r\n      pictures: this.state.pictures.filter(item => item !== picture)\r\n    })\r\n  }\r\n\r\n  commentTypeChange(e) {\r\n    this.setState({\r\n      type: e.target.value\r\n    })\r\n  }\r\n\r\n  submitComment() {\r\n    var errors = {}\r\n    if (['0', '1', '2'].indexOf(this.state.type) === -1) {\r\n      errors.type = '亲，请选择评论类型'\r\n    }\r\n    if (this.state.comment.length > 200) {\r\n      errors.comment = '字数不能超过200字'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({ errors })\r\n    }\r\n    axios.post(`${HOST}/api/order/submit_comment`, {\r\n      type: this.state.type,\r\n      comment: this.state.comment,\r\n      pictures: this.state.pictures,\r\n      orderDetailId: this.props.orderDetailId\r\n    }).then(res => {\r\n      if (!res.data.success) {\r\n        return this.setState({ errors: {submit: res.data.message} })\r\n      }\r\n      // 评论成功\r\n      console.log(res)\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'get_orders',\r\n          content: {limit: this.props.limit}\r\n        }))\r\n      }\r\n      this.props.alertMessageAction('评论已提交')\r\n      this.props.closeCommentBox()\r\n\r\n    }).catch(err => {\r\n      return this.setState({ errors: {submit: err.message} })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"comment-box\">\r\n        <div className=\"cb-com-wrap\">\r\n          <div className=\"cb-com-0\">\r\n            <input onChange={this.commentTypeChange} id=\"type0\" name=\"type\" value=\"0\" type=\"radio\"/>\r\n            <label htmlFor=\"type0\">好评</label>\r\n          </div>\r\n          <div className=\"cb-com-1\">\r\n            <input onChange={this.commentTypeChange} id=\"type1\" name=\"type\" value=\"1\" type=\"radio\"/>\r\n            <label htmlFor=\"type1\">中评</label>\r\n          </div>\r\n          <div className=\"cb-com-2\">\r\n            <input onChange={this.commentTypeChange} id=\"type2\" name=\"type\" value=\"2\" type=\"radio\"/>\r\n            <label htmlFor=\"type2\">差评</label>\r\n          </div>\r\n        </div>\r\n        {\r\n          this.state.errors.type && <div className=\"cb-err\">{this.state.errors.type}</div>\r\n        }\r\n        <div className=\"text-wrap\">\r\n          <textarea onChange={this.commentChange.bind(this)} value={this.state.comment} placeholder=\"亲，写点评价吧。\" name=\"comment\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n          <div className=\"text-len\">{200 - this.state.comment.length} 字</div>\r\n        </div>\r\n        {\r\n          this.state.errors.comment && <div className=\"cb-err\">{this.state.errors.comment}</div>\r\n        }\r\n        <div className=\"cb-img-wrap\">\r\n          <div className=\"cb-file\">\r\n            <input onClick={this.choicePicture.bind(this)} onChange={this.pictureChange.bind(this)} hidefocus=\"true\" className=\"file-input\" type=\"file\"/>\r\n            <span>晒照片</span>\r\n          </div>\r\n          <div className=\"cb-pic-wrap\">\r\n          {\r\n            this.state.pictures.map((picture, index) => {\r\n              return (<div className=\"cb-pic-item\" onClick={this.deletePicture.bind(this, picture)} key={index}>\r\n                  <img src={`${HOST}/image/${picture === 'wait.gif' ? 'ui/wait.gif' : 'goods/comment/' + picture + '_w40.jpg'}`}/>\r\n              </div>)\r\n            })\r\n          }\r\n          </div>\r\n          <div className=\"cb-pic-last\">{this.state.pictures.length === 0 ? '限5张' : 5-this.state.pictures.length + '/5'}</div>\r\n        </div>\r\n        {\r\n          this.state.errors.picture && <div className=\"cb-err\">{this.state.errors.picture}</div>\r\n        }\r\n        <div className=\"cb-btn-wrap\">\r\n          <div className=\"cb-btn-sub\" onClick={this.submitComment.bind(this)}>提交评论</div>\r\n          <div className=\"cb-btn-cancel\" onClick={this.props.closeCommentBox}>取消</div>\r\n        </div>\r\n        {\r\n          this.state.errors.submit && <div className=\"cb-err\">{this.state.errors.submit}</div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction })(CommentBox)\r\n","/**\r\n * 我的订单\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport { setPayOrderAction, prevPageOrdersAction } from '../../../flux/actions/orderActions'\r\nimport { alertMessageAction, confirmMessageAction } from '../../../flux/actions/messageAction'\r\n\r\nimport OrderItem from '../../../components/OrderItem'\r\nimport CommentBox from '../../../components/CommentBox'\r\n\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction isNullArray(productArray) {\r\n  for (var i = 0, len = productArray.length; i < len; i++) {\r\n    if (productArray[i])\r\n      return false\r\n  }\r\n  return true\r\n}\r\n\r\nclass Order extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      nav: 0,  // 0 all, 1 waitPay, 2 waitSend, 3 waitSign, 4 waitComment\r\n      errors: {},\r\n      limit: 0,\r\n      showCommentBox: false,\r\n      commentOrderDetailId: -1\r\n    }\r\n    this.closeCommentBox = this.closeCommentBox.bind(this)\r\n  }\r\n  componentWillMount() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({\r\n        type: 'get_orders',\r\n        content: { limit: this.state.limit }\r\n      }))\r\n    }else if (typeof(window) === 'object') {  // 页面刷新后需要时间验证本地token，\r\n      setTimeout(() => {\r\n        if (socket.status === 'open') {\r\n          socket.ws.send(JSON.stringify({\r\n            type: 'get_orders',\r\n            content: { limit: this.state.limit }\r\n          }))\r\n        }\r\n      }, 200)\r\n    }\r\n  }\r\n\r\n  routeChangeHandler(route) {\r\n    if (this.state.nav === route) return;\r\n    this.setState({\r\n      nav: route\r\n    })\r\n  }\r\n\r\n  closeCommentBox() {\r\n    this.setState({ showCommentBox: false })\r\n  }\r\n\r\n  // 付款，签收，评论\r\n  orderItemOperatorHandler(nav, order, orderDetail) {\r\n    if (nav === 'pay') {\r\n      axios.post(`${HOST}/api/order/pay_order`, { orderno: order.orderno })\r\n        .then(res => {\r\n          if (!res.data.success) {\r\n            return this.setState({\r\n              errors: {...this.state.errors, pay: res.data.message}\r\n            })\r\n          }\r\n          this.props.setPayOrderAction(res.data.payload)\r\n          // 跳转到支付页面\r\n          this.props.history.push('/payorder')\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            errors: {...this.state.errors, pay: err.message}\r\n          })\r\n        })\r\n\r\n    }else if (nav === 'sign') {\r\n      // return this.props.alertMessageAction('睡瞌睡看看书')\r\n      if (socket.status !== 'open') {\r\n        return this.setState({ errors: {...this.state.errors, sign: '网络未连接'} })\r\n      }\r\n      // 弹出确认框\r\n      this.props.confirmMessageAction(`确认签收商品：${orderDetail.goodName}`, () => {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'sign_order',\r\n          content: {\r\n            orderno: order.orderno,\r\n            detailId: [orderDetail.orderDetailId],\r\n            limit: this.state.limit\r\n          }\r\n        }))\r\n      })\r\n    }else if (nav === 'signOrder') {\r\n      // console.log(order.orderno)\r\n      if (socket.status !== 'open') {\r\n        return this.setState({ errors: {...this.state.errors, sign: '网络未连接'} })\r\n      }\r\n      // 弹出确认框\r\n      this.props.confirmMessageAction(`确认签收订单：${order.orderno}`, () => {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'sign_order',\r\n          content: {\r\n            orderno: order.orderno,\r\n            detailId: order.products.map((item) => item.orderDetailId),\r\n            limit: this.state.limit\r\n          }\r\n        }))\r\n      })\r\n    }else if (nav === 'comment') {\r\n      this.setState({\r\n        showCommentBox: true,\r\n        commentOrderDetailId: orderDetail.orderDetailId\r\n      })\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    if(this.props.myOrders.end) return;\r\n    if (socket.status === 'open') {\r\n      this.setState({\r\n        limit: this.state.limit + 1\r\n      }, () => {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'get_orders',\r\n          content: { limit: this.state.limit * 20 }\r\n        }))\r\n      })\r\n    }\r\n  }\r\n\r\n  prevPage() {\r\n    if(this.state.limit <= 0) return;\r\n    if (socket.status === 'open') {\r\n      this.setState({\r\n        limit: this.state.limit - 1\r\n      }, () => {\r\n        this.props.prevPageOrdersAction()\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'get_orders',\r\n          content: { limit: this.state.limit * 20 }\r\n        }))\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let orders = this.props.myOrders.orders.map((item, index) => {\r\n        if (this.state.nav === 0) {\r\n          return item\r\n        }else if (this.state.nav === 1) {\r\n          return item.isPay === 0 ? item : null\r\n        }else if (item.isPay === 1) {\r\n          var products = item.products.map((prod) => {\r\n            return this.state.nav === 2 && prod.isSend === 0 ? prod :\r\n              this.state.nav === 3 && prod.isSend === 1 && prod.isSign === 0 ? prod :\r\n              this.state.nav === 4 && prod.isSend === 1 && prod.isSign === 1 && prod.isComment === 0 ? prod : null\r\n          })\r\n          return isNullArray(products) ? null : {...item, products}\r\n        }\r\n        return null\r\n      })\r\n    let {waitPay, waitSend, waitSign, waitComment} = this.props.myOrders.status\r\n    return (\r\n      <div>\r\n        <div className=\"u-order-wrap\">\r\n          <div onClick={this.routeChangeHandler.bind(this, 0)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 0\r\n          })}><span className=\"uoi-nav\">全部订单</span></div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 1)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 1\r\n          })}>\r\n            <span className=\"uoi-nav\">待付款</span>\r\n            { waitPay > 0 && <span className=\"uoi-hit uoi-count\">{waitPay}</span> }\r\n          </div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 2)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 2\r\n          })}>\r\n            <span className=\"uoi-nav\">待发货</span>\r\n            { waitSend > 0 && <span className=\"uoi-hit uoi-count\">{waitSend}</span> }\r\n          </div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 3)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 3\r\n          })}>\r\n            <span className=\"uoi-nav\">待收货</span>\r\n            { waitSign > 0 && <span className=\"uoi-hit uoi-count\">{waitSign}</span> }\r\n          </div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 4)} className={classnames(\"u-o-item u-o-item-last\", {\r\n            'uoi-hit': this.state.nav === 4\r\n          })}>\r\n            <span className=\"uoi-nav\">待评价</span>\r\n            { waitComment > 0 && <span className=\"uoi-hit uoi-count\">{waitComment}</span> }\r\n          </div>\r\n        </div>\r\n        <div className=\"u-o-page\">\r\n          <div onClick={this.nextPage.bind(this)} className={classnames(\"u-o-next\", {\r\n            'u-o-next-void': this.props.myOrders.end\r\n          })}>下一页</div>\r\n          <div onClick={this.prevPage.bind(this)} className={classnames(\"u-o-prev\", {\r\n            'u-o-prev-void': this.state.limit === 0\r\n          })}>上一页</div>\r\n        </div>\r\n        <div className=\"uo-i-wrap\">\r\n          {\r\n            orders.map((item, index) => {\r\n              return <OrderItem key={index}\r\n                        handler={this.orderItemOperatorHandler.bind(this)}\r\n                        nav={this.state.nav}\r\n                        userId={this.props.userId}\r\n                        order={item} />\r\n            })\r\n          }\r\n        </div>\r\n        {\r\n          this.state.showCommentBox && this.state.commentOrderDetailId !== -1 && <CommentBox orderDetailId={this.state.commentOrderDetailId} closeCommentBox={this.closeCommentBox} limit={this.state.limit} />\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nOrder.propTypes = {\r\n  myOrders: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  myOrders: state.myOrders,  // || {status: {}, orders:[]},\r\n  userId: state.auth.user.userId\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n  setPayOrderAction,\r\n  alertMessageAction,\r\n  confirmMessageAction,\r\n  prevPageOrdersAction\r\n})(Order)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, Route, Switch } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport config from '../../utils/config'\r\nimport PrivateRoute from '../../components/PrivateRoute'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\nimport Safety from './subpage/Safety'\r\nimport MyInfo from './subpage/MyInfo'\r\nimport Address from './subpage/Address'\r\nimport MyOrder from './subpage/MyOrder'\r\n\r\nconst HOST = config.HOST\r\n/**\r\n * 安全设置\r\n *    修改手机，关闭手机登陆\r\n * 个人资料\r\n * 编辑资料\r\n * 收货地址\r\n * 资金管理\r\n */\r\n\r\nclass UserInfo extends React.Component {\r\n  render() {\r\n    // 未登陆，并且未在验证中\r\n    // warning无法在现有状态转换期间更新(如在“render”中)。渲染方法应该是道具和状态的纯函数。\r\n    // if (!this.props.auth.isLogin && !this.props.auth.isVerify) { this.props.history.push('/login') }\r\n\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"member-header\">\r\n          {/*头部*/}\r\n          <div className=\"member-header-wrap\">\r\n            <div><img height=\"34px\" width=\"140px\" src={`${HOST}/image/ui/member-logo.png`} alt=\"\"/></div>\r\n            <div className=\"mh-choice-box\">\r\n              <Link to=\"/member\">\r\n                <div className=\"member-header-home\">首页</div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {\r\n          !this.props.auth.isLogin ?\r\n          <div>加载中。。。</div> :\r\n          <div className=\"member-wrap\">\r\n            {/*导航区*/}\r\n            <div className=\"member-nav\">\r\n              <div className=\"mn-avatar\"><img src={`${HOST}/image/member/avatar/${this.props.auth.user.avatar}`} alt=\"\"/></div>\r\n              <ul className=\"mn-navselect\">\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/safety'\r\n                })}><Link to=\"/member/safety\">安全设置</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member'\r\n                })}><Link to=\"/member\">个人资料</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': /^\\/member\\/myorder/.test(this.props.location.pathname)\r\n                })}><Link to=\"/member/myorder\">我的订单</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/address'\r\n                })}><Link to=\"/member/address\">收货地址</Link></li>\r\n              </ul>\r\n            </div>\r\n            {/*信息展示区*/}\r\n            <div className=\"member-info\">\r\n              <Switch>\r\n                <PrivateRoute path=\"/member\" exact component={MyInfo} />\r\n                <PrivateRoute path=\"/member/safety\" component={Safety} />\r\n                <PrivateRoute path=\"/member/address\" component={Address} />\r\n                <PrivateRoute path=\"/member/myorder\" component={MyOrder} />\r\n              </Switch>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nUserInfo.propTypes = {\r\n  auth: PropTypes.object.isRequired\r\n}\r\nexport default connect(mapStateToProps)(UserInfo)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport socket from '../../utils/socket'\r\nimport config from '../../utils/config'\r\nimport { isEmpty } from '../../utils/validator'\r\n\r\nimport { setRouterLocationAction, setAddressAction } from '../../flux/actions/authActions'\r\nimport { setPayOrderAction } from '../../flux/actions/orderActions'\r\nimport { transPrice, intMultiplication, intAdd, cutString } from '../../utils/tools'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\nimport Footer from '../../components/Footer'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Order extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      choiceAddress: {},\r\n      numbers: [],\r\n      totalPrice: 0,  // 总计金额\r\n      comments: [],\r\n      errors: {}\r\n    }\r\n    this.computeTotal = this.computeTotal.bind(this)\r\n  }\r\n  componentWillMount() {\r\n    // 没有要购买的商品\r\n    if (!Array.isArray(this.props.buyProducts) || this.props.buyProducts.length < 1) {\r\n      // 跳转到上一级\r\n      this.props.history.push(this.props.auth.location || '/')\r\n    }\r\n    this.props.setRouterLocationAction('/order')\r\n    // 判断是否登录，判断收货地址\r\n    // if (!this.props.auth.isLogin && !this.props.auth.isVerify) {\r\n    //   return this.props.history.push('/login')\r\n    // }\r\n    var buyProducts = this.props.buyProducts\r\n    var numbers = [];\r\n    var comments = [];\r\n    var totalPrice = 0;\r\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\r\n      comments[i] = ''\r\n      numbers[i] = buyProducts[i].number\r\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, buyProducts[i].number))\r\n    }\r\n    // 初始化购买数据量\r\n    this.setState({\r\n      numbers,\r\n      totalPrice,\r\n      comments\r\n    }, function () {\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({ type: 'get_address' })) // socket 获取收货地址\r\n      }else {\r\n        axios.get(`${HOST}/api/users/user_address`)  // api 端口获取收货地址\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              setAddressAction(res.data.payload)\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n          })\r\n      }\r\n    })\r\n  }\r\n\r\n  componentWillReceiveProps() {\r\n    if (isEmpty(this.state.choiceAddress) && Array.isArray(this.props.auth.address)) {\r\n      console.log(2)\r\n      var defaultAddress = this.props.auth.address.find(i => i.isDefault === 1)\r\n      if (defaultAddress) {\r\n        // console.log(defaultAddress)\r\n        this.setState({\r\n          choiceAddress: defaultAddress\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // 计算总价\r\n  computeTotal(index, number) {\r\n    var buyProducts = this.props.buyProducts\r\n    var totalPrice = 0;\r\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\r\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, i === index ? number : this.state.numbers[i]))\r\n    }\r\n    return totalPrice\r\n  }\r\n\r\n  addressChoice(address) {\r\n    return function() {\r\n      this.setState({\r\n        choiceAddress: address\r\n      })\r\n    }\r\n  }\r\n  numberChange(index, amount) {\r\n    return function(e) {\r\n      var number = e.target.value\r\n      if (!/^[1-9]\\d{0,}$/.test(number) || Number(number) > Number(amount))\r\n        return;\r\n      var nums = [...this.state.numbers]\r\n      nums[index] = number\r\n      this.setState({\r\n        numbers: nums,\r\n        totalPrice: this.computeTotal(index, number) // 重新计算总价\r\n      })\r\n    }\r\n  }\r\n  // 数量减减\r\n  numberMinus(index, amount) {\r\n    return function() {\r\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])-1}})\r\n    }\r\n  }\r\n  // 数量加加\r\n  numberPlus(index, amount) {\r\n    return function() {\r\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])+1}})\r\n    }\r\n  }\r\n  commentChange(index) {\r\n    return function(e) {\r\n      if (e.target.value.length > 200) return;\r\n      var comments = [...this.state.comments]\r\n      comments[index] = e.target.value\r\n      this.setState({\r\n        comments\r\n      })\r\n    }\r\n  }\r\n\r\n  commentFocus(e) {\r\n    e.target.style.width = '400px'\r\n  }\r\n\r\n  commentBlur(e) {\r\n    e.target.style.width = '200px'\r\n  }\r\n\r\n  submitOrder() {\r\n    if (!/^[1-9]\\d*$/.test(this.state.choiceAddress._id)) {\r\n      return this.setState({\r\n        errors: {\r\n          ...this.state.errors,\r\n          submitOrder: '请选择收货地址'\r\n        }\r\n      })\r\n    }\r\n    // 商品 Ids, 数量s, detailIds, addressId\r\n    var request = {\r\n      // goodIds: [],\r\n      goodDetailIds: [],\r\n      numbers: this.state.numbers,\r\n      addressId: this.state.choiceAddress._id,\r\n      messages: this.state.comments\r\n    }\r\n    var shopCarIds = []\r\n    for (var i = 0, len = this.props.buyProducts.length; i < len; i++) {\r\n      // request.goodIds.push(this.props.buyProducts[i].goodId)\r\n      request.goodDetailIds.push(this.props.buyProducts[i].goodDetailId)\r\n      if (/^[1-9]\\d*$/.test(this.props.buyProducts[i].shopCarId)) {\r\n        shopCarIds.push(this.props.buyProducts[i].shopCarId)\r\n      }\r\n    }\r\n    if (shopCarIds.length > 0) {  // 如果有购物车 Id\r\n      request.shopCarIds = shopCarIds\r\n    }\r\n    axios.post(`${HOST}/api/order/submit_order`, request)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {\r\n              ...this.state.errors,\r\n              submitOrder: res.data.message\r\n            }\r\n          })\r\n        }\r\n        this.props.setPayOrderAction(res.data.payload)\r\n        // 跳转到支付页面\r\n        this.props.history.push('/payorder')\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {\r\n            ...this.state.errors,\r\n            submitOrder: err.message\r\n          }\r\n        })\r\n      })\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        {/*收货地址*/}\r\n        <div className=\"worder-wrap\">\r\n          <div className=\"wo-logo-wrap\">\r\n            <div className=\"worder-logo\"></div>\r\n            <ul className=\"order-stepbar\">\r\n              <li className=\"wo-step-i wo-step-1\">\r\n                <div className=\"step-t\">拍下商品</div>\r\n                <div className=\"step-b\"></div>\r\n              </li>\r\n              <li className=\"wo-step-i wo-step-2\">\r\n                <div className=\"step-t\">付款</div>\r\n                <div className=\"step-b\">2</div>\r\n              </li>\r\n              <li className=\"wo-step-i wo-step-3\">\r\n                <div className=\"step-t\">确认收货</div>\r\n                <div className=\"step-b\">3</div>\r\n              </li>\r\n              <li className=\"wo-step-i wo-step-4\">\r\n                <div className=\"step-t\">评价</div>\r\n                <div className=\"step-b\">4</div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <h3 className=\"wo-tit\">选择收货地址</h3>\r\n          <div className=\"wo-add-wrap\">\r\n            {\r\n              this.props.auth.address.length === 0 ? <div className=\"wo-add-info\">你还没有收获地址哦！<Link className=\"wo-linkto-add\" to=\"/member/address\">点击添加</Link></div>\r\n              : this.props.auth.address.map((item, index) => (\r\n                <div key={index} className={classnames(\"wo-add-item-wrap\", {\r\n                  'wo-add-item-choi': this.state.choiceAddress._id === item._id\r\n                })}>\r\n                  <div className=\"wo-add-item\" onClick={this.addressChoice(item).bind(this)}>\r\n                    <div className=\"wo-add-i-recename\">\r\n                      <span className=\"wo-add-i-sub\">收货人：</span>\r\n                      <span className=\"wo-add-i-body\">{item.receiveName}</span>\r\n                      <span className=\"wo-add-i-sub\">（收）</span>\r\n                    </div>\r\n                    <p title={item.address} className=\"wo-add-i-address\">\r\n                      <span className=\"wo-add-i-body\">{cutString(item.address, 32)}</span>\r\n                    </p>\r\n                    <div className=\"wo-add-i-pcode\">\r\n                      <span className=\"wo-add-i-sub\">邮编：</span>\r\n                      <span className=\"wo-add-i-body\">{item.postcode}</span>\r\n                    </div>\r\n                    <div className=\"wo-add-i-phone\">\r\n                      <span className=\"wo-add-i-sub\">收货人电话：</span>\r\n                      <span className=\"wo-add-i-body\">{item.phone}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n          <Link className=\"wo-add-address\" to=\"/member/address\">添加收货地址</Link>\r\n          <h3 className=\"wo-affirm\">确认订单信息</h3>\r\n          {\r\n            this.props.buyProducts.map((item, index) => {\r\n              return (\r\n                <div className=\"wo-order-wrap\" key={index}>\r\n                  <div className=\"wo-o-i wo-o-storename\">店铺：{item.storeName}</div>\r\n                  <div className=\"wo-o-i wo-o-logo\"><img width=\"50px\" height=\"50px\" src={item.logo ? `${HOST}/image/goods/logo/${item.logo}_210x210q90.jpg` : `${HOST}/api/goods/product_logo?goodId=${item.goodId}`} alt=\"\"/></div>\r\n                  <p title={item.goodName} className=\"wo-o-i wo-o-prod-name\">{cutString(item.goodName, 29)}</p>\r\n                  <div className=\"wo-o-i wo-o-spec-wrap\">\r\n                  {\r\n                    Array.isArray(item.spec) ? item.spec.map((spec, index) => {\r\n                      return (\r\n                        // 顺序排列 index = config -1\r\n                        <div className=\"wo-o-spec\" key={index}>{cutString(spec.specName, 4)}：{cutString(spec.specValue, 7)}</div>\r\n                      )\r\n                    }) : null\r\n                  }\r\n                  </div>\r\n                  <div className=\"wo-o-i wo-o-price\">单价：{transPrice(item.price)}</div>\r\n                  <div className=\"wo-o-i wo-o-operat\">\r\n                    <span className=\"wo-o-minus\" onClick={this.numberMinus(index, item.amount).bind(this)}>-</span>\r\n                    <input className=\"wo-o-num\" onChange={this.numberChange(index, item.amount).bind(this)} value={this.state.numbers[index]} type=\"text\"/>\r\n                    <span className=\"wo-o-plus\" onClick={this.numberPlus(index, item.amount).bind(this)}>+</span>\r\n                  </div>\r\n                  <div className=\"wo-o-i wo-o-amount\">库存：{item.amount}</div>\r\n                  <div className=\"wo-o-i wo-o-subtotal\"><span>小计：</span><span className=\"wo-o-total\">￥{transPrice(intMultiplication(item.price, this.state.numbers[index]))}</span></div>\r\n                  <div className=\"wo-o-comment\">\r\n                    <span className=\"wo-add-i-sub\">给卖家留言：</span>\r\n                    <input onFocus={this.commentFocus} onBlur={this.commentBlur} className=\"wo-o-com-inp\" onChange={this.commentChange(index).bind(this)} value={this.state.comments[index]} placeholder=\"选填，请先和卖家商议一致\" type=\"text\"/>\r\n                  </div>\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n          <div className=\"wo-o-submit-wrap\">\r\n            <div className=\"wo-o-float-r\">\r\n              <div className=\"wo-o-sub-price-wrap\">\r\n                <div className=\"wo-o-sub-shadow\">\r\n                  <div className=\"wo-o-sumprice\">\r\n                    <span className=\"wo-o-sub-itit\">实付款：</span>\r\n                    <span className=\"wo-o-sub-ib\">￥{transPrice(this.state.totalPrice)}</span>\r\n                  </div>\r\n                  <p className=\"wo-o-sub-i\">\r\n                    <span className=\"wo-o-sub-itit\">寄送至：</span>\r\n                    <span className=\"wo-o-sub-ib\">{this.state.choiceAddress.address}</span>\r\n                  </p>\r\n                  <p className=\"wo-o-sub-i\">\r\n                    <span className=\"wo-o-sub-itit\">收货人：</span>\r\n                    <span className=\"wo-o-sub-ib\">{this.state.choiceAddress.receiveName}</span>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"wo-sub-btn-wrap\">\r\n              <button className=\"wo-o-submit\" onClick={this.submitOrder.bind(this)}>提交订单</button>\r\n            </div>\r\n            {\r\n              this.state.errors.submitOrder && (\r\n                <div className=\"wo-o-err-wrap\">\r\n                  <div className=\"wo-o-err\">{this.state.errors.submitOrder}</div>\r\n                </div>\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    buyProducts: state.order.buyProducts || []\r\n  }\r\n}\r\nOrder.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  buyProducts: PropTypes.array.isRequired\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction, setPayOrderAction })(Order)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst PayHeader = (props) => {\r\n  return (\r\n    <div>\r\n      <h1>优选 收银台</h1>\r\n      <span>{props.auth.user.nickname}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(PayHeader)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nconst Success = (props) => {\r\n  console.log(props)\r\n  return <div>\r\n    <div style={{textAlign: 'center', marginTop: '30px'}}><span className=\"main_font1\">付款成功</span></div>\r\n    <div className=\"regi-success\">\r\n      <div className=\"rs-tit-logo\"><img src={`${HOST}/image/ui/success.png`} alt=\"\"/></div>\r\n      <div className=\"rs-in-wrap\">\r\n        <div className=\"rs-tit\">\r\n          <div className=\"rs-tit-info\">付款成功，您的包裹已整装待发。。。</div>\r\n        </div>\r\n        <div className=\"rs-operator\">\r\n          <div className=\"rs-to-home\"><Link onClick={props.payOrderEnd} to=\"/member/myorder\">查看我的订单</Link></div>\r\n          <div className=\"rs-to-log\"><Link onClick={props.payOrderEnd} to=\"/\">继续逛逛</Link></div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n}\r\n\r\nfunction mapActionToProps(dispatch) {\r\n  return {\r\n    payOrderEnd: function() {\r\n      dispatch({\r\n        type: 'PAY_ORDER_SUCCESS'\r\n      })\r\n    }\r\n  }\r\n}\r\nexport default connect(null, mapActionToProps)(Success)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { isEmpty } from '../../utils/validator'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\n\r\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\r\nimport PayHeader from './subpage/PayHeader'\r\nimport Success from './subpage/Success'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass PayOrder extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      payway: 'alipay', // 余额 或 支付宝\r\n      property: -1,  // 余额\r\n      errors: {}\r\n    }\r\n    this.paywayChange = this.paywayChange.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (typeof(window) !== 'object') return;\r\n    /**\r\n     * 判断上一级页面是否 /order，跳到主页\r\n     */\r\n    this.props.setRouterLocationAction('/payorder')\r\n    if (!this.props.auth.isLogin) {\r\n      this.props.history.push('/login')\r\n    }\r\n    axios.get(`${HOST}/api/users/get_property`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, wallet: res.data.message}\r\n          })\r\n        }\r\n        this.setState({\r\n          property: res.data.payload,\r\n          errors: {...this.state.errors, wallet: ''}\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, wallet: '服务器忙'}\r\n        })\r\n      })\r\n  }\r\n\r\n  paywayChange(e) {\r\n    this.setState({\r\n      payway: e.target.value\r\n    })\r\n  }\r\n  setPayway(way) {\r\n    return function() {\r\n      this.setState({\r\n        payway: way\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    if (this.props.order.payStatus === 'success') {\r\n      return (<div>\r\n        <PayHeader />\r\n        <Success />\r\n      </div>)\r\n    }\r\n    const payOrder = this.props.order.payOrder\r\n    const buyProducts = this.props.order.buyProducts\r\n    return (\r\n      <div>\r\n        <PayHeader />\r\n        {\r\n          [isEmpty(buyProducts) ? null : (\r\n            buyProducts.map((item, index) => (\r\n              <div key={index}>\r\n                <div>{item.productName}</div>\r\n                <div>卖家：{item.nickname}</div>\r\n                {\r\n                  // Array.isArray(item.specChoice) && item.specChoice.map((choice, i) => (\r\n                  //   <div key={i}>\r\n                  //     <div>{item.specName[i].specName}: {item.specValue[choice].specValue}</div>\r\n                  //   </div>\r\n                  // ))\r\n                }\r\n              </div>\r\n            ))\r\n          ),\r\n          isEmpty(payOrder) ? null : (\r\n            <div key=\"sumPrice\">{payOrder.sumPrice}元</div>\r\n          )]\r\n        }\r\n        <h2>付款方式</h2>\r\n        <div onClick={this.setPayway('alipay').bind(this)}>\r\n          <input onChange={this.paywayChange} checked={this.state.payway === 'alipay'} name=\"payway\" type=\"radio\" value=\"alipay\"/>\r\n          <span>支付宝扫码支付</span>\r\n        </div>\r\n        <div onClick={this.setPayway('wallet').bind(this)}>\r\n          <input onChange={this.paywayChange} checked={this.state.payway === 'wallet'} name=\"payway\" type=\"radio\" value=\"wallet\"/>\r\n          <span>钱包余额支付</span>\r\n        </div>\r\n        {\r\n          isEmpty(payOrder) ? null : this.state.payway === 'alipay' ? (\r\n            <div>\r\n              {/*支付宝二维码*/}\r\n              <iframe title=\"alipay\" height=\"835px\" width=\"100%\" src={payOrder.alipayURL} frameBorder=\"0\"></iframe>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              { /*余额支付*/\r\n                this.state.errors.wallet ? (\r\n                  <div>{this.state.errors.wallet}</div>\r\n                ) : (\r\n                  this.state.property === -1 ? null : (\r\n                    <div>\r\n                      <div>订单号：{payOrder.orderno}</div>\r\n                      <div>账户余额：{this.state.property}</div>\r\n                      <div><input type=\"text\"/><button>点击发送验证码</button></div>\r\n                    </div>\r\n                  )\r\n                )\r\n              }\r\n            </div>\r\n          )\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    order: state.order,\r\n    auth: state.auth\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction })(PayOrder)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport config from '../../utils/config'\r\nimport socket from '../../utils/socket'\r\nimport { setBuyProductsAction } from '../../flux/actions/orderActions'\r\nimport { toggleChatAction } from '../../flux/actions/chatActions'\r\nimport { intMultiplication, intAdd, transPrice } from '../../utils/tools'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass ShopingCart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      height: 0,\r\n      bodyStatus: 'hide',\r\n      navStatus: 'hide',\r\n      choiceAll: true,\r\n      choiceStores: [],\r\n      choiceProducts: [],\r\n    }\r\n  }\r\n\r\n  // componentWillMount() {\r\n\r\n  // }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var _this = this\r\n      this.setState({\r\n        height: document.documentElement.clientHeight\r\n      })\r\n      window.onresize = function() {\r\n        _this.setState({\r\n          height: document.documentElement.clientHeight\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      window.onresize = null\r\n    }\r\n  }\r\n\r\n  showCarBody() {\r\n    var interval = -1\r\n    return function() {\r\n      var isHide = this.state.bodyStatus === 'hide'\r\n      var width = isHide ? -280 : 0\r\n      var inter = isHide ? 15 : 20\r\n      var out = isHide ? 300 : 200\r\n      var diff = isHide ? 14 : 28\r\n      var _this = this\r\n      _this.setState({\r\n          bodyStatus: isHide ? 'show' : 'hide',\r\n          navStatus: isHide ? 'show' : 'hide',\r\n      }, function() {\r\n        interval = setInterval(function() {\r\n          width = isHide ? width + diff : width - diff\r\n          _this.refs.shopCarBody.style.marginRight = width + 'px'\r\n        }, inter)\r\n        setTimeout(function() {\r\n          clearInterval(interval)\r\n          _this.refs.shopCarBody.style.marginRight = isHide ? '0px' : '-280px'\r\n        }, out)\r\n      })\r\n    }\r\n  }\r\n  showNav() {\r\n    this.setState({\r\n      navStatus: 'show'\r\n    })\r\n  }\r\n  hideNav() {\r\n    if (this.state.bodyStatus === 'show') return\r\n    this.setState({\r\n      navStatus: 'hide'\r\n    })\r\n  }\r\n\r\n  // 显示或隐藏聊天窗口\r\n  toggleChat() {\r\n    toggleChatAction(!this.props.hideChat)\r\n  }\r\n\r\n  // 购物车商品数量减一\r\n  numberMinus(product) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (product.number - 1 < 1 || socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'shop_car_number_minus',\r\n          target: 'koa',\r\n          content: product.shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 购物车商品数量加一\r\n  numberPlus(product) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (product.number + 1 > product.amount || socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'shop_car_number_plus',\r\n          target: 'koa',\r\n          content: product.shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 购物车删除商品\r\n  deleteShopProduct(shopCarId) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'delete_shop_car_product',\r\n          target: 'koa',\r\n          content: shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 全选单选框改变\r\n  allCheckboxChange(e) {\r\n    if (e.target.checked) {\r\n      this.setState({\r\n        choiceAll: true\r\n      })\r\n    }else {\r\n      this.setState({\r\n        choiceAll: false,\r\n        choiceStores: [],\r\n        choiceProducts: []\r\n      })\r\n    }\r\n  }\r\n  // 商店单选框改变\r\n  storeCheckboxChange(storeId) {\r\n    return function(e) {\r\n      if (e.target.checked) {\r\n        this.setState({\r\n          choiceStores: [...this.state.choiceStores, storeId]\r\n        })\r\n      }else {\r\n        this.setState({\r\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\r\n          choiceAll: false,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // 商品单选框改变\r\n  productCheckboxChange(shopCarId, storeId) {\r\n    return function(e) {\r\n      if (e.target.checked) {\r\n        this.setState({\r\n          choiceProducts: [...this.state.choiceProducts, shopCarId]\r\n        })\r\n      }else {\r\n        this.setState({\r\n          choiceProducts: this.state.choiceProducts.filter(i => i !== shopCarId),\r\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\r\n          choiceAll: false,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // 计算选中商品的数量\r\n  computeChoiceCount() {\r\n    let count = 0  // 购物车选中商品个数\r\n    let price = 0  // 购物车选中商品总价格\r\n    let shopCarProductsLength = 0  // 购物车商品数量\r\n    let shopCar = this.props.auth.shopCar\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      shopCarProductsLength += shopCar[i].products.length\r\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\r\n        count += shopCar[i].products.length // 计算个数\r\n        shopCar[i].products.forEach(item => {\r\n          price = intAdd(price, intMultiplication(item.product.price, item.product.number))  // 计算选中价格\r\n        })\r\n        continue\r\n      }\r\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\r\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\r\n          count++\r\n          price = intAdd(price, intMultiplication(shopCar[i].products[j].product.price, shopCar[i].products[j].product.number))  // 计算选中价格\r\n        }\r\n      }\r\n    }\r\n    return {count, price, shopCarProductsLength}\r\n  }\r\n\r\n  // 点击结算\r\n  cashierShopCar() {\r\n    var shopCar = this.props.auth.shopCar\r\n    var shopCarProductsLength = 0\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      shopCarProductsLength += shopCar[i].products.length\r\n    }\r\n    if (shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)) return // 什么都没选\r\n    var buyProducts = []\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\r\n        shopCar[i].products.forEach(item => {\r\n          buyProducts.push({\r\n            ...item.product,\r\n            spec: item.spec\r\n          })\r\n        })\r\n        continue\r\n      }\r\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\r\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\r\n          buyProducts.push({\r\n            ...shopCar[i].products[j].product,\r\n            spec: shopCar[i].products[j].spec\r\n          })\r\n        }\r\n      }\r\n    }\r\n    this.props.setBuyProductsAction(buyProducts)\r\n    this.showCarBody().call(this)\r\n    this.props.history.push('/order')\r\n  }\r\n\r\n  render() {\r\n    const auth = this.props.auth\r\n    // 未登陆，在 App.js 中判断\r\n    // if (!this.props.auth.isLogin || !Array.isArray(auth.shopCar)) {\r\n    //   return (\r\n    //     <div></div>\r\n    //   )\r\n    // }\r\n\r\n    let computeChoice = this.computeChoiceCount.call(this)\r\n    return (\r\n      <div style={{height: this.state.height + 'px'}} className=\"shopcar\">\r\n        <div className={classnames(\"shopcar-nav\", {\r\n           'shopcar-nav-transparent': this.state.navStatus === 'hide'\r\n        })} style={{height: this.state.height + 'px'}}>\r\n          <div className=\"shopcar-nav-wrap\">\r\n            <Link to=\"/member\">\r\n              <div style={{marginTop: this.state.height * 0.3 + 'px'}} className=\"user-logo\">\r\n                <img src={`${HOST}/image/member/avatar/${auth.user.avatar}`} alt=\"\"/>\r\n              </div>\r\n            </Link>\r\n            <div onMouseOver={this.showNav.bind(this)} onMouseLeave={this.hideNav.bind(this)} onClick={this.showCarBody().bind(this)} className={classnames(\"shop-mab\", {'shop-mab-focus': this.state.bodyStatus === 'show'})}>\r\n              <div className=\"sp-logo\"><img src={`${HOST}/image/ui/shopingcar_logo.png`} /></div>\r\n              <div className=\"sp-font\">购物车</div>\r\n              <div className=\"sp-count\">{computeChoice.shopCarProductsLength}</div>\r\n            </div>\r\n            <div className=\"sp-chat-wrap\" onClick={this.toggleChat.bind(this)}>\r\n              <div className=\"spc-img\"><img width=\"35px\" height=\"35px\" src={`${HOST}/image/ui/${this.props.notRead > 0 ? 'frog_gua.png' : 'frog.png'}`} /></div>\r\n              {\r\n                this.props.notRead > 0 ? <div className=\"spc-notread\">{this.props.notRead}</div> : null\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/*购物车商品*/}\r\n        <div ref=\"shopCarBody\"\r\n          className=\"shopcar-body\"\r\n          style={{height: this.state.height + 'px'/*,display: this.state.bodyStatus === 'show' ? 'block' : 'none'*/}}>\r\n          <div className=\"sc-choice-all-wrap\">\r\n            <input checked={this.state.choiceAll} onChange={this.allCheckboxChange.bind(this)} type=\"checkbox\"/>\r\n            <span>全选</span>\r\n          </div>\r\n          <div className=\"sc-products-wrap\" style={{height: Number(this.state.height) - 110 + 'px'}}>\r\n          {\r\n            auth.shopCar.map((item, index) => {\r\n              return (\r\n                <div className=\"sc-store-wrap\" key={index}>\r\n                  <div className=\"sc-store-title sc-line-box\">\r\n                    <div className=\"sc-line-item\">\r\n                      <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.storeId) !== -1} onChange={this.storeCheckboxChange(item.storeId).bind(this)} type=\"checkbox\"/>\r\n                    </div>\r\n                    <div className=\"sc-line-item sc-store-name\">{item.storeName}</div>\r\n                  </div>\r\n                  {\r\n                    item.products.map((item, i) => {\r\n                      return (\r\n                        <div className=\"sc-line-box sc-product-wrap\" key={i}>\r\n                          <div className=\"sc-line-item sc-product-checkbox\">\r\n                            <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.product.storeId) !== -1 || this.state.choiceProducts.indexOf(item.product.shopCarId) !== -1}\r\n                              onChange={this.productCheckboxChange(item.product.shopCarId, item.product.storeId).bind(this)}\r\n                              type=\"checkbox\"/>\r\n                          </div>\r\n                          <div className=\"sc-line-item sc-product-logo\"><img width=\"50px\" src={`${HOST}/image/goods/logo/${item.product.logo}`} title={item.product.goodName} /></div>\r\n                          <div className=\"sc-line-item sc-product-spec\">{\r\n                            item.spec.map((spec, j) => {\r\n                              if (j > 1) return null // 只显示 2 个分类信息\r\n                              return (\r\n                                <p className=\"sc-product-spec-item\" title={spec.specName + \"：\" + spec.specValue} key={j}>{spec.specValue}</p>\r\n                              )\r\n                            })\r\n                          }</div>\r\n                          <div className=\"sc-line-item sc-product-number\">{item.product.number}</div>\r\n                          <div className=\"sc-line-price\">￥{transPrice(intMultiplication(item.product.price, item.product.number))}</div>\r\n                          <div className=\"sc-choice-wrap\">\r\n                            <div onClick={this.numberMinus(item.product).bind(this)} className=\"sc-choice-unlike\"><img title=\"数量减一\" src={`${HOST}/image/ui/unlike.png`} alt=\"\"/></div>\r\n                            <div onClick={this.numberPlus(item.product).bind(this)} className=\"sc-choice-like\"><img title=\"数量加一\"  src={`${HOST}/image/ui/like.png`} alt=\"\"/></div>\r\n                            <div onClick={this.deleteShopProduct(item.product.shopCarId).bind(this)} className=\"sc-choice-delete\"><img title=\"删除\" src={`${HOST}/image/ui/delete.png`} alt=\"\"/></div>\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })\r\n                  }\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n          </div>\r\n          <div className=\"sc-Cashier-wrap\">\r\n            <div className=\"sc-Cashier-clear\">\r\n              <div className=\"sc-s-count\">已选 {computeChoice.count} 件</div>\r\n              <div className=\"sc-s-price\">￥ {transPrice(computeChoice.price)}</div>\r\n            </div>\r\n            <div onClick={this.cashierShopCar.bind(this)} className={classnames(\"sc-Cashier\", {\r\n              'sc-empty': computeChoice.shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)\r\n            })}>\r\n              <span>结算</span>\r\n              <div className=\"sc-Cashier-icon\"><img width=\"18px\" height=\"18px\" src={`${HOST}/image/ui/package.png`} /></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nShopingCart.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  setBuyProductsAction: PropTypes.func.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    hideChat: state.chat.hideChat,\r\n    notRead: state.chat.messagesNotRead.reduce(function(prev, next) {\r\n      return prev + next.notRead\r\n    }, 0)\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction })(ShopingCart))\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport { formatDate } from '../../../utils/tools'\r\n\r\nimport { messageNotReadItemToChatAction, messageItemToChatAction } from '../../../flux/actions/chatActions'\r\nconst HOST = config.HOST\r\n\r\nfunction subMessage(message) {\r\n  var msg = message.replace(/{{=\\w+\\.(jpg|png|icon|gif|jpeg)}}/g, '【图片】').replace('&lt;', '<').replace('&gt;', '>')\r\n  return message.length < 19 ? msg : msg.substring(0,18) + '...'\r\n}\r\n\r\nconst Message = props => {\r\n  return (\r\n    <div className=\"chat-msg-wrap\">\r\n      { // 未读消息\r\n        [props.messagesNotRead.map((item, index) => (\r\n          <div onClick={props.messageNotReadItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n            <div className=\"msg-i-userwrap\">\r\n              <div className=\"msg-i-avatar\" style={{\r\n                background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n              }}></div>\r\n              <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n            </div>\r\n            <div className=\"msg-i-wrap\">\r\n              <div className=\"msg-i-disone\">{(Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              <div className=\"msg-i-len\">{item.notRead}</div>\r\n            </div>\r\n              <div className=\"msg-i-time\">{Array.isArray(item.content) && item.content.length > 0 ? formatDate(item.content[item.content.length-1].creaTime) : ''}</div>\r\n          </div>\r\n        )), // 已读消息\r\n          props.messages.map((item, index) => (\r\n            <div onClick={props.messageItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n              <div className=\"msg-i-userwrap\">\r\n                <div className=\"msg-i-avatar\" style={{\r\n                  background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n                }}></div>\r\n                <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n              </div>\r\n              <div className=\"msg-i-wrap\">\r\n                <div className=\"msg-i-disone\">{props.chatnow !== item.userId && item.wait ? subMessage(item.wait) : (Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    messagesNotRead: Array.isArray(state.chat.messagesNotRead) ? state.chat.messagesNotRead : [],\r\n    messages: Array.isArray(state.chat.messages) ? state.chat.messages : [],\r\n    chatnow: state.chat.chatnow\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { messageNotReadItemToChatAction, messageItemToChatAction })(Message)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\nimport socket from '../../../utils/socket'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\n// 点击联系人到聊天框\r\nfunction contactClick(item) {\r\n  return function() {\r\n    contactItemToChatAction(item)\r\n  }\r\n}\r\n\r\nconst Contacts = (props) => {\r\n  if (socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'get_contacts'\r\n    }))\r\n  }\r\n  const online = []\r\n  const offline = []\r\n  props.contacts.forEach(i => {\r\n    if (i.isOnline) {\r\n      online.push(i)\r\n    }else {\r\n      offline.push(i)\r\n    }\r\n  })\r\n  return (\r\n    <div>\r\n      {\r\n        props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n        [\r\n          online.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          )),\r\n          offline.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item chat-item-offline\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n// class Contacts extends React.Component {\r\n//   componentWillMount() {\r\n//     // socket 请求 联系人列表\r\n//     if (socket.status === 'open') {\r\n//       socket.ws.send(JSON.stringify({\r\n//         type: 'get_contacts'\r\n//       }))\r\n//     }\r\n//   }\r\n//   // 点击联系人到聊天框\r\n//   contactClick(item) {\r\n//     contactItemToChatAction(item)\r\n//   }\r\n//   render() {\r\n//     const online = []\r\n//     const offline = []\r\n//     this.props.contacts.forEach(i => {\r\n//       if (i.isOnline) {\r\n//         online.push(i)\r\n//       }else {\r\n//         offline.push(i)\r\n//       }\r\n//     })\r\n//     return (\r\n//       <div>\r\n//         {\r\n//           this.props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n//           [\r\n//             online.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             )),\r\n//             offline.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item chat-item-offline\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             ))\r\n//           ]\r\n//         }\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    contacts: Array.isArray(state.chat.contacts) ? state.chat.contacts : []\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Contacts)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Search extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      searchAns: [],\r\n      keyword: '',\r\n      message: ''\r\n    }\r\n    this.shakeGetAns = this.shakeGetAns().bind(this)\r\n  }\r\n\r\n  // 防抖获取结果\r\n  shakeGetAns() {\r\n    var timer = 0\r\n    var timeout = -1;\r\n    return function(keyword) {\r\n      var _this = this\r\n      clearTimeout(timeout) // 清除前一个定时器\r\n      timeout = setTimeout(function() {\r\n        _this.setState({\r\n          message: '搜索中...'\r\n        })\r\n        axios.get(`${HOST}/api/users/search_contacts?keyword=${_this.state.keyword}`)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              _this.setState({\r\n                searchAns: res.data.payload,\r\n                message: res.data.payload.length === 0 ? '未搜索到联系人...' : ''\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n          })\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  keywordChange(e) {\r\n    var _this = this\r\n    var keyword = e.target.value\r\n    this.setState({\r\n      keyword\r\n    }, function() {\r\n      _this.shakeGetAns(keyword)\r\n    })\r\n  }\r\n\r\n  contactsClick(item) {\r\n    contactItemToChatAction(item)\r\n  }\r\n\r\n  addContactsClick(item) {\r\n    return function(e) {\r\n      e.stopPropagation()\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'add_contacts',\r\n          content: item.userId\r\n        }))\r\n        this.setState({\r\n          searchAns: this.state.searchAns.filter(i => i.userId !== item.userId)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-search-wrap\">\r\n        <div className=\"chat-s-input\">\r\n          <div className=\"chat-s-i-l\"><input value={this.state.keyword} placeholder=\"输入联系人昵称\" onChange={this.keywordChange.bind(this)} type=\"text\"/></div>\r\n          <div className=\"chat-s-i-r\">点击搜索</div>\r\n        </div>\r\n        <div className=\"chat-s-ans\">\r\n          {\r\n            Array.isArray(this.state.searchAns) && this.state.searchAns.length === 0 ? <div className=\"con-search-miss\">{this.state.message}</div> : this.state.searchAns.map((item, index) => (\r\n              <div onClick={this.contactsClick.bind(this, item)} className=\"c-s-item\" key={index}>\r\n                <div className=\"c-s-i-avatar\"><img src={`${HOST}/image/member/avatar/${item.avatar}`} /></div>\r\n                <div className=\"c-s-i-nickname\">{item.nickname}</div>\r\n                <div onClick={this.addContactsClick(item).bind(this)} className=\"c-s-i-btn-add\">加好友</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport config from '../../../utils/config'\r\nimport wss from '../../../utils/socket'\r\nimport { swingChatWindowAction, setWaitMessageAction, sendingMessageAction } from '../../../flux/actions/chatActions'\r\nconst HOST = config.HOST\r\n\r\n// function readFile(file, callback) {\r\n//   var reader = new FileReader()\r\n//   //以二进制形式读取文件\r\n//   reader.readAsArrayBuffer(file)\r\n//   reader.onload = function(e) {\r\n//     callback(e.target.result)\r\n//   }\r\n// }\r\n\r\nfunction transMessage(msg) {\r\n  if (msg === '' || typeof(msg) !== 'string') return msg\r\n    // firefox 不支持正则前置断言\r\n    // images = msg.match(/(?<!{{=)\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\r\n  var images = msg.match(/[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)(?=}})/g)\r\n  if (images) {\r\n    // var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)}}/)\r\n    var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.[jpgenifco]{3,4}}}/i)\r\n    msg = msgs[0]\r\n    for (var i = 1, len = msgs.length; i < len; i++) {\r\n      msg += `<img chat=\"${images[i-1]}\" src=\"${HOST}/image/member/chat/${/\\.gif$/.test(images[i-1]) ? images[i-1] : images[i-1] + '_w80.jpg'}\">${msgs[i]}`\r\n    }\r\n  }\r\n  return msg\r\n}\r\n\r\nclass ChatWindow extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      message: '',\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    }\r\n    this.scrollToButton = this.scrollToButton.bind(this)\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // console.log(error)\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    // console.log(error, info)\r\n    // logErrorToMyService(error, info);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = function (e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragleave = function(e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragover = function(e) {\r\n        e.preventDefault();\r\n    }\r\n    var _this = this\r\n    this.refs.textarea.ondrop = function(e) {\r\n      e.preventDefault()\r\n      e.stopPropagation() // 火狐浏览器，拖动时打开新页面\r\n      if (!_this.props.chat.chatnow) return;\r\n      var file = e.dataTransfer.files[0]\r\n      if (!file || file.size > '5048576‬') {\r\n        return; // 5M 以下的文件\r\n      }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\r\n        return; // 不支持的格式\r\n      }\r\n      var formData = new FormData()\r\n      formData.append('picture', file)\r\n      axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            _this.props.setWaitMessageAction(_this.refs.textarea.innerHTML += `<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\r\n          }else {\r\n            console.log(res)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n    }\r\n    document.getElementsByClassName(\"chatw-show-wrap\")[0].onclick = function(e) {\r\n      var img = e.target.getAttribute('chat')\r\n      if (img && /^\\w{10}_\\d{7,9}\\.(jpg|png|gif|icon|jpeg)$/.test(img)) {\r\n        _this.setState({\r\n          showChatImage: true,\r\n          chatImage: img\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = null\r\n    this.refs.textarea.ondragleave = null\r\n    this.refs.textarea.ondragover = null\r\n    this.refs.textarea.ondrop = null\r\n  }\r\n\r\n  // 聊天对象改变时，拿出未发送消息\r\n  componentWillReceiveProps(nextProps, b) {\r\n    // console.log(nextProps, b)\r\n    if (typeof(window) !== 'object') { return }\r\n    var chat = this.props.chat\r\n    // 将消息中的 wait 提取出\r\n    if (chat.chatnow !== nextProps.chat.chatnow) {\r\n      var now = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (now && now.wait) {\r\n        // this.refs.textarea.classList.remove('textarea-f1')\r\n        this.refs.textarea.innerHTML = now.wait\r\n      }else {\r\n        this.refs.textarea.innerText = ''\r\n      }\r\n      // 将消息滚动条，到最低\r\n      this.scrollToButton()\r\n    }else {\r\n      var msgNow = chat.messages.find(i => i.userId === chat.chatnow)\r\n      var msgNext = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (msgNow && msgNext && Array.isArray(msgNow.content) && Array.isArray(msgNext.content) && msgNow.content.length !== msgNext.content.length) {\r\n        // 将消息滚动条，到最低\r\n        this.scrollToButton()\r\n      }\r\n    }\r\n    this.refs.textarea.focus()\r\n  }\r\n\r\n  scrollToButton() {\r\n      var _this = this\r\n        // 这里 render 还没执行，页面中组件\r\n      setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n        _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n          _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        }, 200)\r\n      }, 100)\r\n  }\r\n\r\n  closeChatImage() {\r\n    this.setState({\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    })\r\n  }\r\n\r\n  // 隐藏这个窗口\r\n  swingChatWindow() {\r\n    this.props.swingChatWindowAction(true)\r\n  }\r\n\r\n  sendMessage() {\r\n    var message = this.refs.textarea.innerHTML.trim()\r\n    if (message === '' || !this.props.chat.chatnow) return;\r\n    // var images = message.match(/\\w+?\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\">)/g)\r\n    // 取出图片\r\n    var images = message.match(/[A-z0-9]{10}_\\d{8}\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\")/g)\r\n    if (images) {\r\n      var msgs = message.split(/<img [\\w\\W]+>/) // 根据图片分割消息\r\n      message = msgs[0]\r\n      // var img = ''\r\n      for (var i = 1, len = msgs.length; i < len; i++) {\r\n        message += `{{=${images[i-1]}}}${msgs[i]}`\r\n      }\r\n    }\r\n    message = message.replace(/<(span|font|div|br|img)[\\d\\D]*?>/g, '').replace(/<\\/(div|span|font)>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    //message = message.replace(/(<\\/span>|<span[^>]+?>)/g, '').replace(/(<\\/div>|<div[^>]*?>)/g, '').replace(/<br>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    if (message === '') return;\r\n    if (wss.status !== 'open') {\r\n      return this.setState({\r\n        messages: '与服务器断开连接'\r\n      })\r\n    }\r\n    this.props.sendingMessageAction(message)\r\n    wss.ws.send(JSON.stringify({\r\n      type: 'send_chat_message',\r\n      origin: this.props.user.userId,\r\n      target: this.props.chat.chatnow,\r\n      content: message\r\n    }))\r\n    this.refs.textarea.innerText = '' // 清空消息\r\n    this.props.setWaitMessageAction('')\r\n  }\r\n\r\n  // textareaFocus(e) {\r\n\r\n  // }\r\n  // textareaBlur(e) {\r\n\r\n  // }\r\n\r\n  textareaInput(e) {\r\n    this.props.setWaitMessageAction(e.target.innerHTML.trim().replace(/<div><br><\\/div>/g, ''))\r\n  }\r\n\r\n  textareaPress(e) {\r\n    var html = e.target.innerHTML\r\n    if (e.key === 'Enter') {\r\n      e.target.innerHTML = html.replace(/<div><br><\\/div>$/g, '')\r\n      this.sendMessage()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let chat = this.props.chat\r\n    let chatnow = undefined\r\n    if (chat.chatnow && Array.isArray(chat.messages)) {\r\n      chatnow = chat.messages.find(i => i.userId === chat.chatnow)\r\n    }\r\n    return (\r\n      <div className=\"chat-window\" style={{\r\n        display: chat.hideWindow ? 'none' : 'block'\r\n      }}>\r\n        <div className=\"chatw-header\">\r\n          <div onClick={this.swingChatWindow.bind(this)} className=\"charw-hide\" style={{\r\n            background: `url(${HOST}/image/ui/left.png) center center / 25px 25px no-repeat #628ef9`\r\n          }}></div>\r\n          <div className=\"chatw-h-targetname\">{chatnow && chatnow.nickname}</div>\r\n        </div>\r\n        <div className=\"chatw-show-scroll-wrap\">\r\n          <div ref=\"chatMessageBox\" className=\"chatw-show-wrap\">\r\n          {\r\n            [chatnow && chatnow.content.map((item, index) => (\r\n              <div className=\"chat-chatnow-wrap\" key={index}>\r\n                {\r\n                  item.sender === chatnow.userId ? (\r\n                    <div className=\"chat-target-wrap\">\r\n                      <div className=\"chat-target\" key=\"1\">\r\n                        <div className=\"chat-ta-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${chatnow.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-ta-nickname\">{chatnow.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-target\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"chat-me-wrap\">\r\n                      <div className=\"chat-me\" key=\"1\">\r\n                        <div className=\"chat-me-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  )\r\n                }\r\n              </div>\r\n            )),\r\n              chatnow && chat.sendingMessages.map((item, index) => {\r\n                return item.target !== chatnow.userId ? null : (\r\n                <div className=\"chat-chatnow-wrap\" key={index}>\r\n                  <div className=\"chat-me-wrap\">\r\n                    <div className=\"chat-me\" key=\"1\">\r\n                      <div className=\"chat-me-avatar\" style={{\r\n                        background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                      }}></div>\r\n                      <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                    </div>\r\n                    <div className=\"wait-msg-box\">\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.message)}} key=\"2\"></div>\r\n                      <div className=\"wait-logo\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )})]\r\n          }\r\n          </div>\r\n        </div>\r\n        <div className=\"chatw-send-wrap\">\r\n          <div className=\"chatw-s-textarea\">\r\n            <div id=\"textarea\"\r\n              ref=\"textarea\"\r\n              // onFocus={this.textareaFocus.bind(this)}\r\n              // onBlur={this.textareaBlur.bind(this)}\r\n              onInput={this.textareaInput.bind(this)}\r\n              contentEditable={!!chatnow}\r\n              suppressContentEditableWarning=\"true\"\r\n              onKeyPress={this.textareaPress.bind(this)}\r\n              dangerouslySetInnerHTML={{__html: this.state.message}}\r\n            ></div>\r\n          </div>\r\n          <div className=\"chatw-s-sendbox\">\r\n            {\r\n              this.state.message && <div className=\"char-err\">{this.state.message}</div>\r\n            }\r\n            <div onClick={this.sendMessage.bind(this)} className=\"chatw-s-sendbtn\">发送</div>\r\n\r\n          </div>\r\n        </div>\r\n        {\r\n          this.state.showChatImage && <div onClick={this.closeChatImage.bind(this)} className=\"chat-img-wrap\">\r\n            <img src={`${HOST}/image/member/chat/${this.state.chatImage}`}/>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.auth.user,\r\n    chat: state.chat\r\n  }\r\n}\r\n\r\nChatWindow.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  chat: PropTypes.object.isRequired,\r\n  setWaitMessageAction: PropTypes.func.isRequired,\r\n  swingChatWindowAction: PropTypes.func.isRequired\r\n}\r\nexport default connect(mapStateToProps, { swingChatWindowAction, setWaitMessageAction, sendingMessageAction })(ChatWindow)\r\n","/**\r\n * 在 App.js 中判断显示 store 中是否显示聊天功能，购物车点击青蛙显示\r\n * 请求消息记录，显示条数\r\n * 系统消息，用户消息\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport config from '../../utils/config'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport Message from './subpage/Message'\r\nimport Contacts from './subpage/Contacts'\r\nimport Search from './subpage/Search'\r\nimport ChatWindow from './subpage/ChatWindow'\r\n\r\nimport { initContacts } from '../../flux/actions/chatActions'\r\n\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: 'message',  // 显示 message，contacts，search\r\n      message: '',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var chat = document.getElementById('chat')\r\n      var chatMove = document.getElementById('chat-move')\r\n\r\n      chatMove.onmousedown = function(e) {\r\n        var startX = e.clientX\r\n        var startY = e.clientY\r\n        var top = parseInt(window.getComputedStyle(chat)['top'])\r\n        var left = parseInt(window.getComputedStyle(chat)['left'])\r\n        // var X = document.documentElement.clientWidth  // 窗口高宽\r\n        // var Y = document.documentElement.clientHeight\r\n        document.onmousemove = function(e) {\r\n          /**\r\n           * 判断将窗口拖出文档\r\n           */\r\n          chat.style.left = left + (e.clientX - startX) + 'px'\r\n          chat.style.top = top + (e.clientY - startY) + 'px'\r\n        }\r\n\r\n        document.onmouseup = function() {\r\n          // chat.onmousedown = null\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n        }\r\n      }\r\n      document.onmouseleave = function() {\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      document.getElementById('chat-move').onmousedown = null\r\n      document.onmouseleave = null\r\n    }\r\n  }\r\n\r\n  routeChange(route) {\r\n    this.setState({\r\n      route\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (typeof(window) !== 'object') {\r\n      return <div></div>\r\n    }\r\n\r\n    return (\r\n      <div id=\"chat\">\r\n        <div className=\"chat-route\">\r\n          <div id=\"chat-move\" className=\"cr-user-wrap\">\r\n            <div className=\"cr-user-avatar\" style={{\r\n              'background': `url(${HOST}/image/member/avatar/${this.props.auth.user.avatar}) center center / 30px 30px no-repeat`\r\n            }}></div>\r\n           <div className=\"cr-user-name\">{this.props.auth.user.nickname}</div>\r\n          </div>\r\n          <div className=\"cr-routes-wrap\">\r\n            <div onClick={this.routeChange.bind(this, 'message')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'message'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/message.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>消息</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'contacts')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'contacts'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/user.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>联系人</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'search')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'search'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/monitor.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>找人</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-body\">\r\n          <div className=\"chat-body-box\">\r\n            {\r\n              this.state.route === 'message' ? <Message /> :\r\n              this.state.route === 'contacts' ? <Contacts /> :\r\n              this.state.route === 'search' ? <Search /> : null\r\n            }\r\n          </div>\r\n        </div>\r\n        <ChatWindow />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    // chat: state.chat\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  // chat: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, { initContacts })(Chat)\r\n","/**\r\n * 在页面中显示消息，显示 1.5 秒后消失\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { closeAlertAction } from '../..//flux/actions/messageAction'\r\nimport './index.scss'\r\n\r\nclass MessageBox extends React.Component {\r\n\r\n  componentDidMount() {\r\n    var box = this.refs.messageBox\r\n    var _this = this\r\n    setTimeout(function() {\r\n      var opacity = 1\r\n      var interval = setInterval(function() {\r\n        opacity -= 0.1\r\n        box.style.opacity = opacity\r\n      }, 100)\r\n      setTimeout(function() {\r\n        clearInterval(interval)\r\n        _this.props.closeAlertAction()\r\n      }, 1000)\r\n    }, 500)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref=\"messageBox\" className=\"message-box\">\r\n        {this.props.messageBox.message}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messageBox: state.messageBox\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { closeAlertAction })(MessageBox)\r\n","/**\r\n * 确认或取消\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeConfirmAction } from '../../flux/actions/messageAction'\r\n\r\nfunction limitMessage(message) {\r\n  if (typeof(message) !== 'string') {\r\n    return ''\r\n  }\r\n  return message.length < 31 ? message : message.substring(0,30) + '...'\r\n}\r\n\r\nconst Confirm = props => {\r\n\r\n  var sureBtnClick = function() {\r\n    if (typeof(props.sure) === 'function') {\r\n      props.sure()\r\n    }\r\n    props.closeConfirmAction()\r\n  }\r\n\r\n  var cancelBtnClick = function() {\r\n    props.closeConfirmAction()\r\n    if (typeof(props.cancel) === 'function') {\r\n      props.cancel()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"confirm-box\">\r\n      <div className=\"msg-content\">{limitMessage(props.confirmMessage)}</div>\r\n      <div className=\"btn-wrap\">\r\n        <div onClick={sureBtnClick} className=\"btn-yes\">确认</div>\r\n        <div onClick={cancelBtnClick} className=\"btn-cancel\">取消</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    confirmMessage: state.messageBox.confirmMessage,\r\n    sure: state.messageBox.sure,\r\n    cancel: state.messageBox.cancel,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { closeConfirmAction })(Confirm)\r\n","import React from 'react'\r\nimport config from '../../utils/config'\r\nconst HOST = config.HOST\r\n\r\nconst style = {\r\n  width: '400px',\r\n  height: '200px',\r\n  background: `url(${HOST}/image/ui/loading.gif) center center / 400px 200px no-repeat`,\r\n  position: 'fixed',\r\n  left:'50%',\r\n  top: '50%',\r\n  zIndex: '99999',\r\n  margin: '-100px 0 0 -200px'\r\n}\r\n\r\nconst Loading = props => {\r\n  return (<div style={style} className=\"loading-box\">\r\n\r\n  </div>)\r\n}\r\n\r\nexport default Loading\r\n","import React from 'react';\r\nimport {Route, withRouter, Switch} from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\n\r\nimport config from './utils/config.js'\r\n\r\nimport \"./App.scss\"\r\nimport PrivateRoute from './components/PrivateRoute'\r\nimport Home from './containers/Home'\r\nimport Register from './containers/Register'\r\nimport Login from './containers/Login'\r\nimport SearchProduct from './containers/SearchProduct'\r\nimport GotoSearchProduct from './containers/SearchProduct/GotoSearchProduct'\r\nimport ProductDetail from './containers/ProductDetail'\r\nimport UserInfo from './containers/UserInfo'\r\nimport Order from './containers/Order'\r\nimport PayOrder from './containers/PayOrder'\r\nimport ShopingCart from './containers/ShopingCart'\r\nimport Chat from './components/Chat'\r\nimport MessageBox from './components/MessageBox'\r\nimport Confirm from './components/MessageBox/Confirm'\r\nimport Loading from './components/MessageBox/Loading'\r\nimport Footer from './components/Footer'\r\n\r\nimport { setAuthToken, setCurrentUser } from './utils/setAuth'\r\nif (typeof(window) === 'object') {\r\n  // 验证本地 token\r\n  const jwtToken = window.localStorage.jwtToken;\r\n  if (!jwtToken) {\r\n    setAuthToken(false);\r\n    setCurrentUser({});\r\n  }else {\r\n    axios.defaults.headers.common[\"Authorization\"] = jwtToken; // 设置请求头 token\r\n    // 验证请求头token\r\n    axios.get(`${config.HOST}/api/users/current`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          setAuthToken(false);\r\n          setCurrentUser({});\r\n        } else {\r\n          // token 验证成功\r\n          setAuthToken(res.data.payload.token);\r\n          setCurrentUser(res.data.payload.user);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        setAuthToken(false);\r\n        setCurrentUser({});\r\n      });\r\n  }\r\n\r\n}\r\n\r\nconst App = (props) => {\r\n  return (\r\n    <div className=\"App\">\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Home} />\r\n        <Route path=\"/register\" component={Register} />\r\n        <Route path=\"/login\" component={Login} />\r\n        {/*参数变化路径不变不会触发组件刷新，此处需要跳转*/}\r\n        <Route path=\"/search_product\" component={GotoSearchProduct} />\r\n        <Route path=\"/search_products\" component={SearchProduct} />\r\n        <Route path=\"/product_detail\" component={ProductDetail} />\r\n        <PrivateRoute path=\"/order\" component={Order} />\r\n        <PrivateRoute path=\"/member\" component={UserInfo} />\r\n        <PrivateRoute path=\"/payorder\" component={PayOrder} />\r\n      </Switch>\r\n      {\r\n        // 购物车\r\n        props.isLogin ? <ShopingCart /> : null\r\n      }\r\n      {\r\n        // 聊天框\r\n        props.hideChat ? null : <Chat />\r\n      }\r\n      {\r\n        // 消息框\r\n        props.showAlert ? <MessageBox /> : null\r\n      }\r\n      {\r\n        // 确认框\r\n        props.showConfirm ? <Confirm /> : null\r\n      }\r\n      {\r\n        //<Loading />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isLogin: state.auth.isLogin,\r\n    hideChat: state.chat.hideChat,\r\n    showAlert: state.messageBox.showAlert,\r\n    showConfirm: state.messageBox.showConfirm\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(App))\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport App from './App';\r\nimport store from './flux/store'\r\n\r\nconst ReactBody = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  )\r\n}\r\n// hydrate\r\nReactDOM.hydrate(<ReactBody />, document.getElementById('react-body'));\r\n"],"sourceRoot":""}