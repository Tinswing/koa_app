{"version":3,"sources":["utils/config.js","flux/reducers/register.js","utils/validator.js","flux/reducers/authReducer.js","flux/reducers/product.js","flux/reducers/order.js","flux/reducers/chat.js","flux/reducers/index.js","flux/store.js","flux/actions/productActions.js","flux/actions/authActions.js","flux/actions/orderActions.js","flux/actions/chatActions.js","utils/socket.js","utils/setAuth.js","components/Header/index.js","containers/Home/subpage/Slide.js","containers/Home/subpage/SmaillType.js","containers/Home/index.js","containers/Register/subpage/step1.js","containers/Register/subpage/step2.js","containers/Register/subpage/step3.js","containers/Register/index.js","containers/Login/subpage/Account.js","containers/Login/subpage/PhoneLogin.js","containers/Login/index.js","components/Search/index.js","components/Goods/subpage/Wait.js","components/Goods/subpage/ErrorPage.js","components/Goods/subpage/Empty.js","components/Goods/subpage/GoodsList.js","components/Goods/index.js","containers/SearchProduct/subpage/SubStore.js","containers/SearchProduct/index.js","containers/SearchProduct/GotoSearchProduct.js","components/StoreHeader/index.js","utils/tools.js","containers/ProductDetail/subpage/Spec.js","containers/ProductDetail/subpage/ProductInfo.js","containers/ProductDetail/index.js","containers/UserInfo/subpage/Safety.js","containers/UserInfo/subpage/MyInfo.js","containers/UserInfo/subpage/Address.js","containers/UserInfo/subpage/ShopCat.js","containers/UserInfo/subpage/MyOrders/subpage/All.js","containers/UserInfo/subpage/MyOrders/subpage/WaitPay.js","containers/UserInfo/subpage/MyOrders/subpage/WaitSend.js","containers/UserInfo/subpage/MyOrders/subpage/WaitSign.js","containers/UserInfo/subpage/MyOrders/subpage/WaitComment.js","containers/UserInfo/subpage/MyOrders/index.js","containers/UserInfo/index.js","containers/Order/index.js","containers/PayOrder/subpage/PayHeader.js","containers/PayOrder/index.js","containers/ShopingCart/index.js","components/Chat/subpage/Message.js","components/Chat/subpage/Contacts.js","components/Chat/subpage/Search.js","components/Chat/subpage/ChatWindow.js","components/Chat/index.js","App.js","index.js"],"names":["config","initialState","step","phone","isEmpty","value","undefined","Object","keys","length","isPhone","number","test","isLength","opts","min","max","location","isLogin","loginWay","user","isVerify","address","shopCar","authReducer","state","arguments","action","type","objectSpread","payload","searchGoods","searchStores","searchKey","productDetail","comments","goodDetail","goodInfo","infoPicture","smaillPicture","message","productReducer","productDetailInitialState","buyProducts","payOrder","payStatus","myOrders","end","limit","status","waitPay","waitSend","waitSign","waitComment","finish","orders","orderReducer","contacts","messagesNotRead","chatnow","messages","hideWindow","hideChat","chatReducer","map","i","userId","target","content","concat","toConsumableArray","sender","origin","msg","find","notRead","Array","isArray","newMsg","filter","nickname","avatar","m","n","len","push","newState","here","wait","rootReducer","combineReducers","register","auth","product","order","chat","middleWare","thunk","window","localStore","localStorage","getItem","JSON","parse","err","console","error","composeMiddlewares","applyMiddleware","apply","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","compose","subscribe","HOST","getState","setSearchKeyAction","dispatch","setLoginWay","way","setRouterLocationAction","setBuyProductsAction","products","initContacts","contactItemToChatAction","item","contactId","WS_HOST","socket","ws","initSocket","token","WebSocket","onopen","e","log","setInterval","send","stringify","onmessage","data","setAuthToken","shopCarInfo","storeId","storeName","j","len2","setShopCarAction","receiveChatMessageAction","onclose","onerror","axios","defaults","headers","common","setItem","removeItem","setCurrentUser","AppHeader","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","props","hello","_react_16_8_4_react_default","a","createElement","className","Link","to","userinfo","onClick","loginOut","bind","href","Component","connect","slide","slideboxs","slideImg","goodId","bgimg","bgcolor","slideStop","slideIndex","slideInterval","slideTimeout","slideAnimate","assertThisInitialized","gotoSlide","slideStart","_this2","setState","document","getElementsByClassName","style","opacity","clearInterval","clearTimeout","next","before","beforeOpa","nextOpa","interval","setTimeout","zIndex","time","timeout","nowtime","Date","index","Number","currentTarget","getAttribute","_this3","onMouseLeave","key","backgroundColor","background","onMouseOver","_","cnames","slide-nav-selected","SmaillType","smaillType","_id","smaillName","detail","detailName","Home","navTop","bigType","selectedBigid","onBigTypeSelect","CurrentSmaillType","get","then","res","success","catch","bigid","getSmaill","preventDefault","history","_this4","components_Header","onSubmit","searchProduct","onChange","searchInputChange","placeholder","width","height","src","alt","onBigTypeLeave","nav-l-item-sel","bigName","subpage_SmaillType","Slide","Step1","isCheck","smsCode","sendSMSCode","errors","validator","sendSMS","changeStep","defineProperty","name","sms","post","getPhone","refs","slideBlock","addEventListener","start","screenX","parseInt","getComputedStyle","mousemove","move","left","slideRate","mouseup","removeEventListener","slideCheck","ref","nextStep","Step2","password","password2","debounce","nicknameRepeat","valid","isLegal","callback","response","result","timer","handler","newUser","getUser","submit","classnames","border-err","Step3","users","Register","registerInfo","showStep","Route","exact","path","component","Account","account","inputChange","info","htmlFor","id","formSubmit","React","protTypes","PropTypes","object","isRequired","func","PhoneLogin","_ref","sms_code","Login","goBack","classPhone","classAccount","historyPush","beforeKey","Search","defaultValue","propType","string","Wait","ErrorPage","Empty","GoodsList","goods","rowlast","logo","nowPrice","goodName","substring","Goods","searchUrl","getGoods","subpage_Wait","subpage_ErrorPage","subpage_Empty","subpage_GoodsList","SubStore","stores","detailTypes","nextProps","detailId","storeIds","repeat","jsonStoreIds","smaillId","detailType","crum-selected","SearchProduct","match","params","q","search","getSearchProductUrl","setSearchGoodsAction","queryString","url","isvalid","bigId","sort","limit1","limit2","components_Search","subpage_SubStore","components_Goods","GotoSearchProduct","StoreHeader","onSearchInputChange","storeInfo","searchAllProduct","searchStoreProduct","withRouter","intMultiplication","b","deci","replace","intAdd","deci1","deci2","Math","abs","maxDeci","transPrice","price","formatDate","date","year","d","isNaN","getDay","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","Spec","smaillx","smailly","bigImg","showMustChoice","selectImg","link","allAmount","specChoice","choiceProductDetail","choiceNumber","specConfig","specValueClick","onSmaillMouseOver","newConfig","detailIndex","specNameIndex","specValueIndex","amount","specName","indexx","isOK","choiceNumberChange","buyProduct","goodDetailId","spec","v","specValue","val","addShopCar","show-choice","display","closeMustChoice","value-item-selected","plusNumber","backgroundSize","marginBottom","border","minusNumber","marginTop","marginLeft","buyNow","buy-now-noPost","add-shopcat-noPost","ProductInfo","showDetail","product-info-selected","showDetial","creaTime","ProductDetail","setProductDetailAction","src_components_StoreHeader","subpage_Spec","subpage_ProductInfo","Safety","edit","newEmail","newPhone","newPhone2","smsCode1","smsCode2","smsState","btn","count","innerText","email","emailSubmit","phoneSubmit","editChange","editInputChange","editEmailSubmit","editPhoneSubmit","MyInfo","title","preventDefailt","method","initState","editState","detailAddress","postcode","receiveName","receivePhone","isDefault","Address","checked","formInputChange","setDefailtChange","saveAddress","cancelEdit","borderColor","textAlign","cellSpacing","cellPadding","default-ads","editStateChange","deleteAddress","memberId","ShopCat","AllOrders","orderno","sumPrice","WaitPay","isPay","WaitSend","isSend","WaitSign","WaitComment","Order","uoi-hit","pathname","render","All","subpage_WaitPay","subpage_WaitSend","subpage_WaitSign","subpage_WaitComment","UserInfo","mn-navselected","MyOrder","choiceAddress","numbers","totalPrice","computeTotal","nums","numberChange","submitOrder","request","goodDetailIds","addressId","shopCarIds","shopCarId","setPayOrderAction","addressChoice","numberMinus","numberPlus","commentChange","PayOrder","payway","property","paywayChange","wallet","subpage_PayHeader","productName","setPayway","alipayURL","frameBorder","ShopingCart","bodyStatus","navStatus","choiceAll","choiceStores","choiceProducts","documentElement","clientHeight","onresize","isHide","inter","out","diff","shopCarBody","marginRight","now","shopCarProductsLength","indexOf","forEach","computeChoice","computeChoiceCount","shopcar-nav-transparent","showNav","hideNav","showCarBody","shop-mab-focus","toggleChat","allCheckboxChange","storeCheckboxChange","productCheckboxChange","deleteShopProduct","cashierShopCar","sc-empty","reduce","prev","subMessage","messageNotReadItemToChatAction","messageItemToChatAction","msg-item-select","contactClick","online","offline","isOnline","searchAns","keyword","shakeGetAns","stopPropagation","keywordChange","contactsClick","addContactsClick","transMessage","images","msgs","split","ChatWindow","hasError","scrollToButton","textarea","ondragenter","ondragleave","ondragover","ondrop","file","dataTransfer","files","size","formData","FormData","append","setWaitMessageAction","innerHTML","msgNow","msgNext","focus","chatMessageBox","scrollTop","scrollHeight","swingChatWindowAction","wss","swingChatWindow","dangerouslySetInnerHTML","__html","onInput","textareaInput","contentEditable","suppressContentEditableWarning","sendMessage","hide","Chat","route","getElementById","onmousedown","startX","clientX","startY","clientY","top","onmousemove","onmouseup","onmouseleave","routeChange","crr-select-bg","subpage_Message","subpage_Contacts","subpage_Search","subpage_ChatWindow","jwtToken","src_containers_ShopingCart","src_components_Chat","ReactDOM","es","BrowserRouter","src_App_0"],"mappings":"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","file":"static/js/main.1da1eb32.chunk.js","sourcesContent":["export default {\r\n //  HOST: 'http://127.0.0.1:5000',\r\n\t// WS_HOST: 'ws://127.0.0.1:5000'\r\n  HOST: 'http://118.126.108.36',\r\n\tWS_HOST: 'ws://118.126.108.36'\r\n}\r\n","let initialState = {\r\n\tstep: 0,\r\n\tphone: '13888888888'\r\n}\r\nexport default (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase \"STEP_CHANGE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstep: action.step\r\n\t\t\t}\r\n\t\tcase \"GET_PHONE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tphone: action.phone\r\n\t\t\t}\r\n\t\tcase \"NEW_USER\":\r\n\t\t\treturn action.user;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","export const isEmpty = value => {\r\n\treturn value === undefined || value === null ||\r\n\t\t(typeof value === 'object' && Object.keys(value).length === 0) ||\r\n\t\t(typeof value === 'string' && value.length === 0)\r\n}\r\n\r\nexport const isPhone = number => {\r\n\treturn /^1[0-9]{10}$/.test(number);\r\n}\r\n\r\nexport const isLength = (value, opts) => {\r\n\tif (typeof value !== 'string') return false;\r\n\treturn (value.length >= opts.min && value.length <= opts.max)\r\n}\r\n\r\nexport const isEmail = email => {\r\n  return /^[A-z\\d]+([-_.][A-z\\d]+)*@([A-z\\d]+[-.])+[A-z\\d]{2,4}$/.test(email)\r\n}\r\n","import {isEmpty} from '../../utils/validator'\r\n\r\nvar initialState = {\r\n  location: '',  // 记录路由地址\r\n\tisLogin: false,\r\n\tloginWay: 'phone',\r\n\tuser: {},\r\n  isVerify: true,  // 账号验证中\r\n  address: [],  // 收货地址\r\n  shopCar: [],  // 购物车\r\n}\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_LOGIN_WAY':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloginWay: action.payload\r\n\t\t\t}\r\n\t\tcase 'SET_CURRENT_USER': // 登陆或 App.js 验证 localStorage中 token 时触发\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLogin: !isEmpty(action.payload),\r\n\t\t\t\tuser: !isEmpty(action.payload) ? action.payload.user : {},\r\n        isVerify: false,  // 设置 auth.isVerifu = false (验证结束)\r\n        address: action.payload.address || []\r\n\t\t\t}\r\n    case 'SET_ROUTER_LOCATION':\r\n      return {\r\n        ...state,\r\n        location: action.payload\r\n      }\r\n    case 'SET_SHOP_CAR':\r\n      return {\r\n        ...state,\r\n        shopCar:action.payload\r\n      }\r\n    case 'SET_ADDRESS':\r\n      return {\r\n        ...state,\r\n        address: action.payload\r\n      }\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport default authReducer;\r\n","var initialState = {\n  searchGoods: [],\n  searchStores: [],\n  searchKey: '',\n  productDetail: {\n    comments: [],\n    goodDetail: [],\n    goodInfo: {},\n    infoPicture: [],\n    smaillPicture: [{}],\n    message: '加载中。。。'\n  }\n}\n\nvar productReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case 'SET_SEARCH_GOODS':\n      return {\n        ...state,\n        searchGoods: action.payload\n      }\n    case 'SET_SEARCH_STORES':\n      return {\n        ...state,\n        searchStores: action.payload\n      }\n    case 'SET_SEARCH_KEY':\n      return {\n        ...state,\n        searchKey: action.payload\n      }\n    case 'SET_PRODUCT_DETAIL':\n      return {\n        ...state,\n        productDetail: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default productReducer\nexport const productDetailInitialState = initialState","const initialState = {\r\n  buyProducts: [],   // 待购买的商品\r\n  payOrder: {},\r\n  payStatus: 'nosuccess',\r\n  myOrders: { // 我的订单\r\n    end: true,\r\n    limit: 0,\r\n    status: {\r\n      waitPay: 0,\r\n      waitSend: 0,\r\n      waitSign: 0,\r\n      waitComment: 0,\r\n      finish: 0\r\n    },\r\n    orders: []\r\n  }\r\n}\r\n\r\nconst orderReducer = (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n    case 'SET_BUY_PRODUCTS':\r\n      return {\r\n        ...state,\r\n        buyProducts: action.payload\r\n      }\r\n    case 'SET_PAY_ORDER':\r\n      return {\r\n        ...state,\r\n        payOrder: action.payload\r\n      }\r\n    case 'PAY_SUCCESS':\r\n      return {\r\n        ...state,\r\n        payStatus: 'success'\r\n      }\r\n    case 'GET_MY_ORDERS':\r\n      return {\r\n        ...state,\r\n        myOrders: action.payload\r\n      }\r\n    default:\r\n      return state\r\n\t}\r\n}\r\nexport default orderReducer\r\n","const initialState = {\r\n  contacts: [], // 联系人\r\n  messagesNotRead: [],\r\n  chatnow: undefined,\r\n  messages: [],\r\n  hideWindow: true,\r\n  hideChat: true\r\n}\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'SEND_CHAT_MESSAGE_BACK':  // 发送消息回执\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId !== action.payload.target ? i : {\r\n            ...i,\r\n            content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}]\r\n          }\r\n        })\r\n      }\r\n    case 'RECEIVE_CHAT_MESSAGE': // 收到聊天消息\r\n      var origin = state.messagesNotRead.find(i => i.userId === action.payload.origin)\r\n      // 聊天人在未读列表中\r\n      if (origin) {\r\n        return {\r\n          ...state,\r\n          messagesNotRead: state.messagesNotRead.map(i => {\r\n            return i.userId === action.payload.origin ? {\r\n              ...i,\r\n              notRead: i.notRead + 1,\r\n              content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}],\r\n            } : i\r\n          })\r\n        }\r\n      }\r\n      origin = state.messages.find(i => i.userId === action.payload.origin)\r\n       // 聊天对象在已读消息列表中\r\n      if (origin) {\r\n         // 是当前聊天对象\r\n        if (origin.userId === state.chatnow) {\r\n          return {\r\n            ...state,\r\n            messages: state.messages.map(i => {\r\n              return i.userId === action.payload.origin ? {\r\n                ...i,\r\n                content: Array.isArray(i.content) ? i.content.concat([{sender: action.payload.origin, msg: action.payload.content}]) : [{sender: action.payload.origin, msg: action.payload.content}]\r\n              } : i\r\n            })\r\n          }\r\n        }else {\r\n          // 不是当前聊天对象，转移到未读列表中\r\n          var newMsg = [{sender: action.payload.origin, msg: action.payload.content}]\r\n          return {\r\n            ...state,\r\n            messages: state.messages.filter(i => i.userId !== action.payload.origin),\r\n            messagesNotRead: [{\r\n              ...origin,\r\n              content: Array.isArray(origin.content) ? origin.content.concat(newMsg) : newMsg,\r\n              notRead: 1,\r\n            }].concat(state.messagesNotRead)\r\n          }\r\n        }\r\n      }\r\n       // 聊天对象新来的\r\n      return {\r\n        ...state,\r\n        messagesNotRead: [{\r\n          userId: action.payload.origin,\r\n          nickname: action.payload.nickname,\r\n          avatar: action.payload.avatar,\r\n          notRead: 1,\r\n          content: [{sender: action.payload.origin, msg: action.payload.content}]\r\n        }].concat(state.messagesNotRead)\r\n      }\r\n    case 'INIT_CONTACTS':\r\n      var m = [], n = [];\r\n      for (let i = 0, len = action.payload.length; i < len; i++) {\r\n        if (action.payload[i].notRead > 0) {\r\n          n.push(action.payload[i])\r\n        }else {\r\n          m.push(action.payload[i])\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        messagesNotRead: n,\r\n        messages: m\r\n      }\r\n\r\n    case 'MESSAGE_NOT_READ_ITEM_TO_CHAT': // 未读消息到聊天窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        messagesNotRead: state.messagesNotRead.filter(i => i.userId !== action.payload.userId),\r\n        messages: [action.payload].concat(state.messages),\r\n        hideWindow: false\r\n      }\r\n    case 'CONTACT_ITEM_TO_CHAT': // 联系人和找人 item 到聊天窗口\r\n      var newState = {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false,\r\n        messagesNotRead: state.messagesNotRead.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n            if (!here) {\r\n              action.payload.content = i.content\r\n            }\r\n          return here\r\n        }),\r\n        messages: state.messages.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n          if (!here) {\r\n            action.payload.content = i.content\r\n          }\r\n          return here\r\n        })\r\n      }\r\n      // 聊天人已在消息列表中\r\n      if (newState.messagesNotRead.length !== state.messagesNotRead.length || newState.messages.length !== state.messages.length) {\r\n        return {\r\n          ...newState,\r\n          messages: [action.payload].concat(newState.messages)\r\n        }\r\n      }\r\n      // 不在消息列表中\r\n      action.payload.content = []\r\n      return {\r\n        ...newState,\r\n        messages: [action.payload].concat(state.messages)\r\n      }\r\n\r\n    case 'MESSAGE_ITEM_TO_CHAT':  // 已读消息到窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false\r\n      }\r\n    case 'SET_CONTACTS':  // 获得联系人\r\n      return {\r\n        ...state,\r\n        contacts: action.payload\r\n      }\r\n    case 'SET_WAIT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId === state.chatnow ? {...i, wait: action.payload} : i\r\n        })\r\n      }\r\n    case 'TOGGLE_CHAT':\r\n      return {\r\n        ...state,\r\n        hideChat: action.payload\r\n      }\r\n    case 'SWING_CHAT_WINDOW':\r\n      return {\r\n        ...state,\r\n        hideWindow: action.payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\nexport default chatReducer\r\n","/**\n * 合并多个 reducer 成一个大的reducer\n */\n\nimport {combineReducers} from 'redux'\n\nimport register from './register'\nimport auth from './authReducer'\nimport product from './product'\nimport order from './order'\nimport chat from './chat'\n\nlet rootReducer = combineReducers({\n\tregister,\n\tauth,\n  product,\n  order,\n  chat\n});\nexport default rootReducer;\n","import {createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducers/index.js'\r\n\r\nlet middleWare = [thunk];\r\nlet initialState = {};\r\n// 从本地储存获取 store 初始状态\r\nif (typeof(window) === 'object') {\r\n  var localStore = window.localStorage.getItem('localStoreState')\r\n  if (localStore) {\r\n    try {\r\n      initialState = JSON.parse(localStore)\r\n    }catch(err) {\r\n      console.error(err)\r\n    }\r\n  }\r\n}\r\n\r\n// 需要合并的中间件\r\nlet composeMiddlewares = [applyMiddleware(...middleWare),];\r\n//激活 chrome 浏览器 redux 插件\r\nif (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\r\n\tcomposeMiddlewares.push(window.__REDUX_DEVTOOLS_EXTENSION__())\r\n}\r\nconst store = createStore(rootReducer, initialState, compose(...composeMiddlewares));\r\n\r\n// 订阅更新函数，每次状态更新都会执行\r\nstore.subscribe(() => {\r\n  // if (typeof(window) !== 'object') return;\r\n  // var state = store.getState()\r\n  // window.localStorage.setItem('localStoreState', JSON.stringify({\r\n  //   order: state.order,\r\n  //   // auth: state.auth\r\n  // }))\r\n})\r\n\r\nexport default store;\r\n","import store from '../store'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\nimport { productDetailInitialState } from '../reducers/product.js'\r\n\r\nconst HOST = config.HOST\r\nconst state = store.getState()\r\n\r\n// 搜索的 goods\r\nexport const setSearchGoodsAction = goods => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_GOODS',\r\n    payload: goods\r\n  })\r\n}\r\n\r\n// 设置搜索的 Store\r\nexport const setSearchStoresAction = stores => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_STORES',\r\n    payload: stores\r\n  })\r\n}\r\n\r\n// 设置搜索关键字\r\nexport const setSearchKeyAction = searchKey => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_KEY',\r\n    payload: searchKey\r\n  })\r\n}\r\n\r\n// 设置商品详情页数据\r\nexport const setProductDetailAction = goodId => dispatch => {\r\n  // if (state.product.productDetail._id === goodId) return;\r\n  if (goodId === -1) {\r\n    // 清空数据\r\n    dispatch({\r\n      type: 'SET_PRODUCT_DETAIL',\r\n      payload: productDetailInitialState\r\n    })\r\n  }\r\n  axios.get(`${HOST}/api/goods/product_detail?goodId=${goodId}`)\r\n    .then(res => {\r\n      if (res.data.success) {\r\n        dispatch({\r\n          type: 'SET_PRODUCT_DETAIL',\r\n          payload: res.data.payload\r\n        })\r\n      }else {\r\n        dispatch({\r\n          type: 'SET_PRODUCT_DETAIL',\r\n          payload: { ...state.product.productDetail, message: res.data.message, error: '' }\r\n        })\r\n      }\r\n    })\r\n    .catch(err => {\r\n      dispatch({\r\n        type: 'SET_PRODUCT_DETAIL',\r\n        payload: { ...state.product.productDetail, error: err.message, message: '' }\r\n      })\r\n    })\r\n}\r\n","import store from '../store'\r\n\r\nexport const setLoginWay = way => dispatch => {\r\n\tdispatch({\r\n\t\ttype: 'SET_LOGIN_WAY',\r\n\t\tpayload: way\r\n\t});\r\n}\r\n\r\nexport const setRouterLocationAction = location => dispatch => {\r\n  dispatch({\r\n    type: 'SET_ROUTER_LOCATION',\r\n    payload: location\r\n  })\r\n}\r\n\r\nexport const setShopCarAction = shopCarInfo => {\r\n  if (!Array.isArray(shopCarInfo)) return;\r\n  // 将商品按 店铺进行分组\r\n  let shopCar = []\r\n  if (shopCarInfo.length > 0) {\r\n    shopCar[0] = {\r\n      storeId: shopCarInfo[0].product.storeId,\r\n      storeName: shopCarInfo[0].product.storeName,\r\n      products: [shopCarInfo[0]]\r\n    }\r\n    for (let i = 1, len = shopCarInfo.length; i < len; i++) {\r\n      for (let j = 0, len2 = shopCar.length; j < len2; j++) {\r\n        if (shopCarInfo[i].product.storeId === shopCar[j].storeId) {\r\n          shopCar[j].products.push(shopCarInfo[i])\r\n          break\r\n        }\r\n        if (j === len2-1) {\r\n          shopCar.push({\r\n            storeId: shopCarInfo[i].product.storeId,\r\n            storeName: shopCarInfo[i].product.storeName,\r\n            products: [shopCarInfo[i]]\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  store.dispatch({\r\n    type: 'SET_SHOP_CAR',\r\n    payload: shopCar\r\n  })\r\n}\r\n\r\n// 获取收货地址\r\nexport const setAddressAction = address => {\r\n  store.dispatch({\r\n    type: 'SET_ADDRESS',\r\n    payload: address\r\n  })\r\n}\r\n","import store from '../store'\r\n/**\r\n * 订单 Action\r\n */\r\nexport const setBuyProductsAction = products => dispatch => {\r\n  dispatch({\r\n    type: 'SET_BUY_PRODUCTS',\r\n    payload: products\r\n  })\r\n}\r\n\r\n/**\r\n * 付款页面信息\r\n */\r\nexport const setPayOrderAction = payOrder => dispatch => {\r\n  dispatch({\r\n    type: 'SET_PAY_ORDER',\r\n    payload: payOrder\r\n  })\r\n}\r\n/**\r\n * 付款成功\r\n */\r\nexport const payOrderSuccessAction = orderno => {\r\n  store.dispatch({\r\n    type: 'PAY_SUCCESS'\r\n  })\r\n}\r\n\r\nexport const getMyOrdersAction = myOrders => {\r\n  store.dispatch({\r\n    type: 'GET_MY_ORDERS',\r\n    payload: myOrders\r\n  })\r\n}\r\n","import store from '../store'\r\nimport socket from '../../utils/socket'\r\n\r\nexport const toggleChatAction = state => { // 隐藏或显示聊天窗口\r\n  store.dispatch({\r\n    type: 'TOGGLE_CHAT',\r\n    payload: state\r\n  })\r\n}\r\n\r\nexport const initContacts = messages => {\r\n  store.dispatch({\r\n    type: 'INIT_CONTACTS',\r\n    payload: messages\r\n  })\r\n}\r\n\r\n// 未读消息展示到聊天框\r\nexport const messageNotReadItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({ // 设置消息已读\r\n        type: 'msg_be_read',\r\n        content: item.userId\r\n      }))\r\n    }\r\n    dispatch({\r\n      type: 'MESSAGE_NOT_READ_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\n// 已读消息展示到聊天框\r\nexport const messageItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    dispatch({\r\n      type: 'MESSAGE_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\n// 联系人和找人 item 到聊天框\r\nexport const contactItemToChatAction = item => {\r\n  item = {...item, userId: item.userId || item.contactId}\r\n  if (store.getState().chat.chatnow === item.userId) {\r\n    return\r\n  }\r\n  store.dispatch({\r\n    type: 'CONTACT_ITEM_TO_CHAT',\r\n    payload: item\r\n  })\r\n}\r\n\r\nexport const swingChatWindowAction = hide => dispatch => {\r\n  dispatch({\r\n    type: 'SWING_CHAT_WINDOW',\r\n    payload: hide\r\n  })\r\n}\r\n\r\nexport const setWaitMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'SET_WAIT_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 发送消息后回执\r\nexport const sendChatMessageBackAction = message => {\r\n  store.dispatch({\r\n    type: 'SEND_CHAT_MESSAGE_BACK',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到聊天消息\r\nexport const receiveChatMessageAction = message => {\r\n  if (message.origin === store.getState().chat.chatnow && socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'msg_be_read',\r\n      content: message.origin\r\n    }))\r\n  }\r\n  store.dispatch({\r\n    type: 'RECEIVE_CHAT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到联系人列表\r\nexport const getContactsAction = contacts => {\r\n  store.dispatch({\r\n    type: 'SET_CONTACTS',\r\n    payload: contacts\r\n  })\r\n}\r\n","import { setAuthToken } from './setAuth'\r\nimport {\r\n  payOrderSuccessAction,\r\n  getMyOrdersAction\r\n} from '../flux/actions/orderActions'\r\nimport {\r\n  setShopCarAction,\r\n  setAddressAction\r\n} from '../flux/actions/authActions'\r\nimport {\r\n  // setWaitMessageAction,\r\n  sendChatMessageBackAction,\r\n  receiveChatMessageAction,\r\n  getContactsAction,\r\n  initContacts\r\n} from '../flux/actions/chatActions'\r\nimport config from './config'\r\n\r\nconst WS_HOST = config.WS_HOST\r\n\r\nconst socket = {\r\n  status: 'close',\r\n  ws: null,\r\n  initSocket: function (token) {\r\n    if (typeof(window) !== 'object' || !token) return;\r\n    const ws = new WebSocket(`${WS_HOST}?token=${token}`)\r\n\r\n    ws.onopen = function(e) {\r\n      console.log('socket open')\r\n      socket.status = 'open'\r\n      setInterval(function() {  // 设置定时器更新 token\r\n        if (socket.status !== 'open') { return }\r\n        ws.send(JSON.stringify({\r\n          type: 'transToken',\r\n          target: 'koa'\r\n        }))\r\n      }, 1000*60*15)\r\n      ws.send('{\"type\":\"get_shop_cat\"}') // 获取购物车信息\r\n      ws.send('{\"type\":\"init_chat_messages\"}') // 获取聊天信息\r\n    }\r\n\r\n    ws.onmessage = function(e) {\r\n      var msg = e.data\r\n      try {\r\n        msg = JSON.parse(msg)\r\n      }catch(err) {\r\n        return\r\n      }\r\n      switch(msg.type) {\r\n        case 'transToken':\r\n          return setAuthToken(msg.content)\r\n\r\n        case 'payOrderSuccess':  // 付款成功服务端消息\r\n          return payOrderSuccessAction(msg.content)\r\n\r\n        case 'get_shop_cat':  // 获取购物车信息\r\n          return setShopCarAction(msg.content)\r\n\r\n        case 'send_chat_message':  // 发送消息后回执\r\n          return sendChatMessageBackAction(msg)\r\n\r\n        case 'init_chat_messages':  // 初始化聊天信息\r\n          return initContacts(msg.content)\r\n\r\n        case 'receive_chat_message':  // 收到聊天消息\r\n          return receiveChatMessageAction(msg)\r\n\r\n        case 'get_contacts': // 收到联系人列表信息\r\n          return getContactsAction(msg.content)\r\n\r\n        case 'get_address':\r\n          return setAddressAction(msg.content)\r\n        case 'get_orders':\r\n          return getMyOrdersAction(msg.content)\r\n        default:\r\n          return\r\n      }\r\n    }\r\n\r\n    ws.onclose = function(e) {\r\n      console.log('socket close!')\r\n      socket.status = 'close'\r\n    }\r\n\r\n    ws.onerror = function(e) {\r\n      console.error('socket error', e)\r\n    }\r\n\r\n    socket.ws = ws\r\n  }\r\n}\r\n\r\nexport default socket\r\n","import axios from 'axios'\nimport store from '../flux/store'\nimport socket from './socket'\n\nexport const setAuthToken = token => {\n\tif (token) {\n\t\t// 让每个请求头携带 token\n\t\taxios.defaults.headers.common[\"Authorization\"] = token;\n\t\t // 添加localStorage 储存token\n\t\twindow.localStorage.setItem(\"jwtToken\", token);\n    // 初始化 websocket\n    if (socket.status === 'close') {\n      socket.initSocket(token)\n    }\n\t} else {\n\t\t// 删除请求头 token\n\t\tdelete axios.defaults.headers.common[\"Authorization\"];\n\t\t// 删除localStorage储存的 token\n\t\twindow.localStorage.removeItem(\"jwtToken\");\n\t}\n}\n\nexport const setCurrentUser = payload => {\n\tstore.dispatch({\n\t\ttype: 'SET_CURRENT_USER',\n\t\tpayload\n\t})\n}\n\n","import React, {Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport './index.scss'\nimport {setAuthToken, setCurrentUser} from '../../utils/setAuth'\nclass AppHeader extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\n\t\t}\n\t}\n\t// 退出\n\tloginOut() {\n\t\tsetAuthToken(false); // axios token 头清除，localStorage token清除\n\t\tsetCurrentUser({}); // dispatch 当前空用户\n\t}\n\trender() {\n\t\tconst auth = this.props.auth;\n\t\tconst hello = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>哈，欢迎来到xx</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/login\">请登录</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/register\">免费注册</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\tconst userinfo = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>Hi，<Link to=\"/member\">{auth.user.nickname}</Link></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<span to=\"/login\">积分0</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/\">消息0</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a onClick={this.loginOut.bind(this)} href=\"javascript:void(0)\">退出</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\treturn (\n\t\t\t<div className=\"app-header-wrap\">\n\t\t\t\t<div className=\"app-header\">\n\t\t\t\t\t{\n\t\t\t\t\t\tauth.isLogin ?\n\t\t\t\t\t\tuserinfo :\n\t\t\t\t\t\thello\n\t\t\t\t\t}\n\t\t\t\t\t<ul className=\"ul-r\">\n\t\t\t\t\t\t<li><Link to=\"/member\">我的淘宝</Link></li>\n\t\t\t\t\t\t<li><Link to=\"/member\">购物车0件</Link></li>\n\t\t\t\t\t\t<li>商家支持</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nAppHeader.propTypes = {\n\tauth: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\nexport default connect(mapStateToProps, null)(AppHeader);\n","/**\r\n * 轮播图组件\r\n */\r\nimport React,{Component} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport cnames from 'classnames'\r\nimport config from '../../../utils/config'\r\n\r\n\r\nclass slide extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tslideboxs: null,\r\n\t\t\t// 轮播图图片\r\n\t\t\tslideImg: [\r\n        {goodId: 43, bgimg: '/image/slide_wall/TB1fxrzI3HqK1RjSZFkSut.WFXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 45, bgimg: '/image/slide_wall/TB1FmwTvHZnBKNjSZFGSuvt3FXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 48, bgimg: '/image/slide_wall/O1CN01Tms3Pn1D7tpGbFK5a_!!170-0-luban.jpg_q100.jpg_.webp', bgcolor: '#CA1124'},\r\n\t\t\t\t{goodId: 49, bgimg: '/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg', bgcolor: '#584BFB'},\r\n\t\t\t\t{goodId: 42, bgimg: '/image/slide_wall/TB13jplKCzqK1RjSZFHwu23CpXa.png', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 50, bgimg: '/image/slide_wall/TB10lfQxpzqK1RjSZSgSuwpAVXa.jpg', bgcolor: '#E9EAEC'}\r\n\t\t\t],\r\n\t\t\tslideStop: false,  // 是否停止轮播图\r\n\t\t\tslideIndex: 0,  // 轮播图索引\r\n\t\t\tslideInterval: -1,  // 主定时器\r\n      slideTimeout: -1\r\n\t\t}\r\n\t\tthis.slideAnimate = this.slideAnimate.bind(this);\r\n\t\tthis.gotoSlide = this.gotoSlide().bind(this);\r\n\t\tthis.slideStart = this.slideStart.bind(this);\r\n\t\tthis.slideStop = this.slideStop.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n    if (typeof window !== 'object') return;\r\n\t\t// 组件挂载完毕,获取轮播图组件，开启轮播图\r\n\t\tthis.setState({\r\n\t\t\tslideboxs: window.document.getElementsByClassName(\"slide-img-box\")\r\n\t\t}, () => {\r\n\t\t\tthis.state.slideboxs[this.state.slideIndex].style.opacity = 1;\r\n\t\t\tvar _this = this;\r\n\t\t\tvar slideInterval = window.setInterval(function(){\r\n\t\t\t\tif (!_this.state.slideStop)\r\n\t\t\t\t\t_this.slideAnimate();\r\n\t\t\t}, 5000);\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideInterval\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t// 组件卸载\r\n\tcomponentWillUnmount() {\r\n    if (typeof window !== 'object') return;\r\n      // 清除轮播图主定时器\r\n    window.clearInterval(this.state.slideInterval);\r\n    window.clearTimeout(this.state.slideTimeout);\r\n\t}\r\n\t// 动画切换函数，before 消失，next 显示\r\n\tslideAnimate(next) {\r\n\t\tvar before = this.state.slideIndex;\r\n\t\tif (next === undefined) {next = ((before + 1) % this.state.slideboxs.length)};\r\n\t\tvar _this = this;\r\n\t\tvar slideboxs = this.state.slideboxs;\r\n\t\tvar beforeOpa = 1,nextOpa = 0;\r\n\t\t// 开始动画\r\n\t\tvar interval = window.setInterval(function() {\r\n\t\t\tbeforeOpa -= 0.2; nextOpa += 0.2;\r\n      // 组件卸载后定时器未及时清除\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = beforeOpa;\r\n        slideboxs[next].style.opacity = nextOpa;\r\n      }\r\n\t\t}, 50);\r\n\t\t// 停止动画，完成转换\r\n\t\tvar slideTimeout = window.setTimeout(function() {\r\n\t\t\twindow.clearInterval(interval);\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = 0;\r\n        slideboxs[next].style.opacity = 1;\r\n        slideboxs[before].style.zIndex = -1;\r\n        slideboxs[next].style.zIndex = 5;\r\n      }\r\n\t\t\t// 更新显示索引\r\n      _this.setState({\r\n        slideIndex: next,\r\n        slideTimeout: slideTimeout\r\n      });\r\n\t\t}, 200);\r\n\t}\r\n\t// 切换动画索引\r\n\tgotoSlide() {\r\n\t\tvar time = 0,timeout = null;\r\n\t\treturn function (e) {\r\n\t\t\twindow.clearTimeout(timeout);\r\n\t\t\t// this.slideStop();\r\n\t\t\tvar nowtime = new Date();\r\n\t\t\tvar _this = this;\r\n\t\t\tvar index = Number(e.currentTarget.getAttribute('index'));\r\n\t\t\tif (nowtime - time > 500) {\r\n\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\ttime = nowtime;\r\n\t\t\t}else {\r\n\t\t\t\ttimeout = window.setTimeout(function(){\r\n\t\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\t\ttime = nowtime;\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\t// 停止动画\r\n\tslideStop(){\r\n\t\tif (!this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t// 开启动画\r\n\tslideStart() {\r\n\t\tif (this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tvar slideImg = this.state.slideImg;\r\n\t\treturn(\r\n\t\t<div className=\"nav-slide-wrap\" onMouseLeave={this.slideStart}>\r\n\t\t{/*轮播图图片*/}\r\n\t\t{\r\n\t\t\tslideImg.map((item,index) => (\r\n\t\t\t\t<div key={index} className=\"slide-img-box\" style={{backgroundColor: item.bgcolor}}>\r\n          <Link to={`/product_detail?goodId=${item.goodId}`}>\r\n  \t\t\t\t\t<div\r\n  \t\t\t\t\tclassName=\"slide-img-box-i\"\r\n  \t\t\t\t\tstyle={{background: `url(${config.HOST}${item.bgimg}) no-repeat center`}}\r\n  \t\t\t\t\tonMouseOver={this.slideStop}\r\n  \t\t\t\t\t></div>\r\n          </Link>\r\n\t\t\t\t</div>\r\n\t\t\t))\r\n\t\t}\r\n\t\t\t{/*小按钮*/}\r\n\t\t\t<ul className=\"slide-nav\">\r\n\t\t\t{\r\n\t\t\t\tslideImg.map((_, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={index}\r\n\t\t\t\t\t\t\tclassName={cnames(\"slide-nav-item\",{\r\n\t\t\t\t\t\t\t\t'slide-nav-selected': index === this.state.slideIndex\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\tonMouseOver={this.gotoSlide}\r\n\t\t\t\t\t\t></li>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n\t}\r\n}\r\n\r\nexport default slide\r\n","import React from 'react'\r\n\r\nfunction SmaillType(props) {\r\n\tvar smaillType = props.smaillType || [];\r\n\treturn (\r\n\t\t<div className=\"smaillType\">\r\n\t\t<h1>Detail</h1>\r\n\t\t{\r\n\t\t\tsmaillType.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item._id} className=\"smaill-item\">\r\n\t\t\t\t\t\t<div className=\"smaill-item-title\">{item.smaillName}</div>\r\n\t\t\t\t\t\t<div className=\"smaill-detail\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.detail.map(detail => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<span key={detail._id}>{detail.detailName}</span>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SmaillType;","import React, {Component} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport cnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { setSearchKeyAction } from '../../flux/actions/productActions'\r\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\r\n\r\nimport './home.scss'\r\nimport config from '../../utils/config.js'\r\nimport AppHeader from '../../components/Header'\r\nimport Slide from './subpage/Slide'\r\nimport SmaillType from './subpage/SmaillType'\r\n\r\nclass Home extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tnavTop: ['超市', '会员', '电器城', '鲜生', '医药馆', '营业厅', '旅行', '图书'],\r\n\t\t\t// 大分类信息\r\n\t\t\tbigType:[],\r\n\t\t\tselectedBigid: -1, // -1 不展示，其他为 bigType的 id\r\n      searchKey: ''\r\n\t\t}\r\n\t\tthis.onBigTypeSelect = this.onBigTypeSelect.bind(this);\r\n\t\tthis.CurrentSmaillType = this.CurrentSmaillType.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n    this.props.setRouterLocationAction('/')\r\n\t\t// 获取大分类表中数据\r\n\t\taxios.get(config.HOST + '/api/goods/type?type=big&limit=16')\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn console.error('商品分类列表获取失败');\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbigType: res.data.payload\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n        if (typeof(window) === 'object')\r\n\t\t\t\t  console.error(err);\r\n\t\t\t});\r\n\t}\r\n\t// 设置或获取 state的bigType 的 smaillType\r\n\tCurrentSmaillType(bigid, smaillType, getSmaill = false) {\r\n\t\tvar bigType = this.state.bigType;\r\n\t\tif (bigType.length === 0) return;\r\n\r\n\t\tfor (var i = 0,len = bigType.length; i < len; i++) {\r\n\t\t\tif (bigType[i]._id === bigid) {\r\n\t\t\t\t// 获取smaillType\r\n\t\t\t\tif (getSmaill) {\r\n\t\t\t\t\treturn bigType[i].smaillType;\r\n\t\t\t\t}\r\n\t\t\t\t// 设置 smaillType\r\n\t\t\t\tbigType[i].smaillType = smaillType;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbigType: bigType\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n  // 获取小分类表\r\n\tonBigTypeSelect(e) {\r\n\t\t// showsmaill => true\r\n\t\tvar bigid = Number(e.currentTarget.getAttribute('bigid'));\r\n\t\tthis.setState({\r\n\t\t\tselectedBigid:bigid\r\n\t\t});\r\n\t\taxios.get(config.HOST + '/api/goods/type?type=smaill&bigid=' + bigid)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) return;\r\n\t\t\t\tthis.CurrentSmaillType(bigid, res.data.payload);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t}\r\n\tonBigTypeLeave(){\r\n\t\tthis.setState({selectedBigid: -1});\r\n\t}\r\n  searchInputChange(e) {\r\n    this.setState({\r\n      searchKey: e.target.value\r\n    })\r\n  }\r\n  searchProduct(e) {\r\n    e.preventDefault();\r\n    this.props.setSearchKeyAction(this.state.searchKey)\r\n    this.props.history.push(`/search_product?q=${this.state.searchKey}&limit1=0&limit2=50`);\r\n  }\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<AppHeader />\r\n\t\t\t\t<div className=\"headerCon\">\r\n\t\t\t\t\t<form onSubmit={this.searchProduct.bind(this)}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName=\"search-text\"\r\n              value={this.state.searchKey}\r\n              onChange={this.searchInputChange.bind(this)}\r\n\t\t\t\t\t\t\tplaceholder=\"搜索 优选 商品/品牌/店铺\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"search-btn\">搜索</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<ul className=\"hot-query\">\r\n\t\t\t\t\t{/*搜索框下面展示*/}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.navTop.map((item,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">{item}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"main-nav\">\r\n\t\t\t\t\t<ul className=\"nav-t-wrap\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.navTop.map((item, i) => {\r\n\t\t\t\t\t\t\t\treturn (<li key={i}>{item}</li>)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{/*商品主分类*/}\r\n\t\t\t\t\t<div className=\"nav-l-box\">\r\n\t\t\t\t\t\t<div className=\"main-logo-wrap\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<a href={config.HOST}>\r\n\t\t\t\t\t\t\t\t\t<img width=\"240px\" height=\"130px\" src={config.HOST + \"/image/ui/home_logo.png\"} alt=\"优选\"/>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"nav-l-wrap\" onMouseLeave={this.onBigTypeLeave.bind(this)}>\r\n\t\t\t\t\t\t\t<div className=\"nav-l-title\">商品分类</div>\r\n\t\t\t\t\t\t\t<div className=\"nav-l-typewrap\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.bigType.map(item => (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tkey={item._id}\r\n\t\t\t\t\t\t\t\t\t\tclassName={cnames(\"nav-l-item\", {\r\n\t\t\t\t\t\t\t\t\t\t\t'nav-l-item-sel': this.state.selectedBigid===item._id\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\tbigid={item._id}\r\n\t\t\t\t\t\t\t\t\t\tonMouseOver={this.onBigTypeSelect}\r\n\t\t\t\t\t\t\t\t\t>{item.bigName}</div>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.selectedBigid === -1 ? null :\r\n\t\t\t\t\t\t\t\t<SmaillType smaillType={this.CurrentSmaillType(this.state.selectedBigid,null,true)} />\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/*轮播图组件，传递slideImg图片组*/}\r\n\t\t\t\t\t<Slide />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connect(null, { setSearchKeyAction,setRouterLocationAction })(Home);\r\n","import React, {Component} from 'react'\r\nimport axios from 'axios'\r\nimport {Link} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nimport config from '../../../utils/config.js'\r\n\r\nclass Step1 extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: '',\r\n\t\t\tisCheck: false,\r\n\t\t\tsmsCode: '',\r\n\t\t\tsendSMSCode: '',  // 发送的验证码\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.validator = this.validator.bind(this);\r\n\t\tthis.sendSMS = this.sendSMS.bind(this);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\t// 进入 Step1 改变 store.register.step = 1 中\r\n\t\tthis.props.changeStep(1);\r\n\t}\r\n\tonChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\tvalidator(phone) {\r\n\t\tif (phone) {\r\n\t\t\treturn /^1[0-9]{10}$/.test(phone);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tphone: /^1[0-9]{10}$/.test(this.state.phone),\r\n\t\t\tsms: this.state.sendSMSCode && this.state.smsCode === this.state.sendSMSCode\r\n\t\t}\r\n\t}\r\n\tsendSMS() {\r\n\t\tif (!this.validator().phone) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '手机号码格式不正确'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\terrors: {}\r\n\t\t});\r\n\t\taxios.post(config.HOST + '/api/operator/testsms', {phone: this.state.phone})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\tthis.setState({errors: {...this.state.errors, phone: '服务器忙，稍后重试'}});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tsendSMSCode: res.data.payload.smsCode\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// dispatch 手机号码\r\n\t\t\t\t\tthis.props.getPhone(this.state.phone);\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(res.data.payload.smsCode); // 打印验证码\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tphone: err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\tnextStep() {\r\n\t\tif (!(this.validator(this.props.register.phone) && this.validator().sms)) {\r\n\t\t\t// 验证不通过\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tsmsCode: '验证码有误'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 验证通过，下一步\r\n\t\tthis.props.history.push('/register/step2')\r\n\t}\r\n\tcomponentDidMount() {\r\n    if (typeof window !== 'object') return;\r\n\t\t// 组件挂载完毕，绑定原生事件\r\n\t\tconst _this = this;\r\n\t\t// 鼠标按下\r\n\t\tthis.refs.slideBlock.addEventListener(\"mousedown\", slideCheck);\r\n\t\tfunction slideCheck(e) {\r\n\t\t\tlet start = e.screenX;\r\n\t\t\t// 滑块滑动总长度\r\n\t\t\tlet width = window.parseInt(window.getComputedStyle(_this.refs.slide, false)[\"width\"]) -\r\n\t\t\t\twindow.parseInt(window.getComputedStyle(_this.refs.slideBlock, false)[\"width\"]);\r\n\t\t\t// 鼠标移动\r\n\t\t\tdocument.addEventListener(\"mousemove\", mousemove);\r\n\t\t\tfunction mousemove(e) {\r\n\t\t\t\tlet move = e.screenX - start;\r\n\t\t\t\tif (0 < move && move <= width) {\r\n\t\t\t\t\t_this.refs.slideBlock.style.left = move + \"px\";  // 滑块移动\r\n\t\t\t\t\t_this.refs.slideRate.style.width = move + \"px\";  // 验证块变宽\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 鼠标抬起\r\n\t\t\tdocument.addEventListener(\"mouseup\", mouseup)\r\n\t\t\tfunction mouseup(e) {\r\n\t\t\t\tconsole.log(\"mouseup\");\r\n\t\t\t\t// 接触监听事件\r\n\t\t\t\t_this.refs.slideBlock.removeEventListener(\"mousemove\", mousemove);\r\n\t\t\t\tdocument.removeEventListener(\"mousemove\", mousemove);\r\n\t\t\t\tdocument.removeEventListener(\"mouseup\", mouseup);\r\n\r\n\t\t\t\tlet end = parseInt(_this.refs.slideRate.style.width); // 验证块长度\r\n\t\t\t\tconsole.log(end, width);\r\n\t\t\t\tif (end >= width-3) {  // 验证精度\r\n\t\t\t\t\t// \"验证成功\"\r\n\t\t\t\t\t_this.refs.slideBlock.removeEventListener(\"mousedown\", slideCheck);\r\n\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\tisCheck: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}else {\r\n\t\t\t\t\t_this.refs.slideBlock.style.left = \"0px\"; // 滑块还原\r\n\t\t\t\t\t_this.refs.slideRate.style.width = \"0px\"; // 验证块还原\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"Step1\">\r\n\t\t\t\t<div className=\"s1-item phone\">\r\n\t\t\t\t\t<div className=\"prefix\">手机号</div>\r\n\t\t\t\t\t<div className=\"s1-item-body\">\r\n\t\t\t\t\t\t<div className=\"s1-phone-prefix\">\r\n\t\t\t\t\t\t\t<span>中国大陆</span>\r\n\t\t\t\t\t\t\t<span> +86</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"s1-phone-input\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入手机号\"\r\n\t\t\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\t\tvalue={this.state.phone}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.phone &&\r\n\t\t\t\t\t(<p>{this.state.errors.phone}</p>)\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"s1-item\">\r\n\t\t\t\t\t<div className=\"prefix\">手机号</div>\r\n\t\t\t\t\t<div className=\"s1-item-body\">\r\n\t\t\t\t\t\t<div ref=\"slide\" className=\"slide\">\r\n\t\t\t\t\t\t\t<p>{this.state.isCheck ? \"验证通过\" : \"请按住滑块，拖动到最右边\"}</p>\r\n\t\t\t\t\t\t\t<div ref=\"slideRate\" style={{width: 0}} className=\"slide-rate\"></div>\r\n\t\t\t\t\t\t\t<div ref=\"slideBlock\" style={{left: 0}} className=\"slide-block\">>></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isCheck ?\r\n\t\t\t\t\t<div className=\"s1-item s1-smscode\">\r\n\t\t\t\t\t\t<div className=\"-prefix\">验证码</div>\r\n\t\t\t\t\t\t<div className=\"s1-item-body\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"输入手机验证码\"\r\n\t\t\t\t\t\t\t\tname=\"smsCode\"\r\n\t\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\t\tvalue={this.state.smsCode}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<button onClick={this.sendSMS}>发送</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t{/*<Link to=\"/register/step2\">下一步</Link>*/}\r\n\t\t\t\t<div><span onClick={this.nextStep.bind(this)}>下一步</span></div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nfunction mapActionToProps(dispatch) {\r\n\treturn {\r\n\t\tchangeStep(step) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"STEP_CHANGE\",\r\n\t\t\t\tstep\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetPhone(phone) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"GET_PHONE\",\r\n\t\t\t\tphone\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapActionToProps)(Step1);\r\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\n\r\nimport config from '../../../utils/config.js'\r\n\r\nclass Step2 extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: props.register.phone,\r\n\t\t\tpassword: '',\r\n\t\t\tpassword2: '',\r\n\t\t\tnickname: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.debounce = this.debounce();\r\n\t\tthis.validator = this.validator.bind(this);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.nicknameRepeat = this.nicknameRepeat.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.props.changeStep(2);\r\n\t}\r\n\tonChange(e) {\r\n\t\t// 同步值\r\n\t\tvar key = e.target.name;\r\n\t\tthis.setState({\r\n\t\t\t[key]: e.target.value\r\n\t\t});\r\n\t\t// 防抖 验证格式\r\n\t\tthis.debounce(() => {\r\n\t\t\tconsole.log(\"防抖验证\");\r\n\t\t\tvar valid = this.validator(key);\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t[key]: valid.isLegal ? '' : valid.msg\r\n\t\t\t\t}\r\n\t\t\t}, () => {\r\n\t\t\t\t// 格式验证成功, nickname 是否已存在\r\n\t\t\t\tkey === 'nickname' && valid.isLegal && this.nicknameRepeat();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tnicknameRepeat(callback) {\r\n\t// 验证名字重复\r\n\t\taxios.post(config.HOST + '/api/users/nickname', {nickname: this.state.nickname})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\tcallback && callback(false);  // 提交时用,只要结果，防抖验证不用\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tnickname: res.data.msg\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tnickname: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcallback && callback(true);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tcallback && callback(false);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tnickname: err.response.data\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\tvalidator(target) {\r\n\t\tvar result = {\r\n\t\t\tkey: target,\r\n\t\t\tisLegal: true,\r\n\t\t\tmsg: ''\r\n\t\t};\r\n\t\tswitch (target) {\r\n\t\t\tcase \"nickname\":\r\n\t\t\t\t// 不能以数字开头，长度 2-10 位\r\n\t\t\t\tif (!/^[^0-9][\\w\\W]{1,9}$/.test(this.state.nickname)){\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"不能以数字开头，长度 2-10 位\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"password2\":\r\n\t\t\t\tif (this.state.password2 !== this.state.password) {\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"两次密码不一致\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tcase \"password\":\r\n\t\t\t\t// 0-9 A-z _ . + - # @ ! ^ & $ (6,18)\r\n\t\t\t\tif (!/^[\\w\\d\\.\\+\\-#@!\\^\\&\\$]{6,18}$/.test(this.state.password)) {\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"密码长度6-18位，可包含0-9 A-z _ . + - # @ ! ^ & $\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresult.isLegal = false;\r\n\t\t\t\tresult.msg = '未定义类型';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t// 防抖函数：停止输入后延迟一秒执行传入函数\r\n\tdebounce() {\r\n\t\tvar timer = null;\r\n\t\treturn function (handler) {\r\n\t\t\twindow.clearTimeout(timer);\r\n\t\t\ttimer = window.setTimeout(function () {\r\n\t\t\t\thandler && handler();\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\tonSubmit() {\r\n\t\t// 提交，验证所有，发送注册请求\r\n\t\tif (this.validator(\"nickname\").isLegal && this.validator(\"password\").isLegal && this.validator(\"password2\").isLegal) {\r\n\t\t\t// 验证名字\r\n\t\t\tthis.nicknameRepeat((result) => {\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\t// 验证成功，进行注册\r\n\t\t\t\tconst newUser = {\r\n\t\t\t\t\tnickname: this.state.nickname,\r\n\t\t\t\t\tpassword: this.state.password,\r\n\t\t\t\t\tphone: this.props.register.phone\r\n\t\t\t\t}\r\n\t\t\t\taxios.post(config.HOST + \"/api/users/register\", newUser)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\t\t\t// 验证通过\r\n\t\t\t\t\t\t\tthis.props.getUser(newUser); // dispatch NEW_USER\r\n\t\t\t\t\t\t\tthis.props.history.push('/register/step3');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\t\tsubmit: err.response.data\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"step2\">\r\n\t\t\t\t<h2>Step2</h2>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">登录名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t{this.state.phone}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">请设置登录密码</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录时验证，保护账号信息</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录密码</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"设置你的登录密码\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.password\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.password &&\r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.password}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">密码确认</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"再次输入你的密码\"\r\n\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password2}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.password2\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.password2 &&\r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.password2}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">设置会员名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"会员名一旦设置成功，无法修改\"\r\n\t\t\t\t\t\t\tname=\"nickname\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.nickname}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.nickname\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.nickname &&\r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.nickname}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-submit-wrap\">\r\n\t\t\t\t\t<button onClick={this.onSubmit.bind(this)} className=\"s2-submit\">提交</button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.errors.submit &&\r\n\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.submit}</div>)\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nfunction mapActionToProps(dispatch) {\r\n\treturn {\r\n\t\tchangeStep(step) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"STEP_CHANGE\",\r\n\t\t\t\tstep\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetUser(user) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"NEW_USER\",\r\n\t\t\t\tuser\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapActionToProps)(Step2);\r\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {Link} from 'react-router-dom'\n\nclass Step3 extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.props.changeStep(3);\n\t}\n\trender() {\n\t\tconst users = this.props.register\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<h1>Step3</h1>\n\t\t\t\t<h2>{users.nickname},{users.phone}注册成功</h2>\n\t\t\t\t<Link to=\"/login\">现在登录</Link>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (state) => ({register: state.register})\n\nfunction mapActionToProps(dispatch) {\n\treturn {\n\t\tchangeStep(step) {\n\t\t\tdispatch({\n\t\t\t\ttype: \"STEP_CHANGE\",\n\t\t\t\tstep\n\t\t\t});\n\t\t}\n\t}\n}\nexport default connect(mapStateToProps, mapActionToProps)(Step3);\n","import './index.scss'\r\nimport Step1 from './subpage/step1'\t// 注册第一步\r\nimport Step2 from './subpage/step2'\t// 注册第二步\r\nimport Step3 from './subpage/step3'\t// 注册成功\r\n\r\nimport React, {Component} from 'react'\r\nimport {Route, Link} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nclass Register extends Component {\r\n\tcomponentWillMount() {\r\n\t\tthis.props.history.push('/register/step1');\r\n\t}\r\n\tshowStep() {\r\n\t\tlet registerInfo = this.props.register; // redux 中 register\r\n\t\tlet step = '';\r\n\t\tif (registerInfo.step === 3) {\r\n\t\t\tstep = (<h3>1.设置用户名</h3>)\r\n\t\t}else if (registerInfo.step === 2) {\r\n\t\t\tstep = (<h3>2.填写账号信息</h3>)\r\n\t\t}else if (registerInfo.step === 1) {\r\n\t\t\tstep = (<h3>1.设置用户名</h3>)\r\n\t\t}else {\r\n\t\t\tstep = (<h3>look like some error...</h3>)\r\n\t\t}\r\n\t\treturn step;\r\n\t}\r\n\trender() {\r\n\t\tlet registerInfo = this.props.register; // redux 中 register\r\n\t\treturn (\r\n\t\t\t<div className=\"register-wrap\">\r\n\t\t\t\t<Link to=\"/login\">登录</Link><br/>\r\n\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.showStep.call(this)\r\n\t\t\t\t}\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<Route exact path=\"/register/step1\" component={Step1} />\r\n\t\t\t\t\t<Route exact path=\"/register/step2\" component={Step2} />\r\n\t\t\t\t\t<Route exact path=\"/register/step3\" component={Step3} />\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, null)(Register);","import React from 'react'\nimport axios from 'axios'\nimport {connect} from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport config from '../../../utils/config.js'\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\nimport {setLoginWay} from '../../../flux/actions/authActions'\nimport {isPhone, isEmpty, isLength} from '../../../utils/validator'\n\nclass Account extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taccount: '',\n\t\t\tpassword: '',\n\t\t\terrors: {}\n\t\t}\n\t\tthis.inputChange = this.inputChange.bind(this);\n\t}\n\tcomponentWillMount() {\n\t\t// store 中登录方式修改为 'account'\n\t\tif (this.props.auth.loginWay !== 'account') {\n\t\t\tthis.props.setLoginWay('account');\n\t\t}\n\t}\n\tinputChange(e) {\n\t\tthis.setState({\n\t\t\t[e.target.name]: e.target.value\n\t\t});\n\t}\n\tformSubmit() {\n\t\tlet errors = {};\n\t\tif (isEmpty(this.state.account)) {\n\t\t\terrors.account = '账号不能为空';\n\t\t}else if (!isLength(this.state.password, {min: 6, max: 18})) {\n\t\t\terrors.password = '密码长度 6-18 位';\n\t\t}\n\t\tif (!isEmpty(errors)) {\n\t\t\treturn this.setState({\n\t\t\t\terrors: {\n\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t...errors\n\t\t\t\t}\n\t\t\t})\n\t\t}\n    let info = {account: this.state.account, password: this.state.password};\n\t\taxios.post(config.HOST + '/api/users/login', info)\n\t\t\t.then(res => {\n        console.log(res)\n\t\t\t\tif (!res.data.success) {\n\t\t\t\t\treturn this.setState({\n\t\t\t\t\t\terrors: {\n\t\t\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t\t\tsubmit:  res.data.message\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// 验证通过\n\t\t\t\tsetAuthToken(res.data.payload.token); // 请求头附加 token\n\t\t\t\tsetCurrentUser(res.data.payload);\n\t\t\t\tthis.props.history.push(this.props.auth.location || '/')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({\n\t\t\t\t\terrors: {\n\t\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"l-input-wrap\">\n\t\t\t\t<div className=\"log-input1\">\n\t\t\t\t\t<label htmlFor=\"account\"></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={this.inputChange}\n\t\t\t\t\t\tvalue={this.state.account}\n\t\t\t\t\t\tplaceholder=\"昵称 / 手机号码\"\n\t\t\t\t\t\tname=\"account\"\n\t\t\t\t\t\tid=\"account\"\n\t\t\t\t\t\ttype=\"text\"/>\n\t\t\t\t</div>\n        {\n          !this.state.errors.account ? null :\n          <div>{this.state.errors.account}</div>\n        }\n\t\t\t\t<div className=\"log-input2\">\n\t\t\t\t\t<label htmlFor=\"password\"></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"密码\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\tonChange={this.inputChange}\n\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n        {\n          !this.state.errors.password ? null :\n          <div>{this.state.errors.password}</div>\n        }\n\t\t\t\t<input type=\"submit\" onClick={this.formSubmit.bind(this)} value=\"登录\"/>\n        {\n          !this.state.errors.submit ? null :\n          <div>{this.state.errors.submit}</div>\n        }\n\t\t\t</div>\n\t\t)\n\t}\n}\nAccount.protTypes = {\n\tauth: PropTypes.object.isRequired,\n\tsetLoginWay: PropTypes.func.isRequired\n}\nconst mapStateToProps = state => {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\nexport default connect(mapStateToProps, {setLoginWay})(Account);\n","import React from 'react'\nimport axios from 'axios'\nimport {connect} from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport config from '../../../utils/config.js'\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\nimport {setLoginWay} from '../../../flux/actions/authActions'\nimport {isPhone, isEmpty} from '../../../utils/validator'\n\n/**\n * 发送手机号到 sms接口，\n * 手机号合法 md5存储验证码并返回，\n * 登录发送手机号验证码，服务端入数据库匹配成功返回 token\n */\nclass PhoneLogin extends React.Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tphone: '',\n\t\t\tsms: '',\n\t\t\terrors: {}\n\t\t}\n\t\tthis.inputChange = this.inputChange.bind(this);\n\t}\n\tcomponentWillMount() {\n\t\t// store 中登录方式修改为 'phone'\n\t\tif (this.props.auth.loginWay !== 'phone') {\n\t\t\tthis.props.setLoginWay('phone');\n\t\t}\n\t}\n\tinputChange(e) {\n\t\tthis.setState({\n\t\t\t[e.target.name]: e.target.value\n\t\t});\n\t}\n\tsendSMS() {\n\t\tif (!isPhone(this.state.phone)) {\n\t\t\treturn this.setState({\n\t\t\t\terrors: {\n\t\t\t\t\t...this.state.errors,\n\t\t\t\t\tphone: '手机号码错误'\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t// 格式正确\n\t\tif (this.state.errors.phone) {\n\t\t\tthis.setState({\n\t\t\t\terrors: {\n\t\t\t\t\t...this.state.errors,\n\t\t\t\t\tphone: '',\n\t\t\t\t\tsms: ''\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\taxios.post(config.HOST + \"/api/operator/testsms\", {phone: this.state.phone})\n\t\t\t.then(({data}) => {\n\t\t\t\tconsole.log(data.smsCode);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\tsubmit() {\n\t\tlet errors = false;\n\t\tif (!isPhone(this.state.phone)) {\n\t\t\terrors = {phone: '手机号码错误'}\n\t\t}else if (isEmpty(this.state.sms)) {\n\t\t\terrors = {sms: '验证码为空'}\n\t\t}\n\t\tif (errors) {\n\t\t\treturn this.setState({\n\t\t\t\terrors: {\n\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t...errors\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t// 格式验证成功\n\t\tconst user = {phone: this.state.phone, sms_code: this.state.sms}\n\t\taxios.post(config.HOST + '/api/users/phonelogin', user)\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (!res.data.success) {\n\t\t\t\t\treturn this.setState({\n\t\t\t\t\t\terrors: {\n\t\t\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t\t\tsubmit: res.data.message\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// 验证通过\n\t\t\t\tsetAuthToken(res.data.payload.token) // 请求头附加 token\n\t\t\t\tsetCurrentUser(res.data.payload)\n        this.props.history.push(this.props.auth.location || '/')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({\n\t\t\t\t\terrors: {\n\t\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"l-input-wrap\">\n\t\t\t\t<div className=\"log-input1\">\n\t\t\t\t\t<label htmlFor=\"phone\"></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"输入手机号码\"\n\t\t\t\t\t\tonChange={this.inputChange}\n\t\t\t\t\t\tvalue={this.state.phone}\n\t\t\t\t\t\tname=\"phone\"\n\t\t\t\t\t\tid=\"phone\"\n\t\t\t\t\t\ttype=\"text\"/>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tthis.state.errors.phone ?\n\t\t\t\t\t<span>{this.state.errors.phone}</span>:\n\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t<div className=\"log-input2\">\n\t\t\t\t\t<label htmlFor=\"sms\"></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"填写验证码\"\n\t\t\t\t\t\tonChange={this.inputChange}\n\t\t\t\t\t\tvalue={this.state.sms}\n\t\t\t\t\t\tname=\"sms\"\n\t\t\t\t\t\tid=\"sms\"\n\t\t\t\t\t\ttype=\"text\"/>\n\t\t\t\t\t<button className=\"btn\" onClick={this.sendSMS.bind(this)}>发送验证码</button>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tthis.state.errors.sms ?\n\t\t\t\t\t<span>{this.state.errors.sms}</span>:\n\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t<input type=\"submit\" onClick={this.submit.bind(this)} value=\"登录\"/>\n\t\t\t\t{\n\t\t\t\t\tthis.state.errors.submit ?\n\t\t\t\t\t<span>{this.state.errors.submit}</span>:\n\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nPhoneLogin.protTypes = {\n\tauth: PropTypes.object.isRequired,\n\tsetLoginWay: PropTypes.func.isRequired\n}\nconst mapStateToProps = state => {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\nexport default connect(mapStateToProps, {setLoginWay})(PhoneLogin);\n","import React, {Component} from 'react'\nimport {Link, Route} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport cnames from 'classnames'\n\nimport './login.scss'\nimport Account from './subpage/Account'\nimport PhoneLogin from './subpage/PhoneLogin'\n\nclass Login extends Component {\n  componentWillMount() {\n    // 已登录，不能访问登录页面\n    if (this.props.auth.isLogin) {\n      this.props.history.goBack()\n    }\n  }\n\trender() {\n\t\t/**\n\t\t * v4 包含路由 和 精准路由\n\t\t */\n\t\t// 登录样式\n\t\tlet loginWay = this.props.auth.loginWay;\n\t\tconst classPhone = loginWay === 'phone' ? 'f1' : 'f2';\n\t\tconst classAccount = loginWay === 'account' ? 'f1' : 'f2';\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"login-wrap\">\n\t\t\t\t\t<div className=\"login-title\"></div>\n\t\t\t\t\t<div className=\"login-form\">\n\t\t\t\t\t\t<div className=\"form\">\n\t\t\t\t\t\t\t<div className=\"form-t\">\n\t\t\t\t\t\t\t\t<Link to=\"/login\">\n\t\t\t\t\t\t\t\t\t<div className={'t-l ' + classPhone}>手机登录</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<Link to=\"/login/account\">\n\t\t\t\t\t\t\t\t\t<div className={'t-r ' + classAccount}>账户登录</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<main>\n\t\t\t\t\t\t\t\t<Route exact path=\"/login/account\" component={Account} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/login\" component={PhoneLogin} />\n\t\t\t\t\t\t\t</main>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\n\nexport default connect(mapStateToProps, null)(Login);\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport config from '../../utils/config'\n\nimport './search.scss'\n\nimport { setSearchKeyAction } from '../../flux/actions/productActions'\n\nvar beforeKey = ''\nvar searchKey = ''\nvar historyPush;\n\nfunction searchInputChange(e) {\n  searchKey = e.target.value\n}\n\nfunction searchProduct() {\n  if (searchKey === beforeKey) return;\n  // url 第一个参数没有改变页面不会重新渲染\n  // historyPush('/404')\n  // setTimeout(function() {\n    historyPush(`/search_product?q=${searchKey}&limit1=0&limit2=50`)\n  // }, 100)\n}\n\nconst Search = (props) => {\n  searchKey = beforeKey = props.searchKey || ''\n  historyPush = props.historyPush || function(){}\n  return (\n    <div className=\"sear\">\n      <div className=\"sear-logo\"><Link to=\"/\"><img src={`${config.HOST}/image/ui/search_home_logo.png`} alt=\"\"/></Link></div>\n      <div className=\"sear-input-wrap\">\n        <div>\n          <div>\n            <input defaultValue={searchKey} onChange={searchInputChange}  className=\"sear-input\" type=\"text\"/>\n          </div>\n          <div>\n            <button onClick={searchProduct} className=\"com-search-btn\">搜索</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nSearch.propType = {\n  searchKey: PropTypes.string,\n  historyPush: PropTypes.func.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    searchKey: state.product.searchKey\n  }\n}\n\nexport default connect(mapStateToProps, {setSearchKeyAction})(Search)\n","import React from 'react'\n\nconst Wait = () => {\n  return (\n    <div>\n      <h2>加载中。。。。</h2>\n    </div>\n  )\n}\nexport default Wait\n","import React from 'react'\n\nconst ErrorPage = (props) => {\n  return (\n    <div>\n      <h2>错误：{props.message}</h2>\n    </div>\n  )\n}\nexport default ErrorPage\n","import React from 'react'\n\nconst Empty = () => {\n  return (\n    <div>\n      <h2>没有搜索到数据。。。。</h2>\n    </div>\n  )\n}\nexport default Empty\n","import React from 'react'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\nimport { Link } from 'react-router-dom'\n\nfunction splitName(name) {\n  if (name.length <= 50) return name;\n  return name.substring(0,50) + '...'\n}\n\nconst GoodsList = (props) => {\n  const HOST = config.HOST\n  return (\n    <div className=\"goodlist-wrap\">\n      {\n        props.goods.map((product, index) => {\n          return (\n            <div className={classnames(\"good-wrap\", {\n              rowlast: index>0 && index % 4 === 0\n            })} key={index}>\n              <Link to={`/product_detail?goodId=${product._id}`}>\n                <div className=\"goodlogo-box\"><img src={`${HOST}/image/goods/logo/${product.logo}`} alt=\"\"/></div>\n              </Link>\n              <div className=\"good-price\"><span className=\"p_f1\">￥</span><span className=\"p_f2\">{product.nowPrice}</span></div>\n              <Link to={`/product_detail?goodId=${product._id}`}>\n                <div className=\"good-name\"><span>{splitName(product.goodName)}</span></div>\n              </Link>\n              <div className=\"good-store\"><span className=\"s_f1\">店铺：</span><span className=\"s_f2\">{product.storeName}</span></div>\n              <div className=\"good-number-box\">\n                <div className=\"good-number\">\n                  <span className=\"n_f1\">成交量：</span><span className=\"n_f2\">{product.number}笔</span>\n                </div>\n                <div className=\"good-number-chat\">\n                  聊\n                </div>\n              </div>\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}\nexport default GoodsList\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport PropTypes from 'prop-types'\r\nimport config from '../../utils/config'\r\n\r\nimport './goods.scss'\r\nimport Wait from './subpage/Wait'\r\nimport ErrorPage from './subpage/ErrorPage'\r\nimport Empty from './subpage/Empty'\r\nimport GoodsList from './subpage/GoodsList'\r\n\r\nconst HOST = config.HOST\r\n\r\n// props.goods 为undefined 或空数组，显示默认空结果页面\r\nclass Goods extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      goods: [],\r\n      status: 'wait',\r\n      error: ''\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    const searchUrl = this.props.searchUrl\r\n    if (!searchUrl) {\r\n      // 参数错误\r\n      return this.setState({\r\n        status: 'empty'\r\n      })\r\n    }\r\n    axios.get(HOST + searchUrl)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          // 请求成功\r\n          this.setState({\r\n            status: 'end',\r\n            goods: res.data.payload\r\n          }, () => {\r\n            // 给父组件回调 goods\r\n            this.props.getGoods && this.props.getGoods(res.data.payload)\r\n          })\r\n        } else {\r\n          // 请求失败\r\n          this.setState({\r\n            status: 'error',\r\n            error: res.message\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        // 请求错误\r\n        this.setState({\r\n          status: 'error',\r\n          error: err.message\r\n        })\r\n      })\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        {\r\n          this.state.status === 'wait' ? <Wait /> :\r\n          this.state.status === 'error' ? <ErrorPage message={this.state.error} /> :\r\n          this.state.goods.length === 0 ? <Empty /> :\r\n          <GoodsList goods={this.state.goods} />\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nGoods.propTypes = {\r\n  searchUrl: PropTypes.string.isRequired,\r\n  getGoods: PropTypes.func\r\n}\r\n\r\nexport default Goods\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction subStoreName(name) {\r\n  if (typeof name !== 'string' || name.length < 6) return name;\r\n  return name.substring(0,5) + '...';\r\n}\r\nclass SubStore extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      stores: [],\r\n      detailTypes: []\r\n    }\r\n  }\r\n\r\n  // props.goods 参数更新, 根据 goods 请求 store 的信息\r\n  componentWillReceiveProps(nextProps) {\r\n    const goods = nextProps.goods\r\n    if (!Array.isArray(goods) || goods.length < 1) return;\r\n    // 根据detailType 请求 smaillType\r\n    axios.get(`${HOST}/api/goods/type?type=detail&detailId=${goods[0].detailId}`)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.setState({\r\n            detailTypes: res.data.payload\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (typeof(window) === 'object')\r\n          console.error(err)\r\n      })\r\n    // 获取 goods 中的 storeId\r\n    let storeIds = [];\r\n    storeIds.push(goods[0].storeId)\r\n    for (var i = 1, len = goods.length; i < len; i ++) {\r\n      var storeId = goods[i].storeId\r\n      var repeat = false\r\n        // 去重\r\n      for (var j = 0, len2 = storeIds.length; j < len2; j++) {\r\n        if (storeId === storeIds[j]) {\r\n          repeat = true\r\n          break\r\n        }\r\n      }\r\n      if (!repeat) storeIds.push(storeId)\r\n    }\r\n    // 请求 stores\r\n    if (storeIds.length < 1) return;\r\n    const jsonStoreIds = JSON.stringify(storeIds)\r\n    axios.get(`${HOST}/api/goods/search_store?storeIds=${jsonStoreIds}`)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.setState({\r\n            stores: res.data.payload\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (typeof(window) === 'object')\r\n          console.error(err)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"substore\">\r\n        {\r\n          /*展示首页 > 小分类 > 详细分类s */\r\n          this.state.detailTypes.length > 0 && (\r\n            <div className=\"crum\">\r\n              <div className=\"crum-1\"><Link to=\"/\"><span>首页</span></Link></div>\r\n              <div className=\"crum-2\">\r\n                <Link to={`/search_product?smaillId=${this.state.detailTypes[0].smaillId}`}>\r\n                  <span>{this.state.detailTypes[0].smaillName}</span>\r\n                </Link>\r\n              </div>\r\n              <div  className=\"crum-3\">\r\n                <Link to={`/search_product?detailId=${this.props.goods[0].detailId}`}>\r\n                  <span>\r\n                  {\r\n                    this.state.detailTypes.find((detail, index) => {\r\n                      return detail.detailId === this.props.goods[0].detailId\r\n                    }).detailName\r\n                  }\r\n                  </span>\r\n                </Link>\r\n                <ul className=\"crum-details\">\r\n                {\r\n                  this.state.detailTypes.map((detailType, index) => (\r\n                    <li className=\"\" key={index}>\r\n                      <Link\r\n                        className={classnames({'crum-selected': detailType.detailId === this.props.goods[0].detailId})}\r\n                        to={`/search_product?detailId=${detailType.detailId}`}\r\n                      >{detailType.detailName}</Link>\r\n                    </li>\r\n                  ))\r\n                }\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n        <div className=\"substore-logo-box\">\r\n          <div className=\"s-logo-title\">店铺</div>\r\n          <div className=\"s-logo-wrap\">\r\n          {\r\n            /*展示店铺图片*/\r\n            this.state.stores.map((store, index) => {\r\n              if (index > 8) return null\r\n              return (\r\n                <div className=\"s-logo-item\" key={index}>\r\n                  <div className=\"s-store-logo\"><img src={`${HOST}/image/store/logo/${store.logo}`} alt=\"\"/></div>\r\n                  <div className=\"s-store-name\"><span>{subStoreName(store.storeName)}</span></div>\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nSubStore.propTypes = {\r\n  goods: PropTypes.array.isRequired\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    goods: state.product.searchGoods\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(SubStore)\r\n","import React, { Component } from 'react'\nimport axios from 'axios'\nimport queryString from 'query-string'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport config from '../../utils/config'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport Search from '../../components/Search'\nimport Goods from '../../components/Goods'\nimport SubStore from './subpage/SubStore'\n\nimport { setSearchGoodsAction, setSearchKeyAction } from '../../flux/actions/productActions'\n\nclass SearchProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchKey: props.match.params.q, // 游戏本\n      searchUrl: props.history.location.search, // /?limit1=0&limit2=50\n    }\n    // 刷新后 store.searchKey 为空\n    if (props.searchKey === '') {\n      props.setSearchKeyAction(this.state.searchKey)\n    }\n    this.getGoods = this.getGoods.bind(this)\n    this.getSearchProductUrl = this.getSearchProductUrl.bind(this)\n  }\n\n  componentWillMount() {\n    this.getSearchProductUrl()\n  }\n\n  getGoods(goods) {\n    this.props.setSearchGoodsAction(goods)\n  }\n\n  getSearchProductUrl() {\n    var search = queryString.parse(this.props.location.search);\n    var url = '/api/goods/search_product?'\n    var isvalid = false\n    if (search.q) {\n      url += `q=${search.q}&`\n      isvalid = true\n    }\n    if (/^\\d+$/.test(search.detailId)) {\n      url += `detailId=${search.detailId}&`\n      isvalid = true\n    }else if (/^\\d+$/.test(search.smaillId)) {\n      url += `smaillId=${search.smaillId}&`\n      isvalid = true\n    }else if (/^\\d+$/.test(search.bigId)) {\n      url += `bigId=${search.bigId}&`\n      isvalid = true\n    }\n    if (search.storeId) {\n      url += `storeId=${search.storeId}&`\n    }\n    if (!isvalid) {\n      return '';\n    }\n    if (search.order === 'price' || search.order === 'number') {\n      url += `order=${search.order}&sort=`\n      url += search.sort === 'asc' ? 'asc&' : 'desc&'\n    }\n    url += (/^\\d+$/.test(search.limit1) ? `limit1=${search.limit1}&` : '')\n    url += (/^\\d+$/.test(search.limit2) ? `limit2=${search.limit2}` : 'limit2=10')\n    return url;\n  }\n\n  render() {\n    const goods = this.props.searchGoods\n    return (\n      <div>\n        <Header />\n        <Search historyPush={this.props.history.push}  />\n        <div className=\"search-product\">\n          <hr className=\"search-hr\" />\n          <SubStore />\n          <Goods getGoods={this.getGoods} searchUrl={this.getSearchProductUrl()} />\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    searchGoods: state.product.searchGoods,\n    searchKey: state.product.searchKey\n  }\n}\n\nexport default connect(mapStateToProps, { setSearchGoodsAction,setSearchKeyAction })(SearchProduct)\n\n","import React from 'react'\nimport { historyPush } from './index'\n\nclass GotoSearchProduct extends React.Component {\n  componentWillMount() {\n    this.props.history.push('/search_products' + this.props.location.search)\n  }\n  render() {\n    return (\n      <div>404</div>\n    )\n  }\n}\nexport default GotoSearchProduct\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withRouter, Link } from 'react-router-dom'\n\nimport './index.scss'\nimport config from '../../utils/config'\nconst HOST = config.HOST\n\nclass StoreHeader extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      searchKey: ''\n    }\n    this.onSearchInputChange = this.onSearchInputChange.bind(this)\n  }\n  onSearchInputChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    })\n  }\n  // 搜所有\n  searchAllProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}`)\n  }\n  // 搜本店\n  searchStoreProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}&storeId=${this.props.storeInfo.storeId}`)\n  }\n  render() {\n    const storeInfo = this.props.storeInfo\n    return (\n      <div className=\"store-header\">\n          <div className=\"store-cp-logo\">\n            <Link to=\"/\">\n              <img src={`${HOST}/image/ui/storetitle.png`} height=\"60px\" />\n            </Link>\n          </div>\n        <div className=\"store-info-wrap\">\n          <div className=\"store-info-logo\">\n              <img height=\"60px\" src={`${HOST}/image/store/logo/${storeInfo.logo || 'default.jpg'}`} alt=\"优选\"/>\n          </div>\n\n          <div className=\"store-info\">\n            <p className=\"store-name\">店铺：{storeInfo.storeName}</p>\n            <p className=\"store-boos\">掌柜：{storeInfo.nickname}</p>\n          </div>\n        </div>\n        <div className=\"store-search\">\n          <div className=\"store-search-input\"><input value={this.state.searchKey} onChange={this.onSearchInputChange} type=\"text\"/></div>\n          <button style={{background: `url(\"${HOST}/image/ui/TB1ZWVhJpXXXXa4XVXXs1m4TXXX-458-36.png\") top right no-repeat`}} className=\"store-search-btn-all\" onClick={this.searchAllProduct.bind(this)}>搜索</button>\n          <button className=\"store-search-btn-this\" onClick={this.searchStoreProduct.bind(this)}>搜本店</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nStoreHeader.propTypes = {\n  storeInfo: PropTypes.object.isRequired\n}\n\nexport default withRouter(StoreHeader)\n","// 将两个数转换成整数相乘\r\nexport const intMultiplication = function (a, b) {\r\n  a = a+''\r\n  b = b+''\r\n  var deci = 0  // 2个操作数的小数位数\r\n  // 判断是否小数\r\n  if (/^\\d+\\.\\d+$/.test(a)) {\r\n    deci += a.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    a = a.replace('.', '')\r\n  }\r\n  if (/^\\d+\\.\\d+$/.test(b)) {\r\n    deci += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    b = b.replace('.', '')\r\n  }\r\n  var result = (Number(a) * Number(b)) + ''\r\n  return deci > 0 ? result.substring(0, result.length - deci) + '.' + result.substring(result.length - deci) : result\r\n}\r\n\r\n// 将两个数转换成整数相加\r\nexport const intAdd = function (a, b) {\r\n  a = a + ''\r\n  b = b + ''\r\n  var deci1 = 0;\r\n  var deci2 = 0;\r\n  if (/^\\d+\\.\\d+$/.test(a)) {\r\n    deci1 = a.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    a = a.replace('.', '')\r\n  }\r\n  if (/^\\d+\\.\\d+$/.test(b)) {\r\n    deci2 += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    b = b.replace('.', '')\r\n  }\r\n  if (deci1 !== deci2) {\r\n    for (var i = 0, len = Math.abs(deci1 - deci2); i < len; i++) {\r\n    if (deci1 < deci2) {\r\n      a += '0'\r\n    }else {\r\n      b += '0'\r\n    }\r\n    }\r\n  }\r\n  var result = Number(a) + Number(b) + ''\r\n  var maxDeci = Math.max(deci1, deci2)\r\n  return maxDeci !== 0 ? result.substring(0, result.length - maxDeci) + '.' + result.substring(result.length - maxDeci) : result\r\n}\r\n\r\nexport const transPrice = function (price) {\r\n  return /^\\d+$/.test(price) ? price + '.00' :  // 没有小数\r\n  /^\\d+\\.\\d$/.test(price) ? price + '0' : price  // 一位小数\r\n}\r\n\r\nexport const formatDate = function(date, year) {\r\n  const d = new Date(date)\r\n  if (Number.isNaN(d.getDay())) {\r\n    return ''\r\n  }\r\n  var format = year ? d.getFullYear() + '-' : ''\r\n\r\n  return (format + (d.getMonth() + 1) + '-' +\r\n    d.getDate() + ' ' +\r\n    d.getHours() + ':' +\r\n    d.getMinutes() + ':' +\r\n    d.getSeconds())\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport { transPrice } from '../../../utils/tools'\r\n\r\nimport { setBuyProductsAction } from '../../../flux/actions/orderActions'\r\nimport socket from '../../../utils/socket'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Spec extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      smaillx: 0,\r\n      smailly: 0,\r\n      bigImg: false, // 是否展示大图\r\n      showMustChoice: false,\r\n      selectImg: props.smaillPicture[0].link,\r\n      nowPrice: 99999,\r\n      allAmount: 0, // 商品总库存\r\n      specChoice: [],  // 选中的属性组合\r\n      choiceProductDetail: {},  // 选中属性组合的商品详情\r\n      choiceNumber: 1,\r\n      specConfig: [] // 重新组合后的属性关系映射\r\n    }\r\n    this.specValueClick = this.specValueClick.bind(this)\r\n    this.onSmaillMouseOver = this.onSmaillMouseOver.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    // 重新组合属性关系映射\r\n    var config = this.props.specConfig\r\n    var newConfig = []\r\n    if (Array.isArray(config)) {\r\n      for (var j = 0; j < config.length; j++) {\r\n        if (newConfig[config[j].detailIndex - 1] === undefined) {\r\n           newConfig[config[j].detailIndex - 1] = []\r\n        }\r\n        newConfig[config[j].detailIndex - 1][config[j].specNameIndex-1] = config[j].specValueIndex\r\n      }\r\n      // 计算总库存\r\n      var allAmount = 0\r\n      for (var i = 0, len = this.props.goodDetail.length; i < len; i++) {\r\n        allAmount += this.props.goodDetail[i].amount\r\n      }\r\n    }\r\n    // 删除库存为 0 属性\r\n    this.setState({\r\n      nowPrice: this.props.goodInfo.nowPrice || 99999,\r\n      specConfig: newConfig,\r\n      allAmount: allAmount,\r\n      selectImg: this.props.smaillPicture[0].link,\r\n      // 商品没有属性分类\r\n      choiceProductDetail: Array.isArray(this.props.specName) && this.props.specName.length > 0 ? {} : this.props.goodDetail[0]\r\n    })\r\n  }\r\n\r\n  // 点击选择属性\r\n  specValueClick(value) {\r\n    var _this = this\r\n    return function () {\r\n      // 更新选择的属性\r\n      if (_this.state.specChoice[value.specNameIndex-1] === value.indexx) return;\r\n      var specChoice = [..._this.state.specChoice]\r\n      specChoice[value.specNameIndex-1] = value.indexx\r\n\r\n      // 更新选择的商品详情和价格\r\n      var specConfig = _this.state.specConfig\r\n      var choiceProductDetail = _this.state.choiceProductDetail\r\n      for (var i = 0, len = specConfig.length; i < len; i++) {\r\n        var isOK = true\r\n        for (var j = 0, len2 = specConfig[i].length; j < len2; j++) {\r\n          if (specChoice[j] !== specConfig[i][j]) {\r\n            isOK = false\r\n            break;\r\n          }\r\n        }\r\n        if (isOK) {\r\n          choiceProductDetail = _this.props.goodDetail.find(item => item.indexx === i+1)\r\n          break;\r\n        }\r\n      }\r\n      _this.setState({\r\n        specChoice,\r\n        choiceProductDetail\r\n      })\r\n    }\r\n  }\r\n\r\n  // 点击选择数量\r\n  choiceNumberChange(e) {\r\n    var number = e.target.value\r\n    var before = this.state.choiceNumber\r\n    var _this = this\r\n    this.setState({\r\n      choiceNumber: number\r\n    }, function () {\r\n      if (!/^[1-9]\\d{0,}$/.test(number)) {\r\n        setTimeout(function () {\r\n          _this.setState({\r\n            choiceNumber: /^[1-9]\\d{0,}$/.test(before) ? before : 1\r\n          })\r\n        }, 200)\r\n      }\r\n    })\r\n  }\r\n  // 数量减一\r\n  minusNumber() {\r\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) - 1} })\r\n  }\r\n  // 数量加一\r\n  plusNumber() {\r\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) + 1} })\r\n  }\r\n  // 鼠标移到小图片上\r\n  onSmaillMouseOver(link) {\r\n    var _this = this\r\n    return function () {\r\n      _this.setState({\r\n        selectImg: link\r\n      })\r\n    }\r\n  }\r\n  // 关闭必须选择框\r\n  closeMustChoice() {\r\n    this.setState({\r\n      showMustChoice: false\r\n    })\r\n  }\r\n  buyNow() {\r\n    // 如果商品未选择，或选择数量大于库存量\r\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\r\n      return this.setState({\r\n        showMustChoice: true\r\n      })\r\n    }\r\n    // var buyProduct = [{\r\n    //   goodId: this.props.goodId,\r\n    //   productName: this.props.goodInfo.goodName,\r\n    //   specName: this.props.specName,\r\n    //   specValue: this.props.specValue,\r\n    //   specChoice: this.state.specChoice,\r\n    //   productDetail: this.state.choiceProductDetail,\r\n    //   number: this.state.choiceNumber,\r\n    //   storeName: this.props.storeInfo.storeName,\r\n    //   nickname: this.props.storeInfo.nickname\r\n    // }]\r\n    // specName: this.props.specName,\r\n    // specValue: this.props.specValue,\r\n    // specChoice: this.state.specChoice,\r\n    var buyProduct = [{\r\n      goodId: this.props.goodId,\r\n      goodName: this.props.goodInfo.goodName,\r\n      storeName: this.props.storeInfo.storeName,\r\n      storeId: this.props.storeInfo.storeId,\r\n      nickname: this.props.storeInfo.nickname,\r\n      number: this.state.choiceNumber,\r\n      goodDetailId: this.state.choiceProductDetail._id,\r\n      amount: this.state.choiceProductDetail.amount,\r\n      price: this.state.choiceProductDetail.price,\r\n      spec: this.state.specChoice.map((v, n) => ({\r\n        specName: this.props.specName[n].specName,\r\n        specValue: this.props.specValue.find(val => val.indexx === v).specValue\r\n      }))\r\n    }]\r\n    this.props.setBuyProductsAction(buyProduct)\r\n    this.props.history.push('/order')\r\n  }\r\n\r\n  addShopCar() {\r\n    // 如果商品未选择，或选择数量大于库存量\r\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\r\n      return this.setState({\r\n        showMustChoice: true\r\n      })\r\n    }\r\n    if (socket.status !== 'open') {\r\n      return this.setState({\r\n        errors: {\r\n          ...this.state.errors,\r\n          addShopCar: '服务器忙'\r\n        }\r\n      })\r\n    }\r\n    // webSocket 发送添加购物车请求\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'add_shopcar_product',\r\n      target: 'koa',\r\n      content: {\r\n        goodDetailId: this.state.choiceProductDetail._id,\r\n        number: this.state.choiceNumber\r\n      }\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    const goodInfo = this.props.goodInfo\r\n    const smaillPicture = this.props.smaillPicture\r\n    return (\r\n      <div className=\"spec-wrap\">\r\n        {/*图片组*/}\r\n        <div className=\"spec-smail-picture-wrap\">\r\n          <div className=\"spec-smail-bigone-wrap\"><img className=\"spec-smail-bigone\" height=\"430px\" src={`${HOST}/image/goods/smaill/${this.state.selectImg}_430x430q90.jpg`} alt=\"\"/></div>\r\n          <div className=\"spec-smaill-item-wrap\">\r\n            {\r\n              this.props.smaillPicture.map((item, index) => (\r\n                <div key={index} className=\"spec-priture-item\">\r\n                  <div className={this.state.selectImg === item.link ? \"spec-img-selected\" : \"spec-item-img-box\"}\r\n                      onMouseOver={this.onSmaillMouseOver(item.link)}\r\n                  >\r\n                    <img src={`${HOST}/image/goods/smaill/${item.link}_60x60q90.jpg`} alt=\"\"/>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n        </div>\r\n        {/*spec属性信息*/}\r\n        <div className=\"spec-goodinfo\">\r\n          <h3 className=\"spec-good-name\">{goodInfo.goodName}</h3>\r\n          <div className=\"spec-good-price\" style={{background: `url(${HOST}/image/ui/price_background.png) left top`}}>\r\n            <span className=\"sgp-f1\">价格</span>\r\n            <span className=\"sgp-f2\">￥</span>\r\n            <span className=\"sgp-f3\">{transPrice(this.state.choiceProductDetail.price || this.state.nowPrice)}</span>\r\n          </div>\r\n          <div className=\"sell-count\">\r\n            <div className=\"sell-count-l\"><span className=\"sc-f1\">总销量</span><span className=\"sc-f2\">{goodInfo.number}</span></div>\r\n            <div className=\"sell-count-r\"><span className=\"sc-f1\">累计评价</span><span className=\"sc-f2\">{this.props.comments.length}</span></div>\r\n          </div>\r\n          <div className={classnames({\"show-choice\": this.state.showMustChoice})}>\r\n            <div style={{display: this.state.showMustChoice ? 'block':'none'}} className=\"show-choice-title\">\r\n              <div className=\"sct-l\">请选择您要的商品信息</div>\r\n              <div onClick={this.closeMustChoice.bind(this)} className=\"sct-r\">X</div>\r\n            </div>\r\n            {\r\n              this.props.specName && this.props.specName.map((name, index) => (\r\n                <div className=\"specName-wrap\" key={index}>\r\n                  <div className=\"spec-name\">{name.specName}</div>\r\n                  <div className=\"spec-value\">\r\n                  {\r\n                    this.props.specValue && this.props.specValue.map((value, index) => {\r\n                      return value.specNameIndex === name.indexx ?  (\r\n                        <div\r\n                          className={classnames('spec-value-item', {'value-item-selected':this.state.specChoice[name.indexx-1] === value.indexx})}\r\n                          onClick={this.specValueClick(value)}\r\n                          key={index}\r\n                        >\r\n                          <span>{value.specValue}</span>\r\n                          <i className=\"item-selected-i\" style={{\r\n                            background: `url(${HOST}/image/ui/background_selected.png) 0px 0px no-repeat`\r\n                          }}></i>\r\n                        </div>\r\n                      ) : null\r\n                    })\r\n                  }\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n            <div className=\"g-num-wrap\">\r\n              <div className=\"good-number-name\">数量</div>\r\n              <div className=\"good-number-wrap\">\r\n                <div className=\"spec-num-input-wrap\">\r\n                  <input className=\"spec-number-input\" value={this.state.choiceNumber} onChange={this.choiceNumberChange.bind(this)} type=\"text\"/>\r\n\r\n                </div>\r\n                <div className=\"good-number-plus-minus\">\r\n                  <div onClick={this.plusNumber.bind(this)} className=\"spec-number-plus\" style={{background: `url(${HOST}/image/ui/plus.png) no-repeat`, backgroundSize: '11px 11px', marginBottom: '4px', border: '1px solid #a7a6ab'}}></div>\r\n                  <div onClick={this.minusNumber.bind(this)} className=\"spec-number-minus\" style={{background: `url(${HOST}/image/ui/minus.png) no-repeat`, backgroundSize: '11px 11px', border: '1px solid #a7a6ab'}}></div>\r\n                </div>\r\n              </div>\r\n              <div className=\"good-num-unit\">件</div>\r\n              <div className=\"good-num-kucun\">库存{this.state.choiceProductDetail.amount === undefined ? this.state.allAmount : this.state.choiceProductDetail.amount}件</div>\r\n            </div>\r\n            <div\r\n              style={{\r\n                display: this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount ? 'block' : 'none') : (this.state.choiceNumber > this.state.allAmount ? 'block' : 'none'),\r\n                marginTop: '10px',\r\n                marginLeft: '70px',\r\n              }}\r\n            >\r\n              <span className=\"good-num-over\">\r\n                <span style={{\r\n                  display: 'inline-block',\r\n                  background: `url(${HOST}/image/ui/msg.png) -61px -1px no-repeat`,\r\n                  width: '23px',\r\n                  height: '22px',\r\n                  marginBottom: '-5px'\r\n                }}></span>\r\n                <span>您所填写数量商品超过库存！</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"good-buy-wrap\">\r\n            <button onClick={this.buyNow.bind(this)}\r\n              className={classnames(\"good-buy-now\", {\r\n                'buy-now-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\r\n              })} to=\"/\">立即购买</button>\r\n            <button onClick={this.addShopCar.bind(this)} className={classnames(\"add-shopcat\", {\r\n                'add-shopcat-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\r\n              })}>加入购物车</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSpec.propTypes = {\r\n  goodId: PropTypes.string.isRequired,\r\n  goodDetail: PropTypes.array.isRequired,\r\n  goodInfo: PropTypes.object.isRequired,\r\n  smaillPicture: PropTypes.array.isRequired,\r\n  specConfig: PropTypes.array,\r\n  specName: PropTypes.array,\r\n  specValue: PropTypes.array,\r\n  comments: PropTypes.array.isRequired,\r\n  setBuyProductsAction: PropTypes.func.isRequired,\r\n  storeInfo: PropTypes.object.isRequired,\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    goodDetail: state.product.productDetail.goodDetail,\r\n    goodInfo: state.product.productDetail.goodInfo,\r\n    smaillPicture: state.product.productDetail.smaillPicture,\r\n    specConfig: state.product.productDetail.specConfig,\r\n    specName: state.product.productDetail.specName,\r\n    specValue: state.product.productDetail.specValue,\r\n    comments: state.product.productDetail.comments,\r\n    goodId: state.product.productDetail.goodId,\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction })(Spec))\r\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\nconst HOST = config.HOST\n\n/**\n * 未实现懒加载\n */\nclass ProductInfo extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showDetail: true\n    }\n  }\n  showDetial(showDetail) {\n    return function() {\n      this.setState({\n        showDetail\n      })\n    }\n  }\n  render() {\n    return (\n      <div className=\"product-info-wrap\">\n        <div className=\"product-info-box\">\n          <div className=\"product-info-nav\">\n            <div className={classnames(\"pin-1\", {\n              'product-info-selected': this.state.showDetail\n            })} onClick={this.showDetial(true).bind(this)}>商品详情</div>\n            <div className={classnames(\"pin-2\", {\n              'product-info-selected': !this.state.showDetail\n            })} onClick={this.showDetial(false).bind(this)}>累计评价</div>\n          </div>\n          {\n            /*商品详情图*/\n            this.state.showDetail && this.props.infoPicture.map((item, index) => (\n              <div className=\"info-picture-item\" key={index}><img src={`${HOST}/image/goods/info/${item.link}`}/></div>\n            ))\n          }\n          {\n            /*评论*/\n            this.props.comments.map((item, index) => (\n              <div key={index}>\n                <div>{item.nickname}</div>\n                <div>{item.content}</div>\n                <div>{item.creaTime}</div>\n              </div>\n            ))\n          }\n        </div>\n      </div>\n    )\n  }\n}\nProductInfo.propTypes = {\n  infoPicture: PropTypes.array.isRequired,\n  comments: PropTypes.array.isRequired,\n}\n\nexport default ProductInfo\n","import React from 'react'\nimport queryString from 'query-string'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport { setProductDetailAction } from '../../flux/actions/productActions'\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport StoreHeader from '../../components/StoreHeader'\nimport Spec from './subpage/Spec'\nimport ProductInfo from './subpage/ProductInfo'\n\nclass ProductDetail extends React.Component {\n  componentWillMount() {\n    const info = queryString.parse(this.props.location.search)\n    // 没有 goodId 返回上一级路由\n    if (!/^\\d+/.test(info.goodId)) {this.props.history.push(this.props.auth.location || '/')}\n    this.props.setProductDetailAction(info.goodId)\n\n    this.props.setRouterLocationAction('/product_detail' + this.props.location.search)\n  }\n  componentWillUnmount() {\n    // 将 store 中的 productDetail，变成初始状态\n    this.props.setProductDetailAction(-1)\n  }\n  render() {\n    const product = this.props.productDetail\n    return (\n      <div>\n        <Header />\n        {\n          product.goodDetail.length < 1 ?\n            <div>{product.error || product.message || '商品还没有详情'}</div> :\n            <div>\n              {/*店铺头信息*/}\n              <StoreHeader storeInfo={product.goodInfo} />\n              <hr className=\"store-hr\" />\n              {/*商品信息属性*/}\n              <Spec storeInfo={product.goodInfo} />\n              {/*商品介绍信息*/}\n              <ProductInfo comments={product.comments} infoPicture={product.infoPicture} />\n            </div>\n        }\n      </div>\n    )\n  }\n}\n\n\nProductDetail.propTypes = {\n  productDetail: PropTypes.object.isRequired,\n  setProductDetailAction: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    productDetail: state.product.productDetail\n  }\n}\nexport default connect(mapStateToProps, { setProductDetailAction,setRouterLocationAction })(ProductDetail)\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport config from '../../../utils/config'\r\nimport { isEmail, isPhone } from '../../../utils/validator'\r\nconst HOST = config.HOST\r\n\r\nclass Safety extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      edit: '',  // email or phone or success\r\n      newEmail: '',\r\n      newPhone: '',\r\n      newPhone2: '',\r\n      smsCode1: '',\r\n      smsCode2: '',\r\n      smsState: 'normal', // wait or normal\r\n      errors: {}\r\n    }\r\n  }\r\n\r\n  // 切换修改手机和修改邮箱\r\n  editChange(_, edit) {\r\n    this.setState({\r\n      edit: edit\r\n    })\r\n  }\r\n\r\n  editInputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  // 发短信\r\n  sendSMS(e) {\r\n    if (this.state.smsState !== 'normal') return;\r\n    const btn = e.target\r\n    var _this = this\r\n    axios.get(`${HOST}/api/operator/testsms`)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.setState({smsState: 'wait'}, function() {\r\n            var count = 60\r\n            var interval = setInterval(function() {\r\n              count--\r\n              btn.innerText = `重发 ${count}...`\r\n              if (count == 0) {\r\n                clearInterval(interval)\r\n                _this.setState({smsState: 'normal'}, function() {\r\n                  btn.innerText = '点击发送'\r\n                })\r\n              }\r\n            }, 1000)\r\n          })\r\n        }\r\n        console.log(res)\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, [btn.name]: err.message}\r\n        })\r\n      })\r\n  }\r\n\r\n  // 修改邮箱\r\n  editEmailSubmit() {\r\n    var errors = {}\r\n    if (!isEmail(this.state.newEmail)) {\r\n      errors.newEmail = \"邮箱格式错误\"\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode1)) {\r\n      errors.smsCode1 = '验证码错误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      newEmail: this.state.newEmail,\r\n      smsCode: this.state.smsCode1,\r\n    }).then(res => {\r\n      if (res.data.success) {\r\n        return this.setState({\r\n          edit: 'success',\r\n          newEmail: '',\r\n          smsCode1: '',\r\n          errors: {}\r\n        })\r\n      }\r\n      this.setState({\r\n        errors: {...this.state.errors, emailSubmit: res.data.message}\r\n      })\r\n    }).catch(err => {\r\n      this.setState({\r\n        errors: {...this.state.errors, phoneSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  // 修改手机\r\n  editPhoneSubmit() {\r\n    var errors = {}\r\n    if (!isPhone(this.state.newPhone)) {\r\n      errors.newPhone = '手机格式错误'\r\n    }\r\n    if (this.state.newPhone !== this.state.newPhone2) {\r\n      errors.newPhone2 = '两次输入不一致'\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode2)) {\r\n      errors.smsCode2 = '验证码错误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      newPhone: this.state.newPhone,\r\n      smsCode: this.state.smsCode2\r\n    }).then(res => {\r\n      if (res.data.success) {\r\n        return this.setState({\r\n          edit: 'success',\r\n          newPhone: '',\r\n          newPhone2: '',\r\n          smsCode2: '',\r\n          errors: {}\r\n        })\r\n      }\r\n      this.setState({\r\n        errors: {...this.state.errors, phoneSubmit: res.data.message}\r\n      })\r\n    }).catch(err => {\r\n      console.log(err)\r\n      this.setState({\r\n        errors: {...this.state.errors, phoneSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"user-safe-wrap\">\r\n        <div className=\"uis-title\">你的基础信息</div>\r\n        <div>\r\n          <div className=\"uis-item\">\r\n            <span>会员名：</span>\r\n            <span>{this.props.user.nickname}</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>登录邮箱：</span>\r\n            <span>{this.props.user.email || '空'}</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"email\")}>修改邮箱</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>绑定手机：</span>\r\n            <span>{this.props.user.phone}</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"phone\")}>修改手机</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"uis-edit-wrap\">\r\n          {\r\n            this.state.edit === 'email' ? (\r\n              <div>\r\n                <div className=\"uis-title\">修改您的邮箱</div>\r\n                <div className=\"uis-e-content uis-e-email\">\r\n                {\r\n                  /*this.props.user.email && <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"old-email\">*旧的邮箱：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"oldEmail\" value={this.state.oldEmail} className=\"uis-modify-text\" id=\"old-email\" type=\"text\"/>\r\n                  </div>*/\r\n                }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-email\">*新的邮箱：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newEmail\" value={this.state.newEmail}  className=\"uis-modify-text\" id=\"new-email\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newEmail && <div className=\"form-err\">{this.state.errors.newEmail}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code1\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input onChange={this.editInputChange.bind(this)} name=\"smsCode1\" value={this.state.smsCode1}  id=\"sms-code1\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode1\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode1 && <div className=\"form-err\">{this.state.errors.smsCode1}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editEmailSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.emailSubmit && <div className=\"form-err\">{this.state.errors.emailSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ) : this.state.edit === 'phone' ? (\r\n              <div>\r\n                <div className=\"uis-title\">修改您的手机</div>\r\n                <div className=\"uis-e-content uis-e-phone\">\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-phone\">*新的手机号码：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone\" value={this.state.newPhone} className=\"uis-modify-text\" id=\"new-phone\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPhone && <div className=\"form-err\">{this.state.errors.newPhone}</div>\r\n                  }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-phone2\">*请再次输入以确认：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone2\" value={this.state.newPhone2} className=\"uis-modify-text\" id=\"new-phone2\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPhone2 && <div className=\"form-err\">{this.state.errors.newPhone2}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code2\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input id=\"sms-code2\" onChange={this.editInputChange.bind(this)} value={this.state.smsCode2} name=\"smsCode2\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode2\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode2 && <div className=\"form-err\">{this.state.errors.smsCode2}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editPhoneSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.phoneSubmit && <div className=\"form-err\">{this.state.errors.phoneSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ) : this.state.edit === 'success' ? (\r\n              <h3>修改成功</h3>\r\n            ) : null\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSafety.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n   user: state.auth.user || {}\r\n })\r\n\r\nexport default connect(mapStateToProps)(Safety)\r\n","import React from 'react'\r\n\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\n\r\nclass MyInfo extends React.Component {\r\n\r\n  componentDidMount() {\r\n    document.title = '优选 - 个人资料'\r\n  }\r\n\r\n  formSubmit(e) {\r\n    e.preventDefailt();\r\n\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>基本资料</div>\r\n        <form name=\"baseInfoForm\" method=\"post\" onSubmit={this.formSubmit.bind(this)}>\r\n          <div>亲爱的xxx，填写真实的资料，有助于好友找到你哦。</div>\r\n          <div>\r\n            <div>当前头像：</div>\r\n            <div><img src={`${HOST}/image/member/logo/default.jpg`} alt=\"当前头像\"/></div>\r\n          </div>\r\n          {/*\r\n          <div>\r\n            <div>昵称：</div>\r\n            <div><input type=\"text\"/></div>\r\n          </div>*/}\r\n          <div>\r\n            <div>真实姓名：</div>\r\n            <input type=\"text\"/>\r\n          </div>\r\n          <div>\r\n            <div>性别</div>\r\n            <div>\r\n              <label>\r\n                <input type=\"radio\"/>\r\n                男\r\n              </label>\r\n              <label>\r\n                <input type=\"radio\"/>\r\n                女\r\n              </label>\r\n              <label>\r\n                <input type=\"radio\"/>\r\n                保密\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div>生日</div>\r\n            <div>\r\n              <select defaultValue=\"0\" name=\"birth_year\" id=\"birth_year\">\r\n                <option value=\"0\">年</option>\r\n                <option defaultValue=\"1940\">1940</option>\r\n              </select>\r\n              <select defaultValue=\"0\" name=\"birth_year\" id=\"birth_year\">\r\n                <option value=\"0\">月</option>\r\n                <option defaultValue=\"2\">2</option>\r\n              </select>\r\n              <select defaultValue=\"0\" name=\"birth_year\" id=\"birth_year\">\r\n                <option value=\"0\">日</option>\r\n                <option defaultValue=\"1\">1</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default MyInfo\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport {\r\n  isEmpty,\r\n  isPhone,\r\n  isLength,\r\n  isEmail\r\n} from '../../../utils/validator'\r\nimport { setRouterLocationAction } from '../../../flux/actions/authActions'\r\n\r\nconst HOST = config.HOST\r\n\r\nvar initState = {\r\n  editState: -1, // >-1编辑 || -1添加\r\n  detailAddress: '',\r\n  postcode: '',\r\n  receiveName: '',\r\n  receivePhone: '',\r\n  isDefault: false,\r\n  errors: {}\r\n}\r\n\r\nclass Address extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = initState\r\n  }\r\n  componentWillMount() {\r\n    this.props.setRouterLocationAction('/member/address')\r\n    // if (this.props.memberId === -1) return;\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({\r\n        type: 'get_address'\r\n      }))\r\n    }\r\n  }\r\n\r\n  setDefailtChange(e) {\r\n    this.setState({\r\n      isDefault: e.target.checked\r\n    })\r\n  }\r\n\r\n  formInputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  editStateChange(_, item) {\r\n    this.setState({\r\n      editState: item._id,\r\n      isDefault: !!item.isDefault,\r\n      detailAddress: item.address,\r\n      postcode: item.postcode,\r\n      receivePhone: item.phone,\r\n      receiveName: item.receiveName,\r\n    })\r\n  }\r\n  deleteAddress(_, item) {\r\n    if (socket.status !== 'open') {\r\n      return this.setState({\r\n        errors: { submit: '网络未连接' }\r\n      })\r\n    }\r\n    if (this.state.editState === item._id) {\r\n      this.setState(initState)\r\n    }\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'delete_address',\r\n      content: item._id\r\n    }))\r\n  }\r\n\r\n  cancelEdit() {\r\n    this.setState(initState)\r\n  }\r\n\r\n  saveAddress() {\r\n    var errors = {}\r\n    if (isEmpty(this.state.detailAddress)) {\r\n      errors.detailAddress = '详细地址不能为空'\r\n    }\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.postcode)) {\r\n      errors.postcode = '邮编格式有误'\r\n    }\r\n    if (!isLength(this.state.receiveName, {min:2,max:10})) {\r\n      errors.receiveName = '姓名填写有误'\r\n    }\r\n    if (!isPhone(this.state.receivePhone)) {\r\n      errors.receivePhone = '手机号码填写有误'\r\n    }\r\n    if (socket.status !== 'open') {\r\n      errors.submit = '网络未连接'\r\n    }\r\n    if (!isEmpty(errors)) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'save_address',\r\n      content: {\r\n        ...this.state,\r\n        errors: null\r\n      }\r\n    }))\r\n    this.setState(initState)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"u-info\">\r\n        <div className=\"u-info-title\">收货地址</div>\r\n        <div className=\"u-add-form\">\r\n          <div className=\"u-add-sub\">编辑收货地址</div>\r\n          <div className=\"u-add-form-item u-add-textarea\">\r\n            <span>*详细地址:</span>\r\n            <textarea onChange={this.formInputChange.bind(this)} value={this.state.detailAddress} name=\"detailAddress\" placeholder=\"请输入详细地址信息，如道路、门牌号、小区、楼栋号、单元等信息\" className=\"u-add-i-text\"></textarea>\r\n          </div>\r\n          {\r\n            this.state.errors.detailAddress && <div className=\"u-add-err\">{this.state.errors.detailAddress}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*邮政编码:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.postcode} name=\"postcode\" placeholder=\"请编写邮编\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.postcode && <div className=\"u-add-err\">{this.state.errors.postcode}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*收货人姓名:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receiveName} name=\"receiveName\" placeholder=\"长度不超过10个字符\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.receiveName && <div className=\"u-add-err\">{this.state.errors.receiveName}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*手机号码:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receivePhone} name=\"receivePhone\" placeholder=\"收货时的手机号码\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.receivePhone && <div className=\"u-add-err\">{this.state.errors.receivePhone}</div>\r\n          }\r\n          <div className=\"default-check\">\r\n             <input className=\"u-add-checkbox\" onChange={this.setDefailtChange.bind(this)} checked={this.state.isDefault} type=\"checkbox\"/>\r\n            <div className=\"u-add-text\">默认收货地址：</div>\r\n          </div>\r\n          <div>\r\n            <button onClick={this.saveAddress.bind(this)} className=\"save-btn\">{this.state.editState === -1 ? '添加': '保存'}</button>\r\n            {\r\n              this.state.editState === -1 ? null : <button onClick={this.cancelEdit.bind(this)} className=\"save-btn cancel-btn\">取消</button>\r\n            }\r\n          </div>\r\n          {\r\n            this.state.errors.submit && <div className=\"u-add-err\">{this.state.errors.submit}</div>\r\n          }\r\n        </div>\r\n        <div className=\"u-address-table-wrap\">\r\n          <div className=\"u-add-sub\">我的收货地址</div>\r\n          <table border=\"1\" width=\"750\" style={{borderColor: '#eee', textAlign: 'center'}} cellSpacing=\"0\" cellPadding=\"0\">\r\n            <thead>\r\n              <tr>\r\n                <th>收货人</th>\r\n                <th>详细地址</th>\r\n                <th>邮编</th>\r\n                <th>电话/手机</th>\r\n                <th>操作</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {\r\n              this.props.address.map((item, index) => {\r\n                return (\r\n                  <tr className={classnames({'default-ads': item.isDefault === 1})} key={index}>\r\n                    <td>{item.receiveName}</td>\r\n                    <td className=\"detail-address\">{item.address}</td>\r\n                    <td>{item.postcode}</td>\r\n                    <td>{item.phone}</td>\r\n                    <td>\r\n                      <span onClick={this.editStateChange.bind(this, null, item)} className=\"add-edit-state\">编辑</span>\r\n                      <span> / </span>\r\n                      <span onClick={this.deleteAddress.bind(this, null, item)} className=\"add-edit-state\">删除</span>\r\n                    </td>\r\n                  </tr>\r\n                )\r\n              })\r\n            }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    address: state.auth.address || [],\r\n    memberId: state.auth.user._id === undefined ? -1 : state.auth.user._id\r\n  }\r\n}\r\nAddress.propTypes = {\r\n  address: PropTypes.array.isRequired,\r\n  memberId: PropTypes.number.isRequired\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction })(Address)\r\n","import React from 'react'\n\nclass ShopCat extends React.Component {\n  render() {\n    return (\n      <div>ShopCat</div>\n    )\n  }\n}\n\nexport default ShopCat\n","import React from 'react'\r\nimport config from '../../../../../utils/config'\r\nimport { formatDate } from '../../../../../utils/tools'\r\n\r\nconst HOST = config.HOST\r\n\r\nconst AllOrders = props => {\r\n  return (\r\n    <div className=\"o-a-wrap\">\r\n      {\r\n        props.orders.map((item, index) => (\r\n          <div className=\"order-item\" key={index}>\r\n            <div className=\"order-head\">\r\n              <div className=\"oi-date\">{formatDate(item.creaTime, true)}</div>\r\n              <div className=\"oi-no\">订单号：{item.orderno}</div>\r\n              <div className=\"oi-date\">￥{item.sumPrice}</div>\r\n            </div>\r\n            <div>\r\n              {\r\n                item.products.map((product, i) => (\r\n                  <div key={i}>\r\n                    <div><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${product.logo}_210x210q90.jpg`} alt={product.goodName}/></div>\r\n                    <div>\r\n                      <div>{product.goodName}</div>\r\n                      <div>￥{product.price}</div>\r\n                      <div>{product.number}</div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              }\r\n            </div>\r\n          </div>\r\n        ))\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AllOrders\r\n","import React from 'react'\r\nimport config from '../../../../../utils/config'\r\nimport { formatDate } from '../../../../../utils/tools'\r\n\r\nconst WaitPay = props => {\r\n  return (\r\n    <div>{\r\n      props.orders.map((item, index) => {\r\n        return item.isPay === 1 ? null : (\r\n          <div className=\"order-item\" key={index}>\r\n            <div className=\"order-head\">\r\n              <div className=\"oi-date\">{formatDate(item.creaTime, true)}</div>\r\n              <div className=\"oi-no\">订单号：{item.orderno}</div>\r\n              <div className=\"oi-date\">￥{item.sumPrice}</div>\r\n            </div>\r\n            <div>\r\n              {\r\n                item.products.map((product, i) => (\r\n                  <div key={i}>\r\n                    <div><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${product.logo}_210x210q90.jpg`} alt={product.goodName}/></div>\r\n                    <div>\r\n                      <div>{product.goodName}</div>\r\n                      <div>￥{product.price}</div>\r\n                      <div>{product.number}</div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              }\r\n            </div>\r\n          </div>\r\n        )\r\n      })\r\n    }</div>\r\n  )\r\n}\r\n\r\nexport default WaitPay\r\n","import React from 'react'\r\nimport config from '../../../../../utils/config'\r\nimport { formatDate } from '../../../../../utils/tools'\r\n\r\nconst WaitSend = props => {\r\n  return (\r\n    <div>{\r\n      props.orders.map((item, index) => {\r\n        return item.isPay === 0 ? null : (\r\n          <div className=\"order-item\" key={index}>\r\n            <div className=\"order-head\">\r\n              <div className=\"oi-date\">{formatDate(item.creaTime, true)}</div>\r\n              <div className=\"oi-no\">订单号：{item.orderno}</div>\r\n              <div className=\"oi-date\">￥{item.sumPrice}</div>\r\n            </div>\r\n            <div>\r\n              {\r\n                item.products.map((product, i) => {\r\n                  return product.isSend === 1 ? null : (\r\n                    <div key={i}>\r\n                      <div><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${product.logo}_210x210q90.jpg`} alt={product.goodName}/></div>\r\n                      <div>\r\n                        <div>{product.goodName}</div>\r\n                        <div>￥{product.price}</div>\r\n                        <div>{product.number}</div>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        )\r\n      })\r\n    }</div>\r\n  )\r\n}\r\n\r\nexport default WaitSend\r\n","import React from 'react'\r\n\r\nconst WaitSign = props => {\r\n  return (\r\n    <div>WaitSign</div>\r\n  )\r\n}\r\n\r\nexport default WaitSign\r\n","import React from 'react'\r\n\r\nconst WaitComment = props => {\r\n  return (\r\n    <div>WaitComment</div>\r\n  )\r\n}\r\n\r\nexport default WaitComment\r\n","/**\r\n * 我的订单\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { Route, Link } from 'react-router-dom'\r\nimport classnames from 'classnames'\r\nimport config from '../../../../utils/config'\r\nimport socket from '../../../../utils/socket'\r\n\r\nimport AllOrders from './subpage/All'\r\nimport WaitPay from './subpage/WaitPay'\r\nimport WaitSend from './subpage/WaitSend'\r\nimport WaitSign from './subpage/WaitSign'\r\nimport WaitComment from './subpage/WaitComment'\r\n\r\n\r\nclass Order extends React.Component {\r\n  componentWillMount() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({\r\n        type: 'get_orders',\r\n        content: { limit: 0 }\r\n      }))\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"u-order-wrap\">\r\n          <div className=\"u-o-item\"><Link className={classnames({\r\n            'uoi-hit': this.props.location.pathname !== '/member/myorder'\r\n          })} to=\"/member/myorder\">全部订单</Link></div>\r\n          <div className=\"u-o-item\"><Link className={classnames({\r\n            'uoi-hit': this.props.location.pathname !== '/member/myorder/waitpay'\r\n          })} to=\"/member/myorder/waitpay\">待付款 {this.props.myOrders.status.waitPay}</Link></div>\r\n          <div className=\"u-o-item\"><Link className={classnames({\r\n            'uoi-hit': this.props.location.pathname !== '/member/myorder/waitsend'\r\n          })} to=\"/member/myorder/waitsend\">待发货 {this.props.myOrders.status.waitSend}</Link></div>\r\n          <div className=\"u-o-item\"><Link className={classnames({\r\n            'uoi-hit': this.props.location.pathname !== '/member/myorder/waitsign'\r\n          })} to=\"/member/myorder/waitsign\">待收货 {this.props.myOrders.status.waitSign}</Link></div>\r\n          <div className=\"u-o-item u-o-item-last\"><Link className={classnames({\r\n            'uoi-hit': this.props.location.pathname !== '/member/myorder/waitcomment'\r\n          })} to=\"/member/myorder/waitcomment\">待评价 {this.props.myOrders.status.waitComment}</Link></div>\r\n        </div>\r\n        <div>\r\n          <Route exact path=\"/member/myorder\" render={() => <AllOrders orders={this.props.myOrders.orders} />} />\r\n          <Route exact path=\"/member/myorder/waitpay\" render={() => <WaitPay orders={this.props.myOrders.orders} />} />\r\n          <Route exact path=\"/member/myorder/waitsend\" render={() => <WaitSend orders={this.props.myOrders.orders} />} />\r\n          <Route exact path=\"/member/myorder/waitsign\" render={() => <WaitSign orders={this.props.myOrders.orders} />} />\r\n          <Route exact path=\"/member/myorder/waitcomment\" render={() => <WaitComment orders={this.props.myOrders.orders} />} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nOrder.propTypes = {\r\n  myOrders: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  myOrders: state.order.myOrders || {status: {}, orders:[]}\r\n})\r\n\r\nexport default connect(mapStateToProps)(Order)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, Route } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\n\r\nimport config from '../../utils/config'\r\nimport Safety from './subpage/Safety'\r\nimport MyInfo from './subpage/MyInfo'\r\nimport Address from './subpage/Address'\r\nimport ShopCat from './subpage/ShopCat'\r\nimport MyOrder from './subpage/MyOrders'\r\n\r\nconst HOST = config.HOST\r\n/**\r\n * 安全设置\r\n *    修改手机，关闭手机登陆\r\n * 个人资料\r\n * 编辑资料\r\n * 收货地址\r\n * 资金管理\r\n * 购物车\r\n * 消息-\r\n *\r\n */\r\n\r\nclass UserInfo extends React.Component {\r\n  render() {\r\n    // 未登陆，并且未在验证中\r\n    // warning无法在现有状态转换期间更新(如在“render”中)。渲染方法应该是道具和状态的纯函数。\r\n    // if (!this.props.auth.isLogin && !this.props.auth.isVerify) { this.props.history.push('/login') }\r\n\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"member-header\">\r\n          {/*头部*/}\r\n          <div className=\"member-header-wrap\">\r\n            <div><img height=\"34px\" width=\"140px\" src={`${HOST}/image/ui/member-logo.png`} alt=\"\"/></div>\r\n            <div className=\"mh-choice-box\">\r\n              <Link to=\"/member\">\r\n                <div className=\"member-header-home\">首页</div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {\r\n          !this.props.auth.isLogin ?\r\n          <div>加载中。。。</div> :\r\n          <div className=\"member-wrap\">\r\n            {/*导航区*/}\r\n            <div className=\"member-nav\">\r\n              <div className=\"mn-avatar\"><img src={`${HOST}/image/member/avatar/${this.props.auth.user.avatar}`} alt=\"\"/></div>\r\n              <ul className=\"mn-navselect\">\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/safety'\r\n                })}><Link to=\"/member/safety\">安全设置</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member'\r\n                })}><Link to=\"/member\">个人资料</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/myorder'\r\n                })}><Link to=\"/member/myorder\">我的订单</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/address'\r\n                })}><Link to=\"/member/address\">收货地址</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/shop_cat'\r\n                })}><Link to=\"/member/shop_cat\">购物车</Link></li>\r\n              </ul>\r\n            </div>\r\n            {/*信息展示区*/}\r\n            <div className=\"member-info\">\r\n              <Route path=\"/member/safety\" component={Safety} />\r\n              <Route path=\"/member\" exact component={MyInfo} />\r\n              <Route path=\"/member/address\" component={Address} />\r\n              <Route path=\"/member/shop_cat\" component={ShopCat} />\r\n              <Route path=\"/member/myorder\" component={MyOrder} />\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nUserInfo.propTypes = {\r\n  auth: PropTypes.object.isRequired\r\n}\r\nexport default connect(mapStateToProps)(UserInfo)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\n\r\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\r\nimport { setPayOrderAction } from '../../flux/actions/orderActions'\r\nimport Header from '../../components/Header'\r\nimport { transPrice, intMultiplication, intAdd } from '../../utils/tools'\r\n\r\nconst HOST = config.HOST\r\n\r\n\r\nclass Order extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      choiceAddress: {},\r\n      numbers: [],\r\n      totalPrice: 0,  // 总计金额\r\n      comments: [],\r\n      errors: {}\r\n    }\r\n    this.computeTotal = this.computeTotal.bind(this)\r\n  }\r\n  componentWillMount() {\r\n    // 没有要购买的商品\r\n    if (!Array.isArray(this.props.order.buyProducts) || this.props.order.buyProducts.length < 1) {\r\n      // 跳转到上一级\r\n      this.props.history.push(this.props.auth.location || '/')\r\n    }\r\n    this.props.setRouterLocationAction('/order')\r\n    // 判断是否登录，判断收货地址\r\n    if (!this.props.auth.isLogin && !this.props.auth.isVerify) {\r\n      return this.props.history.push('/login')\r\n    }\r\n    var buyProducts = this.props.order.buyProducts\r\n    var numbers = [];\r\n    var comments = [];\r\n    var totalPrice = 0;\r\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\r\n      comments[i] = ''\r\n      numbers[i] = buyProducts[i].number\r\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, buyProducts[i].number))\r\n    }\r\n    // 初始化购买数据量\r\n    this.setState({\r\n      numbers,\r\n      totalPrice,\r\n      comments\r\n    })\r\n  }\r\n  // 计算总价\r\n  computeTotal(index, number) {\r\n    var buyProducts = this.props.order.buyProducts\r\n    var totalPrice = 0;\r\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\r\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, i === index ? number : this.state.numbers[i]))\r\n    }\r\n    return totalPrice\r\n  }\r\n\r\n  addressChoice(address) {\r\n    return function() {\r\n      this.setState({\r\n        choiceAddress: address\r\n      })\r\n    }\r\n  }\r\n  numberChange(index, amount) {\r\n    return function(e) {\r\n      var number = e.target.value\r\n      if (!/^[1-9]\\d{0,}$/.test(number) || Number(number) > Number(amount))\r\n        return;\r\n      var nums = [...this.state.numbers]\r\n      nums[index] = number\r\n      this.setState({\r\n        numbers: nums,\r\n        totalPrice: this.computeTotal(index, number) // 重新计算总价\r\n      })\r\n    }\r\n  }\r\n  // 数量减减\r\n  numberMinus(index, amount) {\r\n    return function() {\r\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])-1}})\r\n    }\r\n  }\r\n  // 数量加加\r\n  numberPlus(index, amount) {\r\n    return function() {\r\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])+1}})\r\n    }\r\n  }\r\n  commentChange(index) {\r\n    return function(e) {\r\n      if (e.target.value.length > 200) return;\r\n      var comments = [...this.state.comments]\r\n      comments[index] = e.target.value\r\n      this.setState({\r\n        comments\r\n      })\r\n    }\r\n  }\r\n  submitOrder() {\r\n    if (!/^[1-9]\\d*$/.test(this.state.choiceAddress._id)) {\r\n      return this.setState({\r\n        errors: {\r\n          ...this.state.errors,\r\n          submitOrder: '请选择收货地址'\r\n        }\r\n      })\r\n    }\r\n    // 商品 Ids, 数量s, detailIds, addressId\r\n    var request = {\r\n      // goodIds: [],\r\n      goodDetailIds: [],\r\n      numbers: this.state.numbers,\r\n      addressId: this.state.choiceAddress._id,\r\n      messages: this.state.comments\r\n    }\r\n    var shopCarIds = []\r\n    for (var i = 0, len = this.props.order.buyProducts.length; i < len; i++) {\r\n      // request.goodIds.push(this.props.order.buyProducts[i].goodId)\r\n      request.goodDetailIds.push(this.props.order.buyProducts[i].goodDetailId)\r\n      if (/^[1-9]\\d*$/.test(this.props.order.buyProducts[i].shopCarId)) {\r\n        shopCarIds.push(this.props.order.buyProducts[i].shopCarId)\r\n      }\r\n    }\r\n    if (shopCarIds.length > 0) {  // 如果有购物车 Id\r\n      request.shopCarIds = shopCarIds\r\n    }\r\n    axios.post(`${HOST}/api/order/submit_order`, request)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {\r\n              ...this.state.errors,\r\n              submitOrder: res.data.message\r\n            }\r\n          })\r\n        }\r\n        this.props.setPayOrderAction(res.data.payload)\r\n        // 跳转到支付页面\r\n        this.props.history.push('/payorder')\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {\r\n            ...this.state.errors,\r\n            submitOrder: err.message\r\n          }\r\n        })\r\n      })\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        {/*收货地址*/}\r\n        <h3>选择收货地址</h3>\r\n        <div>\r\n          {\r\n            this.props.auth.address.map((item, index) => (\r\n              <div onClick={this.addressChoice(item).bind(this)} key={index}>\r\n                <div>{item.receiveName}</div>\r\n                <div>{item.address}</div>\r\n                <div>{item.postcode}</div>\r\n                <div>{item.phone}</div>\r\n              </div>\r\n            ))\r\n          }\r\n          <Link to=\"/member/address\"><div>添加收货地址</div></Link>\r\n        </div>\r\n        <h3>确认订单信息</h3>\r\n        {\r\n          this.props.order.buyProducts.map((item, index) => {\r\n            return (\r\n              <div key={index}>\r\n                <div>{item.storeName}, {item.nickname}</div>\r\n                <div><img width=\"50px\" height=\"50px\" src={item.logo ? `${HOST}/image/goods/logo/${item.logo}` : `${HOST}/api/goods/product_logo?goodId=${item.goodId}`} alt=\"\"/></div>\r\n                <div>{item.goodName}</div>\r\n                {\r\n                  Array.isArray(item.spec) ? item.spec.map((spec, index) => {\r\n                    return (\r\n                      // 顺序排列 index = config -1\r\n                      <div key={index}>{spec.specName}：{spec.specValue}</div>\r\n                    )\r\n                  }) : null\r\n                }\r\n                <div>单价{transPrice(item.price)}</div>\r\n                <div>\r\n                  <span onClick={this.numberMinus(index, item.amount).bind(this)}>-</span>\r\n                  数量<input onChange={this.numberChange(index, item.amount).bind(this)} value={this.state.numbers[index]} type=\"text\"/>\r\n                  <span onClick={this.numberPlus(index, item.amount).bind(this)}>+</span>\r\n                </div>\r\n                <div>库存：{item.amount}</div>\r\n                <div>小计{transPrice(intMultiplication(item.price, this.state.numbers[index]))}</div>\r\n                <div>给卖家留言：<input onChange={this.commentChange(index).bind(this)} value={this.state.comments[index]} type=\"text\"/></div>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n        <div>总计：{transPrice(this.state.totalPrice)}</div>\r\n        <button onClick={this.submitOrder.bind(this)}>提交订单</button>\r\n        {\r\n          this.state.errors.submitOrder && (\r\n            <div>{this.state.errors.submitOrder}</div>\r\n          )\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    order: state.order\r\n  }\r\n}\r\nOrder.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  order: PropTypes.object.isRequired\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction, setPayOrderAction })(Order)\r\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nconst PayHeader = (props) => {\n  return (\n    <div>\n      <h2>优选 收银台</h2>\n      <span>{props.auth.user.nickname}</span>\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth\n  }\n}\nexport default connect(mapStateToProps)(PayHeader)\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { isEmpty } from '../../utils/validator'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\n\r\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\r\nimport PayHeader from './subpage/PayHeader'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass PayOrder extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      payway: 'alipay', // 余额 或 支付宝\r\n      property: -1,  // 余额\r\n      errors: {}\r\n    }\r\n    this.paywayChange = this.paywayChange.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    /**\r\n     * 判断上一级页面是否 /order，跳到主页\r\n     */\r\n    this.props.setRouterLocationAction('/payorder')\r\n    if (!this.props.auth.isLogin) {\r\n      this.props.history.push('/login')\r\n    }\r\n    axios.get(`${HOST}/api/users/get_property`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, wallet: res.data.message}\r\n          })\r\n        }\r\n        this.setState({\r\n          property: res.data.payload,\r\n          errors: {...this.state.errors, wallet: ''}\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, wallet: '服务器忙'}\r\n        })\r\n      })\r\n  }\r\n\r\n  paywayChange(e) {\r\n    this.setState({\r\n      payway: e.target.value\r\n    })\r\n  }\r\n  setPayway(way) {\r\n    return function() {\r\n      this.setState({\r\n        payway: way\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    const payOrder = this.props.order.payOrder\r\n    const buyProducts = this.props.order.buyProducts\r\n    return (\r\n      <div>\r\n        <PayHeader />\r\n        {\r\n          this.props.order.payStatus !== 'success' ? null : (\r\n            <h1>付款成功</h1>\r\n          )\r\n        }\r\n        {\r\n          [isEmpty(buyProducts) ? null : (\r\n            buyProducts.map((item, index) => (\r\n              <div key={index}>\r\n                <div>{item.productName}</div>\r\n                <div>卖家：{item.nickname}</div>\r\n                {\r\n                  // Array.isArray(item.specChoice) && item.specChoice.map((choice, i) => (\r\n                  //   <div key={i}>\r\n                  //     <div>{item.specName[i].specName}: {item.specValue[choice].specValue}</div>\r\n                  //   </div>\r\n                  // ))\r\n                }\r\n              </div>\r\n            ))\r\n          ),\r\n          isEmpty(payOrder) ? null : (\r\n            <div key=\"sumPrice\">{payOrder.sumPrice}元</div>\r\n          )]\r\n        }\r\n        <h2>付款方式</h2>\r\n        <div onClick={this.setPayway('alipay').bind(this)}>\r\n          <input onChange={this.paywayChange} checked={this.state.payway === 'alipay'} name=\"payway\" type=\"radio\" value=\"alipay\"/>\r\n          <span>支付宝扫码支付</span>\r\n        </div>\r\n        <div onClick={this.setPayway('wallet').bind(this)}>\r\n          <input onChange={this.paywayChange} checked={this.state.payway === 'wallet'} name=\"payway\" type=\"radio\" value=\"wallet\"/>\r\n          <span>钱包余额支付</span>\r\n        </div>\r\n        {\r\n          isEmpty(payOrder) ? null : this.state.payway === 'alipay' ? (\r\n            <div>\r\n              {/*支付宝二维码*/}\r\n              <iframe title=\"alipay\" height=\"835px\" width=\"100%\" src={payOrder.alipayURL} frameBorder=\"0\"></iframe>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              { /*余额支付*/\r\n                this.state.errors.wallet ? (\r\n                  <div>{this.state.errors.wallet}</div>\r\n                ) : (\r\n                  this.state.property === -1 ? null : (\r\n                    <div>\r\n                      <div>订单号：{payOrder.orderno}</div>\r\n                      <div>账户余额：{this.state.property}</div>\r\n                      <div><input type=\"text\"/><button>点击发送验证码</button></div>\r\n                    </div>\r\n                  )\r\n                )\r\n              }\r\n            </div>\r\n          )\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    order: state.order,\r\n    auth: state.auth\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction })(PayOrder)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport config from '../../utils/config'\r\nimport socket from '../../utils/socket'\r\nimport { setBuyProductsAction } from '../../flux/actions/orderActions'\r\nimport { toggleChatAction } from '../../flux/actions/chatActions'\r\nimport { intMultiplication, intAdd, transPrice } from '../../utils/tools'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass ShopingCart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      height: 0,\r\n      bodyStatus: 'hide',\r\n      navStatus: 'hide',\r\n      choiceAll: true,\r\n      choiceStores: [],\r\n      choiceProducts: [],\r\n    }\r\n  }\r\n\r\n  // componentWillMount() {\r\n\r\n  // }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var _this = this\r\n      this.setState({\r\n        height: document.documentElement.clientHeight\r\n      })\r\n      window.onresize = function() {\r\n        _this.setState({\r\n          height: document.documentElement.clientHeight\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      window.onresize = null\r\n    }\r\n  }\r\n\r\n  showCarBody() {\r\n    var interval = -1\r\n    return function() {\r\n      var isHide = this.state.bodyStatus === 'hide'\r\n      var width = isHide ? -280 : 0\r\n      var inter = isHide ? 15 : 20\r\n      var out = isHide ? 300 : 200\r\n      var diff = isHide ? 14 : 28\r\n      var _this = this\r\n      _this.setState({\r\n          bodyStatus: isHide ? 'show' : 'hide',\r\n          navStatus: isHide ? 'show' : 'hide',\r\n      }, function() {\r\n        interval = setInterval(function() {\r\n          width = isHide ? width + diff : width - diff\r\n          _this.refs.shopCarBody.style.marginRight = width + 'px'\r\n        }, inter)\r\n        setTimeout(function() {\r\n          clearInterval(interval)\r\n          _this.refs.shopCarBody.style.marginRight = isHide ? '0px' : '-280px'\r\n        }, out)\r\n      })\r\n    }\r\n  }\r\n  showNav() {\r\n    this.setState({\r\n      navStatus: 'show'\r\n    })\r\n  }\r\n  hideNav() {\r\n    if (this.state.bodyStatus === 'show') return\r\n    this.setState({\r\n      navStatus: 'hide'\r\n    })\r\n  }\r\n\r\n  // 显示或隐藏聊天窗口\r\n  toggleChat() {\r\n    toggleChatAction(!this.props.hideChat)\r\n  }\r\n\r\n  // 购物车商品数量减一\r\n  numberMinus(product) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (product.number - 1 < 1 || socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'shop_car_number_minus',\r\n          target: 'koa',\r\n          content: product.shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 购物车商品数量加一\r\n  numberPlus(product) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (product.number + 1 > product.amount || socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'shop_car_number_plus',\r\n          target: 'koa',\r\n          content: product.shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 购物车删除商品\r\n  deleteShopProduct(shopCarId) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'delete_shop_car_product',\r\n          target: 'koa',\r\n          content: shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 全选单选框改变\r\n  allCheckboxChange(e) {\r\n    if (e.target.checked) {\r\n      this.setState({\r\n        choiceAll: true\r\n      })\r\n    }else {\r\n      this.setState({\r\n        choiceAll: false,\r\n        choiceStores: [],\r\n        choiceProducts: []\r\n      })\r\n    }\r\n  }\r\n  // 商店单选框改变\r\n  storeCheckboxChange(storeId) {\r\n    return function(e) {\r\n      if (e.target.checked) {\r\n        this.setState({\r\n          choiceStores: [...this.state.choiceStores, storeId]\r\n        })\r\n      }else {\r\n        this.setState({\r\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\r\n          choiceAll: false,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // 商品单选框改变\r\n  productCheckboxChange(shopCarId, storeId) {\r\n    return function(e) {\r\n      if (e.target.checked) {\r\n        this.setState({\r\n          choiceProducts: [...this.state.choiceProducts, shopCarId]\r\n        })\r\n      }else {\r\n        this.setState({\r\n          choiceProducts: this.state.choiceProducts.filter(i => i !== shopCarId),\r\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\r\n          choiceAll: false,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // 计算选中商品的数量\r\n  computeChoiceCount() {\r\n    let count = 0  // 购物车选中商品个数\r\n    let price = 0  // 购物车选中商品总价格\r\n    let shopCarProductsLength = 0  // 购物车商品数量\r\n    let shopCar = this.props.auth.shopCar\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      shopCarProductsLength += shopCar[i].products.length\r\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\r\n        count += shopCar[i].products.length // 计算个数\r\n        shopCar[i].products.forEach(item => {\r\n          price = intAdd(price, intMultiplication(item.product.price, item.product.number))  // 计算选中价格\r\n        })\r\n        continue\r\n      }\r\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\r\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\r\n          count++\r\n          price = intAdd(price, intMultiplication(shopCar[i].products[j].product.price, shopCar[i].products[j].product.number))  // 计算选中价格\r\n        }\r\n      }\r\n    }\r\n    return {count, price, shopCarProductsLength}\r\n  }\r\n\r\n  // 点击结算\r\n  cashierShopCar() {\r\n    var shopCar = this.props.auth.shopCar\r\n    var shopCarProductsLength = 0\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      shopCarProductsLength += shopCar[i].products.length\r\n    }\r\n    if (shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)) return // 什么都没选\r\n    var buyProducts = []\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\r\n        shopCar[i].products.forEach(item => {\r\n          buyProducts.push({\r\n            ...item.product,\r\n            spec: item.spec\r\n          })\r\n        })\r\n        continue\r\n      }\r\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\r\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\r\n          buyProducts.push({\r\n            ...shopCar[i].products[j].product,\r\n            spec: shopCar[i].products[j].spec\r\n          })\r\n        }\r\n      }\r\n    }\r\n    this.props.setBuyProductsAction(buyProducts)\r\n    this.props.history.push('/order')\r\n  }\r\n\r\n  render() {\r\n    const auth = this.props.auth\r\n    // 未登陆\r\n    if (!this.props.auth.isLogin || !Array.isArray(auth.shopCar)) {\r\n      return (\r\n        <div></div>\r\n      )\r\n    }\r\n\r\n    let computeChoice = this.computeChoiceCount.call(this)\r\n    return (\r\n      <div style={{height: this.state.height + 'px'}} className=\"shopcar\">\r\n        <div className={classnames(\"shopcar-nav\", {\r\n           'shopcar-nav-transparent': this.state.navStatus === 'hide'\r\n        })} style={{height: this.state.height + 'px'}}>\r\n          <div className=\"shopcar-nav-wrap\">\r\n            <Link to=\"/member\">\r\n              <div style={{marginTop: this.state.height * 0.3 + 'px'}} className=\"user-logo\">\r\n                <img src={`${HOST}/image/member/avatar/${auth.user.avatar}`} alt=\"\"/>\r\n              </div>\r\n            </Link>\r\n            <div onMouseOver={this.showNav.bind(this)} onMouseLeave={this.hideNav.bind(this)} onClick={this.showCarBody().bind(this)} className={classnames(\"shop-mab\", {'shop-mab-focus': this.state.bodyStatus === 'show'})}>\r\n              <div className=\"sp-logo\"><img src={`${HOST}/image/ui/shopingcar_logo.png`} /></div>\r\n              <div className=\"sp-font\">购物车</div>\r\n              <div className=\"sp-count\">{computeChoice.shopCarProductsLength}</div>\r\n            </div>\r\n            <div className=\"sp-chat-wrap\" onClick={this.toggleChat.bind(this)}>\r\n              <div className=\"spc-img\"><img width=\"35px\" height=\"35px\" src={`${HOST}/image/ui/${this.props.notRead > 0 ? 'frog_gua.png' : 'frog.png'}`} /></div>\r\n              {\r\n                this.props.notRead > 0 ? <div className=\"spc-notread\">{this.props.notRead}</div> : null\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/*购物车商品*/}\r\n        <div ref=\"shopCarBody\"\r\n          className=\"shopcar-body\"\r\n          style={{height: this.state.height + 'px'/*,display: this.state.bodyStatus === 'show' ? 'block' : 'none'*/}}>\r\n          <div className=\"sc-choice-all-wrap\">\r\n            <input checked={this.state.choiceAll} onChange={this.allCheckboxChange.bind(this)} type=\"checkbox\"/>\r\n            <span>全选</span>\r\n          </div>\r\n          <div className=\"sc-products-wrap\" style={{height: Number(this.state.height) - 110 + 'px'}}>\r\n          {\r\n            auth.shopCar.map((item, index) => {\r\n              return (\r\n                <div className=\"sc-store-wrap\" key={index}>\r\n                  <div className=\"sc-store-title sc-line-box\">\r\n                    <div className=\"sc-line-item\">\r\n                      <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.storeId) !== -1} onChange={this.storeCheckboxChange(item.storeId).bind(this)} type=\"checkbox\"/>\r\n                    </div>\r\n                    <div className=\"sc-line-item sc-store-name\">{item.storeName}</div>\r\n                  </div>\r\n                  {\r\n                    item.products.map((item, i) => {\r\n                      return (\r\n                        <div className=\"sc-line-box sc-product-wrap\" key={i}>\r\n                          <div className=\"sc-line-item sc-product-checkbox\">\r\n                            <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.product.storeId) !== -1 || this.state.choiceProducts.indexOf(item.product.shopCarId) !== -1}\r\n                              onChange={this.productCheckboxChange(item.product.shopCarId, item.product.storeId).bind(this)}\r\n                              type=\"checkbox\"/>\r\n                          </div>\r\n                          <div className=\"sc-line-item sc-product-logo\"><img width=\"50px\" src={`${HOST}/image/goods/logo/${item.product.logo}`} title={item.product.goodName} /></div>\r\n                          <div className=\"sc-line-item sc-product-spec\">{\r\n                            item.spec.map((spec, j) => {\r\n                              if (j > 1) return null // 只显示 2 个分类信息\r\n                              return (\r\n                                <p className=\"sc-product-spec-item\" title={spec.specName + \"：\" + spec.specValue} key={j}>{spec.specValue}</p>\r\n                              )\r\n                            })\r\n                          }</div>\r\n                          <div className=\"sc-line-item sc-product-number\">{item.product.number}</div>\r\n                          <div className=\"sc-line-price\">￥{transPrice(intMultiplication(item.product.price, item.product.number))}</div>\r\n                          <div className=\"sc-choice-wrap\">\r\n                            <div onClick={this.numberMinus(item.product).bind(this)} className=\"sc-choice-unlike\"><img title=\"数量减一\" src={`${HOST}/image/ui/unlike.png`} alt=\"\"/></div>\r\n                            <div onClick={this.numberPlus(item.product).bind(this)} className=\"sc-choice-like\"><img title=\"数量加一\"  src={`${HOST}/image/ui/like.png`} alt=\"\"/></div>\r\n                            <div onClick={this.deleteShopProduct(item.product.shopCarId).bind(this)} className=\"sc-choice-delete\"><img title=\"删除\" src={`${HOST}/image/ui/delete.png`} alt=\"\"/></div>\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })\r\n                  }\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n          </div>\r\n          <div className=\"sc-Cashier-wrap\">\r\n            <div className=\"sc-Cashier-clear\">\r\n              <div className=\"sc-s-count\">已选 {computeChoice.count} 件</div>\r\n              <div className=\"sc-s-price\">￥ {transPrice(computeChoice.price)}</div>\r\n            </div>\r\n            <div onClick={this.cashierShopCar.bind(this)} className={classnames(\"sc-Cashier\", {\r\n              'sc-empty': computeChoice.shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)\r\n            })}>\r\n              <span>结算</span>\r\n              <div className=\"sc-Cashier-icon\"><img width=\"18px\" height=\"18px\" src={`${HOST}/image/ui/package.png`} /></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nShopingCart.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  setBuyProductsAction: PropTypes.func.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    hideChat: state.chat.hideChat,\r\n    notRead: state.chat.messagesNotRead.reduce(function(prev, next) {\r\n      return prev + next.notRead\r\n    }, 0)\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction })(ShopingCart))\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport { formatDate } from '../../../utils/tools'\r\n\r\nimport { messageNotReadItemToChatAction, messageItemToChatAction } from '../../../flux/actions/chatActions'\r\nconst HOST = config.HOST\r\n\r\nfunction subMessage(message) {\r\n  return message.length < 19 ? message.replace(/{{=\\w+\\.(jpg|png|icon|gif|jpeg)}}/g, '【图片】') : message.replace(/{{=\\w+\\.(jpg|png|icon|gif|jpeg)}}/g, '【图片】').substring(0,18) + '...'\r\n}\r\n\r\nconst Message = props => {\r\n  return (\r\n    <div className=\"chat-msg-wrap\">\r\n      { // 未读消息\r\n        [props.messagesNotRead.map((item, index) => (\r\n          <div onClick={props.messageNotReadItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n            <div className=\"msg-i-userwrap\">\r\n              <div className=\"msg-i-avatar\" style={{\r\n                background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n              }}></div>\r\n              <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n            </div>\r\n            <div className=\"msg-i-wrap\">\r\n              <div className=\"msg-i-disone\">{(Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              <div className=\"msg-i-len\">{item.notRead}</div>\r\n            </div>\r\n              <div className=\"msg-i-time\">{Array.isArray(item.content) && item.content.length > 0 ? formatDate(item.content[item.content.length-1].creaTime) : ''}</div>\r\n          </div>\r\n        )), // 已读消息\r\n          props.messages.map((item, index) => (\r\n            <div onClick={props.messageItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n              <div className=\"msg-i-userwrap\">\r\n                <div className=\"msg-i-avatar\" style={{\r\n                  background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n                }}></div>\r\n                <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n              </div>\r\n              <div className=\"msg-i-wrap\">\r\n                <div className=\"msg-i-disone\">{props.chatnow !== item.userId && item.wait ? subMessage(item.wait) : (Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    messagesNotRead: Array.isArray(state.chat.messagesNotRead) ? state.chat.messagesNotRead : [],\r\n    messages: Array.isArray(state.chat.messages) ? state.chat.messages : [],\r\n    chatnow: state.chat.chatnow\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { messageNotReadItemToChatAction, messageItemToChatAction })(Message)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\nimport socket from '../../../utils/socket'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\n// 点击联系人到聊天框\r\nfunction contactClick(item) {\r\n  return function() {\r\n    contactItemToChatAction(item)\r\n  }\r\n}\r\n\r\nconst Contacts = (props) => {\r\n  if (socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'get_contacts'\r\n    }))\r\n  }\r\n  const online = []\r\n  const offline = []\r\n  props.contacts.forEach(i => {\r\n    if (i.isOnline) {\r\n      online.push(i)\r\n    }else {\r\n      offline.push(i)\r\n    }\r\n  })\r\n  return (\r\n    <div>\r\n      {\r\n        props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n        [\r\n          online.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          )),\r\n          offline.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item chat-item-offline\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n// class Contacts extends React.Component {\r\n//   componentWillMount() {\r\n//     // socket 请求 联系人列表\r\n//     if (socket.status === 'open') {\r\n//       socket.ws.send(JSON.stringify({\r\n//         type: 'get_contacts'\r\n//       }))\r\n//     }\r\n//   }\r\n//   // 点击联系人到聊天框\r\n//   contactClick(item) {\r\n//     contactItemToChatAction(item)\r\n//   }\r\n//   render() {\r\n//     const online = []\r\n//     const offline = []\r\n//     this.props.contacts.forEach(i => {\r\n//       if (i.isOnline) {\r\n//         online.push(i)\r\n//       }else {\r\n//         offline.push(i)\r\n//       }\r\n//     })\r\n//     return (\r\n//       <div>\r\n//         {\r\n//           this.props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n//           [\r\n//             online.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             )),\r\n//             offline.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item chat-item-offline\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             ))\r\n//           ]\r\n//         }\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    contacts: Array.isArray(state.chat.contacts) ? state.chat.contacts : []\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Contacts)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Search extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      searchAns: [],\r\n      keyword: '',\r\n      message: ''\r\n    }\r\n    this.shakeGetAns = this.shakeGetAns().bind(this)\r\n  }\r\n\r\n  // 防抖获取结果\r\n  shakeGetAns() {\r\n    var timer = 0\r\n    var timeout = -1;\r\n    return function(keyword) {\r\n      var _this = this\r\n      clearTimeout(timeout) // 清除前一个定时器\r\n      timeout = setTimeout(function() {\r\n        _this.setState({\r\n          message: '搜索中...'\r\n        })\r\n        axios.get(`${HOST}/api/users/search_contacts?keyword=${_this.state.keyword}`)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              _this.setState({\r\n                searchAns: res.data.payload,\r\n                message: res.data.payload.length === 0 ? '未搜索到联系人...' : ''\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n          })\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  keywordChange(e) {\r\n    var _this = this\r\n    var keyword = e.target.value\r\n    this.setState({\r\n      keyword\r\n    }, function() {\r\n      _this.shakeGetAns(keyword)\r\n    })\r\n  }\r\n\r\n  contactsClick(item) {\r\n    contactItemToChatAction(item)\r\n  }\r\n\r\n  addContactsClick(item) {\r\n    return function(e) {\r\n      e.stopPropagation()\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'add_contacts',\r\n          content: item.userId\r\n        }))\r\n        this.setState({\r\n          searchAns: this.state.searchAns.filter(i => i.userId !== item.userId)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-search-wrap\">\r\n        <div className=\"chat-s-input\">\r\n          <div className=\"chat-s-i-l\"><input value={this.state.keyword} placeholder=\"输入联系人昵称\" onChange={this.keywordChange.bind(this)} type=\"text\"/></div>\r\n          <div className=\"chat-s-i-r\">点击搜索</div>\r\n        </div>\r\n        <div className=\"chat-s-ans\">\r\n          {\r\n            Array.isArray(this.state.searchAns) && this.state.searchAns.length === 0 ? <div className=\"con-search-miss\">{this.state.message}</div> : this.state.searchAns.map((item, index) => (\r\n              <div onClick={this.contactsClick.bind(this, item)} className=\"c-s-item\" key={index}>\r\n                <div className=\"c-s-i-avatar\"><img src={`${HOST}/image/member/avatar/${item.avatar}`} /></div>\r\n                <div className=\"c-s-i-nickname\">{item.nickname}</div>\r\n                <div onClick={this.addContactsClick(item).bind(this)} className=\"c-s-i-btn-add\">加好友</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport config from '../../../utils/config'\r\nimport wss from '../../../utils/socket'\r\nimport { swingChatWindowAction, setWaitMessageAction } from '../../../flux/actions/chatActions'\r\nconst HOST = config.HOST\r\n\r\n// function readFile(file, callback) {\r\n//   var reader = new FileReader()\r\n//   //以二进制形式读取文件\r\n//   reader.readAsArrayBuffer(file)\r\n//   reader.onload = function(e) {\r\n//     callback(e.target.result)\r\n//   }\r\n// }\r\n\r\nfunction transMessage(msg) {\r\n  // {{=xx.jpg}}  => <img src=\"xx.jpg'\">\r\n  if (msg === '' || typeof(msg) !== 'string') return msg\r\n  var images = null\r\n  try {\r\n    // images = msg.match(/(?<!{{=)\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\r\n    images = msg.match(/\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\r\n  }catch(err) {\r\n    // firefox 不支持正则前置断言\r\n    images = msg.match(/\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\r\n  }\r\n  if (images) {\r\n    var msgs = msg.split(/{{\\=\\w+\\.[jpgenifco]{3,4}}}/g)\r\n    msg = msgs[0]\r\n    for (var i = 1, len = msgs.length; i < len; i++) {\r\n      msg += `<img src=\"${HOST}/image/member/chat/${/\\.gif$/.test(images[i-1]) ? images[i-1] : images[i-1] + '_w80.jpg'}\">${msgs[i]}`\r\n    }\r\n  }\r\n  return msg\r\n}\r\n\r\nclass ChatWindow extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      message: ''\r\n    }\r\n    this.scrollToButton = this.scrollToButton.bind(this)\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // console.log(error)\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    // console.log(error, info)\r\n    // logErrorToMyService(error, info);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = function (e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragleave = function(e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragover = function(e) {\r\n        e.preventDefault();\r\n    }\r\n    var _this = this\r\n    this.refs.textarea.ondrop = function(e) {\r\n      e.preventDefault()\r\n      e.stopPropagation() // 火狐浏览器，拖动时打开新页面\r\n      if (!_this.props.chat.chatnow) return;\r\n      var file = e.dataTransfer.files[0]\r\n      if (!file || file.size > '5048576‬') {\r\n        return; // 5M 以下的文件\r\n      }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\r\n        return; // 不支持的格式\r\n      }\r\n      var formData = new FormData()\r\n      formData.append('picture', file)\r\n      axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            _this.props.setWaitMessageAction(_this.refs.textarea.innerHTML += `<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = null\r\n    this.refs.textarea.ondragleave = null\r\n    this.refs.textarea.ondragover = null\r\n    this.refs.textarea.ondrop = null\r\n  }\r\n\r\n  // 聊天对象改变时，拿出未发送消息\r\n  componentWillReceiveProps(nextProps) {\r\n    if (typeof(window) !== 'object') { return }\r\n    var chat = this.props.chat\r\n    // 将消息中的 wait 提取出\r\n    if (chat.chatnow !== nextProps.chat.chatnow) {\r\n      var now = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (now && now.wait) {\r\n        // this.refs.textarea.classList.remove('textarea-f1')\r\n        this.refs.textarea.innerHTML = now.wait\r\n      }else {\r\n        this.refs.textarea.innerText = ''\r\n      }\r\n      // 将消息滚动条，到最低\r\n      this.scrollToButton()\r\n    }else {\r\n      var msgNow = chat.messages.find(i => i.userId === chat.chatnow)\r\n      var msgNext = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (msgNow && msgNext && Array.isArray(msgNow.content) && Array.isArray(msgNext.content) && msgNow.content.length !== msgNext.content.length) {\r\n        // 将消息滚动条，到最低\r\n        this.scrollToButton()\r\n      }\r\n    }\r\n    this.refs.textarea.focus()\r\n  }\r\n  scrollToButton() {\r\n      var _this = this\r\n        // 这里 render 还没执行，页面中组件\r\n      setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n        _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n          _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        }, 200)\r\n      }, 100)\r\n  }\r\n  // 隐藏这个窗口\r\n  swingChatWindow() {\r\n    this.props.swingChatWindowAction(true)\r\n  }\r\n\r\n  sendMessage() {\r\n    var message = this.refs.textarea.innerHTML\r\n    if (message === '' || !this.props.chat.chatnow) return;\r\n    // /(?<!\\<img src=\"http:\\/\\/[\\d\\.]+\\/image\\/member\\/chat\\/)\\w+\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\">)/g\r\n    var images = message.match(/\\w+?\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\">)/g)\r\n    // return console.log(images)\r\n    if (images) {\r\n      var msgs = message.split(/<img src=\"[\\w\\W]+?_w80\\.jpg\">/)\r\n      message = msgs[0]\r\n      // var img = ''\r\n      for (var i = 1, len = msgs.length; i < len; i++) {\r\n        message += `{{=${images[i-1]}}}${msgs[i]}`\r\n      }\r\n    }\r\n    message = message.replace(/(<\\/span>|<span[^>]+?>)/g, '').replace(/(<\\/div>|<div[^>]*?>)/g, '').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    if (wss.status !== 'open') {\r\n      return this.setState({\r\n        messages: '与服务器断开连接'\r\n      })\r\n    }\r\n    this.refs.textarea.innerText = '' // 清空消息\r\n    this.props.setWaitMessageAction('')\r\n    wss.ws.send(JSON.stringify({\r\n      type: 'send_chat_message',\r\n      origin: this.props.user.userId,\r\n      target: this.props.chat.chatnow,\r\n      content: message\r\n    }))\r\n  }\r\n\r\n  // textareaFocus(e) {\r\n\r\n  // }\r\n  // textareaBlur(e) {\r\n\r\n  // }\r\n\r\n  textareaInput(e) {\r\n    this.props.setWaitMessageAction(e.target.innerHTML)\r\n  }\r\n  render() {\r\n    let chat = this.props.chat\r\n    let chatnow = undefined\r\n    if (chat.chatnow && Array.isArray(chat.messages)) {\r\n      chatnow = chat.messages.find(i => i.userId === chat.chatnow)\r\n    }\r\n    return (\r\n      <div className=\"chat-window\" style={{\r\n        display: chat.hideWindow ? 'none' : 'block'\r\n      }}>\r\n        <div className=\"chatw-header\">\r\n          <div onClick={this.swingChatWindow.bind(this)} className=\"charw-hide\" style={{\r\n            background: `url(${HOST}/image/ui/left.png) center center / 25px 25px no-repeat #628ef9`\r\n          }}></div>\r\n          <div className=\"chatw-h-targetname\">{chatnow && chatnow.nickname}</div>\r\n        </div>\r\n        <div className=\"chatw-show-scroll-wrap\">\r\n        <div ref=\"chatMessageBox\" className=\"chatw-show-wrap\">\r\n        {\r\n          chatnow && chatnow.content.map((item, index) => (\r\n            <div className=\"chat-chatnow-wrap\" key={index}>\r\n              {\r\n                item.sender === chatnow.userId ? (\r\n                  <div className=\"chat-target-wrap\">\r\n                    <div className=\"chat-target\" key=\"1\">\r\n                      <div className=\"chat-ta-avatar\" style={{\r\n                        background: `url(${HOST}/image/member/avatar/${chatnow.avatar}) center center / 30px 30px no-repeat`\r\n                      }}></div>\r\n                      <div className=\"chat-ta-nickname\">{chatnow.nickname}</div>\r\n                    </div>\r\n                    <div className=\"chat-msg-target\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"chat-me-wrap\">\r\n                    <div className=\"chat-me\" key=\"1\">\r\n                      <div className=\"chat-me-avatar\" style={{\r\n                        background: `url(${HOST}/image/member/avatar/${chatnow.avatar}) center center / 30px 30px no-repeat`\r\n                      }}></div>\r\n                      <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                    </div>\r\n                    <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                  </div>\r\n                )\r\n              }\r\n            </div>\r\n          ))\r\n        }</div>\r\n        </div>\r\n        <div className=\"chatw-send-wrap\">\r\n          <div className=\"chatw-s-textarea\">\r\n            <div id=\"textarea\"\r\n              ref=\"textarea\"\r\n              // onFocus={this.textareaFocus.bind(this)}\r\n              // onBlur={this.textareaBlur.bind(this)}\r\n              onInput={this.textareaInput.bind(this)}\r\n              contentEditable={!!chatnow}\r\n              suppressContentEditableWarning=\"true\"></div>\r\n          </div>\r\n          <div className=\"chatw-s-sendbox\">\r\n            <div onClick={this.sendMessage.bind(this)} className=\"chatw-s-sendbtn\">发送</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.auth.user,\r\n    chat: state.chat\r\n  }\r\n}\r\n\r\nChatWindow.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  chat: PropTypes.object.isRequired,\r\n  setWaitMessageAction: PropTypes.func.isRequired,\r\n  swingChatWindowAction: PropTypes.func.isRequired\r\n}\r\nexport default connect(mapStateToProps, { swingChatWindowAction, setWaitMessageAction })(ChatWindow)\r\n","/**\r\n * 在 App.js 中判断显示 store 中是否显示聊天功能，购物车点击青蛙显示\r\n * 请求消息记录，显示条数\r\n * 系统消息，用户消息\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport config from '../../utils/config'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport Message from './subpage/Message'\r\nimport Contacts from './subpage/Contacts'\r\nimport Search from './subpage/Search'\r\nimport ChatWindow from './subpage/ChatWindow'\r\n\r\nimport { initContacts } from '../../flux/actions/chatActions'\r\n\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: 'message',  // 显示 message，contacts，search\r\n      message: '',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var chat = document.getElementById('chat')\r\n      var chatMove = document.getElementById('chat-move')\r\n\r\n      chatMove.onmousedown = function(e) {\r\n        var startX = e.clientX\r\n        var startY = e.clientY\r\n        var top = parseInt(window.getComputedStyle(chat)['top'])\r\n        var left = parseInt(window.getComputedStyle(chat)['left'])\r\n        // var X = document.documentElement.clientWidth  // 窗口高宽\r\n        // var Y = document.documentElement.clientHeight\r\n        document.onmousemove = function(e) {\r\n          /**\r\n           * 判断将窗口拖出文档\r\n           */\r\n          chat.style.left = left + (e.clientX - startX) + 'px'\r\n          chat.style.top = top + (e.clientY - startY) + 'px'\r\n        }\r\n\r\n        document.onmouseup = function() {\r\n          // chat.onmousedown = null\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n        }\r\n      }\r\n      document.onmouseleave = function() {\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      document.getElementById('chat-move').onmousedown = null\r\n      document.onmouseleave = null\r\n    }\r\n  }\r\n\r\n  routeChange(route) {\r\n    this.setState({\r\n      route\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (typeof(window) !== 'object') {\r\n      return <div></div>\r\n    }\r\n\r\n    return (\r\n      <div id=\"chat\">\r\n        <div className=\"chat-route\">\r\n          <div id=\"chat-move\" className=\"cr-user-wrap\">\r\n            <div className=\"cr-user-avatar\" style={{\r\n              'background': `url(${HOST}/image/member/avatar/${this.props.auth.user.avatar}) center center / 30px 30px no-repeat`\r\n            }}></div>\r\n           <div className=\"cr-user-name\">{this.props.auth.user.nickname}</div>\r\n          </div>\r\n          <div className=\"cr-routes-wrap\">\r\n            <div onClick={this.routeChange.bind(this, 'message')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'message'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/message.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>消息</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'contacts')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'contacts'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/user.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>联系人</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'search')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'search'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/monitor.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>找人</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-body\">\r\n          <div className=\"chat-body-box\">\r\n            {\r\n              this.state.route === 'message' ? <Message /> :\r\n              this.state.route === 'contacts' ? <Contacts /> :\r\n              this.state.route === 'search' ? <Search /> : null\r\n            }\r\n          </div>\r\n        </div>\r\n        <ChatWindow />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    // chat: state.chat\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  // chat: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, { initContacts })(Chat)\r\n","import React from 'react';\r\nimport {Route, withRouter} from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\n\r\nimport \"./App.scss\"\r\nimport config from './utils/config.js'\r\n// import socket from './utils/socket'\r\n\r\nimport Home from './containers/Home'\r\nimport Register from './containers/Register'\r\nimport Login from './containers/Login'\r\nimport SearchProduct from './containers/SearchProduct'\r\nimport GotoSearchProduct from './containers/SearchProduct/GotoSearchProduct'\r\nimport ProductDetail from './containers/ProductDetail'\r\nimport UserInfo from './containers/UserInfo'\r\nimport Order from './containers/Order'\r\nimport PayOrder from './containers/PayOrder'\r\nimport ShopingCart from './containers/ShopingCart'\r\nimport Chat from './components/Chat'\r\n\r\nimport { setAuthToken, setCurrentUser } from './utils/setAuth'\r\nif (typeof(window) === 'object') {\r\n  // 验证本地 token\r\n  const jwtToken = window.localStorage.jwtToken;\r\n  if (jwtToken) {\r\n    axios.defaults.headers.common[\"Authorization\"] = jwtToken; // 设置请求头 token\r\n    // 验证请求头token\r\n    axios.get(config.HOST + '/api/users/current')\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          setAuthToken(false);\r\n          setCurrentUser({});\r\n        } else {\r\n          // token 验证成功\r\n          setAuthToken(jwtToken);\r\n          setCurrentUser(res.data.payload);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        setAuthToken(false);\r\n        setCurrentUser({});\r\n      });\r\n  }\r\n}\r\n\r\nconst App = (props) => {\r\n  return (\r\n    <div className=\"App\">\r\n      <Route path=\"/\" exact component={Home} />\r\n      <Route path=\"/register\" component={Register} />\r\n      <Route path=\"/login\" component={Login} />\r\n      {/*路径参数变化不会触发组件刷新，此处需要跳转*/}\r\n      <Route path=\"/search_product\" exact component={GotoSearchProduct} />\r\n      <Route path=\"/search_products\" exact component={SearchProduct} />\r\n      <Route path=\"/product_detail\" exact component={ProductDetail} />\r\n      <Route path=\"/member\" component={UserInfo} />\r\n      <Route path=\"/order\" exact component={Order} />\r\n      <Route path=\"/payorder\" exact component={PayOrder} />\r\n      {/*<Redirect to=\"/\" />*/}\r\n      <ShopingCart />\r\n      {\r\n        props.hideChat ? null : <Chat />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n// class App extends Component {\r\n//   render() {\r\n//     return (\r\n//       <div className=\"App\">\r\n//         <Route path=\"/\" exact component={Home} />\r\n//         <Route path=\"/register\" component={Register} />\r\n//         <Route path=\"/login\" component={Login} />\r\n//         {/*路径参数变化不会触发组件刷新，此处需要跳转*/}\r\n//         <Route path=\"/search_product\" exact component={GotoSearchProduct} />\r\n//         <Route path=\"/search_products\" exact component={SearchProduct} />\r\n//         <Route path=\"/product_detail\" exact component={ProductDetail} />\r\n//         <Route path=\"/member\" component={UserInfo} />\r\n//         <Route path=\"/order\" exact component={Order} />\r\n//         <Route path=\"/payorder\" exact component={PayOrder} />\r\n//         {/*<Redirect to=\"/\" />*/}\r\n//         <ShopingCart />\r\n//         {\r\n//           this.props.hideChat ? null : <Chat />\r\n//         }\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    hideChat: state.chat.hideChat\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(App))\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport App from './App';\r\nimport store from './flux/store'\r\n\r\nconst ReactBody = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  )\r\n}\r\n// hydrate\r\nReactDOM.render(<ReactBody />, document.getElementById('react-body'));\r\n"],"sourceRoot":""}