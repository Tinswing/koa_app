{"version":3,"sources":["utils/config.js","components/PrivateRoute/subpage/WaitVerify.js","components/PrivateRoute/index.js","flux/reducers/register.js","utils/validator.js","flux/reducers/authReducer.js","flux/reducers/product.js","flux/reducers/order.js","flux/reducers/chat.js","flux/reducers/messageBox.js","flux/reducers/index.js","flux/store.js","flux/actions/productActions.js","flux/actions/messageAction.js","utils/tools.js","flux/actions/orderActions.js","flux/actions/authActions.js","flux/actions/chatActions.js","utils/socket.js","utils/setAuth.js","components/Header/index.js","containers/Home/subpage/Slide.js","containers/Home/subpage/SmaillType.js","containers/Home/index.js","containers/Register/subpage/step1.js","containers/Register/subpage/step2.js","containers/Register/subpage/step3.js","containers/Register/index.js","containers/Login/subpage/Account.js","containers/Login/subpage/PhoneLogin.js","containers/Login/index.js","components/Goods/SearchProductsList.js","containers/SearchProduct/subpage/SubStore.js","containers/SearchProduct/index.js","containers/SearchProduct/GotoSearchProduct.js","components/StoreHeader/index.js","containers/ProductDetail/subpage/Spec.js","containers/ProductDetail/subpage/ProductInfo.js","containers/ProductDetail/index.js","containers/UserInfo/subpage/Safety.js","containers/UserInfo/subpage/MyInfo.js","containers/UserInfo/subpage/Address.js","components/OrderItem/index.js","components/CommentBox/index.js","containers/UserInfo/subpage/MyOrder.js","containers/UserInfo/index.js","containers/Order/index.js","containers/PayOrder/subpage/PayHeader.js","containers/PayOrder/index.js","containers/ShopingCart/index.js","components/Chat/subpage/Message.js","components/Chat/subpage/Contacts.js","components/Chat/subpage/Search.js","components/Chat/subpage/ChatWindow.js","components/Chat/index.js","components/MessageBox/index.js","components/MessageBox/Confirm.js","components/MessageBox/Loading.js","App.js","index.js"],"names":["config","WaitVerify","props","_react_16_8_5_react_default","a","createElement","className","message","connect","state","isLogin","auth","isVerify","_ref","Component","component","rest","Object","objectWithoutProperties","Route","assign","render","subpage_WaitVerify","Redirect","to","pathname","from","location","initialState","step","phone","isEmpty","value","undefined","keys","length","isPhone","number","test","isLength","opts","min","max","user","address","shopCar","authReducer","arguments","action","type","objectSpread","payload","searchGoods","searchStores","searchKey","productDetail","comments","goodDetail","goodInfo","infoPicture","smaillPicture","productReducer","productDetailInitialState","buyProducts","payOrder","payStatus","myOrders","end","limit","status","waitPay","waitSend","waitSign","waitComment","finish","orders","orderReducer","contacts","messagesNotRead","chatnow","messages","sendingMessages","hideWindow","hideChat","chatReducer","map","i","userId","target","content","concat","toConsumableArray","sender","origin","msg","filter","find","notRead","Array","isArray","newMsg","nickname","avatar","m","n","len","push","newState","here","wait","showAlert","showConfirm","confirmMessage","sure","cancel","messageBoxReducer","rootReducer","combineReducers","register","product","order","chat","messageBox","middleWare","thunk","window","localStore","localStorage","getItem","JSON","parse","err","console","error","composeMiddlewares","applyMiddleware","apply","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","compose","subscribe","HOST","getState","alertMessageAction","dispatch","intMultiplication","b","deci","replace","result","Number","substring","intAdd","deci1","deci2","Math","abs","maxDeci","transPrice","price","formatDate","date","year","d","Date","isNaN","getDay","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","month","days","transSearchKeyword","q","trim","encodeURIComponent","setBuyProductsAction","products","setPayOrderAction","setRouterLocationAction","setAddressAction","initContacts","contactItemToChatAction","item","contactId","WS_HOST","socket","ws","initSocket","token","WebSocket","onopen","e","log","setInterval","send","stringify","onmessage","data","setAuthToken","shopCarInfo","storeId","storeName","j","len2","setShopCarAction","receiveChatMessageAction","onclose","onerror","axios","defaults","headers","common","setItem","removeItem","setCurrentUser","close","AppHeader","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","url","history","hello","Link","userinfo","onClick","loginOut","bind","href","withRouter","slide","slideboxs","slideImg","goodId","bgimg","bgcolor","load","0","1","2","3","4","slideStop","slideIndex","slideInterval","slideTimeout","slideAnimate","assertThisInitialized","gotoSlide","slideStart","_this2","setState","document","getElementsByClassName","style","opacity","clearInterval","clearTimeout","next","before","setAttribute","beforeOpa","nextOpa","interval","setTimeout","zIndex","defineProperty","time","timeout","nowtime","index","currentTarget","getAttribute","_this3","onMouseLeave","key","backgroundColor","src","onMouseOver","_","cnames","slide-nav-selected","SmaillType","smaillType","_id","smaillName","detail","classnames","bigTypeIndex","random","detailName","Home","navTop","bigType","selectedBigid","onBigTypeSelect","CurrentSmaillType","get","then","res","success","catch","bigid","getSmaill","preventDefault","keyword","setSearchKeyAction","_this4","components_Header","onSubmit","searchProduct","onChange","searchInputChange","placeholder","width","height","alt","onBigTypeLeave","nav-l-item-sel","bigName","subpage_SmaillType","Slide","Step1","isCheck","smsCode","sendSMSCode","errors","validator","sendSMS","changeStep","name","sms","post","getPhone","refs","slideBlock","addEventListener","start","screenX","parseInt","getComputedStyle","mousemove","move","left","slideRate","mouseup","removeEventListener","slideCheck","ref","nextStep","Step2","password","password2","debounce","nicknameRepeat","valid","isLegal","callback","response","timer","handler","newUser","getUser","submit","border-err","Step3","users","Register","registerInfo","showStep","exact","path","Account","account","inputChange","info","htmlFor","id","formSubmit","React","PhoneLogin","sms_code","Login","goBack","SearchProductsList","rowlast","logo","nowPrice","goodName","SubStore","stores","detailTypes","nextProps","goods","detailId","storeIds","repeat","jsonStoreIds","smaillId","detailType","crum-selected","SearchProduct","condition","loading","search","queryString","bigId","onscroll","bodyScrollTop","documentScrollTop","body","scrollTop","documentElement","getScrollTop","compatMode","clientHeight","bodyScrollHeight","documentScrollHeight","scrollHeight","getDocumentHeight","group","reduce","prev","count","keywordChangeHandler","searchProductBtnClick","subpage_SubStore","Goods_SearchProductsList","lineHeight","GotoSearchProduct","StoreHeader","onSearchInputChange","storeInfo","background","searchAllProduct","searchStoreProduct","Spec","smaillx","smailly","bigImg","showMustChoice","selectImg","link","allAmount","specChoice","choiceProductDetail","choiceNumber","specConfig","specValueClick","onSmaillMouseOver","newConfig","detailIndex","specNameIndex","specValueIndex","amount","specName","indexx","isOK","choiceNumberChange","buyProduct","goodDetailId","spec","v","specValue","val","addShopCar","show-choice","display","closeMustChoice","value-item-selected","plusNumber","backgroundSize","marginBottom","border","minusNumber","marginTop","marginLeft","buyNow","buy-now-noPost","add-shopcat-noPost","ProductInfo","showDetail","product-info-selected","showDetial","lib_default","offset","creaTime","ProductDetail","setProductDetailAction","src_components_StoreHeader","subpage_Spec","subpage_ProductInfo","Safety","edit","newEmail","newPhone","newPhone2","smsCode1","smsCode2","newPassword","smsCode3","smsState","property","pay","showProperty","btn","innerText","email","emailSubmit","phoneSubmit","_this5","passwordSubmit","_this6","editChange","checkProperty","editInputChange","editEmailSubmit","editPhoneSubmit","editPasswordSubmit","paySubmit","transDate","sending","MyInfo","birthDate","birthMonth","birthYear","reallyName","idCard","gender","years","genderRadioChange","birthChange","diff","userInfo","birth","title","_this$setState","files","size","formData","FormData","append","updateUserInfo","method","avatarChange","hidefocus","reallyNameInputChange","idCardInputChange","checked","defaultValue","day","lastLogin","initState","editState","detailAddress","postcode","receiveName","receivePhone","isDefault","Address","formInputChange","setDefailtChange","saveAddress","cancelEdit","borderColor","textAlign","cellSpacing","cellPadding","default-ads","editStateChange","deleteAddress","memberId","OrderItem","orderno","sumPrice","sellerId","sellerName","sellerAvatar","nav","hasNullArray","postWay","expNumber","isPay","isComment","isSign","isSend","CommentBox","comment","pictures","commentTypeChange","orderDetailId","closeCommentBox","picture","p","indexOf","commentChange","cols","rows","choicePicture","pictureChange","deletePicture","submitComment","Order","showCommentBox","commentOrderDetailId","route","orderDetail","sign","confirmMessageAction","prevPageOrdersAction","prod","productArray","isNullArray","_this$props$myOrders$","routeChangeHandler","uoi-hit","nextPage","u-o-next-void","prevPage","u-o-prev-void","src_components_OrderItem","orderItemOperatorHandler","src_components_CommentBox","UserInfo","mn-navselected","Switch","components_PrivateRoute","MyOrder","choiceAddress","numbers","totalPrice","computeTotal","nums","numberChange","submitOrder","request","goodDetailIds","addressId","shopCarIds","shopCarId","addressChoice","numberMinus","numberPlus","PayOrder","payway","paywayChange","wallet","way","subpage_PayHeader","productName","setPayway","alipayURL","frameBorder","ShopingCart","bodyStatus","navStatus","choiceAll","choiceStores","choiceProducts","onresize","isHide","inter","out","shopCarBody","marginRight","now","shopCarProductsLength","forEach","computeChoice","computeChoiceCount","shopcar-nav-transparent","showNav","hideNav","showCarBody","shop-mab-focus","toggleChat","allCheckboxChange","storeCheckboxChange","productCheckboxChange","deleteShopProduct","cashierShopCar","sc-empty","subMessage","messageNotReadItemToChatAction","messageItemToChatAction","msg-item-select","contactClick","online","offline","isOnline","Search","searchAns","shakeGetAns","stopPropagation","keywordChange","contactsClick","addContactsClick","transMessage","images","match","msgs","split","ChatWindow","hasError","showChatImage","chatImage","scrollToButton","textarea","ondragenter","ondragleave","ondragover","ondrop","file","dataTransfer","setWaitMessageAction","innerHTML","onclick","img","msgNow","msgNext","focus","chatMessageBox","swingChatWindowAction","wss","sendingMessageAction","html","sendMessage","swingChatWindow","dangerouslySetInnerHTML","__html","onInput","textareaInput","contentEditable","suppressContentEditableWarning","onKeyPress","textareaPress","closeChatImage","hide","Chat","getElementById","onmousedown","startX","clientX","startY","clientY","top","onmousemove","onmouseup","onmouseleave","routeChange","crr-select-bg","subpage_Message","subpage_Contacts","subpage_Search","subpage_ChatWindow","MessageBox","box","closeAlertAction","closeConfirmAction","jwtToken","src_containers_ShopingCart","src_components_Chat","src_components_MessageBox","MessageBox_Confirm","ReactDOM","es","BrowserRouter","src_App_0"],"mappings":"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","file":"static/js/main.4e3a8297.chunk.js","sourcesContent":["export default {\r\n //  HOST: 'http://127.0.0.1:5000',\r\n\t// WS_HOST: 'ws://127.0.0.1:5000'\r\n  HOST: 'http://118.126.108.36',\r\n\tWS_HOST: 'ws://118.126.108.36'\r\n}\r\n","import React from 'react'\r\n\r\nimport './index.scss'\r\n\r\nconst WaitVerify = props => (\r\n  <div className=\"wait-verify\">\r\n    <h2>{props.message}</h2>\r\n  </div>\r\n)\r\n\r\nexport default WaitVerify\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport WaitVerify from './subpage/WaitVerify'\r\n\r\nconst PrivateRoute = ({component: Component, isLogin, isVerify, ...rest}) => (\r\n  <Route {...rest} render={(props) => (\r\n      isLogin\r\n      ? <Component {...props} />\r\n      : isVerify  // 本地 token 验证中\r\n      ? <WaitVerify message=\"账号认证中....\" />\r\n      : <Redirect to={{\r\n        pathname: '/login',\r\n        state: {from: props.location} //通过将字符串中Redirect的toprop替换为对象并传递一个state键，该键的值是location用户尝试访问的路径的当前值。\r\n      }} />\r\n    )} />\r\n)\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isLogin: state.auth.isLogin,\r\n    isVerify: state.auth.isVerify\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(PrivateRoute)\r\n","let initialState = {\r\n\tstep: 0,\r\n\tphone: '13888888888'\r\n}\r\nexport default (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase \"STEP_CHANGE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstep: action.step\r\n\t\t\t}\r\n\t\tcase \"GET_PHONE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tphone: action.phone\r\n\t\t\t}\r\n\t\tcase \"NEW_USER\":\r\n\t\t\treturn action.user;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","export const isEmpty = value => {\r\n\treturn value === undefined || value === null ||\r\n\t\t(typeof value === 'object' && Object.keys(value).length === 0) ||\r\n\t\t(typeof value === 'string' && value.length === 0)\r\n}\r\n\r\nexport const isPhone = number => {\r\n\treturn /^1[0-9]{10}$/.test(number);\r\n}\r\n\r\nexport const isLength = (value, opts) => {\r\n\tif (typeof value !== 'string') return false;\r\n\treturn (value.length >= opts.min && value.length <= opts.max)\r\n}\r\n\r\nexport const isEmail = email => {\r\n  return /^[A-z\\d]+([-_.][A-z\\d]+)*@([A-z\\d]+[-.])+[A-z\\d]{2,4}$/.test(email)\r\n}\r\n","import {isEmpty} from '../../utils/validator'\r\n\r\nvar initialState = {\r\n  location: '',  // 记录路由地址\r\n\tisLogin: false,\r\n\tuser: {},\r\n  isVerify: true,  // 账号验证中\r\n  address: [],  // 收货地址\r\n  shopCar: [],  // 购物车\r\n}\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_CURRENT_USER': // 登陆或 App.js 验证 localStorage中 token 时触发\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLogin: !isEmpty(action.payload),\r\n\t\t\t\tuser: !isEmpty(action.payload) ? action.payload : {},\r\n        isVerify: false,  // 设置 auth.isVerifu = false (验证结束)\r\n        // address: action.payload.address || []\r\n\t\t\t}\r\n    case 'SET_ROUTER_LOCATION':\r\n      return {\r\n        ...state,\r\n        location: action.payload\r\n      }\r\n    case 'SET_SHOP_CAR':\r\n      return {\r\n        ...state,\r\n        shopCar:action.payload\r\n      }\r\n    case 'SET_ADDRESS':\r\n      return {\r\n        ...state,\r\n        address: action.payload\r\n      }\r\n    case 'UPDATE_USER_INFO':\r\n      return {\r\n        ...state,\r\n        user: action.payload\r\n      }\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport default authReducer;\r\n","var initialState = {\n  searchGoods: [],\n  searchStores: [],\n  searchKey: '',\n  productDetail: {\n    comments: [],\n    goodDetail: [],\n    goodInfo: {},\n    infoPicture: [],\n    smaillPicture: [{}],\n    message: '加载中。。。'\n  }\n}\n\nvar productReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case 'SET_SEARCH_GOODS':\n      return {\n        ...state,\n        searchGoods: action.payload\n      }\n    case 'SET_SEARCH_STORES':\n      return {\n        ...state,\n        searchStores: action.payload\n      }\n    case 'SET_SEARCH_KEY':\n      return {\n        ...state,\n        searchKey: action.payload\n      }\n    case 'SET_PRODUCT_DETAIL':\n      return {\n        ...state,\n        productDetail: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default productReducer\nexport const productDetailInitialState = initialState","const initialState = {\r\n  buyProducts: [],   // 待购买的商品\r\n  payOrder: {},\r\n  payStatus: 'nosuccess',\r\n  myOrders: { // 我的订单\r\n    end: true,\r\n    limit: 0,\r\n    status: {\r\n      waitPay: 0,\r\n      waitSend: 0,\r\n      waitSign: 0,\r\n      waitComment: 0,\r\n      finish: 0\r\n    },\r\n    orders: []\r\n  }\r\n}\r\n\r\nconst orderReducer = (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n    case 'SET_BUY_PRODUCTS':\r\n      return {\r\n        ...state,\r\n        buyProducts: action.payload\r\n      }\r\n    case 'SET_PAY_ORDER':\r\n      return {\r\n        ...state,\r\n        payOrder: action.payload\r\n      }\r\n    case 'PAY_SUCCESS':\r\n      return {\r\n        ...state,\r\n        payStatus: 'success'\r\n      }\r\n    case 'GET_MY_ORDERS':\r\n      return {\r\n        ...state,\r\n        myOrders: action.payload\r\n      }\r\n    case 'PREV_PAGE_ORDERS':\r\n      return {\r\n        ...state,\r\n        myOrders: {...state.myOrders,\r\n          end: false,\r\n          limit: state.myOrders.limit > 0 ? state.myOrders.limit -1 :state.myOrders.limit\r\n        }\r\n      }\r\n    default:\r\n      return state\r\n\t}\r\n}\r\nexport default orderReducer\r\n","const initialState = {\r\n  contacts: [], // 联系人\r\n  messagesNotRead: [],\r\n  chatnow: undefined,\r\n  messages: [],\r\n  sendingMessages: [/*{\r\n    target: 0,\r\n    message: ''\r\n  }*/],  // 发送中的消息\r\n  hideWindow: true,\r\n  hideChat: true\r\n}\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'SEND_CHAT_MESSAGE_BACK':  // 发送消息回执\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId !== action.payload.target ? i : {\r\n            ...i,\r\n            content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}]\r\n          }\r\n        }),\r\n        sendingMessages: state.sendingMessages.filter(i => i.target !== action.payload.target)\r\n      }\r\n    case 'PUT_SENDING_MESSAGE':\r\n      return {\r\n        ...state,\r\n        sendingMessages: [...state.sendingMessages, {target: state.chatnow, message: action.payload}]\r\n      }\r\n    case 'RECEIVE_CHAT_MESSAGE': // 收到聊天消息\r\n      var origin = state.messagesNotRead.find(i => i.userId === action.payload.origin)\r\n      // 聊天人在未读列表中\r\n      if (origin) {\r\n        return {\r\n          ...state,\r\n          messagesNotRead: state.messagesNotRead.map(i => {\r\n            return i.userId === action.payload.origin ? {\r\n              ...i,\r\n              notRead: i.notRead + 1,\r\n              content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}],\r\n            } : i\r\n          })\r\n        }\r\n      }\r\n      origin = state.messages.find(i => i.userId === action.payload.origin)\r\n       // 聊天对象在已读消息列表中\r\n      if (origin) {\r\n         // 是当前聊天对象\r\n        if (origin.userId === state.chatnow) {\r\n          return {\r\n            ...state,\r\n            messages: state.messages.map(i => {\r\n              return i.userId === action.payload.origin ? {\r\n                ...i,\r\n                content: Array.isArray(i.content) ? i.content.concat([{sender: action.payload.origin, msg: action.payload.content}]) : [{sender: action.payload.origin, msg: action.payload.content}]\r\n              } : i\r\n            })\r\n          }\r\n        }else {\r\n          // 不是当前聊天对象，转移到未读列表中\r\n          var newMsg = [{sender: action.payload.origin, msg: action.payload.content}]\r\n          return {\r\n            ...state,\r\n            messages: state.messages.filter(i => i.userId !== action.payload.origin),\r\n            messagesNotRead: [{\r\n              ...origin,\r\n              content: Array.isArray(origin.content) ? origin.content.concat(newMsg) : newMsg,\r\n              notRead: 1,\r\n            }].concat(state.messagesNotRead)\r\n          }\r\n        }\r\n      }\r\n       // 聊天对象新来的\r\n      return {\r\n        ...state,\r\n        messagesNotRead: [{\r\n          userId: action.payload.origin,\r\n          nickname: action.payload.nickname,\r\n          avatar: action.payload.avatar,\r\n          notRead: 1,\r\n          content: [{sender: action.payload.origin, msg: action.payload.content}]\r\n        }].concat(state.messagesNotRead)\r\n      }\r\n    case 'INIT_CONTACTS':\r\n      var m = [], n = [];\r\n      for (let i = 0, len = action.payload.length; i < len; i++) {\r\n        if (action.payload[i].notRead > 0) {\r\n          n.push(action.payload[i])\r\n        }else {\r\n          m.push(action.payload[i])\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        messagesNotRead: n,\r\n        messages: m\r\n      }\r\n\r\n    case 'MESSAGE_NOT_READ_ITEM_TO_CHAT': // 未读消息到聊天窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        messagesNotRead: state.messagesNotRead.filter(i => i.userId !== action.payload.userId),\r\n        messages: [action.payload].concat(state.messages),\r\n        hideWindow: false\r\n      }\r\n    case 'CONTACT_ITEM_TO_CHAT': // 联系人和找人 item 到聊天窗口\r\n      var newState = {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false,\r\n        hideChat: false,\r\n        messagesNotRead: state.messagesNotRead.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n            if (!here) {\r\n              action.payload.content = i.content\r\n            }\r\n          return here\r\n        }),\r\n        messages: state.messages.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n          if (!here) {\r\n            action.payload.content = i.content\r\n          }\r\n          return here\r\n        })\r\n      }\r\n      // 聊天人已在消息列表中\r\n      if (newState.messagesNotRead.length !== state.messagesNotRead.length || newState.messages.length !== state.messages.length) {\r\n        return {\r\n          ...newState,\r\n          messages: [action.payload].concat(newState.messages)\r\n        }\r\n      }\r\n      // 不在消息列表中\r\n      action.payload.content = []\r\n      return {\r\n        ...newState,\r\n        messages: [action.payload].concat(state.messages)\r\n      }\r\n\r\n    case 'MESSAGE_ITEM_TO_CHAT':  // 已读消息到窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false\r\n      }\r\n    case 'SET_CONTACTS':  // 获得联系人\r\n      return {\r\n        ...state,\r\n        contacts: action.payload\r\n      }\r\n    case 'SET_WAIT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId === state.chatnow ? {...i, wait: action.payload} : i\r\n        })\r\n      }\r\n    case 'TOGGLE_CHAT':\r\n      return {\r\n        ...state,\r\n        hideChat: action.payload\r\n      }\r\n    case 'SWING_CHAT_WINDOW':\r\n      return {\r\n        ...state,\r\n        hideWindow: action.payload\r\n      }\r\n    case 'LOGIN_OUT_CHAT':\r\n      return initialState\r\n    default:\r\n      return state\r\n  }\r\n}\r\nexport default chatReducer\r\n","const initialState = {\r\n  showAlert: false,  // 消息框\r\n  message: '',\r\n  showConfirm: false, // 确认框\r\n  confirmMessage: '',\r\n  sure: null,  // 确认函数\r\n  cancel: null  // 取消函数\r\n}\r\n\r\nconst messageBoxReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'ALERT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showAlert: true,\r\n        message: action.payload\r\n      }\r\n    case 'CLOSE_ALERT':\r\n      return {\r\n        ...state,\r\n        showAlert: false,\r\n        message: ''\r\n      }\r\n    case 'CONFIRM_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showConfirm: true,\r\n        confirmMessage: action.payload.message || '',\r\n        sure: action.payload.sure || null,\r\n        cancel: action.payload.cancel || null\r\n      }\r\n    case 'CLOSE_CONFIRM':\r\n      return {\r\n        ...state,\r\n        showConfirm: false,\r\n        confirmMessage: '',\r\n        sure: null,\r\n        cancel: null\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default messageBoxReducer\r\n","/**\r\n * 合并多个 reducer 成一个大的reducer\r\n */\r\n\r\nimport {combineReducers} from 'redux'\r\n\r\nimport register from './register'\r\nimport auth from './authReducer'\r\nimport product from './product'\r\nimport order from './order'\r\nimport chat from './chat'\r\nimport messageBox from './messageBox'\r\n\r\nlet rootReducer = combineReducers({\r\n\tregister,\r\n\tauth,\r\n  product,\r\n  order,\r\n  chat,\r\n  messageBox\r\n});\r\nexport default rootReducer;\r\n","import {createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducers/index.js'\r\n\r\nlet middleWare = [thunk];\r\nlet initialState = {};\r\n// 从本地储存获取 store 初始状态\r\nif (typeof(window) === 'object') {\r\n  var localStore = window.localStorage.getItem('localStoreState')\r\n  if (localStore) {\r\n    try {\r\n      initialState = JSON.parse(localStore)\r\n    }catch(err) {\r\n      console.error(err)\r\n    }\r\n  }\r\n}\r\n\r\n// 需要合并的中间件\r\nlet composeMiddlewares = [applyMiddleware(...middleWare),];\r\n//激活 chrome 浏览器 redux 插件\r\nif (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\r\n\tcomposeMiddlewares.push(window.__REDUX_DEVTOOLS_EXTENSION__())\r\n}\r\nconst store = createStore(rootReducer, initialState, compose(...composeMiddlewares));\r\n\r\n// 订阅更新函数，每次状态更新都会执行\r\nstore.subscribe(() => {\r\n  // if (typeof(window) !== 'object') return;\r\n  // var state = store.getState()\r\n  // window.localStorage.setItem('localStoreState', JSON.stringify({\r\n  //   order: state.order,\r\n  //   // auth: state.auth\r\n  // }))\r\n})\r\n\r\nexport default store;\r\n","import store from '../store'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\nimport { productDetailInitialState } from '../reducers/product.js'\r\n\r\nconst HOST = config.HOST\r\nconst state = store.getState()\r\n\r\n// 搜索的 goods\r\nexport const setSearchGoodsAction = goods => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_GOODS',\r\n    payload: goods\r\n  })\r\n}\r\n\r\n// 设置搜索的 Store\r\nexport const setSearchStoresAction = stores => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_STORES',\r\n    payload: stores\r\n  })\r\n}\r\n\r\n// 设置搜索关键字\r\nexport const setSearchKeyAction = searchKey => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SEARCH_KEY',\r\n    payload: searchKey\r\n  })\r\n}\r\n\r\n// 设置商品详情页数据\r\nexport const setProductDetailAction = goodId => dispatch => {\r\n  // if (state.product.productDetail._id === goodId) return;\r\n  if (goodId === -1) {\r\n    // 清空数据\r\n    dispatch({\r\n      type: 'SET_PRODUCT_DETAIL',\r\n      payload: productDetailInitialState\r\n    })\r\n  }\r\n  axios.get(`${HOST}/api/goods/product_detail?goodId=${goodId}`)\r\n    .then(res => {\r\n      if (res.data.success) {\r\n        dispatch({\r\n          type: 'SET_PRODUCT_DETAIL',\r\n          payload: res.data.payload\r\n        })\r\n      }else {\r\n        dispatch({\r\n          type: 'SET_PRODUCT_DETAIL',\r\n          payload: { ...state.product.productDetail, message: res.data.message, error: '' }\r\n        })\r\n      }\r\n    })\r\n    .catch(err => {\r\n      dispatch({\r\n        type: 'SET_PRODUCT_DETAIL',\r\n        payload: { ...state.product.productDetail, error: err.message, message: '' }\r\n      })\r\n    })\r\n}\r\n","// 弹出消息框\r\nexport const alertMessageAction = message => dispatch => {\r\n  dispatch({\r\n    type: 'ALERT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\nexport const closeAlertAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_ALERT'\r\n  })\r\n}\r\n\r\n// 弹出确认框\r\nexport const confirmMessageAction = (message, sure, cancel) => dispatch => {\r\n  dispatch({\r\n    type: 'CONFIRM_MESSAGE',\r\n    payload: { message, sure, cancel }\r\n  })\r\n}\r\n\r\nexport const closeConfirmAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_CONFIRM'\r\n  })\r\n}\r\n","// 将两个数转换成整数相乘\r\nexport const intMultiplication = function (a, b) {\r\n  a = a+''\r\n  b = b+''\r\n  var deci = 0  // 2个操作数的小数位数\r\n  // 判断是否小数\r\n  if (/^\\d+\\.\\d+$/.test(a)) {\r\n    deci += a.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    a = a.replace('.', '')\r\n  }\r\n  if (/^\\d+\\.\\d+$/.test(b)) {\r\n    deci += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    b = b.replace('.', '')\r\n  }\r\n  var result = (Number(a) * Number(b)) + ''\r\n  return deci > 0 ? result.substring(0, result.length - deci) + '.' + result.substring(result.length - deci) : result\r\n}\r\n\r\n// 将两个数转换成整数相加\r\nexport const intAdd = function (a, b) {\r\n  a = a + ''\r\n  b = b + ''\r\n  var deci1 = 0;\r\n  var deci2 = 0;\r\n  if (/^\\d+\\.\\d+$/.test(a)) {\r\n    deci1 = a.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    a = a.replace('.', '')\r\n  }\r\n  if (/^\\d+\\.\\d+$/.test(b)) {\r\n    deci2 += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\r\n    b = b.replace('.', '')\r\n  }\r\n  if (deci1 !== deci2) {\r\n    for (var i = 0, len = Math.abs(deci1 - deci2); i < len; i++) {\r\n      if (deci1 < deci2) {\r\n        a += '0'\r\n      }else {\r\n        b += '0'\r\n      }\r\n    }\r\n  }\r\n  var result = Number(a) + Number(b) + ''\r\n  var maxDeci = Math.max(deci1, deci2)\r\n  return maxDeci !== 0 ? result.substring(0, result.length - maxDeci) + '.' + result.substring(result.length - maxDeci) : result\r\n}\r\n\r\nexport const transPrice = function (price) {\r\n  return /^\\d+$/.test(price) ? price + '.00' :  // 没有小数\r\n  /^\\d+\\.\\d$/.test(price) ? price + '0' : price  // 一位小数\r\n}\r\n\r\nexport const formatDate = function(date, year) {\r\n  const d = new Date(date)\r\n  if (Number.isNaN(d.getDay())) {\r\n    return ''\r\n  }\r\n  var format = year ? d.getFullYear() + '-' : ''\r\n\r\n  return (format + (d.getMonth() + 1) + '-' +\r\n    d.getDate() + ' ' +\r\n    d.getHours() + ':' +\r\n    d.getMinutes() + ':' +\r\n    d.getSeconds())\r\n}\r\n\r\nexport const getDate = function(year, month) {\r\n  if (!/^(19|20)\\d{2}$/.test(year) || !/^([1-9]|1[012])$/.test(month)) return null\r\n  var date = new Date(year, month, 0).getDate()\r\n  var days = []\r\n  for (var i = 1; i <= date; i++) {\r\n    days.push(i)\r\n  }\r\n  return days;\r\n}\r\n\r\nexport const transSearchKeyword = (q) => {\r\n  if (typeof(q) !== 'string') return null\r\n  q = q.trim()\r\n  if (q === '') return null\r\n  return encodeURIComponent(q.replace(/([ ,.|]+)/g, '+'))\r\n}\r\n","import store from '../store'\r\n/**\r\n * 订单 Action\r\n */\r\nexport const setBuyProductsAction = products => dispatch => {\r\n  dispatch({\r\n    type: 'SET_BUY_PRODUCTS',\r\n    payload: products\r\n  })\r\n}\r\n\r\n/**\r\n * 付款页面信息\r\n */\r\nexport const setPayOrderAction = payOrder => dispatch => {\r\n  dispatch({\r\n    type: 'SET_PAY_ORDER',\r\n    payload: payOrder\r\n  })\r\n}\r\n/**\r\n * 付款成功\r\n */\r\nexport const payOrderSuccessAction = orderno => {\r\n  store.dispatch({\r\n    type: 'PAY_SUCCESS'\r\n  })\r\n}\r\n\r\nexport const getMyOrdersAction = myOrders => {\r\n  store.dispatch({\r\n    type: 'GET_MY_ORDERS',\r\n    payload: myOrders\r\n  })\r\n}\r\n\r\nexport const prevPageOrdersAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'PREV_PAGE_ORDERS'\r\n  })\r\n}\r\n","import store from '../store'\r\n\r\nexport const setRouterLocationAction = location => dispatch => {\r\n  dispatch({\r\n    type: 'SET_ROUTER_LOCATION',\r\n    payload: location\r\n  })\r\n}\r\n\r\nexport const setShopCarAction = shopCarInfo => {\r\n  if (!Array.isArray(shopCarInfo)) return;\r\n  // 将商品按 店铺进行分组\r\n  let shopCar = []\r\n  if (shopCarInfo.length > 0) {\r\n    shopCar[0] = {\r\n      storeId: shopCarInfo[0].product.storeId,\r\n      storeName: shopCarInfo[0].product.storeName,\r\n      products: [shopCarInfo[0]]\r\n    }\r\n    for (let i = 1, len = shopCarInfo.length; i < len; i++) {\r\n      for (let j = 0, len2 = shopCar.length; j < len2; j++) {\r\n        if (shopCarInfo[i].product.storeId === shopCar[j].storeId) {\r\n          shopCar[j].products.push(shopCarInfo[i])\r\n          break\r\n        }\r\n        if (j === len2-1) {\r\n          shopCar.push({\r\n            storeId: shopCarInfo[i].product.storeId,\r\n            storeName: shopCarInfo[i].product.storeName,\r\n            products: [shopCarInfo[i]]\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  store.dispatch({\r\n    type: 'SET_SHOP_CAR',\r\n    payload: shopCar\r\n  })\r\n}\r\n\r\n// 获取收货地址\r\nexport const setAddressAction = address => {\r\n  if (!Array.isArray(address)) return;\r\n  store.dispatch({\r\n    type: 'SET_ADDRESS',\r\n    payload: address\r\n  })\r\n}\r\n\r\nexport const updateUserInfo = userInfo => dispatch => {\r\n  dispatch({\r\n    type: 'UPDATE_USER_INFO',\r\n    payload: userInfo\r\n  })\r\n}\r\n","import store from '../store'\r\nimport socket from '../../utils/socket'\r\n\r\nexport const toggleChatAction = state => { // 隐藏或显示聊天窗口\r\n  store.dispatch({\r\n    type: 'TOGGLE_CHAT',\r\n    payload: state\r\n  })\r\n}\r\n\r\nexport const initContacts = messages => {\r\n  store.dispatch({\r\n    type: 'INIT_CONTACTS',\r\n    payload: messages\r\n  })\r\n}\r\n\r\n// 点击未读消息展示到聊天框\r\nexport const messageNotReadItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({ // 设置消息已读\r\n        type: 'msg_be_read',\r\n        content: item.userId\r\n      }))\r\n    }\r\n    dispatch({\r\n      type: 'MESSAGE_NOT_READ_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\nexport const sendingMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'PUT_SENDING_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 点击已读消息展示到聊天框\r\nexport const messageItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    dispatch({\r\n      type: 'MESSAGE_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\n// 点击联系人和找人 item 到聊天框\r\nexport const contactItemToChatAction = item => {\r\n  item = {...item, userId: item.userId || item.contactId}\r\n  var chat = store.getState().chat\r\n  if (chat.chatnow === item.userId && !chat.hideChat) return;\r\n\r\n  store.dispatch({\r\n    type: 'CONTACT_ITEM_TO_CHAT',\r\n    payload: item\r\n  })\r\n}\r\n\r\nexport const swingChatWindowAction = hide => dispatch => {\r\n  dispatch({\r\n    type: 'SWING_CHAT_WINDOW',\r\n    payload: hide\r\n  })\r\n}\r\n\r\nexport const setWaitMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'SET_WAIT_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 发送消息后回执\r\nexport const sendChatMessageBackAction = message => {\r\n  store.dispatch({\r\n    type: 'SEND_CHAT_MESSAGE_BACK',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到聊天消息\r\nexport const receiveChatMessageAction = message => {\r\n  if (message.origin === store.getState().chat.chatnow && socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'msg_be_read',\r\n      content: message.origin\r\n    }))\r\n  }\r\n  store.dispatch({\r\n    type: 'RECEIVE_CHAT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到联系人列表\r\nexport const getContactsAction = contacts => {\r\n  store.dispatch({\r\n    type: 'SET_CONTACTS',\r\n    payload: contacts\r\n  })\r\n}\r\n","import { setAuthToken } from './setAuth'\r\nimport {\r\n  payOrderSuccessAction,\r\n  getMyOrdersAction\r\n} from '../flux/actions/orderActions'\r\nimport {\r\n  setShopCarAction,\r\n  setAddressAction\r\n} from '../flux/actions/authActions'\r\nimport {\r\n  // setWaitMessageAction,\r\n  sendChatMessageBackAction,\r\n  receiveChatMessageAction,\r\n  getContactsAction,\r\n  initContacts\r\n} from '../flux/actions/chatActions'\r\nimport config from './config'\r\n\r\nconst WS_HOST = config.WS_HOST\r\n\r\nconst socket = {\r\n  status: 'close',\r\n  ws: null,\r\n  initSocket: function (token) {\r\n    if (typeof(window) !== 'object' || !token) return;\r\n    const ws = new WebSocket(`${WS_HOST}?token=${token}`)\r\n\r\n    ws.onopen = function(e) {\r\n      console.log('socket open')\r\n      socket.status = 'open'\r\n      setInterval(function() {  // 设置定时器更新 token\r\n        if (socket.status !== 'open') { return }\r\n        ws.send(JSON.stringify({\r\n          type: 'transToken',\r\n          target: 'koa'\r\n        }))\r\n      }, 1000*60*15)\r\n      ws.send('{\"type\":\"get_shop_cat\"}') // 获取购物车信息\r\n      ws.send('{\"type\":\"init_chat_messages\"}') // 获取聊天信息\r\n    }\r\n\r\n    ws.onmessage = function(e) {\r\n      var msg = e.data\r\n      try {\r\n        msg = JSON.parse(msg)\r\n      }catch(err) {\r\n        return\r\n      }\r\n      switch(msg.type) {\r\n        case 'transToken':\r\n          return setAuthToken(msg.content)\r\n\r\n        case 'payOrderSuccess':  // 付款成功服务端消息\r\n          return payOrderSuccessAction(msg.content)\r\n\r\n        case 'get_shop_cat':  // 获取购物车信息\r\n          return setShopCarAction(msg.content)\r\n\r\n        case 'send_chat_message':  // 发送消息后回执\r\n          return sendChatMessageBackAction(msg)\r\n\r\n        case 'init_chat_messages':  // 初始化聊天信息\r\n          return initContacts(msg.content)\r\n\r\n        case 'receive_chat_message':  // 收到聊天消息\r\n          return receiveChatMessageAction(msg)\r\n\r\n        case 'get_contacts': // 收到联系人列表信息\r\n          return getContactsAction(msg.content)\r\n\r\n        case 'get_address':\r\n          return setAddressAction(msg.content)\r\n        case 'get_orders':\r\n          return getMyOrdersAction(msg.content)\r\n        default:\r\n          return\r\n      }\r\n    }\r\n\r\n    ws.onclose = function(e) {\r\n      console.log('socket close!')\r\n      socket.status = 'close'\r\n    }\r\n\r\n    ws.onerror = function(e) {\r\n      console.error('socket error', e)\r\n    }\r\n\r\n    socket.ws = ws\r\n  }\r\n}\r\n\r\nexport default socket\r\n","import axios from 'axios'\r\nimport store from '../flux/store'\r\nimport socket from './socket'\r\nimport { isEmpty } from '../utils/validator'\r\n\r\nexport const setAuthToken = token => {\r\n\tif (token) {\r\n\t\t// 让每个请求头携带 token\r\n\t\taxios.defaults.headers.common[\"Authorization\"] = token;\r\n\t\t // 添加localStorage 储存token\r\n\t\twindow.localStorage.setItem(\"jwtToken\", token);\r\n    // 初始化 websocket\r\n    if (socket.status === 'close') {\r\n      socket.initSocket(token)\r\n    }\r\n\t} else {\r\n\t\t// 删除请求头 token\r\n\t\tdelete axios.defaults.headers.common[\"Authorization\"];\r\n\t\t// 删除localStorage储存的 token\r\n    window.localStorage.removeItem(\"jwtToken\");\r\n\t\t// window.localStorage.clear();\r\n\t}\r\n}\r\n\r\nexport const setCurrentUser = user => {\r\n  if (isEmpty(user)) {\r\n    if (socket.status === 'open') {\r\n      socket.ws.close()\r\n    }\r\n    store.dispatch({ type: 'LOGIN_OUT_CHAT' })\r\n  }\r\n\tstore.dispatch({\r\n\t\ttype: 'SET_CURRENT_USER',\r\n\t\tpayload: user\r\n\t})\r\n}\r\n\r\n","import React, {Component} from 'react'\r\nimport {Link, withRouter} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport { setAuthToken, setCurrentUser } from '../../utils/setAuth'\r\nclass AppHeader extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\r\n\t\t}\r\n\t}\r\n\t// 退出\r\n\tloginOut() {\r\n    var url = this.props.location.pathname\r\n    if (/^\\/member/.test(url) || /^\\/order/.test(url) || /^\\/payorder/.test(url)) {\r\n      this.props.history.push('/')  // 跳转到主页\r\n    }\r\n\t\tsetAuthToken(false); // axios token 头清除，localStorage token清除\r\n\t\tsetCurrentUser({}); // dispatch 当前空用户\r\n\t}\r\n\trender() {\r\n\t\tconst auth = this.props.auth;\r\n\t\tconst hello = (<ul className=\"ul-l\">\r\n\t\t\t\t\t\t<li>哈，欢迎来到优选</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/login\">请登录</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/register\">免费注册</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>)\r\n\t\tconst userinfo = (<ul className=\"ul-l\">\r\n\t\t\t\t\t\t<li>Hi，<Link to=\"/member\">{auth.user.nickname}</Link></li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a onClick={this.loginOut.bind(this)} href=\"javascript:void(0)\">退出</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>)\r\n\t\treturn (\r\n\t\t\t<div className=\"app-header-wrap\">\r\n\t\t\t\t<div className=\"app-header\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauth.isLogin ?\r\n\t\t\t\t\t\tuserinfo :\r\n\t\t\t\t\t\thello\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<ul className=\"ul-r\">\r\n            <li><Link to=\"/\">优选首页</Link></li>\r\n\t\t\t\t\t\t<li className=\"h-my\">\r\n              <Link to=\"/member\">我的优选</Link>\r\n              <div className=\"h-my-choi\">\r\n                <div><Link to=\"/member/safety\">安全设置</Link></div>\r\n                <div><Link to=\"/member\">个人资料</Link></div>\r\n                <div><Link to=\"/member/myorder\">我的订单</Link></div>\r\n                <div><Link to=\"/member/address\">收货地址</Link></div>\r\n              </div>\r\n            </li>\r\n\t\t\t\t\t\t<li>商家支持</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAppHeader.propTypes = {\r\n\tauth: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default withRouter(connect(mapStateToProps, null)(AppHeader))\r\n","/**\r\n * 轮播图组件\r\n */\r\nimport React,{Component} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport cnames from 'classnames'\r\nimport LazyLoad from 'react-lazyload'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass slide extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tslideboxs: null,\r\n\t\t\t// 轮播图图片\r\n\t\t\tslideImg: [\r\n        {goodId: 43, bgimg: '/image/slide_wall/TB1fxrzI3HqK1RjSZFkSut.WFXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 45, bgimg: '/image/slide_wall/TB1FmwTvHZnBKNjSZFGSuvt3FXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 48, bgimg: '/image/slide_wall/O1CN01Tms3Pn1D7tpGbFK5a_!!170-0-luban.jpg_q100.jpg_.webp', bgcolor: '#CA1124', load: false},\r\n\t\t\t\t{goodId: 49, bgimg: '/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg', bgcolor: '#584BFB'},\r\n\t\t\t\t{goodId: 42, bgimg: '/image/slide_wall/TB13jplKCzqK1RjSZFHwu23CpXa.png', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 50, bgimg: '/image/slide_wall/TB10lfQxpzqK1RjSZSgSuwpAVXa.jpg', bgcolor: '#E9EAEC'}\r\n\t\t\t],\r\n      load: {0: true, 1: false, 2: false, 3: false, 4: false, length: 5},\r\n\t\t\tslideStop: false,  // 是否停止轮播图\r\n\t\t\tslideIndex: 0,  // 轮播图索引\r\n\t\t\tslideInterval: -1,  // 主定时器\r\n      slideTimeout: -1\r\n\t\t}\r\n\t\tthis.slideAnimate = this.slideAnimate.bind(this);\r\n\t\tthis.gotoSlide = this.gotoSlide().bind(this);\r\n\t\tthis.slideStart = this.slideStart.bind(this);\r\n\t\tthis.slideStop = this.slideStop.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n    if (typeof window !== 'object') return;\r\n\t\t// 组件挂载完毕,获取轮播图组件，开启轮播图\r\n\t\tthis.setState({\r\n\t\t\tslideboxs: window.document.getElementsByClassName(\"slide-img-box\")\r\n\t\t}, () => {\r\n\t\t\tthis.state.slideboxs[this.state.slideIndex].style.opacity = 1;\r\n\t\t\tvar _this = this;\r\n\t\t\tvar slideInterval = window.setInterval(function(){\r\n\t\t\t\tif (!_this.state.slideStop)\r\n\t\t\t\t\t_this.slideAnimate();\r\n\t\t\t}, 5000);\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideInterval\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t// 组件卸载\r\n\tcomponentWillUnmount() {\r\n    if (typeof window !== 'object') return;\r\n      // 清除轮播图主定时器\r\n    window.clearInterval(this.state.slideInterval);\r\n    window.clearTimeout(this.state.slideTimeout);\r\n\t}\r\n\t// 动画切换函数，before 消失，next 显示\r\n\tslideAnimate(next) {\r\n\t\tvar before = this.state.slideIndex;\r\n\t\tif (next === undefined) {next = ((before + 1) % this.state.slideboxs.length)};\r\n    if (!this.state.load[next]) { // 延时加载轮播图片\r\n      this.state.slideboxs[next].getElementsByClassName('slide-img-box-i')[0].setAttribute('src', HOST + this.state.slideImg[next].bgimg)\r\n    }\r\n\t\tvar _this = this;\r\n\t\tvar slideboxs = this.state.slideboxs;\r\n\t\tvar beforeOpa = 1,nextOpa = 0;\r\n\t\t// 开始动画\r\n\t\tvar interval = window.setInterval(function() {\r\n\t\t\tbeforeOpa -= 0.2; nextOpa += 0.2;\r\n      // 组件卸载后定时器未及时清除\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = beforeOpa;\r\n        slideboxs[next].style.opacity = nextOpa;\r\n      }\r\n\t\t}, 50);\r\n\t\t// 停止动画，完成转换\r\n\t\tvar slideTimeout = window.setTimeout(function() {\r\n\t\t\twindow.clearInterval(interval);\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = 0;\r\n        slideboxs[next].style.opacity = 1;\r\n        slideboxs[before].style.zIndex = -1;\r\n        slideboxs[next].style.zIndex = 5;\r\n      }\r\n\t\t\t// 更新显示索引\r\n      _this.setState({\r\n        slideIndex: next,\r\n        slideTimeout: slideTimeout,\r\n        load: {..._this.state.load, [next]: true}\r\n      });\r\n\t\t}, 200);\r\n\t}\r\n\t// 切换动画索引\r\n\tgotoSlide() {\r\n\t\tvar time = 0,timeout = null;\r\n\t\treturn function (e) {\r\n\t\t\twindow.clearTimeout(timeout);\r\n\t\t\t// this.slideStop();\r\n\t\t\tvar nowtime = new Date();\r\n\t\t\tvar _this = this;\r\n\t\t\tvar index = Number(e.currentTarget.getAttribute('index'));\r\n\t\t\tif (nowtime - time > 500) {\r\n\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\ttime = nowtime;\r\n\t\t\t}else {\r\n\t\t\t\ttimeout = window.setTimeout(function(){\r\n\t\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\t\ttime = nowtime;\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\t// 停止动画\r\n\tslideStop(){\r\n\t\tif (!this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t// 开启动画\r\n\tslideStart() {\r\n\t\tif (this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tvar slideImg = this.state.slideImg;\r\n\t\treturn(\r\n\t\t<div className=\"nav-slide-wrap\" onMouseLeave={this.slideStart}>\r\n\t\t{/*轮播图图片*/}\r\n\t\t{\r\n\t\t\tslideImg.map((item,i) => (\r\n\t\t\t\t<div key={i} className=\"slide-img-box\" style={{backgroundColor: item.bgcolor}}>\r\n          <Link to={`/product_detail?goodId=${item.goodId}`}>\r\n              <img className=\"slide-img-box-i\" src={i === 0 ? `${HOST}${item.bgimg}` : null}\r\n              onMouseOver={this.slideStop}\r\n              ></img>\r\n          </Link>\r\n\t\t\t\t</div>\r\n\t\t\t))\r\n\t\t}\r\n\t\t\t{/*小按钮*/}\r\n\t\t\t<ul className=\"slide-nav\">\r\n\t\t\t{\r\n\t\t\t\tslideImg.map((_, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={index}\r\n\t\t\t\t\t\t\tclassName={cnames(\"slide-nav-item\",{\r\n\t\t\t\t\t\t\t\t'slide-nav-selected': index === this.state.slideIndex\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\tonMouseOver={this.gotoSlide}\r\n\t\t\t\t\t\t></li>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n\t}\r\n}\r\n\r\nexport default slide\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport classnames from 'classnames'\r\n\r\nfunction SmaillType(props) {\r\n\tvar smaillType = props.smaillType || [];\r\n\treturn (\r\n\t\t<div className=\"smaillType\">\r\n\t\t{\r\n\t\t\tsmaillType.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item._id} className=\"smaill-item\">\r\n\t\t\t\t\t\t<div className=\"smaill-item-title\">{item.smaillName}</div>\r\n\t\t\t\t\t\t<div className=\"smaill-detail\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.detail.map(detail => {\r\n\t\t\t\t\t\t\t\treturn (<div className=\"sd-item\" key={detail._id}>\r\n                  <Link className={classnames({\r\n                    [`color${props.bigTypeIndex}`]: Math.random() > 0.75\r\n                  })} to={`/search_products?detailId=${detail._id}`}>{detail.detailName}</Link>\r\n                </div>)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SmaillType;\r\n","import React, {Component} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport cnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { setSearchKeyAction } from '../../flux/actions/productActions'\r\nimport { alertMessageAction } from '../../flux/actions/messageAction'\r\n// import { setRouterLocationAction } from '../../flux/actions/authActions'\r\n\r\nimport './home.scss'\r\nimport config from '../../utils/config.js'\r\nimport { transSearchKeyword } from '../../utils/tools'\r\nimport AppHeader from '../../components/Header'\r\nimport Slide from './subpage/Slide'\r\nimport SmaillType from './subpage/SmaillType'\r\n\r\nclass Home extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tnavTop: ['超市', '会员', '电器城', '鲜生', '医药馆', '营业厅', '旅行', '图书'],\r\n\t\t\t// 大分类信息\r\n\t\t\tbigType:[],\r\n\t\t\tselectedBigid: -1, // -1 不展示，其他为 bigType的 id\r\n      bigTypeIndex: -1,\r\n      searchKey: ''\r\n\t\t}\r\n\t\tthis.onBigTypeSelect = this.onBigTypeSelect.bind(this);\r\n\t\tthis.CurrentSmaillType = this.CurrentSmaillType.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n    // this.props.setRouterLocationAction('/')\r\n    if (typeof(window) === 'object') {  // 从本地储存取出\r\n      var bigType = localStorage.getItem('productType')\r\n      if (bigType) {\r\n        try {\r\n          bigType = JSON.parse(bigType)\r\n          return this.setState({\r\n            bigType\r\n          })\r\n        }catch(err) {\r\n          console.error('bigType', err)\r\n        }\r\n      }\r\n    }\r\n\t\t// 获取大分类表中数据\r\n\t\taxios.get(config.HOST + '/api/goods/type?type=big&limit=16')\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn console.error('商品分类列表获取失败');\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbigType: res.data.payload\r\n\t\t\t\t}, () => {\r\n          if (typeof(window) === 'object') {\r\n            localStorage.setItem('productType', JSON.stringify(res.data.payload))\r\n          }\r\n        });\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n        if (typeof(window) === 'object')\r\n\t\t\t\t  console.error(err);\r\n\t\t\t});\r\n\t}\r\n\r\n\t// 设置或获取 state的bigType 的 smaillType\r\n\tCurrentSmaillType(bigid, smaillType, getSmaill = false) {\r\n\t\tvar bigType = this.state.bigType\r\n\t\tif (bigType.length === 0) return;\r\n\t\tfor (var i = 0,len = bigType.length; i < len; i++) {\r\n\t\t\tif (bigType[i]._id === bigid) {\r\n\t\t\t\t// 获取smaillType\r\n\t\t\t\tif (getSmaill) {\r\n\t\t\t\t\treturn bigType[i].smaillType\r\n\t\t\t\t}\r\n        // 存储到本地储存中\r\n        if (typeof(window) === 'object' && !bigType[i].smaillType) {\r\n          bigType[i].smaillType = smaillType\r\n          localStorage.setItem('productType', JSON.stringify(this.state.bigType))\r\n        }else {\r\n          bigType[i].smaillType = smaillType\r\n        }\r\n\t\t\t\t// 设置 smaillType\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbigType: bigType\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n  // 获取小分类表\r\n\tonBigTypeSelect(e) {\r\n\t\t// showsmaill => true\r\n    var target = e.currentTarget\r\n\t\tvar bigid = Number(target.getAttribute('bigid'));\r\n    var index = target.getAttribute('index')\r\n\t\tthis.setState({\r\n\t\t\tselectedBigid: bigid,\r\n      bigTypeIndex: index\r\n\t\t}, () => {\r\n      var bigType = this.state.bigType.find(i => i._id === bigid)\r\n      if (Array.isArray(bigType.smaillType)) return; // 小分类已存在\r\n\r\n      axios.get(config.HOST + '/api/goods/type?type=smaill&bigid=' + bigid)\r\n        .then(res => {\r\n          if (!res.data.success) return;\r\n          this.CurrentSmaillType(bigid, res.data.payload);\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        })\r\n    })\r\n\t}\r\n\r\n\tonBigTypeLeave(){\r\n\t\tthis.setState({selectedBigid: -1});\r\n\t}\r\n  searchInputChange(e) {\r\n    this.setState({\r\n      searchKey: e.target.value\r\n    })\r\n  }\r\n  searchProduct(e) {\r\n    e.preventDefault();\r\n    var keyword = transSearchKeyword(this.state.searchKey)\r\n    if (!keyword) {\r\n      return this.props.alertMessageAction('请输入搜索的内容')\r\n    }\r\n    this.props.setSearchKeyAction(this.state.searchKey)\r\n    this.props.history.push(`/search_product?q=${keyword}&limit1=0&limit2=50`)\r\n  }\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<AppHeader />\r\n\t\t\t\t<div className=\"headerCon\">\r\n\t\t\t\t\t<form onSubmit={this.searchProduct.bind(this)}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName=\"search-text\"\r\n              value={this.state.searchKey}\r\n              onChange={this.searchInputChange.bind(this)}\r\n\t\t\t\t\t\t\tplaceholder=\"搜索 优选 商品/品牌/店铺\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"search-btn\">搜索</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<ul className=\"hot-query\">\r\n\t\t\t\t\t{/*搜索框下面展示*/}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.navTop.map((item,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\">{item}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"main-nav\">\r\n\t\t\t\t\t<ul className=\"nav-t-wrap\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.navTop.map((item, i) => {\r\n\t\t\t\t\t\t\t\treturn (<li key={i}>{item}</li>)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{/*商品主分类*/}\r\n\t\t\t\t\t<div className=\"nav-l-box\">\r\n\t\t\t\t\t\t<div className=\"main-logo-wrap\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<a href={config.HOST}>\r\n\t\t\t\t\t\t\t\t\t<img width=\"240px\" height=\"130px\" src={config.HOST + \"/image/ui/home_logo.png\"} alt=\"优选\"/>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"nav-l-wrap\" onMouseLeave={this.onBigTypeLeave.bind(this)}>\r\n\t\t\t\t\t\t\t<div className=\"nav-l-title\">商品分类</div>\r\n\t\t\t\t\t\t\t<div className=\"nav-l-typewrap\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.bigType.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tkey={item._id}\r\n\t\t\t\t\t\t\t\t\t\tclassName={cnames(`nav-l-item`, {\r\n\t\t\t\t\t\t\t\t\t\t\t'nav-l-item-sel': this.state.selectedBigid===item._id,\r\n                      [`color${index}`]: this.state.selectedBigid===item._id,\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\tbigid={item._id}\r\n                    index={index}\r\n\t\t\t\t\t\t\t\t\t\tonMouseOver={this.onBigTypeSelect}\r\n\t\t\t\t\t\t\t\t\t>{item.bigName}</div>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.selectedBigid === -1 ? null :\r\n\t\t\t\t\t\t\t\t<SmaillType bigTypeIndex={this.state.bigTypeIndex} smaillType={this.CurrentSmaillType(this.state.selectedBigid,null,true)} />\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/*轮播图组件，传递slideImg图片组*/}\r\n\t\t\t\t\t<Slide />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n//setRouterLocationAction\r\nexport default connect(null, { setSearchKeyAction, alertMessageAction })(Home);\r\n","import React, {Component} from 'react'\r\nimport axios from 'axios'\r\nimport {Link} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nimport config from '../../../utils/config.js'\r\n\r\nclass Step1 extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: '',\r\n\t\t\tisCheck: false,\r\n\t\t\tsmsCode: '',\r\n\t\t\tsendSMSCode: '',  // 发送的验证码\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.validator = this.validator.bind(this);\r\n\t\tthis.sendSMS = this.sendSMS.bind(this);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\t// 进入 Step1 改变 store.register.step = 1 中\r\n\t\tthis.props.changeStep(1);\r\n\t}\r\n\tonChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\tvalidator(phone) {\r\n\t\tif (phone) {\r\n\t\t\treturn /^1[0-9]{10}$/.test(phone);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tphone: /^1[0-9]{10}$/.test(this.state.phone),\r\n\t\t\tsms: this.state.sendSMSCode && this.state.smsCode === this.state.sendSMSCode\r\n\t\t}\r\n\t}\r\n\tsendSMS() {\r\n\t\tif (!this.validator().phone) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '手机号码格式不正确'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\terrors: {}\r\n\t\t});\r\n\t\taxios.post(config.HOST + '/api/operator/testsms', {phone: this.state.phone})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\tthis.setState({errors: {...this.state.errors, phone: '服务器忙，稍后重试'}});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tsendSMSCode: res.data.payload.smsCode\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// dispatch 手机号码\r\n\t\t\t\t\tthis.props.getPhone(this.state.phone);\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(res.data.payload.smsCode); // 打印验证码\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tphone: err.message\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\tnextStep() {\r\n\t\tif (!(this.validator(this.props.register.phone) && this.validator().sms)) {\r\n\t\t\t// 验证不通过\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tsmsCode: '验证码有误'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 验证通过，下一步\r\n\t\tthis.props.history.push('/register/step2')\r\n\t}\r\n\tcomponentDidMount() {\r\n    if (typeof window !== 'object') return;\r\n\t\t// 组件挂载完毕，绑定原生事件\r\n\t\tconst _this = this;\r\n\t\t// 鼠标按下\r\n\t\tthis.refs.slideBlock.addEventListener(\"mousedown\", slideCheck);\r\n\t\tfunction slideCheck(e) {\r\n\t\t\tlet start = e.screenX;\r\n\t\t\t// 滑块滑动总长度\r\n\t\t\tlet width = window.parseInt(window.getComputedStyle(_this.refs.slide, false)[\"width\"]) -\r\n\t\t\t\twindow.parseInt(window.getComputedStyle(_this.refs.slideBlock, false)[\"width\"]);\r\n\t\t\t// 鼠标移动\r\n\t\t\tdocument.addEventListener(\"mousemove\", mousemove);\r\n\t\t\tfunction mousemove(e) {\r\n\t\t\t\tlet move = e.screenX - start;\r\n\t\t\t\tif (0 < move && move <= width) {\r\n\t\t\t\t\t_this.refs.slideBlock.style.left = move + \"px\";  // 滑块移动\r\n\t\t\t\t\t_this.refs.slideRate.style.width = move + \"px\";  // 验证块变宽\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 鼠标抬起\r\n\t\t\tdocument.addEventListener(\"mouseup\", mouseup)\r\n\t\t\tfunction mouseup(e) {\r\n\t\t\t\tconsole.log(\"mouseup\");\r\n\t\t\t\t// 接触监听事件\r\n\t\t\t\t_this.refs.slideBlock.removeEventListener(\"mousemove\", mousemove);\r\n\t\t\t\tdocument.removeEventListener(\"mousemove\", mousemove);\r\n\t\t\t\tdocument.removeEventListener(\"mouseup\", mouseup);\r\n\r\n\t\t\t\tlet end = parseInt(_this.refs.slideRate.style.width); // 验证块长度\r\n\t\t\t\tconsole.log(end, width);\r\n\t\t\t\tif (end >= width-3) {  // 验证精度\r\n\t\t\t\t\t// \"验证成功\"\r\n\t\t\t\t\t_this.refs.slideBlock.removeEventListener(\"mousedown\", slideCheck);\r\n\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\tisCheck: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}else {\r\n\t\t\t\t\t_this.refs.slideBlock.style.left = \"0px\"; // 滑块还原\r\n\t\t\t\t\t_this.refs.slideRate.style.width = \"0px\"; // 验证块还原\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"Step1\">\r\n\t\t\t\t<div className=\"s1-item phone\">\r\n\t\t\t\t\t<div className=\"prefix\">手机号</div>\r\n\t\t\t\t\t<div className=\"s1-item-body\">\r\n\t\t\t\t\t\t<div className=\"s1-phone-prefix\">\r\n\t\t\t\t\t\t\t<span>中国大陆</span>\r\n\t\t\t\t\t\t\t<span> +86</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"s1-phone-input\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入手机号\"\r\n\t\t\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\t\tvalue={this.state.phone}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.phone &&\r\n\t\t\t\t\t(<p>{this.state.errors.phone}</p>)\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"s1-item\">\r\n\t\t\t\t\t<div className=\"prefix\">手机号</div>\r\n\t\t\t\t\t<div className=\"s1-item-body\">\r\n\t\t\t\t\t\t<div ref=\"slide\" className=\"slide\">\r\n\t\t\t\t\t\t\t<p>{this.state.isCheck ? \"验证通过\" : \"请按住滑块，拖动到最右边\"}</p>\r\n\t\t\t\t\t\t\t<div ref=\"slideRate\" style={{width: 0}} className=\"slide-rate\"></div>\r\n\t\t\t\t\t\t\t<div ref=\"slideBlock\" style={{left: 0}} className=\"slide-block\">>></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isCheck ?\r\n\t\t\t\t\t<div className=\"s1-item s1-smscode\">\r\n\t\t\t\t\t\t<div className=\"-prefix\">验证码</div>\r\n\t\t\t\t\t\t<div className=\"s1-item-body\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"输入手机验证码\"\r\n\t\t\t\t\t\t\t\tname=\"smsCode\"\r\n\t\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\t\tvalue={this.state.smsCode}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<button onClick={this.sendSMS}>发送</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t{/*<Link to=\"/register/step2\">下一步</Link>*/}\r\n\t\t\t\t<div><span onClick={this.nextStep.bind(this)}>下一步</span></div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nfunction mapActionToProps(dispatch) {\r\n\treturn {\r\n\t\tchangeStep(step) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"STEP_CHANGE\",\r\n\t\t\t\tstep\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetPhone(phone) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"GET_PHONE\",\r\n\t\t\t\tphone\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapActionToProps)(Step1);\r\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\n\r\nimport config from '../../../utils/config.js'\r\n\r\nclass Step2 extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: props.register.phone,\r\n\t\t\tpassword: '',\r\n\t\t\tpassword2: '',\r\n\t\t\tnickname: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.debounce = this.debounce();\r\n\t\tthis.validator = this.validator.bind(this);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.nicknameRepeat = this.nicknameRepeat.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.props.changeStep(2);\r\n\t}\r\n\tonChange(e) {\r\n\t\t// 同步值\r\n\t\tvar key = e.target.name;\r\n\t\tthis.setState({\r\n\t\t\t[key]: e.target.value\r\n\t\t});\r\n\t\t// 防抖 验证格式\r\n\t\tthis.debounce(() => {\r\n\t\t\tconsole.log(\"防抖验证\");\r\n\t\t\tvar valid = this.validator(key);\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t[key]: valid.isLegal ? '' : valid.msg\r\n\t\t\t\t}\r\n\t\t\t}, () => {\r\n\t\t\t\t// 格式验证成功, nickname 是否已存在\r\n\t\t\t\tkey === 'nickname' && valid.isLegal && this.nicknameRepeat();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tnicknameRepeat(callback) {\r\n\t// 验证名字重复\r\n\t\taxios.post(config.HOST + '/api/users/nickname', {nickname: this.state.nickname})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\tcallback && callback(false);  // 提交时用,只要结果，防抖验证不用\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tnickname: res.data.msg\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tnickname: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcallback && callback(true);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tcallback && callback(false);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tnickname: err.response.data\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\tvalidator(target) {\r\n\t\tvar result = {\r\n\t\t\tkey: target,\r\n\t\t\tisLegal: true,\r\n\t\t\tmsg: ''\r\n\t\t};\r\n\t\tswitch (target) {\r\n\t\t\tcase \"nickname\":\r\n\t\t\t\t// 不能以数字开头，长度 2-10 位\r\n\t\t\t\tif (!/^[^0-9][\\w\\W]{1,9}$/.test(this.state.nickname)){\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"不能以数字开头，长度 2-10 位\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"password2\":\r\n\t\t\t\tif (this.state.password2 !== this.state.password) {\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"两次密码不一致\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tcase \"password\":\r\n\t\t\t\t// 0-9 A-z _ . + - # @ ! ^ & $ (6,18)\r\n\t\t\t\tif (!/^[\\w\\d\\.\\+\\-#@!\\^\\&\\$]{6,18}$/.test(this.state.password)) {\r\n\t\t\t\t\tresult.isLegal = false;\r\n\t\t\t\t\tresult.msg = \"密码长度6-18位，可包含0-9 A-z _ . + - # @ ! ^ & $\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresult.isLegal = false;\r\n\t\t\t\tresult.msg = '未定义类型';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t// 防抖函数：停止输入后延迟一秒执行传入函数\r\n\tdebounce() {\r\n\t\tvar timer = null;\r\n\t\treturn function (handler) {\r\n\t\t\twindow.clearTimeout(timer);\r\n\t\t\ttimer = window.setTimeout(function () {\r\n\t\t\t\thandler && handler();\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\tonSubmit() {\r\n\t\t// 提交，验证所有，发送注册请求\r\n\t\tif (this.validator(\"nickname\").isLegal && this.validator(\"password\").isLegal && this.validator(\"password2\").isLegal) {\r\n\t\t\t// 验证名字\r\n\t\t\tthis.nicknameRepeat((result) => {\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\t// 验证成功，进行注册\r\n\t\t\t\tconst newUser = {\r\n\t\t\t\t\tnickname: this.state.nickname,\r\n\t\t\t\t\tpassword: this.state.password,\r\n\t\t\t\t\tphone: this.props.register.phone\r\n\t\t\t\t}\r\n\t\t\t\taxios.post(config.HOST + \"/api/users/register\", newUser)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\t\t\t// 验证通过\r\n\t\t\t\t\t\t\tthis.props.getUser(newUser); // dispatch NEW_USER\r\n\t\t\t\t\t\t\tthis.props.history.push('/register/step3');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\t\tsubmit: err.response.data\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"step2\">\r\n\t\t\t\t<h2>Step2</h2>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">登录名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t{this.state.phone}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">请设置登录密码</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录时验证，保护账号信息</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录密码</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"设置你的登录密码\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.password\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.password &&\r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.password}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">密码确认</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"再次输入你的密码\"\r\n\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.password2}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.password2\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.password2 &&\r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.password2}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font1\">设置会员名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-item\">\r\n\t\t\t\t\t<div className=\"s2-i-left\">\r\n\t\t\t\t\t\t<span className=\"s2-font2\">登录名</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"s2-i-right s2-font1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"会员名一旦设置成功，无法修改\"\r\n\t\t\t\t\t\t\tname=\"nickname\"\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t\tvalue={this.state.nickname}\r\n\t\t\t\t\t\t\tclassName={classnames({\r\n\t\t\t\t\t\t\t\t\"border-err\": this.state.errors.nickname\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.errors.nickname &&\r\n\t\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.nickname}</div>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"s2-submit-wrap\">\r\n\t\t\t\t\t<button onClick={this.onSubmit.bind(this)} className=\"s2-submit\">提交</button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.errors.submit &&\r\n\t\t\t\t\t\t(<div className=\"register-err\">{this.state.errors.submit}</div>)\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nfunction mapActionToProps(dispatch) {\r\n\treturn {\r\n\t\tchangeStep(step) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"STEP_CHANGE\",\r\n\t\t\t\tstep\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetUser(user) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"NEW_USER\",\r\n\t\t\t\tuser\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapActionToProps)(Step2);\r\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {Link} from 'react-router-dom'\n\nclass Step3 extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.props.changeStep(3);\n\t}\n\trender() {\n\t\tconst users = this.props.register\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<h1>Step3</h1>\n\t\t\t\t<h2>{users.nickname},{users.phone}注册成功</h2>\n\t\t\t\t<Link to=\"/login\">现在登录</Link>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (state) => ({register: state.register})\n\nfunction mapActionToProps(dispatch) {\n\treturn {\n\t\tchangeStep(step) {\n\t\t\tdispatch({\n\t\t\t\ttype: \"STEP_CHANGE\",\n\t\t\t\tstep\n\t\t\t});\n\t\t}\n\t}\n}\nexport default connect(mapStateToProps, mapActionToProps)(Step3);\n","import './index.scss'\r\nimport Step1 from './subpage/step1'\t// 注册第一步\r\nimport Step2 from './subpage/step2'\t// 注册第二步\r\nimport Step3 from './subpage/step3'\t// 注册成功\r\n\r\nimport React, {Component} from 'react'\r\nimport {Route, Link} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nclass Register extends Component {\r\n\tcomponentWillMount() {\r\n\t\tthis.props.history.push('/register/step1');\r\n\t}\r\n\tshowStep() {\r\n\t\tlet registerInfo = this.props.register; // redux 中 register\r\n\t\tlet step = '';\r\n\t\tif (registerInfo.step === 3) {\r\n\t\t\tstep = (<h3>1.设置用户名</h3>)\r\n\t\t}else if (registerInfo.step === 2) {\r\n\t\t\tstep = (<h3>2.填写账号信息</h3>)\r\n\t\t}else if (registerInfo.step === 1) {\r\n\t\t\tstep = (<h3>1.设置用户名</h3>)\r\n\t\t}else {\r\n\t\t\tstep = (<h3>look like some error...</h3>)\r\n\t\t}\r\n\t\treturn step;\r\n\t}\r\n\trender() {\r\n\t\tlet registerInfo = this.props.register; // redux 中 register\r\n\t\treturn (\r\n\t\t\t<div className=\"register-wrap\">\r\n\t\t\t\t<Link to=\"/login\">登录</Link><br/>\r\n\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.showStep.call(this)\r\n\t\t\t\t}\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<Route exact path=\"/register/step1\" component={Step1} />\r\n\t\t\t\t\t<Route exact path=\"/register/step2\" component={Step2} />\r\n\t\t\t\t\t<Route exact path=\"/register/step3\" component={Step3} />\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tregister: state.register\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, null)(Register);","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport config from '../../../utils/config.js'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport {isPhone, isEmpty, isLength} from '../../../utils/validator'\r\nconst HOST = config.HOST\r\n\r\nclass Account extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\taccount: '',\r\n\t\t\tpassword: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.inputChange = this.inputChange.bind(this);\r\n\t}\r\n\r\n\tinputChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\tformSubmit() {\r\n\t\tlet errors = {};\r\n\t\tif (isEmpty(this.state.account)) {\r\n\t\t\terrors.account = '账号不能为空';\r\n\t\t}else if (!isLength(this.state.password, {min: 6, max: 18})) {\r\n\t\t\terrors.password = '密码长度 6-18 位';\r\n\t\t}\r\n\t\tif (!isEmpty(errors)) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t...errors\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n    let info = {account: this.state.account, password: this.state.password};\r\n\t\taxios.post(`${HOST}/api/users/login`, info)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tsubmit:  res.data.message\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// 验证通过\r\n\t\t\t\tsetAuthToken(res.data.payload.token); // 请求头附加 token\r\n\t\t\t\tsetCurrentUser(res.data.payload.user);\r\n\t\t\t\t// this.props.history.push(this.props.auth.location || '/')\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"l-input-wrap\">\r\n\t\t\t\t<div className=\"log-input1\">\r\n\t\t\t\t\t<label htmlFor=\"account\"></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.account}\r\n\t\t\t\t\t\tplaceholder=\"昵称 / 手机号码\"\r\n\t\t\t\t\t\tname=\"account\"\r\n\t\t\t\t\t\tid=\"account\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t</div>\r\n        {\r\n          !this.state.errors.account ? null :\r\n          <div>{this.state.errors.account}</div>\r\n        }\r\n\t\t\t\t<div className=\"log-input2\">\r\n\t\t\t\t\t<label htmlFor=\"password\"></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"密码\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n        {\r\n          !this.state.errors.password ? null :\r\n          <div>{this.state.errors.password}</div>\r\n        }\r\n\t\t\t\t<input type=\"submit\" onClick={this.formSubmit.bind(this)} value=\"登录\"/>\r\n        {\r\n          !this.state.errors.submit ? null :\r\n          <div>{this.state.errors.submit}</div>\r\n        }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nAccount.propTypes = {\r\n\tauth: PropTypes.object.isRequired,\r\n}\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default connect(mapStateToProps)(Account);\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport config from '../../../utils/config.js'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport {isPhone, isEmpty} from '../../../utils/validator'\r\n\r\n/**\r\n * 发送手机号到 sms接口，\r\n * 手机号合法 md5存储验证码并返回，\r\n * 登录发送手机号验证码，服务端入数据库匹配成功返回 token\r\n */\r\nclass PhoneLogin extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: '',\r\n\t\t\tsms: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.inputChange = this.inputChange.bind(this);\r\n\t}\r\n\tcomponentWillMount() {\r\n\r\n\t}\r\n\tinputChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\tsendSMS() {\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '手机号码错误'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 格式正确\r\n\t\tif (this.state.errors.phone) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tsms: ''\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\taxios.post(config.HOST + \"/api/operator/testsms\", {phone: this.state.phone})\r\n\t\t\t.then(({data}) => {\r\n\t\t\t\tconsole.log(data.smsCode);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\tsubmit() {\r\n\t\tlet errors = false;\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\terrors = {phone: '手机号码错误'}\r\n\t\t}else if (isEmpty(this.state.sms)) {\r\n\t\t\terrors = {sms: '验证码为空'}\r\n\t\t}\r\n\t\tif (errors) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t...errors\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 格式验证成功\r\n\t\tconst user = {phone: this.state.phone, sms_code: this.state.sms}\r\n\t\taxios.post(config.HOST + '/api/users/phonelogin', user)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tsubmit: res.data.message\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// 验证通过\r\n\t\t\t\tsetAuthToken(res.data.payload.token) // 请求头附加 token\r\n\t\t\t\tsetCurrentUser(res.data.payload.user)\r\n        // this.props.history.push(this.props.auth.location || '/')\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"l-input-wrap\">\r\n\t\t\t\t<div className=\"log-input1\">\r\n\t\t\t\t\t<label htmlFor=\"phone\"></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"输入手机号码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.phone}\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\tid=\"phone\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.phone ?\r\n\t\t\t\t\t<span>{this.state.errors.phone}</span>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"log-input2\">\r\n\t\t\t\t\t<label htmlFor=\"sms\"></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"填写验证码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.sms}\r\n\t\t\t\t\t\tname=\"sms\"\r\n\t\t\t\t\t\tid=\"sms\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t\t<button className=\"btn\" onClick={this.sendSMS.bind(this)}>发送验证码</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.sms ?\r\n\t\t\t\t\t<span>{this.state.errors.sms}</span>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t\t<input type=\"submit\" onClick={this.submit.bind(this)} value=\"登录\"/>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.submit ?\r\n\t\t\t\t\t<span>{this.state.errors.submit}</span>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nPhoneLogin.propTypes = {\r\n\tauth: PropTypes.object.isRequired\r\n}\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default connect(mapStateToProps)(PhoneLogin);\r\n","import React, {Component} from 'react'\r\nimport {Link, Route, Redirect} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport classnames from 'classnames'\r\n\r\nimport './login.scss'\r\nimport Account from './subpage/Account'\r\nimport PhoneLogin from './subpage/PhoneLogin'\r\n\r\nclass Login extends Component {\r\n  componentWillMount() {\r\n    // 已登录，不能访问登录页面\r\n    if (this.props.auth.isLogin) {\r\n      this.props.history.goBack()\r\n    }\r\n  }\r\n\trender() {\r\n\t\t/**\r\n\t\t * v4 包含路由 和 精准路由\r\n\t\t */\r\n    const { from } = this.props.location.state || { from: { pathname: '/' } }\r\n    if (this.props.auth.isLogin === true) {  // 已登录带回原始路由\r\n      return <Redirect to={from} />\r\n    }\r\n    var path = this.props.location.pathname\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"login-wrap\">\r\n\t\t\t\t\t<div className=\"login-title\"></div>\r\n\t\t\t\t\t<div className=\"login-form\">\r\n\t\t\t\t\t\t<div className=\"form\">\r\n\t\t\t\t\t\t\t<div className=\"form-t\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t\t\t\t<div className={path === '/login' ? 't-l f1' : 't-l f2'}>手机登录</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<Link to=\"/login/account\">\r\n\t\t\t\t\t\t\t\t\t<div className={path === '/login/account' ? 't-l f1' : 't-l f2'}>账户登录</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/login/account\" component={Account} />\r\n\t\t\t\t\t\t\t\t<Route exact path=\"/login\" component={PhoneLogin} />\r\n\t\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Login);\r\n","/**\r\n * 搜索页商品列表\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport { Link } from 'react-router-dom'\r\nimport config from '../../utils/config'\r\n\r\nimport { transPrice } from '../../utils/tools'\r\n\r\nimport './goods.scss'\r\n\r\nfunction splitName(name) {\r\n  if (name.length <= 50) return name;\r\n  return name.substring(0,50) + '...'\r\n}\r\n\r\nconst HOST = config.HOST\r\n\r\nconst SearchProductsList = (props) => {\r\n  return (\r\n    <div className=\"goodlist-wrap\">\r\n      {\r\n        props.products.map((product, index) => {\r\n          return (\r\n            <div className={classnames(\"good-wrap\", {\r\n              rowlast: (index + 1) % 5 === 0\r\n            })} key={index}>\r\n              <Link to={`/product_detail?goodId=${product._id}`}>\r\n                <div className=\"goodlogo-box\"><img src={`${HOST}/image/goods/logo/${product.logo}_210x210q90.jpg`} alt=\"\"/></div>\r\n              </Link>\r\n              <div className=\"good-price\"><span className=\"p_f1\">￥</span><span className=\"p_f2\">{transPrice(product.nowPrice)}</span></div>\r\n              <Link to={`/product_detail?goodId=${product._id}`}>\r\n                <div className=\"good-name\"><span>{splitName(product.goodName)}</span></div>\r\n              </Link>\r\n              <div className=\"good-store\"><span className=\"s_f1\">店铺：</span><span className=\"s_f2\">{product.storeName}</span></div>\r\n              <div className=\"good-number-box\">\r\n                <div className=\"good-number\">\r\n                  <span className=\"n_f1\">成交量：</span><span className=\"n_f2\">{product.number}笔</span>\r\n                </div>\r\n                <div className=\"good-number-chat\">\r\n                  聊\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nSearchProductsList.propTypes = {\r\n  products: PropTypes.array.isRequired\r\n}\r\n\r\nexport default SearchProductsList\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction subStoreName(name) {\r\n  if (typeof name !== 'string' || name.length < 6) return name;\r\n  return name.substring(0,5) + '...';\r\n}\r\nclass SubStore extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      stores: [],\r\n      detailTypes: []\r\n    }\r\n  }\r\n\r\n  // props.goods 参数更新, 根据 goods 请求 store 的信息\r\n  componentWillReceiveProps(nextProps) {\r\n    const goods = nextProps.goods\r\n    if (!Array.isArray(goods) || goods.length < 1) return;\r\n    // 根据detailType 请求 smaillType\r\n    axios.get(`${HOST}/api/goods/type?type=detail&detailId=${goods[0].detailId}`)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.setState({\r\n            detailTypes: res.data.payload\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (typeof(window) === 'object')\r\n          console.error(err)\r\n      })\r\n    // 获取 goods 中的 storeId\r\n    let storeIds = [];\r\n    storeIds.push(goods[0].storeId)\r\n    for (var i = 1, len = goods.length; i < len; i ++) {\r\n      var storeId = goods[i].storeId\r\n      var repeat = false\r\n        // 去重\r\n      for (var j = 0, len2 = storeIds.length; j < len2; j++) {\r\n        if (storeId === storeIds[j]) {\r\n          repeat = true\r\n          break\r\n        }\r\n      }\r\n      if (!repeat) storeIds.push(storeId)\r\n    }\r\n    // 请求 stores\r\n    if (storeIds.length < 1) return;\r\n    const jsonStoreIds = JSON.stringify(storeIds)\r\n    axios.get(`${HOST}/api/goods/search_store?storeIds=${jsonStoreIds}`)\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.setState({\r\n            stores: res.data.payload\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (typeof(window) === 'object')\r\n          console.error(err)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    var detail = this.state.detailTypes.find((detail, index) => {\r\n                    return detail.detailId === this.props.goods[0].detailId\r\n                  })\r\n    return (\r\n      <div className=\"substore\">\r\n        {\r\n          /*展示首页 > 小分类 > 详细分类s */\r\n          this.state.detailTypes.length > 0 && (\r\n            <div className=\"crum\">\r\n              <div className=\"crum-1\"><Link to=\"/\"><span>首页</span></Link></div>\r\n              <div className=\"crum-2\">\r\n                <Link to={`/search_product?smaillId=${this.state.detailTypes[0].smaillId}`}>\r\n                  <span>{this.state.detailTypes[0].smaillName}</span>\r\n                </Link>\r\n              </div>\r\n              <div  className=\"crum-3\">\r\n                <Link to={`/search_product?detailId=${this.props.goods[0].detailId}`}>\r\n                  <span>\r\n                  {\r\n                    detail ? detail.detailName : this.state.detailTypes[0].detailName\r\n                  }\r\n                  </span>\r\n                </Link>\r\n                <ul className=\"crum-details\">\r\n                {\r\n                  this.state.detailTypes.map((detailType, index) => (\r\n                    <li className=\"\" key={index}>\r\n                      <Link\r\n                        className={classnames({'crum-selected': detailType.detailId === this.props.goods[0].detailId})}\r\n                        to={`/search_product?detailId=${detailType.detailId}`}\r\n                      >{detailType.detailName}</Link>\r\n                    </li>\r\n                  ))\r\n                }\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n        {\r\n          this.state.stores.length > 0 && <div className=\"substore-logo-box\">\r\n            <div className=\"s-logo-title\">推荐店铺</div>\r\n            <div className=\"s-logo-wrap\">\r\n            {\r\n              /*展示店铺图片*/\r\n              this.state.stores.map((store, index) => {\r\n                if (index > 7) return null\r\n                return (\r\n                  <div className=\"s-logo-item\" key={index}>\r\n                    <div className=\"s-store-logo\"><img src={`${HOST}/image/store/logo/${store.logo}`} alt=\"\"/></div>\r\n                    <div className=\"s-store-name\"><Link to={`/search_product?storeId=${store._id}`}><span>{subStoreName(store.storeName)}</span></Link></div>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nSubStore.propTypes = {\r\n  goods: PropTypes.array.isRequired\r\n}\r\n\r\nexport default SubStore\r\n","import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport queryString from 'query-string'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport config from '../../utils/config'\r\nimport { transSearchKeyword } from '../../utils/tools'\r\nimport { alertMessageAction } from '../../flux/actions/messageAction'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\nimport SearchProductsList from '../../components/Goods/SearchProductsList'\r\nimport SubStore from './subpage/SubStore'\r\nimport Loading from '../../components/PrivateRoute/subpage/WaitVerify'\r\n\r\nimport { setSearchGoodsAction, setSearchKeyAction } from '../../flux/actions/productActions'\r\n\r\n// 获取浏览器视口的高度\r\nfunction getWindowHeight(){\r\n　　var windowHeight = 0;\r\n　　if(document.compatMode == \"CSS1Compat\"){\r\n　　　　windowHeight = document.documentElement.clientHeight;\r\n　　}else{\r\n　　　　windowHeight = document.body.clientHeight;\r\n　　}\r\n　　return windowHeight;\r\n}\r\n\r\n// 获取文档的总高度\r\nfunction getDocumentHeight(){\r\n　　var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;\r\n　　if(document.body){\r\n　　　　bodyScrollHeight = document.body.scrollHeight;\r\n　　}\r\n　　if(document.documentElement){\r\n　　　　documentScrollHeight = document.documentElement.scrollHeight;\r\n　　}\r\n　　scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;\r\n　　return scrollHeight;\r\n}\r\n// 滚动条在 Y 轴上的滚动距离\r\nfunction getScrollTop(){\r\n　　var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;\r\n　　if(document.body){\r\n　　　　bodyScrollTop = document.body.scrollTop;\r\n　　}\r\n　　if(document.documentElement){\r\n　　　　documentScrollTop = document.documentElement.scrollTop;\r\n　　}\r\n　　scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;\r\n　　return scrollTop;\r\n}\r\n\r\nconst HOST = config.HOST\r\n\r\nclass SearchProduct extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      condition: '?', //  搜索关键字\r\n      keyword: '',\r\n      limit: 0, // 搜索页数\r\n      end: false,  // 分页结束\r\n      products: [], // 搜索结果\r\n      loading: true,\r\n      errors: {}\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    var condition = this.props.location.search\r\n    var search = queryString.parse(condition);\r\n\r\n    // 第一次请求 20 条数据，后面每次请求 10 条\r\n    condition = ''\r\n    if (search.q) {\r\n    // 1. 有关键字\r\n      condition += `&q=${encodeURIComponent(search.q)}`\r\n    }else if (/^[1-9]\\d*$/.test(search.storeId)) {\r\n    // 2. 有店铺 id\r\n      condition += `&storeId=${search.storeId}`\r\n    }else if (/^[1-9]\\d*$/.test(search.detailId)) {\r\n    // 3. 有详细分类 id\r\n      condition += `&detailId=${search.detailId}`\r\n    }else if (/^[1-9]\\d*$/.test(search.smaillId)) {\r\n    // 4. else 有小分类 id\r\n      condition += `&smaillId=${search.smaillId}`\r\n    }else if (/^[1-9]\\d*$/.test(search.bigId)) {\r\n    // 5. else 有大分类 id\r\n      condition += `&bigId=${search.bigId}`\r\n    }\r\n    if (condition === '') {\r\n      return this.setState({\r\n        loading: false,\r\n        condition: ''\r\n      })\r\n    }\r\n\r\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=20${condition}`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            loading: false,\r\n            errors: { ...this.state.errors, search: res.data.message }\r\n          })\r\n        }\r\n        this.setState({\r\n          loading: false,\r\n          products: res.data.payload.products,\r\n          end: res.data.payload.end,\r\n          condition,\r\n          keyword: search.q ? search.q.replace(/\\+/g, ' ') : ''\r\n        }, () => {\r\n          this.props.history.push(`/search_products?limit1=0&limit2=10${condition}`)\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          loading: false,\r\n          errors: { ...this.state.errors, search: err.message }\r\n        })\r\n      })\r\n  }\r\n\r\n  componentDidMount() {\r\n    var _this = this\r\n    window.onscroll = function () {\r\n      if (!_this.state.end && !_this.state.loading && getScrollTop() + getWindowHeight() >= getDocumentHeight() - 200) {\r\n        // 先暂停后发送请求\r\n        _this.setState({\r\n          loading: true\r\n        }, function() {\r\n            var get = `limit1=${this.state.products.length}&limit2=10${this.state.condition}`\r\n            axios.get(`${HOST}/api/goods/search_product?${get}`)\r\n              .then(res => {\r\n                if (!res.data.success) {\r\n                  return _this.setState({\r\n                    loading: false,\r\n                    errors: { ..._this.state.errors, search: res.data.message }\r\n                  })\r\n                }\r\n                _this.setState({\r\n                  loading: false,\r\n                  products: _this.state.products.concat(res.data.payload.products),\r\n                  end: res.data.payload.end,\r\n                  // limit: Number(_this.state.limit) + 1\r\n                }, function () {\r\n                  if (res.data.payload.end) {\r\n                    window.onscroll = null\r\n                  }\r\n                  _this.props.history.push(`/search_products?${get}`)\r\n                })\r\n              })\r\n              .catch(err => {\r\n                _this.setState({\r\n                    loading: false,\r\n                  errors: { ..._this.state.errors, search: err.message }\r\n                })\r\n              })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.onscroll = null\r\n  }\r\n\r\n  keywordChangeHandler(e) {\r\n    this.setState({\r\n      keyword: e.target.value\r\n    })\r\n  }\r\n\r\n  // 点击搜索关键字\r\n  searchProductBtnClick() {\r\n    if (this.state.keyword.trim() === '') {\r\n      return this.props.alertMessageAction('请输入要搜索的商品描述')\r\n    }\r\n    var condition = `&q=${transSearchKeyword(this.state.keyword)}`\r\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=20${condition}`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: { ...this.state.errors, search: res.data.message }\r\n          })\r\n        }\r\n        this.setState({\r\n          products: res.data.payload.products,\r\n          end: res.data.payload.end,\r\n          condition\r\n        }, () => {\r\n          this.props.history.push(`/search_products?limit1=0&limit2=20${condition}`)\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: { ...this.state.errors, search: err.message }\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.products) {\r\n      return <div><Header /><h2>发生了未知的错误</h2></div>\r\n    }\r\n    // 将 goods 20个一组进行分组\r\n    var group = this.state.products.reduce((prev, next) => {\r\n      if (prev.goods[prev.count].length >= prev.limit) {\r\n        prev.goods.push([next])\r\n        prev.count++\r\n      }else {\r\n        prev.goods[prev.count].push(next)\r\n      }\r\n      return prev\r\n    }, {count: 0, limit: 20, goods: [[]]})\r\n    var products = group.goods[0].length === 0 ? [] : group.goods\r\n\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"sear\">\r\n          <div className=\"sear-logo\"><Link to=\"/\"><img src={`${HOST}/image/ui/search_home_logo.png`} alt=\"\"/></Link></div>\r\n          <div className=\"sear-input-wrap\">\r\n            <div>\r\n              <div>\r\n                <input value={this.state.keyword} onChange={this.keywordChangeHandler.bind(this)} placeholder=\"在此输入商品描述\" className=\"sear-input\" type=\"text\"/>\r\n              </div>\r\n              <div>\r\n                <button onClick={this.searchProductBtnClick.bind(this)} className=\"com-search-btn\">搜索</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"search-product\">\r\n          <hr className=\"search-hr\" />\r\n          {\r\n            this.state.products.length > 0 && <SubStore goods={this.state.products} />\r\n          }\r\n         { products.map((item, index) => <SearchProductsList products={item} key={index}/>) }\r\n         {\r\n          this.state.loading && <Loading message=\"努力加载中。。。\" />\r\n         }\r\n         {\r\n          this.state.condition === '' && <h2 style={{height: '200px', lineHeight: '200px'}}>搜索条件为空！</h2>\r\n         }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction })(SearchProduct)\r\n\r\n","import React from 'react'\nimport { historyPush } from './index'\n\nclass GotoSearchProduct extends React.Component {\n  componentWillMount() {\n    this.props.history.push('/search_products' + this.props.location.search)\n  }\n  render() {\n    return (\n      <div>404</div>\n    )\n  }\n}\nexport default GotoSearchProduct\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withRouter, Link } from 'react-router-dom'\n\nimport './index.scss'\nimport config from '../../utils/config'\nconst HOST = config.HOST\n\nclass StoreHeader extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      searchKey: ''\n    }\n    this.onSearchInputChange = this.onSearchInputChange.bind(this)\n  }\n  onSearchInputChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    })\n  }\n  // 搜所有\n  searchAllProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}`)\n  }\n  // 搜本店\n  searchStoreProduct() {\n    if (this.state.searchKey !== '')\n      this.props.history.push(`/search_products?q=${this.state.searchKey}&storeId=${this.props.storeInfo.storeId}`)\n  }\n  render() {\n    const storeInfo = this.props.storeInfo\n    return (\n      <div className=\"store-header\">\n          <div className=\"store-cp-logo\">\n            <Link to=\"/\">\n              <img src={`${HOST}/image/ui/storetitle.png`} height=\"60px\" />\n            </Link>\n          </div>\n        <div className=\"store-info-wrap\">\n          <div className=\"store-info-logo\">\n              <img height=\"60px\" src={`${HOST}/image/store/logo/${storeInfo.logo || 'default.jpg'}`} alt=\"优选\"/>\n          </div>\n\n          <div className=\"store-info\">\n            <p className=\"store-name\">店铺：{storeInfo.storeName}</p>\n            <p className=\"store-boos\">掌柜：{storeInfo.nickname}</p>\n          </div>\n        </div>\n        <div className=\"store-search\">\n          <div className=\"store-search-input\"><input value={this.state.searchKey} onChange={this.onSearchInputChange} type=\"text\"/></div>\n          <button style={{background: `url(\"${HOST}/image/ui/TB1ZWVhJpXXXXa4XVXXs1m4TXXX-458-36.png\") top right no-repeat`}} className=\"store-search-btn-all\" onClick={this.searchAllProduct.bind(this)}>搜索</button>\n          <button className=\"store-search-btn-this\" onClick={this.searchStoreProduct.bind(this)}>搜本店</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nStoreHeader.propTypes = {\n  storeInfo: PropTypes.object.isRequired\n}\n\nexport default withRouter(StoreHeader)\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport { transPrice } from '../../../utils/tools'\r\n\r\nimport { setBuyProductsAction } from '../../../flux/actions/orderActions'\r\nimport socket from '../../../utils/socket'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Spec extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      smaillx: 0,\r\n      smailly: 0,\r\n      bigImg: false, // 是否展示大图\r\n      showMustChoice: false,\r\n      selectImg: props.smaillPicture[0].link,\r\n      nowPrice: 99999,\r\n      allAmount: 0, // 商品总库存\r\n      specChoice: [],  // 选中的属性组合\r\n      choiceProductDetail: {},  // 选中属性组合的商品详情\r\n      choiceNumber: 1,\r\n      specConfig: [] // 重新组合后的属性关系映射\r\n    }\r\n    this.specValueClick = this.specValueClick.bind(this)\r\n    this.onSmaillMouseOver = this.onSmaillMouseOver.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    // 重新组合属性关系映射\r\n    var config = this.props.specConfig\r\n    var newConfig = []\r\n    if (Array.isArray(config)) {\r\n      for (var j = 0; j < config.length; j++) {\r\n        if (newConfig[config[j].detailIndex - 1] === undefined) {\r\n           newConfig[config[j].detailIndex - 1] = []\r\n        }\r\n        newConfig[config[j].detailIndex - 1][config[j].specNameIndex-1] = config[j].specValueIndex\r\n      }\r\n      // 计算总库存\r\n      var allAmount = 0\r\n      for (var i = 0, len = this.props.goodDetail.length; i < len; i++) {\r\n        allAmount += this.props.goodDetail[i].amount\r\n      }\r\n    }\r\n    // 删除库存为 0 属性\r\n    this.setState({\r\n      nowPrice: this.props.goodInfo.nowPrice || 99999,\r\n      specConfig: newConfig,\r\n      allAmount: allAmount,\r\n      selectImg: this.props.smaillPicture[0].link,\r\n      // 商品没有属性分类\r\n      choiceProductDetail: Array.isArray(this.props.specName) && this.props.specName.length > 0 ? {} : this.props.goodDetail[0]\r\n    })\r\n  }\r\n\r\n  // 点击选择属性\r\n  specValueClick(value) {\r\n    var _this = this\r\n    return function () {\r\n      // 更新选择的属性\r\n      if (_this.state.specChoice[value.specNameIndex-1] === value.indexx) return;\r\n      var specChoice = [..._this.state.specChoice]\r\n      specChoice[value.specNameIndex-1] = value.indexx\r\n\r\n      // 更新选择的商品详情和价格\r\n      var specConfig = _this.state.specConfig\r\n      var choiceProductDetail = _this.state.choiceProductDetail\r\n      for (var i = 0, len = specConfig.length; i < len; i++) {\r\n        var isOK = true\r\n        for (var j = 0, len2 = specConfig[i].length; j < len2; j++) {\r\n          if (specChoice[j] !== specConfig[i][j]) {\r\n            isOK = false\r\n            break;\r\n          }\r\n        }\r\n        if (isOK) {\r\n          choiceProductDetail = _this.props.goodDetail.find(item => item.indexx === i+1)\r\n          break;\r\n        }\r\n      }\r\n      _this.setState({\r\n        specChoice,\r\n        choiceProductDetail\r\n      })\r\n    }\r\n  }\r\n\r\n  // 点击选择数量\r\n  choiceNumberChange(e) {\r\n    var number = e.target.value\r\n    var before = this.state.choiceNumber\r\n    var _this = this\r\n    this.setState({\r\n      choiceNumber: number\r\n    }, function () {\r\n      if (!/^[1-9]\\d{0,}$/.test(number)) {\r\n        setTimeout(function () {\r\n          _this.setState({\r\n            choiceNumber: /^[1-9]\\d{0,}$/.test(before) ? before : 1\r\n          })\r\n        }, 200)\r\n      }\r\n    })\r\n  }\r\n  // 数量减一\r\n  minusNumber() {\r\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) - 1} })\r\n  }\r\n  // 数量加一\r\n  plusNumber() {\r\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) + 1} })\r\n  }\r\n  // 鼠标移到小图片上\r\n  onSmaillMouseOver(link) {\r\n    var _this = this\r\n    return function () {\r\n      _this.setState({\r\n        selectImg: link\r\n      })\r\n    }\r\n  }\r\n  // 关闭必须选择框\r\n  closeMustChoice() {\r\n    this.setState({\r\n      showMustChoice: false\r\n    })\r\n  }\r\n  buyNow() {\r\n    // 如果商品未选择，或选择数量大于库存量\r\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\r\n      return this.setState({\r\n        showMustChoice: true\r\n      })\r\n    }\r\n    // var buyProduct = [{\r\n    //   goodId: this.props.goodId,\r\n    //   productName: this.props.goodInfo.goodName,\r\n    //   specName: this.props.specName,\r\n    //   specValue: this.props.specValue,\r\n    //   specChoice: this.state.specChoice,\r\n    //   productDetail: this.state.choiceProductDetail,\r\n    //   number: this.state.choiceNumber,\r\n    //   storeName: this.props.storeInfo.storeName,\r\n    //   nickname: this.props.storeInfo.nickname\r\n    // }]\r\n    // specName: this.props.specName,\r\n    // specValue: this.props.specValue,\r\n    // specChoice: this.state.specChoice,\r\n    var buyProduct = [{\r\n      goodId: this.props.goodId,\r\n      goodName: this.props.goodInfo.goodName,\r\n      storeName: this.props.storeInfo.storeName,\r\n      storeId: this.props.storeInfo.storeId,\r\n      nickname: this.props.storeInfo.nickname,\r\n      number: this.state.choiceNumber,\r\n      goodDetailId: this.state.choiceProductDetail._id,\r\n      amount: this.state.choiceProductDetail.amount,\r\n      price: this.state.choiceProductDetail.price,\r\n      spec: this.state.specChoice.map((v, n) => ({\r\n        specName: this.props.specName[n].specName,\r\n        specValue: this.props.specValue.find(val => val.indexx === v).specValue\r\n      }))\r\n    }]\r\n    this.props.setBuyProductsAction(buyProduct)\r\n    this.props.history.push('/order')\r\n  }\r\n\r\n  addShopCar() {\r\n    // 如果商品未选择，或选择数量大于库存量\r\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\r\n      return this.setState({\r\n        showMustChoice: true\r\n      })\r\n    }\r\n    if (socket.status !== 'open') {\r\n      return this.setState({\r\n        errors: {\r\n          ...this.state.errors,\r\n          addShopCar: '服务器忙'\r\n        }\r\n      })\r\n    }\r\n    // webSocket 发送添加购物车请求\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'add_shopcar_product',\r\n      target: 'koa',\r\n      content: {\r\n        goodDetailId: this.state.choiceProductDetail._id,\r\n        number: this.state.choiceNumber\r\n      }\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    const goodInfo = this.props.goodInfo\r\n    const smaillPicture = this.props.smaillPicture\r\n    return (\r\n      <div className=\"spec-wrap\">\r\n        {/*图片组*/}\r\n        <div className=\"spec-smail-picture-wrap\">\r\n          <div className=\"spec-smail-bigone-wrap\"><img className=\"spec-smail-bigone\" height=\"430px\" src={`${HOST}/image/goods/smaill/${this.state.selectImg}_430x430q90.jpg`} alt=\"\"/></div>\r\n          <div className=\"spec-smaill-item-wrap\">\r\n            {\r\n              this.props.smaillPicture.map((item, index) => (\r\n                <div key={index} className=\"spec-priture-item\">\r\n                  <div className={this.state.selectImg === item.link ? \"spec-img-selected\" : \"spec-item-img-box\"}\r\n                      onMouseOver={this.onSmaillMouseOver(item.link)}\r\n                  >\r\n                    <img src={`${HOST}/image/goods/smaill/${item.link}_60x60q90.jpg`} alt=\"\"/>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n        </div>\r\n        {/*spec属性信息*/}\r\n        <div className=\"spec-goodinfo\">\r\n          <h3 className=\"spec-good-name\">{goodInfo.goodName}</h3>\r\n          <div className=\"spec-good-price\" style={{background: `url(${HOST}/image/ui/price_background.png) left top`}}>\r\n            <span className=\"sgp-f1\">价格</span>\r\n            <span className=\"sgp-f2\">￥</span>\r\n            <span className=\"sgp-f3\">{transPrice(this.state.choiceProductDetail.price || this.state.nowPrice)}</span>\r\n          </div>\r\n          <div className=\"sell-count\">\r\n            <div className=\"sell-count-l\"><span className=\"sc-f1\">总销量</span><span className=\"sc-f2\">{goodInfo.number}</span></div>\r\n            <div className=\"sell-count-r\"><span className=\"sc-f1\">累计评价</span><span className=\"sc-f2\">{this.props.comments.length}</span></div>\r\n          </div>\r\n          <div className={classnames({\"show-choice\": this.state.showMustChoice})}>\r\n            <div style={{display: this.state.showMustChoice ? 'block':'none'}} className=\"show-choice-title\">\r\n              <div className=\"sct-l\">请选择您要的商品信息</div>\r\n              <div onClick={this.closeMustChoice.bind(this)} className=\"sct-r\">X</div>\r\n            </div>\r\n            {\r\n              this.props.specName && this.props.specName.map((name, index) => (\r\n                <div className=\"specName-wrap\" key={index}>\r\n                  <div className=\"spec-name\">{name.specName}</div>\r\n                  <div className=\"spec-value\">\r\n                  {\r\n                    this.props.specValue && this.props.specValue.map((value, index) => {\r\n                      return value.specNameIndex === name.indexx ?  (\r\n                        <div\r\n                          className={classnames('spec-value-item', {'value-item-selected':this.state.specChoice[name.indexx-1] === value.indexx})}\r\n                          onClick={this.specValueClick(value)}\r\n                          key={index}\r\n                        >\r\n                          <span>{value.specValue}</span>\r\n                          <i className=\"item-selected-i\" style={{\r\n                            background: `url(${HOST}/image/ui/background_selected.png) 0px 0px no-repeat`\r\n                          }}></i>\r\n                        </div>\r\n                      ) : null\r\n                    })\r\n                  }\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n            <div className=\"g-num-wrap\">\r\n              <div className=\"good-number-name\">数量</div>\r\n              <div className=\"good-number-wrap\">\r\n                <div className=\"spec-num-input-wrap\">\r\n                  <input className=\"spec-number-input\" value={this.state.choiceNumber} onChange={this.choiceNumberChange.bind(this)} type=\"text\"/>\r\n\r\n                </div>\r\n                <div className=\"good-number-plus-minus\">\r\n                  <div onClick={this.plusNumber.bind(this)} className=\"spec-number-plus\" style={{background: `url(${HOST}/image/ui/plus.png) no-repeat`, backgroundSize: '11px 11px', marginBottom: '4px', border: '1px solid #a7a6ab'}}></div>\r\n                  <div onClick={this.minusNumber.bind(this)} className=\"spec-number-minus\" style={{background: `url(${HOST}/image/ui/minus.png) no-repeat`, backgroundSize: '11px 11px', border: '1px solid #a7a6ab'}}></div>\r\n                </div>\r\n              </div>\r\n              <div className=\"good-num-unit\">件</div>\r\n              <div className=\"good-num-kucun\">库存{this.state.choiceProductDetail.amount === undefined ? this.state.allAmount : this.state.choiceProductDetail.amount}件</div>\r\n            </div>\r\n            <div\r\n              style={{\r\n                display: this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount ? 'block' : 'none') : (this.state.choiceNumber > this.state.allAmount ? 'block' : 'none'),\r\n                marginTop: '10px',\r\n                marginLeft: '70px',\r\n              }}\r\n            >\r\n              <span className=\"good-num-over\">\r\n                <span style={{\r\n                  display: 'inline-block',\r\n                  background: `url(${HOST}/image/ui/msg.png) -61px -1px no-repeat`,\r\n                  width: '23px',\r\n                  height: '22px',\r\n                  marginBottom: '-5px'\r\n                }}></span>\r\n                <span>您所填写数量商品超过库存！</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"good-buy-wrap\">\r\n            <button onClick={this.buyNow.bind(this)}\r\n              className={classnames(\"good-buy-now\", {\r\n                'buy-now-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\r\n              })} to=\"/\">立即购买</button>\r\n            <button onClick={this.addShopCar.bind(this)} className={classnames(\"add-shopcat\", {\r\n                'add-shopcat-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\r\n              })}>加入购物车</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSpec.propTypes = {\r\n  goodId: PropTypes.string.isRequired,\r\n  goodDetail: PropTypes.array.isRequired,\r\n  goodInfo: PropTypes.object.isRequired,\r\n  smaillPicture: PropTypes.array.isRequired,\r\n  specConfig: PropTypes.array,\r\n  specName: PropTypes.array,\r\n  specValue: PropTypes.array,\r\n  comments: PropTypes.array.isRequired,\r\n  setBuyProductsAction: PropTypes.func.isRequired,\r\n  storeInfo: PropTypes.object.isRequired,\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    goodDetail: state.product.productDetail.goodDetail,\r\n    goodInfo: state.product.productDetail.goodInfo,\r\n    smaillPicture: state.product.productDetail.smaillPicture,\r\n    specConfig: state.product.productDetail.specConfig,\r\n    specName: state.product.productDetail.specName,\r\n    specValue: state.product.productDetail.specValue,\r\n    comments: state.product.productDetail.comments,\r\n    goodId: state.product.productDetail.goodId,\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction })(Spec))\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport LazyLoad from 'react-lazyload'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\n/**\r\n * 未实现懒加载\r\n */\r\nclass ProductInfo extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      showDetail: true\r\n    }\r\n  }\r\n  showDetial(showDetail) {\r\n    return function() {\r\n      this.setState({\r\n        showDetail\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"product-info-wrap\">\r\n        <div className=\"product-info-box\">\r\n          <div className=\"product-info-nav\">\r\n            <div className={classnames(\"pin-1\", {\r\n              'product-info-selected': this.state.showDetail\r\n            })} onClick={this.showDetial(true).bind(this)}>商品详情</div>\r\n            <div className={classnames(\"pin-2\", {\r\n              'product-info-selected': !this.state.showDetail\r\n            })} onClick={this.showDetial(false).bind(this)}>累计评价</div>\r\n          </div>\r\n          {\r\n            /*商品详情图*/\r\n            this.state.showDetail && this.props.infoPicture.map((item, index) => (\r\n              <div className=\"info-picture-item\" key={index}>\r\n                <LazyLoad height={600} offset={100}>\r\n                  <img src={`${HOST}/image/goods/info/${item.link}`}/>\r\n                </LazyLoad>\r\n              </div>\r\n            ))\r\n          }\r\n          {\r\n            /*评论*/\r\n            this.props.comments.map((item, index) => (\r\n              <div key={index}>\r\n                <div>{item.nickname}</div>\r\n                <div>{item.content}</div>\r\n                <div>{item.creaTime}</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nProductInfo.propTypes = {\r\n  infoPicture: PropTypes.array.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n}\r\n\r\nexport default ProductInfo\r\n","import React from 'react'\nimport queryString from 'query-string'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport { setProductDetailAction } from '../../flux/actions/productActions'\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport StoreHeader from '../../components/StoreHeader'\nimport Spec from './subpage/Spec'\nimport ProductInfo from './subpage/ProductInfo'\n\nclass ProductDetail extends React.Component {\n  componentWillMount() {\n    const info = queryString.parse(this.props.location.search)\n    // 没有 goodId 返回上一级路由\n    if (!/^\\d+/.test(info.goodId)) {this.props.history.push(this.props.auth.location || '/')}\n    this.props.setProductDetailAction(info.goodId)\n\n    this.props.setRouterLocationAction('/product_detail' + this.props.location.search)\n  }\n  componentWillUnmount() {\n    // 将 store 中的 productDetail，变成初始状态\n    this.props.setProductDetailAction(-1)\n  }\n  render() {\n    const product = this.props.productDetail\n    return (\n      <div>\n        <Header />\n        {\n          product.goodDetail.length < 1 ?\n            <div>{product.error || product.message || '商品还没有详情'}</div> :\n            <div>\n              {/*店铺头信息*/}\n              <StoreHeader storeInfo={product.goodInfo} />\n              <hr className=\"store-hr\" />\n              {/*商品信息属性*/}\n              <Spec storeInfo={product.goodInfo} />\n              {/*商品介绍信息*/}\n              <ProductInfo comments={product.comments} infoPicture={product.infoPicture} />\n            </div>\n        }\n      </div>\n    )\n  }\n}\n\n\nProductDetail.propTypes = {\n  productDetail: PropTypes.object.isRequired,\n  setProductDetailAction: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    productDetail: state.product.productDetail\n  }\n}\nexport default connect(mapStateToProps, { setProductDetailAction,setRouterLocationAction })(ProductDetail)\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport config from '../../../utils/config'\r\nimport { isEmail, isPhone } from '../../../utils/validator'\r\nconst HOST = config.HOST\r\n\r\nclass Safety extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      edit: '',  // email or phone or success or password\r\n      newEmail: '',\r\n      newPhone: '',\r\n      newPhone2: '',\r\n      smsCode1: '',\r\n      smsCode2: '',\r\n      password: '',\r\n      newPassword: '',\r\n      smsCode3: '',\r\n      smsState: 'normal', // wait or normal\r\n      property: 0,\r\n      pay: 100,  // 充值金额\r\n      showProperty: false,\r\n      errors: {}\r\n    }\r\n  }\r\n\r\n  // 切换修改手机和修改邮箱\r\n  editChange(_, edit) {\r\n    this.setState({\r\n      edit: edit,\r\n      smsState: 'normal'\r\n    })\r\n  }\r\n\r\n  editInputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  // 发短信\r\n  sendSMS(e) {\r\n    if (this.state.smsState !== 'normal') return;\r\n    const btn = e.target\r\n    var _this = this\r\n    axios.get(`${HOST}/api/operator/testsms`)\r\n      .then(res => {\r\n        console.log(res.data)\r\n        if (res.data.success) {\r\n          this.setState({smsState: 'wait'}, function() {\r\n            var count = 60\r\n            var interval = setInterval(function() {\r\n              count--\r\n              if (btn)\r\n                btn.innerText = `重发 ${count}...`\r\n              if (count == 0) {\r\n                clearInterval(interval)\r\n                _this.setState({smsState: 'normal'}, function() {\r\n                  if (btn)\r\n                    btn.innerText = '点击发送';\r\n                })\r\n              }\r\n            }, 1000)\r\n          })\r\n        }else {\r\n          this.setState({\r\n            errors: {...this.state.errors, [btn.name]: res.data.message}\r\n          })\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, [btn.name]: err.message}\r\n        })\r\n      })\r\n  }\r\n\r\n  // 修改邮箱\r\n  editEmailSubmit() {\r\n    var errors = {}\r\n    if (!isEmail(this.state.newEmail)) {\r\n      errors.newEmail = \"邮箱格式有误\"\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode1)) {\r\n      errors.smsCode1 = '验证码有误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      newEmail: this.state.newEmail,\r\n      smsCode: this.state.smsCode1,\r\n    }).then(res => {\r\n      if (res.data.success) {\r\n        return this.setState({\r\n          edit: 'success',\r\n          newEmail: '',\r\n          smsCode1: '',\r\n          errors: {}\r\n        })\r\n      }\r\n      this.setState({\r\n        errors: {...this.state.errors, emailSubmit: res.data.message}\r\n      })\r\n    }).catch(err => {\r\n      this.setState({\r\n        errors: {...this.state.errors, phoneSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  // 修改手机\r\n  editPhoneSubmit() {\r\n    var errors = {}\r\n    if (!isPhone(this.state.newPhone)) {\r\n      errors.newPhone = '手机格式有误'\r\n    }\r\n    if (this.state.newPhone !== this.state.newPhone2) {\r\n      errors.newPhone2 = '两次输入不一致'\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode2)) {\r\n      errors.smsCode2 = '验证码有误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      newPhone: this.state.newPhone,\r\n      smsCode: this.state.smsCode2\r\n    }).then(res => {\r\n      if (!res.data.success) {\r\n        return this.setState({\r\n          errors: {...this.state.errors, phoneSubmit: res.data.message}\r\n        })\r\n      }\r\n      this.setState({\r\n        edit: 'success',\r\n        newPhone: '',\r\n        newPhone2: '',\r\n        smsCode2: '',\r\n        errors: {}\r\n      })\r\n    }).catch(err => {\r\n      this.setState({\r\n        errors: {...this.state.errors, phoneSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  // 修改密码\r\n  editPasswordSubmit() {\r\n    var errors = {}\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\r\n      errors.password = '密码格式有误，6-20位，可包含,\\';)(!~·`\\/\\\\{}\"<>?+-=_.特殊字符'\r\n    }\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.newPassword)) {\r\n      errors.newPassword = '密码格式有误，6-20位，可包含,\\';)(!~·`\\/\\\\{}\"<>?+-=_.特殊字符'\r\n    }\r\n    if (!/^\\d{5,6}$/.test(this.state.smsCode3)) {\r\n      errors.smsCode3 = '验证码有误'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    axios.post(`${HOST}/api/users/modify_safety`, {\r\n      password: this.state.password,\r\n      newPassword: this.state.newPassword,\r\n      smsCode: this.state.smsCode3\r\n    }).then(res => {\r\n      if (!res.data.success) {\r\n        return this.setState({\r\n          errors: {...this.state.errors, passwordSubmit: res.data.message}\r\n        })\r\n      }\r\n      this.setState({\r\n        edit: 'success',\r\n        password: '',\r\n        newPassword: '',\r\n        smsCode3: '',\r\n        errors: {}\r\n      })\r\n    })\r\n    .catch(err => {\r\n      this.setState({\r\n        errors: {...this.state.errors, passwordSubmit: err.message}\r\n      })\r\n    })\r\n  }\r\n\r\n  // 立即充值\r\n  paySubmit() {\r\n    console.log(this.state.pay)\r\n  }\r\n\r\n  // 查看余额\r\n  checkProperty() {\r\n    if (this.state.showProperty) return;\r\n    if (!this.state.property) {\r\n      axios.get(`${HOST}/api/users/get_property`)\r\n        .then(res => {\r\n          if (!res.data.success) {\r\n            this.setState({\r\n              errors: {...this.state.errors, property: res.data.message}\r\n            })\r\n          }\r\n          this.setState({\r\n            showProperty: true,\r\n            property: res.data.payload\r\n          })\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            errors: {...this.state.errors, property: err.message}\r\n          })\r\n        })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"user-safe-wrap\">\r\n        <div className=\"uis-title\">你的基础信息</div>\r\n        <div>\r\n          <div className=\"uis-item\">\r\n            <span>会员名：</span>\r\n            <span>{this.props.user.nickname}</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>登录邮箱：</span>\r\n            <span>{this.props.user.email || '空'}</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"email\")}>修改邮箱</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>绑定手机：</span>\r\n            <span>{this.props.user.phone}</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"phone\")}>修改手机</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>我的密码：</span>\r\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"password\")}>修改密码</span>\r\n          </div>\r\n          <div className=\"uis-item\">\r\n            <span>账户余额：</span>\r\n            {\r\n              this.state.showProperty\r\n              ? <span className=\"uis-i-property\">￥{this.state.property}</span>\r\n              : <span onClick={this.checkProperty.bind(this)} className=\"uis-i-modify\">点击查看</span>\r\n            }\r\n            <span onClick={this.editChange.bind(this, null, \"pay\")} className=\"uis-i-modify\">立即充值</span>\r\n          </div>\r\n          {\r\n            this.state.errors.property && <div className=\"tit-err\">{this.state.errors.property}</div>\r\n          }\r\n        </div>\r\n        <div className=\"uis-edit-wrap\">\r\n          {\r\n            this.state.edit === 'email' ? (  // 修改邮箱\r\n              <div>\r\n                <div className=\"uis-title\">修改您的邮箱</div>\r\n                <div className=\"uis-e-content uis-e-email\">\r\n                {\r\n                  /*this.props.user.email && <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"old-email\">*旧的邮箱：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"oldEmail\" value={this.state.oldEmail} className=\"uis-modify-text\" id=\"old-email\" type=\"text\"/>\r\n                  </div>*/\r\n                }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-email\">*新的邮箱：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newEmail\" value={this.state.newEmail}  className=\"uis-modify-text\" id=\"new-email\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newEmail && <div className=\"form-err\">{this.state.errors.newEmail}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code1\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input onChange={this.editInputChange.bind(this)} name=\"smsCode1\" value={this.state.smsCode1}  id=\"sms-code1\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode1\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode1 && <div className=\"form-err\">{this.state.errors.smsCode1}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editEmailSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.emailSubmit && <div className=\"form-err\">{this.state.errors.emailSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ) : this.state.edit === 'phone' ? (  // 修改手机号码\r\n              <div>\r\n                <div className=\"uis-title\">修改您的手机</div>\r\n                <div className=\"uis-e-content uis-e-phone\">\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-phone\">*新的手机号码：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone\" value={this.state.newPhone} className=\"uis-modify-text\" id=\"new-phone\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPhone && <div className=\"form-err\">{this.state.errors.newPhone}</div>\r\n                  }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"new-phone2\">*请再次输入以确认：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone2\" value={this.state.newPhone2} className=\"uis-modify-text\" id=\"new-phone2\" type=\"text\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPhone2 && <div className=\"form-err\">{this.state.errors.newPhone2}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code2\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input id=\"sms-code2\" onChange={this.editInputChange.bind(this)} value={this.state.smsCode2} name=\"smsCode2\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode2\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode2 && <div className=\"form-err\">{this.state.errors.smsCode2}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editPhoneSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.phoneSubmit && <div className=\"form-err\">{this.state.errors.phoneSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ): this.state.edit === 'password' ? (  // 修改密码\r\n              <div>\r\n                <div className=\"uis-title\">修改您的密码</div>\r\n                <div className=\"uis-e-content uis-e-phone\">\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"password\">*输入当前密码：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"password\" value={this.state.password} className=\"uis-modify-text\" id=\"password\" type=\"password\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.password && <div className=\"form-err\">{this.state.errors.password}</div>\r\n                  }\r\n                  <div className=\"uis-item uis-edit-item\">\r\n                    <label htmlFor=\"newPassword\">*输入新的密码：</label>\r\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPassword\" value={this.state.newPassword} className=\"uis-modify-text\" id=\"newPassword\" type=\"password\"/>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.newPassword && <div className=\"form-err\">{this.state.errors.newPassword}</div>\r\n                  }\r\n                  <div className=\"uis-sms-wrap\">\r\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code3\">*验证码：</label></div>\r\n                    <div className=\"uis-sms-item\">\r\n                      <input id=\"sms-code3\" onChange={this.editInputChange.bind(this)} value={this.state.smsCode3} name=\"smsCode3\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\r\n                    </div>\r\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode3\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\r\n                  </div>\r\n                  {\r\n                    this.state.errors.smsCode3 && <div className=\"form-err\">{this.state.errors.smsCode3}</div>\r\n                  }\r\n                  <div className=\"uis-btn-submit\"><button onClick={this.editPasswordSubmit.bind(this)}>提交</button></div>\r\n                  {\r\n                    this.state.errors.passwordSubmit && <div className=\"form-err\">{this.state.errors.passwordSubmit}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            ) : this.state.edit === 'pay' ? (\r\n              <div>\r\n                <div className=\"uis-title\">余额充值</div>\r\n                <div className=\"uis-item uis-edit-item\">\r\n                  <label htmlFor=\"pay\">*输入充值金额(￥)：</label>\r\n                  <input onChange={this.editInputChange.bind(this)} name=\"pay\" value={this.state.pay} className=\"uis-modify-text uis-pay-test\" id=\"pay\" type=\"number\"/>\r\n                </div>\r\n                {\r\n                  this.state.errors.pay && <div className=\"form-err\">{this.state.errors.pay}</div>\r\n                }\r\n                <div className=\"uis-btn-submit uis-btn-pay\"><button onClick={this.paySubmit.bind(this)}>立即付款</button></div>\r\n              </div>\r\n            ) : this.state.edit === 'success' ? (\r\n              <h3>修改成功</h3>\r\n            ) : null\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSafety.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n   user: state.auth.user || {}\r\n })\r\n\r\nexport default connect(mapStateToProps)(Safety)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport axios from 'axios'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { getDate, formatDate } from '../../../utils/tools'\r\nimport { updateUserInfo } from '../../../flux/actions/authActions'\r\nimport { alertMessageAction } from '../../../flux/actions/messageAction'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\nfunction transDate(date, type) {\r\n  if (typeof(date) !== 'string') return null;\r\n  date = new Date(date)\r\n  if (Number.isNaN(date.getDate())) return null;\r\n  if (type === 'year') return date.getFullYear()\r\n  if (type === 'month') return date.getMonth() + 1\r\n  if (type === 'day') return date.getDate()\r\n  return null\r\n}\r\n\r\nvar sending = false // 记录消息是否发送中\r\nclass MyInfo extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      user: {},\r\n      birthDate: null,\r\n      birthMonth: null,\r\n      birthYear: null,\r\n      reallyName: '',\r\n      idCard: '',\r\n      avatar: '',\r\n      gender: -1,\r\n      years: [1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],\r\n      month: [1,2,3,4,5,6,7,8,9,10,11,12],\r\n      days: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],\r\n      errors: {\r\n        message: ''\r\n      }\r\n    }\r\n    this.genderRadioChange = this.genderRadioChange.bind(this)\r\n    this.birthChange = this.birthChange.bind(this)\r\n    this.diff = this.diff.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    // 请求个人资料\r\n    axios.get(`${HOST}/api/users/user_info`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, message: res.data.message}\r\n          })\r\n        }\r\n        var user = res.data.payload.userInfo\r\n        this.setState({\r\n          birthYear: transDate(user.birth, 'year'), birthMonth: transDate(user.birth, 'month'), birthDate: transDate(user.birth, 'day'), avatar: user.avatar,\r\n          gender: user.gender,\r\n          user,\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, message: err.message}\r\n        })\r\n      })\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.title = '优选 - 个人资料'\r\n  }\r\n\r\n  genderRadioChange(e) {\r\n    this.setState({\r\n      gender: parseInt(e.target.value)\r\n    })\r\n  }\r\n\r\n  reallyNameInputChange(e) {\r\n    this.setState({\r\n      reallyName: e.target.value\r\n    })\r\n  }\r\n\r\n  idCardInputChange(e) {\r\n    this.setState({\r\n      idCard: e.target.value\r\n    })\r\n  }\r\n\r\n  birthChange(e) {\r\n    var name = e.target.name\r\n    var value = e.target.value\r\n    var days = null\r\n    // 年份和日期已选择，计算天数\r\n    if (name === 'birthMonth' && this.state.birthYear) {\r\n      days = getDate(this.state.birthYear, value)\r\n\r\n    }else if (name === 'birthYear' && this.state.birthMonth) {\r\n      days = getDate(value, this.state.birthMonth)\r\n    }\r\n    this.setState({\r\n      [name]: Number(value),\r\n      days: days || this.state.days\r\n    })\r\n  }\r\n\r\n  avatarChange(e) {\r\n    var avatar = e.target.files[0]\r\n    var errors = {}\r\n    if (avatar && !/^image\\/(jpeg|png|gif|x-icon)$/.test(avatar.type)) {\r\n      errors.avatar = \"选择的文件类型不是图片\"\r\n    }\r\n    if (avatar && avatar.size > 5000000) {\r\n      errors.avatar = \"图片大小不能超过5M\"\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors: {...this.state.errors, avatar: errors.avatar}\r\n      })\r\n    }\r\n\r\n    var formData = new FormData()\r\n    formData.append('picture', avatar)\r\n    formData.append('type', 'avatar')\r\n    axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, avatar: res.data.message}\r\n          })\r\n        }\r\n        this.setState({\r\n          avatar: res.data.payload\r\n        })\r\n      })\r\n      .catch(err => {\r\n        return this.setState({\r\n            errors: {...this.state.errors, avatar: err.message}\r\n          })\r\n      })\r\n  }\r\n\r\n  // 用户信息是否改变\r\n  diff() {\r\n    var birth = new Date(this.state.user.birth)\r\n    var diff = {}\r\n    if (this.state.reallyName !== \"\")\r\n        diff.reallyName = this.state.reallyName\r\n    if (this.state.idCard !== \"\")\r\n        diff.idCard = this.state.idCard\r\n    if (this.state.avatar !== this.state.user.avatar)\r\n        diff.avatar = this.state.avatar\r\n    if (this.state.gender !== this.state.user.gender)\r\n      diff.gender = this.state.gender\r\n    if (\r\n      this.state.birthYear !== birth.getFullYear() ||\r\n      this.state.birthMonth !== birth.getMonth() +1 ||\r\n      this.state.birthDate !== birth.getDate()\r\n    ) {\r\n      diff.birthYear = this.state.birthYear\r\n      diff.birthMonth = this.state.birthMonth\r\n      diff.birthDate = this.state.birthDate\r\n    }\r\n    return Object.keys(diff).length > 0 ? diff : false\r\n  }\r\n\r\n  formSubmit(e) {\r\n    e.preventDefault()\r\n    var diff = this.diff()\r\n    if (!diff) {\r\n      return;\r\n    }\r\n    if (sending) {\r\n      return this.props.alertMessageAction(\"更改中。。。\")\r\n    }\r\n    var errors = {}\r\n    if (diff.reallyName && !/^[\\u4e00-\\u9fa5]{2,5}$/.test(diff.reallyName)) {\r\n      errors.reallyName = '真实姓名格式有误'\r\n    }\r\n    if (diff.idCard && !/^\\d{18}$/.test(diff.idCard)) {\r\n      errors.idCard = '身份证格式有误'\r\n    }\r\n    if (diff.avatar && this.state.avatar !== \"default.jpg\" && !/^\\w{10}_\\d{8}\\.(jpg|jpeg|png|icon|gif)$/.test(diff.avatar)) {\r\n      errors.avatar = '头像有误'\r\n    }\r\n    if (diff.gender && !/^[012]$/.test(diff.gender)) {\r\n      errors.gender = '请选择性别'\r\n    }\r\n    if (diff.birthYear && (!/^(19|20)\\d{2}$/.test(diff.birthYear) || !/^([1-9]|1[012])$/.test(diff.birthMonth) || !/^([1-9]|[1-2][0-9]|3[01])$/.test(diff.birthDate))) {\r\n      errors.birth = '日期格式有误'\r\n    }else if (diff.birthYear) {\r\n      diff.birth = `${diff.birthYear}-${diff.birthMonth}-${diff.birthDate}`\r\n      delete diff.birthYear\r\n      delete diff.birthMonth\r\n      delete diff.birthDate\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({ errors })\r\n    }\r\n\r\n    sending = true\r\n    axios.post(`${HOST}/api/users/modify_userinfo`, diff)\r\n      .then(res => {\r\n        sending = false\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, submit: res.data.message}\r\n          })\r\n        }\r\n        var user = res.data.payload.userInfo\r\n        this.setState({\r\n          birthYear: transDate(user.birth, 'year'), birthMonth: transDate(user.birth, 'month'), birthDate: transDate(user.birth, 'day'), avatar: user.avatar,\r\n          gender: user.gender,\r\n          reallyName: '',\r\n          idCard: '',\r\n          user\r\n        }, () => {\r\n          this.props.alertMessageAction('修改成功！')\r\n          this.props.updateUserInfo(user)\r\n        })\r\n      })\r\n      .catch(err => {\r\n        sending = false\r\n        this.setState({\r\n          errors: {...this.state.errors, submit: err}\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"my-info-wrap\">\r\n        <div className=\"mi-base-tit\">基本资料</div>\r\n        {\r\n          this.state.errors.message && <div className=\"mi-err\">{this.state.errors.message}</div>\r\n        }\r\n        <form className=\"mi-form\" name=\"baseInfoForm\" method=\"post\" onSubmit={this.formSubmit.bind(this)}>\r\n          <div className=\"mi-nickname\">\r\n            <span>亲爱的</span>\r\n            <span className=\"mi-nickname-b\">{this.state.user.nickname}</span>\r\n            <span>，填写真实的资料，有助于好友找到你哦。</span>\r\n          </div>\r\n          <div className=\"mi-avatar mi-item\">\r\n            <div className=\"mi-item-sub\">当前头像：</div>\r\n            <div className=\"mi-avatar-wrap mi-item-body\">\r\n              <img src={`${HOST}/image/member/avatar/${this.state.avatar}`} alt=\"当前头像\"/>\r\n              <div className=\"mi-avatar-btn\">\r\n                <input onChange={this.avatarChange.bind(this)} type=\"file\" hidefocus=\"true\"/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.avatar && <div className=\"mi-err\">{this.state.errors.avatar}</div>\r\n          }\r\n          <div className=\"mi-reallyName mi-item\">\r\n            <div className=\"mi-r-a mi-item-sub\">真实姓名：</div>\r\n            <div className=\"mi-item-body mi-r-input\">\r\n              <input onChange={this.reallyNameInputChange.bind(this)} placeholder={this.state.user.reallyName} value={this.state.reallyName} type=\"text\"/>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.reallyName && <div className=\"mi-err\">{this.state.errors.reallyName}</div>\r\n          }\r\n          <div className=\"mi-reallyName mi-item\">\r\n            <div className=\"mi-r-a mi-item-sub\">身份证号：</div>\r\n            <div className=\"mi-item-body mi-r-input\">\r\n              <input onChange={this.idCardInputChange.bind(this)} placeholder={this.state.user.idCard} value={this.state.idCard} type=\"text\"/>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.idCard && <div className=\"mi-err\">{this.state.errors.idCard}</div>\r\n          }\r\n          <div className=\"mi-gender mi-item\">\r\n            <div className=\"mi-gender-l mi-item-sub\">性别：</div>\r\n            <div className=\"mi-gender-r mi-item-body\">\r\n              <label htmlFor=\"gender0\">\r\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 0} id=\"gender0\" value=\"0\" name=\"gender\" type=\"radio\"/>\r\n                男\r\n              </label>\r\n              <label htmlFor=\"gender1\">\r\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 1} id=\"gender1\" value=\"1\" name=\"gender\" type=\"radio\"/>\r\n                女\r\n              </label>\r\n              <label htmlFor=\"gender2\">\r\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 2} id=\"gender2\" value=\"2\" name=\"gender\" type=\"radio\"/>\r\n                保密\r\n              </label>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.gender && <div className=\"mi-err\">{this.state.errors.gender}</div>\r\n          }\r\n          <div className=\"mi-birth-wrap mi-item\">\r\n            <div className=\"mi-item-sub\">生日：</div>\r\n            <div className=\"mi-birth-body mi-item-body\">\r\n              <select className=\"mi-birth-year\" onChange={this.birthChange} value={this.state.birthYear || '0'} name=\"birthYear\" id=\"birth_year\">\r\n                <option defaultValue=\"0\">年</option>\r\n                {\r\n                  this.state.years.map((year, index) => (\r\n                    <option key={index} defaultValue={year}>{year}</option>\r\n                  ))\r\n                }\r\n              </select>\r\n              <select onChange={this.birthChange} value={this.state.birthMonth || '0'} name=\"birthMonth\" id=\"birth_year\">\r\n                <option defaultValue=\"0\">月</option>\r\n                {\r\n                  this.state.month.map((month, index) => (\r\n                    <option key={index} defaultValue={month}>{month}</option>\r\n                  ))\r\n                }\r\n              </select>\r\n              <select onChange={this.birthChange} value={this.state.birthDate || '0'} name=\"birthDate\" id=\"birth_year\">\r\n                <option defaultValue=\"0\">日</option>\r\n                {\r\n                  this.state.days.map((day, index) => (\r\n                    <option key={index} defaultValue={day}>{day}</option>\r\n                  ))\r\n                }\r\n              </select>\r\n            </div>\r\n          </div>\r\n          {\r\n            this.state.errors.birth && <div className=\"mi-err\">{this.state.errors.birth}</div>\r\n          }\r\n          <div className=\"mi-reallyName mi-item\">\r\n            <div className=\"mi-r-a mi-item-sub\">最后登录时间：</div>\r\n            <div className=\"mi-item-body\">{formatDate(this.state.user.lastLogin, true)}</div>\r\n          </div>\r\n          {\r\n            !this.diff() ? null : <button type=\"submit\" className=\"mi-submit\">保存</button>\r\n          }\r\n          {\r\n            this.state.errors.submit && <div className=\"mi-err\">{this.state.errors.submit}</div>\r\n          }\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nMyInfo.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.auth.user || {}\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { updateUserInfo, alertMessageAction })(MyInfo)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport {\r\n  isEmpty,\r\n  isPhone,\r\n  isLength,\r\n  isEmail\r\n} from '../../../utils/validator'\r\nimport { setRouterLocationAction } from '../../../flux/actions/authActions'\r\n\r\nconst HOST = config.HOST\r\n\r\nvar initState = {\r\n  editState: -1, // >-1编辑 || -1添加\r\n  detailAddress: '',\r\n  postcode: '',\r\n  receiveName: '',\r\n  receivePhone: '',\r\n  isDefault: false,\r\n  errors: {}\r\n}\r\n\r\nclass Address extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = initState\r\n  }\r\n  componentWillMount() {\r\n    this.props.setRouterLocationAction('/member/address')\r\n    // if (this.props.memberId === -1) return;\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({\r\n        type: 'get_address'\r\n      }))\r\n    }\r\n  }\r\n\r\n  setDefailtChange(e) {\r\n    this.setState({\r\n      isDefault: e.target.checked\r\n    })\r\n  }\r\n\r\n  formInputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  editStateChange(_, item) {\r\n    this.setState({\r\n      editState: item._id,\r\n      isDefault: !!item.isDefault,\r\n      detailAddress: item.address,\r\n      postcode: item.postcode,\r\n      receivePhone: item.phone,\r\n      receiveName: item.receiveName,\r\n    })\r\n  }\r\n  deleteAddress(_, item) {\r\n    if (socket.status !== 'open') {\r\n      return this.setState({\r\n        errors: { submit: '网络未连接' }\r\n      })\r\n    }\r\n    if (this.state.editState === item._id) {\r\n      this.setState(initState)\r\n    }\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'delete_address',\r\n      content: item._id\r\n    }))\r\n  }\r\n\r\n  cancelEdit() {\r\n    this.setState(initState)\r\n  }\r\n\r\n  saveAddress() {\r\n    var errors = {}\r\n    if (isEmpty(this.state.detailAddress)) {\r\n      errors.detailAddress = '详细地址不能为空'\r\n    }\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.postcode)) {\r\n      errors.postcode = '邮编格式有误'\r\n    }\r\n    if (!isLength(this.state.receiveName, {min:2,max:10})) {\r\n      errors.receiveName = '姓名填写有误'\r\n    }\r\n    if (!isPhone(this.state.receivePhone)) {\r\n      errors.receivePhone = '手机号码填写有误'\r\n    }\r\n    if (socket.status !== 'open') {\r\n      errors.submit = '网络未连接'\r\n    }\r\n    if (!isEmpty(errors)) {\r\n      return this.setState({\r\n        errors\r\n      })\r\n    }\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'save_address',\r\n      content: {\r\n        ...this.state,\r\n        errors: null\r\n      }\r\n    }))\r\n    this.setState(initState)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"u-info\">\r\n        <div className=\"u-info-title\">收货地址</div>\r\n        <div className=\"u-add-form\">\r\n          <div className=\"u-add-sub\">编辑收货地址</div>\r\n          <div className=\"u-add-form-item u-add-textarea\">\r\n            <span>*详细地址:</span>\r\n            <textarea onChange={this.formInputChange.bind(this)} value={this.state.detailAddress} name=\"detailAddress\" placeholder=\"请输入详细地址信息，如道路、门牌号、小区、楼栋号、单元等信息\" className=\"u-add-i-text\"></textarea>\r\n          </div>\r\n          {\r\n            this.state.errors.detailAddress && <div className=\"u-add-err\">{this.state.errors.detailAddress}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*邮政编码:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.postcode} name=\"postcode\" placeholder=\"请编写邮编\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.postcode && <div className=\"u-add-err\">{this.state.errors.postcode}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*收货人姓名:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receiveName} name=\"receiveName\" placeholder=\"长度不超过10个字符\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.receiveName && <div className=\"u-add-err\">{this.state.errors.receiveName}</div>\r\n          }\r\n          <div className=\"u-add-form-item\">\r\n            <span>*手机号码:</span>\r\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receivePhone} name=\"receivePhone\" placeholder=\"收货时的手机号码\" className=\"u-add-i-text\" type=\"text\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.receivePhone && <div className=\"u-add-err\">{this.state.errors.receivePhone}</div>\r\n          }\r\n          <div className=\"default-check\">\r\n             <input className=\"u-add-checkbox\" onChange={this.setDefailtChange.bind(this)} checked={this.state.isDefault} type=\"checkbox\"/>\r\n            <div className=\"u-add-text\">默认收货地址：</div>\r\n          </div>\r\n          <div>\r\n            <button onClick={this.saveAddress.bind(this)} className=\"save-btn\">{this.state.editState === -1 ? '添加': '保存'}</button>\r\n            {\r\n              this.state.editState === -1 ? null : <button onClick={this.cancelEdit.bind(this)} className=\"save-btn cancel-btn\">取消</button>\r\n            }\r\n          </div>\r\n          {\r\n            this.state.errors.submit && <div className=\"u-add-err\">{this.state.errors.submit}</div>\r\n          }\r\n        </div>\r\n        <div className=\"u-address-table-wrap\">\r\n          <div className=\"u-add-sub\">我的收货地址</div>\r\n          <table border=\"1\" width=\"750\" style={{borderColor: '#eee', textAlign: 'center'}} cellSpacing=\"0\" cellPadding=\"0\">\r\n            <thead>\r\n              <tr>\r\n                <th>收货人</th>\r\n                <th>详细地址</th>\r\n                <th>邮编</th>\r\n                <th>电话/手机</th>\r\n                <th>操作</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {\r\n              this.props.address.map((item, index) => {\r\n                return (\r\n                  <tr className={classnames({'default-ads': item.isDefault === 1})} key={index}>\r\n                    <td>{item.receiveName}</td>\r\n                    <td className=\"detail-address\">{item.address}</td>\r\n                    <td>{item.postcode}</td>\r\n                    <td>{item.phone}</td>\r\n                    <td>\r\n                      <span onClick={this.editStateChange.bind(this, null, item)} className=\"add-edit-state\">编辑</span>\r\n                      <span> / </span>\r\n                      <span onClick={this.deleteAddress.bind(this, null, item)} className=\"add-edit-state\">删除</span>\r\n                    </td>\r\n                  </tr>\r\n                )\r\n              })\r\n            }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    address: state.auth.address || [],\r\n    memberId: state.auth.user._id === undefined ? -1 : state.auth.user._id\r\n  }\r\n}\r\nAddress.propTypes = {\r\n  address: PropTypes.array.isRequired,\r\n  memberId: PropTypes.number.isRequired\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction })(Address)\r\n","import React from 'react'\r\nimport { formatDate } from '../../utils/tools'\r\nimport { Link } from 'react-router-dom'\r\nimport { contactItemToChatAction } from '../../flux/actions/chatActions'\r\nimport './index.scss'\r\n\r\nfunction hasNullArray(products) {\r\n  for (var i = 0, len = products.length; i < len; i++) {\r\n    if (products[i] === null) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nfunction splitGoodName(name) {\r\n  return typeof(name) !== 'string' ? '' : name.length < 35 ? name : name.substring(0,34) + '...'\r\n}\r\n\r\n// 点击联系商家\r\nfunction contactSeller(userId, nickname, avatar) {\r\n  return function () {\r\n    contactItemToChatAction({ userId, nickname, avatar })\r\n  }\r\n}\r\n\r\nconst OrderItem = (props) => {\r\n  var order = props.order\r\n  return order === null ? <div></div> : (\r\n    <div className=\"order-item\">\r\n      <div className=\"o-i-head\">\r\n        <div className=\"oih-i oi-date\">{formatDate(order.creaTime, true)}</div>\r\n        <div className=\"oih-i oi-no\">订单号：{order.orderno}</div>\r\n        <div className=\"oih-i oi-sumprice\">￥{order.sumPrice}</div>\r\n        <div className=\"oih-i oi-storename\">{order.storeName}</div>\r\n        {\r\n          order.sellerId !== props.userId && <div onClick={contactSeller(order.sellerId, order.sellerName, order.sellerAvatar)} className=\"oih-i oi-callseller\">\r\n            <div className=\"oi-call-logo\"></div>\r\n            <div className=\"oi-contact\">和我联系</div>\r\n          </div>\r\n        }\r\n        {\r\n          /*订单收货*/\r\n          props.nav === 3 && !hasNullArray(order.products) ?\r\n          <div className=\"oih-i oih-sign\" onClick={() => { props.handler('signOrder', order) }}>签收订单</div> : null\r\n        }\r\n      </div>\r\n      <div className=\"oi-product\">\r\n        {\r\n          order.products.map((item, i) => {\r\n            return item === null ? null : (\r\n              <div className=\"oip-i-wrap\" key={i}>\r\n                <div className=\"oip-i oip-i-logo\"><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${item.logo}_210x210q90.jpg`} alt={item.goodName}/></div>\r\n                <div className=\"oip-i oip-i-info\">\r\n                  <div className=\"oip-i-goodname\"><Link to={`/product_detail?goodId=${item.goodId}`}>{splitGoodName(item.goodName)}</Link></div>\r\n                </div>\r\n                <div className=\"oip-i oip-i-price\">￥{item.price}</div>\r\n                <div className=\"oip-i oip-i-number\">{item.number}</div>\r\n                <div className=\"oip-i oip-exp\">\r\n                  {\r\n                    item.postWay && <div>\r\n                      <div className=\"oip-exp-post\">{item.postWay}</div>\r\n                      <div className=\"oip-exp-num\">{item.expNumber}</div>\r\n                    </div>\r\n                  }\r\n                </div>\r\n                <div className=\"oip-i oip-i-operator\">\r\n                 {\r\n                  order.isPay !== 1 ? null :\r\n                  item.isComment === 1 && item.isSign === 1 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\r\n                    <span className=\"opre-i-finish\">订单已完成</span>\r\n                  </div>) : item.isComment === 0 && item.isSign === 1 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\r\n                    <button className=\"opre-i-comment\" onClick={() => { props.handler('comment', order, item) }}>评价</button>\r\n                  </div>) : item.isSign === 0 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\r\n                    <button className=\"opre-i-sign\" onClick={() => { props.handler('sign', order, item) }}>确认收货</button>\r\n                  </div>) : item.isSend === 0 ? (<div className=\"opre-i-wrap\">\r\n                    <span className=\"opre-i-waitsend\">等待卖家发货</span>\r\n                  </div>) : null\r\n                 }\r\n                </div>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n        {\r\n          order.isPay !== 0 ? null : <div className=\"order-i-pay\">\r\n            <button onClick={() => { props.handler('pay', order) }}>立即付款</button>\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\nexport default OrderItem\r\n","/**\r\n * 评论组件\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\nimport socket from '../../utils/socket'\r\nimport { alertMessageAction } from '../../flux/actions/messageAction'\r\n\r\nimport './index.scss'\r\nconst HOST = config.HOST\r\n\r\nclass CommentBox extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      type: -1, // 0 好评，1中评，2差评\r\n      comment: '',\r\n      pictures: [],\r\n      errors: {}\r\n    }\r\n    this.commentTypeChange = this.commentTypeChange.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.props.orderDetailId === -1) {\r\n      this.props.closeCommentBox()\r\n    }\r\n  }\r\n\r\n  commentChange(e) {\r\n    var comment = e.target.value\r\n    if (comment.length > 200) return;\r\n    this.setState({\r\n      comment\r\n    })\r\n  }\r\n\r\n  pictureChange(e) {\r\n    var picture = e.target.files[0]\r\n    if (!picture || this.state.pictures.length >= 5) return;\r\n    if (!/^image\\//.test(picture.type)) {\r\n      return this.setState({ errors:{...this.state.errors, picture: '文件类型不是图片'} })\r\n    }else if (picture.size > 5000000) {\r\n      return this.setState({ errors:{...this.state.errors, picture: '图片超过5M，无法上传'} })\r\n    }\r\n    var formData = new FormData()\r\n    formData.append('picture', picture)\r\n    this.setState({\r\n      pictures: [...this.state.pictures, 'wait.gif']\r\n    }, () => {\r\n      axios.post(`${HOST}/api/order/comment_picture`, formData)\r\n        .then(res => {\r\n          if (!res.data.success) {\r\n            this.setState({ pictures: this.state.pictures.filter(p => p !== 'wait.gif'), errors:{...this.state.errors, picture: res.data.message} })\r\n          }\r\n          this.setState({\r\n            pictures: this.state.pictures.map((picture, i) => {\r\n              return picture === 'wait.gif' ? res.data.payload.picture : picture\r\n            }),\r\n            errors: {...this.state.errors, picture: ''}\r\n          })\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            errors: {...this.state.errors, picture: err.message}\r\n          })\r\n        })\r\n    })\r\n  }\r\n\r\n  choicePicture(e) {\r\n    if (this.state.pictures.length >= 5) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  deletePicture(picture) {\r\n    this.setState({\r\n      pictures: this.state.pictures.filter(item => item !== picture)\r\n    })\r\n  }\r\n\r\n  commentTypeChange(e) {\r\n    this.setState({\r\n      type: e.target.value\r\n    })\r\n  }\r\n\r\n  submitComment() {\r\n    var errors = {}\r\n    if (['0', '1', '2'].indexOf(this.state.type) === -1) {\r\n      errors.type = '亲，请选择评论类型'\r\n    }\r\n    if (this.state.comment.length > 200) {\r\n      errors.comment = '字数不能超过200字'\r\n    }\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({ errors })\r\n    }\r\n    axios.post(`${HOST}/api/order/submit_comment`, {\r\n      type: this.state.type,\r\n      comment: this.state.comment,\r\n      pictures: this.state.pictures,\r\n      orderDetailId: this.props.orderDetailId\r\n    }).then(res => {\r\n      if (!res.data.success) {\r\n        return this.setState({ errors: {submit: res.data.message} })\r\n      }\r\n      // 评论成功\r\n      console.log(res)\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'get_orders',\r\n          content: {limit: this.props.limit}\r\n        }))\r\n      }\r\n      this.props.alertMessageAction('评论已提交')\r\n      this.props.closeCommentBox()\r\n\r\n    }).catch(err => {\r\n      return this.setState({ errors: {submit: err.message} })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"comment-box\">\r\n        <div className=\"cb-com-wrap\">\r\n          <div className=\"cb-com-0\">\r\n            <input onChange={this.commentTypeChange} id=\"type0\" name=\"type\" value=\"0\" type=\"radio\"/>\r\n            <label htmlFor=\"type0\">好评</label>\r\n          </div>\r\n          <div className=\"cb-com-1\">\r\n            <input onChange={this.commentTypeChange} id=\"type1\" name=\"type\" value=\"1\" type=\"radio\"/>\r\n            <label htmlFor=\"type1\">中评</label>\r\n          </div>\r\n          <div className=\"cb-com-2\">\r\n            <input onChange={this.commentTypeChange} id=\"type2\" name=\"type\" value=\"2\" type=\"radio\"/>\r\n            <label htmlFor=\"type2\">差评</label>\r\n          </div>\r\n        </div>\r\n        {\r\n          this.state.errors.type && <div className=\"cb-err\">{this.state.errors.type}</div>\r\n        }\r\n        <div className=\"text-wrap\">\r\n          <textarea onChange={this.commentChange.bind(this)} value={this.state.comment} placeholder=\"亲，写点评价吧。\" name=\"comment\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n          <div className=\"text-len\">{200 - this.state.comment.length} 字</div>\r\n        </div>\r\n        {\r\n          this.state.errors.comment && <div className=\"cb-err\">{this.state.errors.comment}</div>\r\n        }\r\n        <div className=\"cb-img-wrap\">\r\n          <div className=\"cb-file\">\r\n            <input onClick={this.choicePicture.bind(this)} onChange={this.pictureChange.bind(this)} hidefocus=\"true\" className=\"file-input\" type=\"file\"/>\r\n            <span>晒照片</span>\r\n          </div>\r\n          <div className=\"cb-pic-wrap\">\r\n          {\r\n            this.state.pictures.map((picture, index) => {\r\n              return (<div className=\"cb-pic-item\" onClick={this.deletePicture.bind(this, picture)} key={index}>\r\n                  <img src={`${HOST}/image/${picture === 'wait.gif' ? 'ui/wait.gif' : 'goods/comment/' + picture + '_w40.jpg'}`}/>\r\n              </div>)\r\n            })\r\n          }\r\n          </div>\r\n          <div className=\"cb-pic-last\">{this.state.pictures.length === 0 ? '限5张' : 5-this.state.pictures.length + '/5'}</div>\r\n        </div>\r\n        {\r\n          this.state.errors.picture && <div className=\"cb-err\">{this.state.errors.picture}</div>\r\n        }\r\n        <div className=\"cb-btn-wrap\">\r\n          <div className=\"cb-btn-sub\" onClick={this.submitComment.bind(this)}>提交评论</div>\r\n          <div className=\"cb-btn-cancel\" onClick={this.props.closeCommentBox}>取消</div>\r\n        </div>\r\n        {\r\n          this.state.errors.submit && <div className=\"cb-err\">{this.state.errors.submit}</div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction })(CommentBox)\r\n","/**\r\n * 我的订单\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport { setPayOrderAction, prevPageOrdersAction } from '../../../flux/actions/orderActions'\r\nimport { alertMessageAction, confirmMessageAction } from '../../../flux/actions/messageAction'\r\n\r\nimport OrderItem from '../../../components/OrderItem'\r\nimport CommentBox from '../../../components/CommentBox'\r\n\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction isNullArray(productArray) {\r\n  for (var i = 0, len = productArray.length; i < len; i++) {\r\n    if (productArray[i])\r\n      return false\r\n  }\r\n  return true\r\n}\r\n\r\nclass Order extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      nav: 0,  // 0 all, 1 waitPay, 2 waitSend, 3 waitSign, 4 waitComment\r\n      errors: {},\r\n      limit: 0,\r\n      showCommentBox: false,\r\n      commentOrderDetailId: -1\r\n    }\r\n    this.closeCommentBox = this.closeCommentBox.bind(this)\r\n  }\r\n  componentWillMount() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({\r\n        type: 'get_orders',\r\n        content: { limit: this.state.limit }\r\n      }))\r\n    }else if (typeof(window) === 'object') {\r\n      setTimeout(() => {\r\n        if (socket.status === 'open') {\r\n          socket.ws.send(JSON.stringify({\r\n            type: 'get_orders',\r\n            content: { limit: this.state.limit }\r\n          }))\r\n        }\r\n      }, 200)\r\n    }\r\n  }\r\n\r\n  routeChangeHandler(route) {\r\n    if (this.state.nav === route) return;\r\n    this.setState({\r\n      nav: route\r\n    })\r\n  }\r\n\r\n  closeCommentBox() {\r\n    this.setState({ showCommentBox: false })\r\n  }\r\n\r\n  // 付款，签收，评论\r\n  orderItemOperatorHandler(nav, order, orderDetail) {\r\n    if (nav === 'pay') {\r\n      axios.post(`${HOST}/api/order/pay_order`, { orderno: order.orderno })\r\n        .then(res => {\r\n          if (!res.data.success) {\r\n            return this.setState({\r\n              errors: {...this.state.errors, pay: res.data.message}\r\n            })\r\n          }\r\n          this.props.setPayOrderAction(res.data.payload)\r\n          // 跳转到支付页面\r\n          this.props.history.push('/payorder')\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            errors: {...this.state.errors, pay: err.message}\r\n          })\r\n        })\r\n\r\n    }else if (nav === 'sign') {\r\n      // return this.props.alertMessageAction('睡瞌睡看看书')\r\n      if (socket.status !== 'open') {\r\n        return this.setState({ errors: {...this.state.errors, sign: '网络未连接'} })\r\n      }\r\n      // 弹出确认框\r\n      this.props.confirmMessageAction(`确认签收商品：${orderDetail.goodName}`, () => {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'sign_order',\r\n          content: {\r\n            orderno: order.orderno,\r\n            detailId: [orderDetail.orderDetailId],\r\n            limit: this.state.limit\r\n          }\r\n        }))\r\n      })\r\n    }else if (nav === 'signOrder') {\r\n      // console.log(order.orderno)\r\n      if (socket.status !== 'open') {\r\n        return this.setState({ errors: {...this.state.errors, sign: '网络未连接'} })\r\n      }\r\n      // 弹出确认框\r\n      this.props.confirmMessageAction(`确认签收订单：${order.orderno}`, () => {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'sign_order',\r\n          content: {\r\n            orderno: order.orderno,\r\n            detailId: order.products.map((item) => item.orderDetailId),\r\n            limit: this.state.limit\r\n          }\r\n        }))\r\n      })\r\n    }else if (nav === 'comment') {\r\n      this.setState({\r\n        showCommentBox: true,\r\n        commentOrderDetailId: orderDetail.orderDetailId\r\n      })\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    if(this.props.myOrders.end) return;\r\n    if (socket.status === 'open') {\r\n      this.setState({\r\n        limit: this.state.limit + 1\r\n      }, () => {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'get_orders',\r\n          content: { limit: this.state.limit }\r\n        }))\r\n      })\r\n    }\r\n  }\r\n\r\n  prevPage() {\r\n    if(this.state.limit <= 0) return;\r\n    if (socket.status === 'open') {\r\n      this.setState({\r\n        limit: this.state.limit - 1\r\n      }, () => {\r\n        this.props.prevPageOrdersAction()\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'get_orders',\r\n          content: { limit: this.state.limit }\r\n        }))\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let orders = this.props.myOrders.orders.map((item, index) => {\r\n        if (this.state.nav === 0) {\r\n          return item\r\n        }else if (this.state.nav === 1) {\r\n          return item.isPay === 0 ? item : null\r\n        }else if (item.isPay === 1) {\r\n          var products = item.products.map((prod) => {\r\n            return this.state.nav === 2 && prod.isSend === 0 ? prod :\r\n              this.state.nav === 3 && prod.isSend === 1 && prod.isSign === 0 ? prod :\r\n              this.state.nav === 4 && prod.isSend === 1 && prod.isSign === 1 && prod.isComment === 0 ? prod : null\r\n          })\r\n          return isNullArray(products) ? null : {...item, products}\r\n        }\r\n        return null\r\n      })\r\n    let {waitPay, waitSend, waitSign, waitComment} = this.props.myOrders.status\r\n    return (\r\n      <div>\r\n        <div className=\"u-order-wrap\">\r\n          <div onClick={this.routeChangeHandler.bind(this, 0)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 0\r\n          })}><span className=\"uoi-nav\">全部订单</span></div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 1)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 1\r\n          })}>\r\n            <span className=\"uoi-nav\">待付款</span>\r\n            { waitPay > 0 && <span className=\"uoi-hit uoi-count\">{waitPay}</span> }\r\n          </div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 2)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 2\r\n          })}>\r\n            <span className=\"uoi-nav\">待发货</span>\r\n            { waitSend > 0 && <span className=\"uoi-hit uoi-count\">{waitSend}</span> }\r\n          </div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 3)} className={classnames(\"u-o-item\", {\r\n            'uoi-hit': this.state.nav === 3\r\n          })}>\r\n            <span className=\"uoi-nav\">待收货</span>\r\n            { waitSign > 0 && <span className=\"uoi-hit uoi-count\">{waitSign}</span> }\r\n          </div>\r\n          <div onClick={this.routeChangeHandler.bind(this, 4)} className={classnames(\"u-o-item u-o-item-last\", {\r\n            'uoi-hit': this.state.nav === 4\r\n          })}>\r\n            <span className=\"uoi-nav\">待评价</span>\r\n            { waitComment > 0 && <span className=\"uoi-hit uoi-count\">{waitComment}</span> }\r\n          </div>\r\n        </div>\r\n        <div className=\"u-o-page\">\r\n          <div onClick={this.nextPage.bind(this)} className={classnames(\"u-o-next\", {\r\n            'u-o-next-void': this.props.myOrders.end\r\n          })}>下一页</div>\r\n          <div onClick={this.prevPage.bind(this)} className={classnames(\"u-o-prev\", {\r\n            'u-o-prev-void': this.state.limit === 0\r\n          })}>上一页</div>\r\n        </div>\r\n        <div className=\"uo-i-wrap\">\r\n          {\r\n            orders.map((item, index) => {\r\n              return <OrderItem key={index}\r\n                        handler={this.orderItemOperatorHandler.bind(this)}\r\n                        nav={this.state.nav}\r\n                        userId={this.props.userId}\r\n                        order={item} />\r\n            })\r\n          }\r\n        </div>\r\n        {\r\n          this.state.showCommentBox && this.state.commentOrderDetailId !== -1 && <CommentBox orderDetailId={this.state.commentOrderDetailId} closeCommentBox={this.closeCommentBox} limit={this.state.limit} />\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nOrder.propTypes = {\r\n  myOrders: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  myOrders: state.order.myOrders || {status: {}, orders:[]},\r\n  userId: state.auth.user.userId\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n  setPayOrderAction,\r\n  alertMessageAction,\r\n  confirmMessageAction,\r\n  prevPageOrdersAction\r\n})(Order)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, Route, Switch } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport config from '../../utils/config'\r\nimport PrivateRoute from '../../components/PrivateRoute'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\nimport Safety from './subpage/Safety'\r\nimport MyInfo from './subpage/MyInfo'\r\nimport Address from './subpage/Address'\r\nimport MyOrder from './subpage/MyOrder'\r\n\r\nconst HOST = config.HOST\r\n/**\r\n * 安全设置\r\n *    修改手机，关闭手机登陆\r\n * 个人资料\r\n * 编辑资料\r\n * 收货地址\r\n * 资金管理\r\n */\r\n\r\nclass UserInfo extends React.Component {\r\n  render() {\r\n    // 未登陆，并且未在验证中\r\n    // warning无法在现有状态转换期间更新(如在“render”中)。渲染方法应该是道具和状态的纯函数。\r\n    // if (!this.props.auth.isLogin && !this.props.auth.isVerify) { this.props.history.push('/login') }\r\n\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"member-header\">\r\n          {/*头部*/}\r\n          <div className=\"member-header-wrap\">\r\n            <div><img height=\"34px\" width=\"140px\" src={`${HOST}/image/ui/member-logo.png`} alt=\"\"/></div>\r\n            <div className=\"mh-choice-box\">\r\n              <Link to=\"/member\">\r\n                <div className=\"member-header-home\">首页</div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {\r\n          !this.props.auth.isLogin ?\r\n          <div>加载中。。。</div> :\r\n          <div className=\"member-wrap\">\r\n            {/*导航区*/}\r\n            <div className=\"member-nav\">\r\n              <div className=\"mn-avatar\"><img src={`${HOST}/image/member/avatar/${this.props.auth.user.avatar}`} alt=\"\"/></div>\r\n              <ul className=\"mn-navselect\">\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/safety'\r\n                })}><Link to=\"/member/safety\">安全设置</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member'\r\n                })}><Link to=\"/member\">个人资料</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': /^\\/member\\/myorder/.test(this.props.location.pathname)\r\n                })}><Link to=\"/member/myorder\">我的订单</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/address'\r\n                })}><Link to=\"/member/address\">收货地址</Link></li>\r\n              </ul>\r\n            </div>\r\n            {/*信息展示区*/}\r\n            <div className=\"member-info\">\r\n              <Switch>\r\n                <PrivateRoute path=\"/member\" exact component={MyInfo} />\r\n                <PrivateRoute path=\"/member/safety\" component={Safety} />\r\n                <PrivateRoute path=\"/member/address\" component={Address} />\r\n                <PrivateRoute path=\"/member/myorder\" component={MyOrder} />\r\n              </Switch>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nUserInfo.propTypes = {\r\n  auth: PropTypes.object.isRequired\r\n}\r\nexport default connect(mapStateToProps)(UserInfo)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport socket from '../../utils/socket'\r\nimport config from '../../utils/config'\r\n\r\nimport { setRouterLocationAction, setAddressAction } from '../../flux/actions/authActions'\r\nimport { setPayOrderAction } from '../../flux/actions/orderActions'\r\nimport { transPrice, intMultiplication, intAdd } from '../../utils/tools'\r\n\r\nimport Header from '../../components/Header'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Order extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      choiceAddress: {},\r\n      numbers: [],\r\n      totalPrice: 0,  // 总计金额\r\n      comments: [],\r\n      errors: {}\r\n    }\r\n    this.computeTotal = this.computeTotal.bind(this)\r\n  }\r\n  componentWillMount() {\r\n    // 没有要购买的商品\r\n    if (!Array.isArray(this.props.buyProducts) || this.props.buyProducts.length < 1) {\r\n      // 跳转到上一级\r\n      this.props.history.push(this.props.auth.location || '/')\r\n    }\r\n    this.props.setRouterLocationAction('/order')\r\n    // 判断是否登录，判断收货地址\r\n    // if (!this.props.auth.isLogin && !this.props.auth.isVerify) {\r\n    //   return this.props.history.push('/login')\r\n    // }\r\n    var buyProducts = this.props.buyProducts\r\n    var numbers = [];\r\n    var comments = [];\r\n    var totalPrice = 0;\r\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\r\n      comments[i] = ''\r\n      numbers[i] = buyProducts[i].number\r\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, buyProducts[i].number))\r\n    }\r\n    // 初始化购买数据量\r\n    this.setState({\r\n      numbers,\r\n      totalPrice,\r\n      comments\r\n    }, function () {\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({ type: 'get_address' })) // socket 获取收货地址\r\n      }else {\r\n        axios.get(`${HOST}/api/users/user_address`)  // api 端口获取收货地址\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              setAddressAction(res.data.payload)\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n          })\r\n      }\r\n    })\r\n  }\r\n  // 计算总价\r\n  computeTotal(index, number) {\r\n    var buyProducts = this.props.buyProducts\r\n    var totalPrice = 0;\r\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\r\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, i === index ? number : this.state.numbers[i]))\r\n    }\r\n    return totalPrice\r\n  }\r\n\r\n  addressChoice(address) {\r\n    return function() {\r\n      this.setState({\r\n        choiceAddress: address\r\n      })\r\n    }\r\n  }\r\n  numberChange(index, amount) {\r\n    return function(e) {\r\n      var number = e.target.value\r\n      if (!/^[1-9]\\d{0,}$/.test(number) || Number(number) > Number(amount))\r\n        return;\r\n      var nums = [...this.state.numbers]\r\n      nums[index] = number\r\n      this.setState({\r\n        numbers: nums,\r\n        totalPrice: this.computeTotal(index, number) // 重新计算总价\r\n      })\r\n    }\r\n  }\r\n  // 数量减减\r\n  numberMinus(index, amount) {\r\n    return function() {\r\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])-1}})\r\n    }\r\n  }\r\n  // 数量加加\r\n  numberPlus(index, amount) {\r\n    return function() {\r\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])+1}})\r\n    }\r\n  }\r\n  commentChange(index) {\r\n    return function(e) {\r\n      if (e.target.value.length > 200) return;\r\n      var comments = [...this.state.comments]\r\n      comments[index] = e.target.value\r\n      this.setState({\r\n        comments\r\n      })\r\n    }\r\n  }\r\n  submitOrder() {\r\n    if (!/^[1-9]\\d*$/.test(this.state.choiceAddress._id)) {\r\n      return this.setState({\r\n        errors: {\r\n          ...this.state.errors,\r\n          submitOrder: '请选择收货地址'\r\n        }\r\n      })\r\n    }\r\n    // 商品 Ids, 数量s, detailIds, addressId\r\n    var request = {\r\n      // goodIds: [],\r\n      goodDetailIds: [],\r\n      numbers: this.state.numbers,\r\n      addressId: this.state.choiceAddress._id,\r\n      messages: this.state.comments\r\n    }\r\n    var shopCarIds = []\r\n    for (var i = 0, len = this.props.buyProducts.length; i < len; i++) {\r\n      // request.goodIds.push(this.props.buyProducts[i].goodId)\r\n      request.goodDetailIds.push(this.props.buyProducts[i].goodDetailId)\r\n      if (/^[1-9]\\d*$/.test(this.props.buyProducts[i].shopCarId)) {\r\n        shopCarIds.push(this.props.buyProducts[i].shopCarId)\r\n      }\r\n    }\r\n    if (shopCarIds.length > 0) {  // 如果有购物车 Id\r\n      request.shopCarIds = shopCarIds\r\n    }\r\n    axios.post(`${HOST}/api/order/submit_order`, request)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {\r\n              ...this.state.errors,\r\n              submitOrder: res.data.message\r\n            }\r\n          })\r\n        }\r\n        this.props.setPayOrderAction(res.data.payload)\r\n        // 跳转到支付页面\r\n        this.props.history.push('/payorder')\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {\r\n            ...this.state.errors,\r\n            submitOrder: err.message\r\n          }\r\n        })\r\n      })\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        {/*收货地址*/}\r\n        <h3>选择收货地址</h3>\r\n        <div>\r\n          {\r\n            this.props.auth.address.map((item, index) => (\r\n              <div onClick={this.addressChoice(item).bind(this)} key={index}>\r\n                <div>{item.receiveName}</div>\r\n                <div>{item.address}</div>\r\n                <div>{item.postcode}</div>\r\n                <div>{item.phone}</div>\r\n              </div>\r\n            ))\r\n          }\r\n          <Link to=\"/member/address\"><div>添加收货地址</div></Link>\r\n        </div>\r\n        <h3>确认订单信息</h3>\r\n        {\r\n          this.props.buyProducts.map((item, index) => {\r\n            return (\r\n              <div key={index}>\r\n                <div>{item.storeName}, {item.nickname}</div>\r\n                <div><img width=\"50px\" height=\"50px\" src={item.logo ? `${HOST}/image/goods/logo/${item.logo}_210x210q90.jpg` : `${HOST}/api/goods/product_logo?goodId=${item.goodId}`} alt=\"\"/></div>\r\n                <div>{item.goodName}</div>\r\n                {\r\n                  Array.isArray(item.spec) ? item.spec.map((spec, index) => {\r\n                    return (\r\n                      // 顺序排列 index = config -1\r\n                      <div key={index}>{spec.specName}：{spec.specValue}</div>\r\n                    )\r\n                  }) : null\r\n                }\r\n                <div>单价{transPrice(item.price)}</div>\r\n                <div>\r\n                  <span onClick={this.numberMinus(index, item.amount).bind(this)}>-</span>\r\n                  数量<input onChange={this.numberChange(index, item.amount).bind(this)} value={this.state.numbers[index]} type=\"text\"/>\r\n                  <span onClick={this.numberPlus(index, item.amount).bind(this)}>+</span>\r\n                </div>\r\n                <div>库存：{item.amount}</div>\r\n                <div>小计{transPrice(intMultiplication(item.price, this.state.numbers[index]))}</div>\r\n                <div>给卖家留言：<input onChange={this.commentChange(index).bind(this)} value={this.state.comments[index]} type=\"text\"/></div>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n        <div>总计：{transPrice(this.state.totalPrice)}</div>\r\n        <button onClick={this.submitOrder.bind(this)}>提交订单</button>\r\n        {\r\n          this.state.errors.submitOrder && (\r\n            <div>{this.state.errors.submitOrder}</div>\r\n          )\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    buyProducts: state.order.buyProducts || []\r\n  }\r\n}\r\nOrder.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  buyProducts: PropTypes.array.isRequired\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction, setPayOrderAction })(Order)\r\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nconst PayHeader = (props) => {\n  return (\n    <div>\n      <h2>优选 收银台</h2>\n      <span>{props.auth.user.nickname}</span>\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth\n  }\n}\nexport default connect(mapStateToProps)(PayHeader)\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { isEmpty } from '../../utils/validator'\r\nimport axios from 'axios'\r\nimport config from '../../utils/config'\r\n\r\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\r\nimport PayHeader from './subpage/PayHeader'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass PayOrder extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      payway: 'alipay', // 余额 或 支付宝\r\n      property: -1,  // 余额\r\n      errors: {}\r\n    }\r\n    this.paywayChange = this.paywayChange.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (typeof(window) !== 'object') return;\r\n    /**\r\n     * 判断上一级页面是否 /order，跳到主页\r\n     */\r\n    this.props.setRouterLocationAction('/payorder')\r\n    if (!this.props.auth.isLogin) {\r\n      this.props.history.push('/login')\r\n    }\r\n    axios.get(`${HOST}/api/users/get_property`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, wallet: res.data.message}\r\n          })\r\n        }\r\n        this.setState({\r\n          property: res.data.payload,\r\n          errors: {...this.state.errors, wallet: ''}\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, wallet: '服务器忙'}\r\n        })\r\n      })\r\n  }\r\n\r\n  paywayChange(e) {\r\n    this.setState({\r\n      payway: e.target.value\r\n    })\r\n  }\r\n  setPayway(way) {\r\n    return function() {\r\n      this.setState({\r\n        payway: way\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    const payOrder = this.props.order.payOrder\r\n    const buyProducts = this.props.order.buyProducts\r\n    return (\r\n      <div>\r\n        <PayHeader />\r\n        {\r\n          this.props.order.payStatus !== 'success' ? null : (\r\n            <h1>付款成功</h1>\r\n          )\r\n        }\r\n        {\r\n          [isEmpty(buyProducts) ? null : (\r\n            buyProducts.map((item, index) => (\r\n              <div key={index}>\r\n                <div>{item.productName}</div>\r\n                <div>卖家：{item.nickname}</div>\r\n                {\r\n                  // Array.isArray(item.specChoice) && item.specChoice.map((choice, i) => (\r\n                  //   <div key={i}>\r\n                  //     <div>{item.specName[i].specName}: {item.specValue[choice].specValue}</div>\r\n                  //   </div>\r\n                  // ))\r\n                }\r\n              </div>\r\n            ))\r\n          ),\r\n          isEmpty(payOrder) ? null : (\r\n            <div key=\"sumPrice\">{payOrder.sumPrice}元</div>\r\n          )]\r\n        }\r\n        <h2>付款方式</h2>\r\n        <div onClick={this.setPayway('alipay').bind(this)}>\r\n          <input onChange={this.paywayChange} checked={this.state.payway === 'alipay'} name=\"payway\" type=\"radio\" value=\"alipay\"/>\r\n          <span>支付宝扫码支付</span>\r\n        </div>\r\n        <div onClick={this.setPayway('wallet').bind(this)}>\r\n          <input onChange={this.paywayChange} checked={this.state.payway === 'wallet'} name=\"payway\" type=\"radio\" value=\"wallet\"/>\r\n          <span>钱包余额支付</span>\r\n        </div>\r\n        {\r\n          isEmpty(payOrder) ? null : this.state.payway === 'alipay' ? (\r\n            <div>\r\n              {/*支付宝二维码*/}\r\n              <iframe title=\"alipay\" height=\"835px\" width=\"100%\" src={payOrder.alipayURL} frameBorder=\"0\"></iframe>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              { /*余额支付*/\r\n                this.state.errors.wallet ? (\r\n                  <div>{this.state.errors.wallet}</div>\r\n                ) : (\r\n                  this.state.property === -1 ? null : (\r\n                    <div>\r\n                      <div>订单号：{payOrder.orderno}</div>\r\n                      <div>账户余额：{this.state.property}</div>\r\n                      <div><input type=\"text\"/><button>点击发送验证码</button></div>\r\n                    </div>\r\n                  )\r\n                )\r\n              }\r\n            </div>\r\n          )\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    order: state.order,\r\n    auth: state.auth\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { setRouterLocationAction })(PayOrder)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport config from '../../utils/config'\r\nimport socket from '../../utils/socket'\r\nimport { setBuyProductsAction } from '../../flux/actions/orderActions'\r\nimport { toggleChatAction } from '../../flux/actions/chatActions'\r\nimport { intMultiplication, intAdd, transPrice } from '../../utils/tools'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass ShopingCart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      height: 0,\r\n      bodyStatus: 'hide',\r\n      navStatus: 'hide',\r\n      choiceAll: true,\r\n      choiceStores: [],\r\n      choiceProducts: [],\r\n    }\r\n  }\r\n\r\n  // componentWillMount() {\r\n\r\n  // }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var _this = this\r\n      this.setState({\r\n        height: document.documentElement.clientHeight\r\n      })\r\n      window.onresize = function() {\r\n        _this.setState({\r\n          height: document.documentElement.clientHeight\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      window.onresize = null\r\n    }\r\n  }\r\n\r\n  showCarBody() {\r\n    var interval = -1\r\n    return function() {\r\n      var isHide = this.state.bodyStatus === 'hide'\r\n      var width = isHide ? -280 : 0\r\n      var inter = isHide ? 15 : 20\r\n      var out = isHide ? 300 : 200\r\n      var diff = isHide ? 14 : 28\r\n      var _this = this\r\n      _this.setState({\r\n          bodyStatus: isHide ? 'show' : 'hide',\r\n          navStatus: isHide ? 'show' : 'hide',\r\n      }, function() {\r\n        interval = setInterval(function() {\r\n          width = isHide ? width + diff : width - diff\r\n          _this.refs.shopCarBody.style.marginRight = width + 'px'\r\n        }, inter)\r\n        setTimeout(function() {\r\n          clearInterval(interval)\r\n          _this.refs.shopCarBody.style.marginRight = isHide ? '0px' : '-280px'\r\n        }, out)\r\n      })\r\n    }\r\n  }\r\n  showNav() {\r\n    this.setState({\r\n      navStatus: 'show'\r\n    })\r\n  }\r\n  hideNav() {\r\n    if (this.state.bodyStatus === 'show') return\r\n    this.setState({\r\n      navStatus: 'hide'\r\n    })\r\n  }\r\n\r\n  // 显示或隐藏聊天窗口\r\n  toggleChat() {\r\n    toggleChatAction(!this.props.hideChat)\r\n  }\r\n\r\n  // 购物车商品数量减一\r\n  numberMinus(product) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (product.number - 1 < 1 || socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'shop_car_number_minus',\r\n          target: 'koa',\r\n          content: product.shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 购物车商品数量加一\r\n  numberPlus(product) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (product.number + 1 > product.amount || socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'shop_car_number_plus',\r\n          target: 'koa',\r\n          content: product.shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 购物车删除商品\r\n  deleteShopProduct(shopCarId) {\r\n    var timer = 0;\r\n    return function() {\r\n      var now = Date.now()\r\n      if (now - timer > 800) {\r\n        if (socket.status !== 'open') return\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'delete_shop_car_product',\r\n          target: 'koa',\r\n          content: shopCarId\r\n        }))\r\n      }\r\n      timer = now\r\n    }\r\n  }\r\n\r\n  // 全选单选框改变\r\n  allCheckboxChange(e) {\r\n    if (e.target.checked) {\r\n      this.setState({\r\n        choiceAll: true\r\n      })\r\n    }else {\r\n      this.setState({\r\n        choiceAll: false,\r\n        choiceStores: [],\r\n        choiceProducts: []\r\n      })\r\n    }\r\n  }\r\n  // 商店单选框改变\r\n  storeCheckboxChange(storeId) {\r\n    return function(e) {\r\n      if (e.target.checked) {\r\n        this.setState({\r\n          choiceStores: [...this.state.choiceStores, storeId]\r\n        })\r\n      }else {\r\n        this.setState({\r\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\r\n          choiceAll: false,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // 商品单选框改变\r\n  productCheckboxChange(shopCarId, storeId) {\r\n    return function(e) {\r\n      if (e.target.checked) {\r\n        this.setState({\r\n          choiceProducts: [...this.state.choiceProducts, shopCarId]\r\n        })\r\n      }else {\r\n        this.setState({\r\n          choiceProducts: this.state.choiceProducts.filter(i => i !== shopCarId),\r\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\r\n          choiceAll: false,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // 计算选中商品的数量\r\n  computeChoiceCount() {\r\n    let count = 0  // 购物车选中商品个数\r\n    let price = 0  // 购物车选中商品总价格\r\n    let shopCarProductsLength = 0  // 购物车商品数量\r\n    let shopCar = this.props.auth.shopCar\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      shopCarProductsLength += shopCar[i].products.length\r\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\r\n        count += shopCar[i].products.length // 计算个数\r\n        shopCar[i].products.forEach(item => {\r\n          price = intAdd(price, intMultiplication(item.product.price, item.product.number))  // 计算选中价格\r\n        })\r\n        continue\r\n      }\r\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\r\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\r\n          count++\r\n          price = intAdd(price, intMultiplication(shopCar[i].products[j].product.price, shopCar[i].products[j].product.number))  // 计算选中价格\r\n        }\r\n      }\r\n    }\r\n    return {count, price, shopCarProductsLength}\r\n  }\r\n\r\n  // 点击结算\r\n  cashierShopCar() {\r\n    var shopCar = this.props.auth.shopCar\r\n    var shopCarProductsLength = 0\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      shopCarProductsLength += shopCar[i].products.length\r\n    }\r\n    if (shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)) return // 什么都没选\r\n    var buyProducts = []\r\n    for (let i = 0, len = shopCar.length; i < len; i++) {\r\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\r\n        shopCar[i].products.forEach(item => {\r\n          buyProducts.push({\r\n            ...item.product,\r\n            spec: item.spec\r\n          })\r\n        })\r\n        continue\r\n      }\r\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\r\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\r\n          buyProducts.push({\r\n            ...shopCar[i].products[j].product,\r\n            spec: shopCar[i].products[j].spec\r\n          })\r\n        }\r\n      }\r\n    }\r\n    this.props.setBuyProductsAction(buyProducts)\r\n    this.props.history.push('/order')\r\n  }\r\n\r\n  render() {\r\n    const auth = this.props.auth\r\n    // 未登陆\r\n    if (!this.props.auth.isLogin || !Array.isArray(auth.shopCar)) {\r\n      return (\r\n        <div></div>\r\n      )\r\n    }\r\n\r\n    let computeChoice = this.computeChoiceCount.call(this)\r\n    return (\r\n      <div style={{height: this.state.height + 'px'}} className=\"shopcar\">\r\n        <div className={classnames(\"shopcar-nav\", {\r\n           'shopcar-nav-transparent': this.state.navStatus === 'hide'\r\n        })} style={{height: this.state.height + 'px'}}>\r\n          <div className=\"shopcar-nav-wrap\">\r\n            <Link to=\"/member\">\r\n              <div style={{marginTop: this.state.height * 0.3 + 'px'}} className=\"user-logo\">\r\n                <img src={`${HOST}/image/member/avatar/${auth.user.avatar}`} alt=\"\"/>\r\n              </div>\r\n            </Link>\r\n            <div onMouseOver={this.showNav.bind(this)} onMouseLeave={this.hideNav.bind(this)} onClick={this.showCarBody().bind(this)} className={classnames(\"shop-mab\", {'shop-mab-focus': this.state.bodyStatus === 'show'})}>\r\n              <div className=\"sp-logo\"><img src={`${HOST}/image/ui/shopingcar_logo.png`} /></div>\r\n              <div className=\"sp-font\">购物车</div>\r\n              <div className=\"sp-count\">{computeChoice.shopCarProductsLength}</div>\r\n            </div>\r\n            <div className=\"sp-chat-wrap\" onClick={this.toggleChat.bind(this)}>\r\n              <div className=\"spc-img\"><img width=\"35px\" height=\"35px\" src={`${HOST}/image/ui/${this.props.notRead > 0 ? 'frog_gua.png' : 'frog.png'}`} /></div>\r\n              {\r\n                this.props.notRead > 0 ? <div className=\"spc-notread\">{this.props.notRead}</div> : null\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/*购物车商品*/}\r\n        <div ref=\"shopCarBody\"\r\n          className=\"shopcar-body\"\r\n          style={{height: this.state.height + 'px'/*,display: this.state.bodyStatus === 'show' ? 'block' : 'none'*/}}>\r\n          <div className=\"sc-choice-all-wrap\">\r\n            <input checked={this.state.choiceAll} onChange={this.allCheckboxChange.bind(this)} type=\"checkbox\"/>\r\n            <span>全选</span>\r\n          </div>\r\n          <div className=\"sc-products-wrap\" style={{height: Number(this.state.height) - 110 + 'px'}}>\r\n          {\r\n            auth.shopCar.map((item, index) => {\r\n              return (\r\n                <div className=\"sc-store-wrap\" key={index}>\r\n                  <div className=\"sc-store-title sc-line-box\">\r\n                    <div className=\"sc-line-item\">\r\n                      <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.storeId) !== -1} onChange={this.storeCheckboxChange(item.storeId).bind(this)} type=\"checkbox\"/>\r\n                    </div>\r\n                    <div className=\"sc-line-item sc-store-name\">{item.storeName}</div>\r\n                  </div>\r\n                  {\r\n                    item.products.map((item, i) => {\r\n                      return (\r\n                        <div className=\"sc-line-box sc-product-wrap\" key={i}>\r\n                          <div className=\"sc-line-item sc-product-checkbox\">\r\n                            <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.product.storeId) !== -1 || this.state.choiceProducts.indexOf(item.product.shopCarId) !== -1}\r\n                              onChange={this.productCheckboxChange(item.product.shopCarId, item.product.storeId).bind(this)}\r\n                              type=\"checkbox\"/>\r\n                          </div>\r\n                          <div className=\"sc-line-item sc-product-logo\"><img width=\"50px\" src={`${HOST}/image/goods/logo/${item.product.logo}`} title={item.product.goodName} /></div>\r\n                          <div className=\"sc-line-item sc-product-spec\">{\r\n                            item.spec.map((spec, j) => {\r\n                              if (j > 1) return null // 只显示 2 个分类信息\r\n                              return (\r\n                                <p className=\"sc-product-spec-item\" title={spec.specName + \"：\" + spec.specValue} key={j}>{spec.specValue}</p>\r\n                              )\r\n                            })\r\n                          }</div>\r\n                          <div className=\"sc-line-item sc-product-number\">{item.product.number}</div>\r\n                          <div className=\"sc-line-price\">￥{transPrice(intMultiplication(item.product.price, item.product.number))}</div>\r\n                          <div className=\"sc-choice-wrap\">\r\n                            <div onClick={this.numberMinus(item.product).bind(this)} className=\"sc-choice-unlike\"><img title=\"数量减一\" src={`${HOST}/image/ui/unlike.png`} alt=\"\"/></div>\r\n                            <div onClick={this.numberPlus(item.product).bind(this)} className=\"sc-choice-like\"><img title=\"数量加一\"  src={`${HOST}/image/ui/like.png`} alt=\"\"/></div>\r\n                            <div onClick={this.deleteShopProduct(item.product.shopCarId).bind(this)} className=\"sc-choice-delete\"><img title=\"删除\" src={`${HOST}/image/ui/delete.png`} alt=\"\"/></div>\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })\r\n                  }\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n          </div>\r\n          <div className=\"sc-Cashier-wrap\">\r\n            <div className=\"sc-Cashier-clear\">\r\n              <div className=\"sc-s-count\">已选 {computeChoice.count} 件</div>\r\n              <div className=\"sc-s-price\">￥ {transPrice(computeChoice.price)}</div>\r\n            </div>\r\n            <div onClick={this.cashierShopCar.bind(this)} className={classnames(\"sc-Cashier\", {\r\n              'sc-empty': computeChoice.shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)\r\n            })}>\r\n              <span>结算</span>\r\n              <div className=\"sc-Cashier-icon\"><img width=\"18px\" height=\"18px\" src={`${HOST}/image/ui/package.png`} /></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nShopingCart.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  setBuyProductsAction: PropTypes.func.isRequired,\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    hideChat: state.chat.hideChat,\r\n    notRead: state.chat.messagesNotRead.reduce(function(prev, next) {\r\n      return prev + next.notRead\r\n    }, 0)\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction })(ShopingCart))\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport { formatDate } from '../../../utils/tools'\r\n\r\nimport { messageNotReadItemToChatAction, messageItemToChatAction } from '../../../flux/actions/chatActions'\r\nconst HOST = config.HOST\r\n\r\nfunction subMessage(message) {\r\n  var msg = message.replace(/{{=\\w+\\.(jpg|png|icon|gif|jpeg)}}/g, '【图片】').replace('&lt;', '<').replace('&gt;', '>')\r\n  return message.length < 19 ? msg : msg.substring(0,18) + '...'\r\n}\r\n\r\nconst Message = props => {\r\n  return (\r\n    <div className=\"chat-msg-wrap\">\r\n      { // 未读消息\r\n        [props.messagesNotRead.map((item, index) => (\r\n          <div onClick={props.messageNotReadItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n            <div className=\"msg-i-userwrap\">\r\n              <div className=\"msg-i-avatar\" style={{\r\n                background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n              }}></div>\r\n              <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n            </div>\r\n            <div className=\"msg-i-wrap\">\r\n              <div className=\"msg-i-disone\">{(Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              <div className=\"msg-i-len\">{item.notRead}</div>\r\n            </div>\r\n              <div className=\"msg-i-time\">{Array.isArray(item.content) && item.content.length > 0 ? formatDate(item.content[item.content.length-1].creaTime) : ''}</div>\r\n          </div>\r\n        )), // 已读消息\r\n          props.messages.map((item, index) => (\r\n            <div onClick={props.messageItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n              <div className=\"msg-i-userwrap\">\r\n                <div className=\"msg-i-avatar\" style={{\r\n                  background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n                }}></div>\r\n                <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n              </div>\r\n              <div className=\"msg-i-wrap\">\r\n                <div className=\"msg-i-disone\">{props.chatnow !== item.userId && item.wait ? subMessage(item.wait) : (Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    messagesNotRead: Array.isArray(state.chat.messagesNotRead) ? state.chat.messagesNotRead : [],\r\n    messages: Array.isArray(state.chat.messages) ? state.chat.messages : [],\r\n    chatnow: state.chat.chatnow\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { messageNotReadItemToChatAction, messageItemToChatAction })(Message)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\nimport socket from '../../../utils/socket'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\n// 点击联系人到聊天框\r\nfunction contactClick(item) {\r\n  return function() {\r\n    contactItemToChatAction(item)\r\n  }\r\n}\r\n\r\nconst Contacts = (props) => {\r\n  if (socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'get_contacts'\r\n    }))\r\n  }\r\n  const online = []\r\n  const offline = []\r\n  props.contacts.forEach(i => {\r\n    if (i.isOnline) {\r\n      online.push(i)\r\n    }else {\r\n      offline.push(i)\r\n    }\r\n  })\r\n  return (\r\n    <div>\r\n      {\r\n        props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n        [\r\n          online.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          )),\r\n          offline.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item chat-item-offline\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n// class Contacts extends React.Component {\r\n//   componentWillMount() {\r\n//     // socket 请求 联系人列表\r\n//     if (socket.status === 'open') {\r\n//       socket.ws.send(JSON.stringify({\r\n//         type: 'get_contacts'\r\n//       }))\r\n//     }\r\n//   }\r\n//   // 点击联系人到聊天框\r\n//   contactClick(item) {\r\n//     contactItemToChatAction(item)\r\n//   }\r\n//   render() {\r\n//     const online = []\r\n//     const offline = []\r\n//     this.props.contacts.forEach(i => {\r\n//       if (i.isOnline) {\r\n//         online.push(i)\r\n//       }else {\r\n//         offline.push(i)\r\n//       }\r\n//     })\r\n//     return (\r\n//       <div>\r\n//         {\r\n//           this.props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n//           [\r\n//             online.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             )),\r\n//             offline.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item chat-item-offline\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             ))\r\n//           ]\r\n//         }\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    contacts: Array.isArray(state.chat.contacts) ? state.chat.contacts : []\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Contacts)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Search extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      searchAns: [],\r\n      keyword: '',\r\n      message: ''\r\n    }\r\n    this.shakeGetAns = this.shakeGetAns().bind(this)\r\n  }\r\n\r\n  // 防抖获取结果\r\n  shakeGetAns() {\r\n    var timer = 0\r\n    var timeout = -1;\r\n    return function(keyword) {\r\n      var _this = this\r\n      clearTimeout(timeout) // 清除前一个定时器\r\n      timeout = setTimeout(function() {\r\n        _this.setState({\r\n          message: '搜索中...'\r\n        })\r\n        axios.get(`${HOST}/api/users/search_contacts?keyword=${_this.state.keyword}`)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              _this.setState({\r\n                searchAns: res.data.payload,\r\n                message: res.data.payload.length === 0 ? '未搜索到联系人...' : ''\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n          })\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  keywordChange(e) {\r\n    var _this = this\r\n    var keyword = e.target.value\r\n    this.setState({\r\n      keyword\r\n    }, function() {\r\n      _this.shakeGetAns(keyword)\r\n    })\r\n  }\r\n\r\n  contactsClick(item) {\r\n    contactItemToChatAction(item)\r\n  }\r\n\r\n  addContactsClick(item) {\r\n    return function(e) {\r\n      e.stopPropagation()\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'add_contacts',\r\n          content: item.userId\r\n        }))\r\n        this.setState({\r\n          searchAns: this.state.searchAns.filter(i => i.userId !== item.userId)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-search-wrap\">\r\n        <div className=\"chat-s-input\">\r\n          <div className=\"chat-s-i-l\"><input value={this.state.keyword} placeholder=\"输入联系人昵称\" onChange={this.keywordChange.bind(this)} type=\"text\"/></div>\r\n          <div className=\"chat-s-i-r\">点击搜索</div>\r\n        </div>\r\n        <div className=\"chat-s-ans\">\r\n          {\r\n            Array.isArray(this.state.searchAns) && this.state.searchAns.length === 0 ? <div className=\"con-search-miss\">{this.state.message}</div> : this.state.searchAns.map((item, index) => (\r\n              <div onClick={this.contactsClick.bind(this, item)} className=\"c-s-item\" key={index}>\r\n                <div className=\"c-s-i-avatar\"><img src={`${HOST}/image/member/avatar/${item.avatar}`} /></div>\r\n                <div className=\"c-s-i-nickname\">{item.nickname}</div>\r\n                <div onClick={this.addContactsClick(item).bind(this)} className=\"c-s-i-btn-add\">加好友</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport config from '../../../utils/config'\r\nimport wss from '../../../utils/socket'\r\nimport { swingChatWindowAction, setWaitMessageAction, sendingMessageAction } from '../../../flux/actions/chatActions'\r\nconst HOST = config.HOST\r\n\r\n// function readFile(file, callback) {\r\n//   var reader = new FileReader()\r\n//   //以二进制形式读取文件\r\n//   reader.readAsArrayBuffer(file)\r\n//   reader.onload = function(e) {\r\n//     callback(e.target.result)\r\n//   }\r\n// }\r\n\r\nfunction transMessage(msg) {\r\n  if (msg === '' || typeof(msg) !== 'string') return msg\r\n    // firefox 不支持正则前置断言\r\n    // images = msg.match(/(?<!{{=)\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\r\n  var images = msg.match(/[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)(?=}})/g)\r\n  if (images) {\r\n    // var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)}}/)\r\n    var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.[jpgenifco]{3,4}}}/i)\r\n    msg = msgs[0]\r\n    for (var i = 1, len = msgs.length; i < len; i++) {\r\n      msg += `<img chat=\"${images[i-1]}\" src=\"${HOST}/image/member/chat/${/\\.gif$/.test(images[i-1]) ? images[i-1] : images[i-1] + '_w80.jpg'}\">${msgs[i]}`\r\n    }\r\n  }\r\n  return msg\r\n}\r\n\r\nclass ChatWindow extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      message: '',\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    }\r\n    this.scrollToButton = this.scrollToButton.bind(this)\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // console.log(error)\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    // console.log(error, info)\r\n    // logErrorToMyService(error, info);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = function (e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragleave = function(e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragover = function(e) {\r\n        e.preventDefault();\r\n    }\r\n    var _this = this\r\n    this.refs.textarea.ondrop = function(e) {\r\n      e.preventDefault()\r\n      e.stopPropagation() // 火狐浏览器，拖动时打开新页面\r\n      if (!_this.props.chat.chatnow) return;\r\n      var file = e.dataTransfer.files[0]\r\n      if (!file || file.size > '5048576‬') {\r\n        return; // 5M 以下的文件\r\n      }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\r\n        return; // 不支持的格式\r\n      }\r\n      var formData = new FormData()\r\n      formData.append('picture', file)\r\n      axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            _this.props.setWaitMessageAction(_this.refs.textarea.innerHTML += `<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\r\n          }else {\r\n            console.log(res)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n    }\r\n    document.getElementsByClassName(\"chatw-show-wrap\")[0].onclick = function(e) {\r\n      var img = e.target.getAttribute('chat')\r\n      if (img && /^\\w{10}_\\d{7,9}\\.(jpg|jpeg|png|icon)$/.test(img)) {\r\n        console.log(img)\r\n        _this.setState({\r\n          showChatImage: true,\r\n          chatImage: img\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = null\r\n    this.refs.textarea.ondragleave = null\r\n    this.refs.textarea.ondragover = null\r\n    this.refs.textarea.ondrop = null\r\n  }\r\n\r\n  // 聊天对象改变时，拿出未发送消息\r\n  componentWillReceiveProps(nextProps, b) {\r\n    // console.log(nextProps, b)\r\n    if (typeof(window) !== 'object') { return }\r\n    var chat = this.props.chat\r\n    // 将消息中的 wait 提取出\r\n    if (chat.chatnow !== nextProps.chat.chatnow) {\r\n      var now = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (now && now.wait) {\r\n        // this.refs.textarea.classList.remove('textarea-f1')\r\n        this.refs.textarea.innerHTML = now.wait\r\n      }else {\r\n        this.refs.textarea.innerText = ''\r\n      }\r\n      // 将消息滚动条，到最低\r\n      this.scrollToButton()\r\n    }else {\r\n      var msgNow = chat.messages.find(i => i.userId === chat.chatnow)\r\n      var msgNext = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (msgNow && msgNext && Array.isArray(msgNow.content) && Array.isArray(msgNext.content) && msgNow.content.length !== msgNext.content.length) {\r\n        // 将消息滚动条，到最低\r\n        this.scrollToButton()\r\n      }\r\n    }\r\n    this.refs.textarea.focus()\r\n  }\r\n\r\n  scrollToButton() {\r\n      var _this = this\r\n        // 这里 render 还没执行，页面中组件\r\n      setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n        _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n          _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        }, 200)\r\n      }, 100)\r\n  }\r\n\r\n  closeChatImage() {\r\n    this.setState({\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    })\r\n  }\r\n\r\n  // 隐藏这个窗口\r\n  swingChatWindow() {\r\n    this.props.swingChatWindowAction(true)\r\n  }\r\n\r\n  sendMessage() {\r\n    var message = this.refs.textarea.innerHTML.trim()\r\n    if (message === '' || !this.props.chat.chatnow) return;\r\n    // var images = message.match(/\\w+?\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\">)/g)\r\n    // 取出图片\r\n    var images = message.match(/[A-z0-9]{10}_\\d{8}\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\")/g)\r\n    if (images) {\r\n      var msgs = message.split(/<img [\\w\\W]+>/) // 根据图片分割消息\r\n      message = msgs[0]\r\n      // var img = ''\r\n      for (var i = 1, len = msgs.length; i < len; i++) {\r\n        message += `{{=${images[i-1]}}}${msgs[i]}`\r\n      }\r\n    }\r\n    message = message.replace(/<(span|font|div|br|img)[\\d\\D]*?>/g, '').replace(/<\\/(div|span|font)>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    //message = message.replace(/(<\\/span>|<span[^>]+?>)/g, '').replace(/(<\\/div>|<div[^>]*?>)/g, '').replace(/<br>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    if (message === '') return;\r\n    if (wss.status !== 'open') {\r\n      return this.setState({\r\n        messages: '与服务器断开连接'\r\n      })\r\n    }\r\n    this.props.sendingMessageAction(message)\r\n    wss.ws.send(JSON.stringify({\r\n      type: 'send_chat_message',\r\n      origin: this.props.user.userId,\r\n      target: this.props.chat.chatnow,\r\n      content: message\r\n    }))\r\n    this.refs.textarea.innerText = '' // 清空消息\r\n    this.props.setWaitMessageAction('')\r\n  }\r\n\r\n  // textareaFocus(e) {\r\n\r\n  // }\r\n  // textareaBlur(e) {\r\n\r\n  // }\r\n\r\n  textareaInput(e) {\r\n    this.props.setWaitMessageAction(e.target.innerHTML.trim().replace(/<div><br><\\/div>/g, ''))\r\n  }\r\n\r\n  textareaPress(e) {\r\n    var html = e.target.innerHTML\r\n    if (e.key === 'Enter') {\r\n      e.target.innerHTML = html.replace(/<div><br><\\/div>$/g, '')\r\n      this.sendMessage()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let chat = this.props.chat\r\n    let chatnow = undefined\r\n    if (chat.chatnow && Array.isArray(chat.messages)) {\r\n      chatnow = chat.messages.find(i => i.userId === chat.chatnow)\r\n    }\r\n    return (\r\n      <div className=\"chat-window\" style={{\r\n        display: chat.hideWindow ? 'none' : 'block'\r\n      }}>\r\n        <div className=\"chatw-header\">\r\n          <div onClick={this.swingChatWindow.bind(this)} className=\"charw-hide\" style={{\r\n            background: `url(${HOST}/image/ui/left.png) center center / 25px 25px no-repeat #628ef9`\r\n          }}></div>\r\n          <div className=\"chatw-h-targetname\">{chatnow && chatnow.nickname}</div>\r\n        </div>\r\n        <div className=\"chatw-show-scroll-wrap\">\r\n          <div ref=\"chatMessageBox\" className=\"chatw-show-wrap\">\r\n          {\r\n            [chatnow && chatnow.content.map((item, index) => (\r\n              <div className=\"chat-chatnow-wrap\" key={index}>\r\n                {\r\n                  item.sender === chatnow.userId ? (\r\n                    <div className=\"chat-target-wrap\">\r\n                      <div className=\"chat-target\" key=\"1\">\r\n                        <div className=\"chat-ta-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${chatnow.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-ta-nickname\">{chatnow.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-target\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"chat-me-wrap\">\r\n                      <div className=\"chat-me\" key=\"1\">\r\n                        <div className=\"chat-me-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  )\r\n                }\r\n              </div>\r\n            )),\r\n              chatnow && chat.sendingMessages.map((item, index) => {\r\n                return item.target !== chatnow.userId ? null : (\r\n                <div className=\"chat-chatnow-wrap\" key={index}>\r\n                  <div className=\"chat-me-wrap\">\r\n                    <div className=\"chat-me\" key=\"1\">\r\n                      <div className=\"chat-me-avatar\" style={{\r\n                        background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                      }}></div>\r\n                      <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                    </div>\r\n                    <div className=\"wait-msg-box\">\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.message)}} key=\"2\"></div>\r\n                      <div className=\"wait-logo\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )})]\r\n          }\r\n          </div>\r\n        </div>\r\n        <div className=\"chatw-send-wrap\">\r\n          <div className=\"chatw-s-textarea\">\r\n            <div id=\"textarea\"\r\n              ref=\"textarea\"\r\n              // onFocus={this.textareaFocus.bind(this)}\r\n              // onBlur={this.textareaBlur.bind(this)}\r\n              onInput={this.textareaInput.bind(this)}\r\n              contentEditable={!!chatnow}\r\n              suppressContentEditableWarning=\"true\"\r\n              onKeyPress={this.textareaPress.bind(this)}\r\n              dangerouslySetInnerHTML={{__html: this.state.message}}\r\n            ></div>\r\n          </div>\r\n          <div className=\"chatw-s-sendbox\">\r\n            {\r\n              this.state.message && <div className=\"char-err\">{this.state.message}</div>\r\n            }\r\n            <div onClick={this.sendMessage.bind(this)} className=\"chatw-s-sendbtn\">发送</div>\r\n\r\n          </div>\r\n        </div>\r\n        {\r\n          this.state.showChatImage && <div onClick={this.closeChatImage.bind(this)} className=\"chat-img-wrap\">\r\n            <img src={`${HOST}/image/member/chat/${this.state.chatImage}`}/>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.auth.user,\r\n    chat: state.chat\r\n  }\r\n}\r\n\r\nChatWindow.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  chat: PropTypes.object.isRequired,\r\n  setWaitMessageAction: PropTypes.func.isRequired,\r\n  swingChatWindowAction: PropTypes.func.isRequired\r\n}\r\nexport default connect(mapStateToProps, { swingChatWindowAction, setWaitMessageAction, sendingMessageAction })(ChatWindow)\r\n","/**\r\n * 在 App.js 中判断显示 store 中是否显示聊天功能，购物车点击青蛙显示\r\n * 请求消息记录，显示条数\r\n * 系统消息，用户消息\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport config from '../../utils/config'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport Message from './subpage/Message'\r\nimport Contacts from './subpage/Contacts'\r\nimport Search from './subpage/Search'\r\nimport ChatWindow from './subpage/ChatWindow'\r\n\r\nimport { initContacts } from '../../flux/actions/chatActions'\r\n\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: 'message',  // 显示 message，contacts，search\r\n      message: '',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var chat = document.getElementById('chat')\r\n      var chatMove = document.getElementById('chat-move')\r\n\r\n      chatMove.onmousedown = function(e) {\r\n        var startX = e.clientX\r\n        var startY = e.clientY\r\n        var top = parseInt(window.getComputedStyle(chat)['top'])\r\n        var left = parseInt(window.getComputedStyle(chat)['left'])\r\n        // var X = document.documentElement.clientWidth  // 窗口高宽\r\n        // var Y = document.documentElement.clientHeight\r\n        document.onmousemove = function(e) {\r\n          /**\r\n           * 判断将窗口拖出文档\r\n           */\r\n          chat.style.left = left + (e.clientX - startX) + 'px'\r\n          chat.style.top = top + (e.clientY - startY) + 'px'\r\n        }\r\n\r\n        document.onmouseup = function() {\r\n          // chat.onmousedown = null\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n        }\r\n      }\r\n      document.onmouseleave = function() {\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      document.getElementById('chat-move').onmousedown = null\r\n      document.onmouseleave = null\r\n    }\r\n  }\r\n\r\n  routeChange(route) {\r\n    this.setState({\r\n      route\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (typeof(window) !== 'object') {\r\n      return <div></div>\r\n    }\r\n\r\n    return (\r\n      <div id=\"chat\">\r\n        <div className=\"chat-route\">\r\n          <div id=\"chat-move\" className=\"cr-user-wrap\">\r\n            <div className=\"cr-user-avatar\" style={{\r\n              'background': `url(${HOST}/image/member/avatar/${this.props.auth.user.avatar}) center center / 30px 30px no-repeat`\r\n            }}></div>\r\n           <div className=\"cr-user-name\">{this.props.auth.user.nickname}</div>\r\n          </div>\r\n          <div className=\"cr-routes-wrap\">\r\n            <div onClick={this.routeChange.bind(this, 'message')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'message'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/message.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>消息</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'contacts')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'contacts'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/user.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>联系人</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'search')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'search'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/monitor.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>找人</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-body\">\r\n          <div className=\"chat-body-box\">\r\n            {\r\n              this.state.route === 'message' ? <Message /> :\r\n              this.state.route === 'contacts' ? <Contacts /> :\r\n              this.state.route === 'search' ? <Search /> : null\r\n            }\r\n          </div>\r\n        </div>\r\n        <ChatWindow />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    // chat: state.chat\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  // chat: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, { initContacts })(Chat)\r\n","/**\r\n * 在页面中显示消息，显示 1.5 秒后消失\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { closeAlertAction } from '../..//flux/actions/messageAction'\r\nimport './index.scss'\r\n\r\nclass MessageBox extends React.Component {\r\n\r\n  componentDidMount() {\r\n    var box = this.refs.messageBox\r\n    var _this = this\r\n    setTimeout(function() {\r\n      var opacity = 1\r\n      var interval = setInterval(function() {\r\n        opacity -= 0.1\r\n        box.style.opacity = opacity\r\n      }, 100)\r\n      setTimeout(function() {\r\n        clearInterval(interval)\r\n        _this.props.closeAlertAction()\r\n      }, 1000)\r\n    }, 500)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref=\"messageBox\" className=\"message-box\">\r\n        {this.props.messageBox.message}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messageBox: state.messageBox\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { closeAlertAction })(MessageBox)\r\n","/**\r\n * 确认或取消\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeConfirmAction } from '../../flux/actions/messageAction'\r\n\r\nfunction limitMessage(message) {\r\n  if (typeof(message) !== 'string') {\r\n    return ''\r\n  }\r\n  return message.length < 31 ? message : message.substring(0,30) + '...'\r\n}\r\n\r\nconst Confirm = props => {\r\n\r\n  var sureBtnClick = function() {\r\n    if (typeof(props.sure) === 'function') {\r\n      props.sure()\r\n    }\r\n    props.closeConfirmAction()\r\n  }\r\n\r\n  var cancelBtnClick = function() {\r\n    props.closeConfirmAction()\r\n    if (typeof(props.cancel) === 'function') {\r\n      props.cancel()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"confirm-box\">\r\n      <div className=\"msg-content\">{limitMessage(props.confirmMessage)}</div>\r\n      <div className=\"btn-wrap\">\r\n        <div onClick={sureBtnClick} className=\"btn-yes\">确认</div>\r\n        <div onClick={cancelBtnClick} className=\"btn-cancel\">取消</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    confirmMessage: state.messageBox.confirmMessage,\r\n    sure: state.messageBox.sure,\r\n    cancel: state.messageBox.cancel,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { closeConfirmAction })(Confirm)\r\n","import React from 'react'\r\nimport config from '../../utils/config'\r\nconst HOST = config.HOST\r\n\r\nconst style = {\r\n  width: '400px',\r\n  height: '200px',\r\n  background: `url(${HOST}/image/ui/loading.gif) center center / 400px 200px no-repeat`,\r\n  position: 'fixed',\r\n  left:'50%',\r\n  top: '50%',\r\n  zIndex: '99999',\r\n  margin: '-100px 0 0 -200px'\r\n}\r\n\r\nconst Loading = props => {\r\n  return (<div style={style} className=\"loading-box\">\r\n\r\n  </div>)\r\n}\r\n\r\nexport default Loading\r\n","import React from 'react';\r\nimport {Route, withRouter, Switch} from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\n\r\nimport config from './utils/config.js'\r\n\r\nimport \"./App.scss\"\r\nimport PrivateRoute from './components/PrivateRoute'\r\nimport Home from './containers/Home'\r\nimport Register from './containers/Register'\r\nimport Login from './containers/Login'\r\nimport SearchProduct from './containers/SearchProduct'\r\nimport GotoSearchProduct from './containers/SearchProduct/GotoSearchProduct'\r\nimport ProductDetail from './containers/ProductDetail'\r\nimport UserInfo from './containers/UserInfo'\r\nimport Order from './containers/Order'\r\nimport PayOrder from './containers/PayOrder'\r\nimport ShopingCart from './containers/ShopingCart'\r\nimport Chat from './components/Chat'\r\nimport MessageBox from './components/MessageBox'\r\nimport Confirm from './components/MessageBox/Confirm'\r\nimport Loading from './components/MessageBox/Loading'\r\n\r\nimport { setAuthToken, setCurrentUser } from './utils/setAuth'\r\nif (typeof(window) === 'object') {\r\n  // 验证本地 token\r\n  const jwtToken = window.localStorage.jwtToken;\r\n  if (!jwtToken) {\r\n    setAuthToken(false);\r\n    setCurrentUser({});\r\n  }else {\r\n    axios.defaults.headers.common[\"Authorization\"] = jwtToken; // 设置请求头 token\r\n    // 验证请求头token\r\n    axios.get(`${config.HOST}/api/users/current`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          setAuthToken(false);\r\n          setCurrentUser({});\r\n        } else {\r\n          // token 验证成功\r\n          setAuthToken(res.data.payload.token);\r\n          setCurrentUser(res.data.payload.user);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        setAuthToken(false);\r\n        setCurrentUser({});\r\n      });\r\n  }\r\n\r\n}\r\n\r\nconst App = (props) => {\r\n  return (\r\n    <div className=\"App\">\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Home} />\r\n        <Route path=\"/register\" component={Register} />\r\n        <Route path=\"/login\" component={Login} />\r\n        {/*路径参数变化不会触发组件刷新，此处需要跳转*/}\r\n        <Route path=\"/search_product\" component={GotoSearchProduct} />\r\n        <Route path=\"/search_products\" component={SearchProduct} />\r\n        <Route path=\"/product_detail\" component={ProductDetail} />\r\n        <PrivateRoute path=\"/order\" component={Order} />\r\n        <PrivateRoute path=\"/member\" component={UserInfo} />\r\n        {/*<Route path=\"/member\" component={UserInfo} />\r\n        <Route path=\"/order\" exact component={Order} />*/}\r\n        <PrivateRoute path=\"/payorder\" component={PayOrder} />\r\n      </Switch>\r\n      <ShopingCart />\r\n      {\r\n        // 聊天框\r\n        props.hideChat ? null : <Chat />\r\n      }\r\n      {\r\n        // 消息框\r\n        props.showAlert ? <MessageBox /> : null\r\n      }\r\n      {\r\n        // 确认框\r\n        props.showConfirm ? <Confirm /> : null\r\n      }\r\n      {\r\n        //<Loading />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    hideChat: state.chat.hideChat,\r\n    showAlert: state.messageBox.showAlert,\r\n    showConfirm: state.messageBox.showConfirm\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(App))\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport App from './App';\r\nimport store from './flux/store'\r\n\r\nconst ReactBody = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  )\r\n}\r\n// hydrate\r\nReactDOM.render(<ReactBody />, document.getElementById('react-body'));\r\n"],"sourceRoot":""}