{"version":3,"sources":["store/reducers/auth.js","utils/validator.js","store/reducers/goods.js","store/reducers/messageBox.js","store/reducers/chat.js","store/reducers/register.js","store/reducers/index.js","store/store.js","config/config.js","utils/tools.js","utils/setAuth.js","utils/socket.js","store/actions/chatActions.js","containers/SellerHome/subpage/CurrentData.jsx","containers/SellerHome/subpage/Backlog.jsx","components/Footer/index.jsx","components/Header/index.js","store/actions/messageActions.js","containers/SellerHome/subpage/OrderManager/OrderItem.jsx","containers/SellerHome/subpage/OrderManager/SendPost.jsx","containers/SellerHome/subpage/OrderManager/index.jsx","containers/SellerHome/subpage/ProductManager/ProductItem.jsx","containers/SellerHome/subpage/ProductManager/index.jsx","containers/SellerHome/index.jsx","containers/Login/subpage/Account.js","containers/Login/subpage/PhoneLogin.js","containers/Login/index.jsx","containers/Register/subpage/Step1.jsx","store/actions/registerActions.js","containers/Register/subpage/Step2.jsx","containers/Register/subpage/Step3.jsx","containers/Register/index.jsx","containers/Category/index.jsx","store/actions/goodsAction.js","containers/ProductIssue/index.jsx","components/PrivateRoute/subpage/WaitVerify.jsx","components/PrivateRoute/index.jsx","components/Chat/subpage/Message.js","components/Chat/subpage/Contacts.js","components/Chat/subpage/Search.js","components/Chat/subpage/ChatWindow.js","components/Chat/index.js","components/MessageBox/index.js","components/MessageBox/Confirm.js","App.js","index.js"],"names":["initialState","isAuthorized","isVerify","user","isEmpty","data","undefined","Array","isArray","length","Object","keys","isPhone","number","test","type","categoryChoose","showAlert","message","showConfirm","confirmMessage","sure","cancel","messageBoxReducer","state","arguments","action","objectSpread","payload","contacts","messagesNotRead","chatnow","messages","sendingMessages","hideWindow","hideChat","chatReducer","map","i","userId","target","content","concat","toConsumableArray","sender","origin","msg","filter","find","notRead","newMsg","nickname","avatar","m","n","len","push","newState","here","wait","initState","step","account","storeName","idCard","reallyName","rootReducer","combineReducers","auth","goods","bigType","_id","bigid","smaillType","messageBox","chat","register","middleWare","thunk","composeMiddlewares","applyMiddleware","apply","window","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","compose","subscribe","HOST","FILE_HOST","SELLER_HOST","transURL","url","reverse","replace","formatDate","date","year","time","d","Date","Number","isNaN","getDay","format","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","setAuthToken","token","localStorage","setItem","axios","defaults","headers","common","socket","initSocket","removeItem","status","ws","close","setCurrentUser","dispatch","WebSocket","onopen","e","console","log","setInterval","send","JSON","stringify","onmessage","parse","err","sendChatMessageBackAction","initContacts","receiveChatMessageAction","getContactsAction","onclose","onerror","error","contactItemToChatAction","item","contactId","getState","GeneratorCurrentData","dataName","amount","payMoney","logo","abnormalOrder","payUser","looker","payOrder","CurrentData","props","currentData","react_default","a","createElement","className","index","classnames","border-right","border-bottom","key","src","alt","BacklogData","title","logs","itemName","Backlog","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","backlogData","style","padding","Component","gotoTop","height","document","documentElement","scrollHeight","ms","interval","scrollTop","setTimeout","clearInterval","Footer","backgroundColor","border","href","onClick","align","AppHeader","management","chooseUrl","control","login","order","waitSend","location","pathname","history","hello","react_router_dom","to","userinfo","loginOut","bind","isSeller","withRouter","connect","alertMessageAction","confirmMessageAction","OrderItem","name","createTime","orderNo","money","width","id","substring","route","pay","sendPost","sign","comment","judgeOrderState","SendPost","postway","postno","fieldChangeHandler","assertThisInitialized","postSubmit","setState","defineProperty","value","preventDefault","submit","_this2","method","onSubmit","htmlFor","onChange","autoComplete","placeholder","OrderManager","routes","rule","path","operator","orders","orderId","page","getOrders","hashNextPage","prevPage","nextPage","nextProps","Axios","get","then","_ref","success","errors","catch","_this3","req","postWay","expNumber","post","_ref2","Math","floor","_this4","slice","OrderManager_OrderItem","sendPostChangeHandler","products","u-o-next-void","u-o-prev-void","OrderManager_SendPost","postSubmitHandler","ProductItem","price","product","creatTime","textAlign","buyNo","downProduct","putProduct","ProductManager","creaTime","isinseller","getProductData","_ref3","_this5","ProductManager_ProductItem","SellerHome","sellerData","operators","routeName","routePath","navs","navName","all","spread","currentRes","sellerRes","toggleChatAction","components_Header","storeLogo","text","max","sub","chars","match","splitText","toggleChatWindowHandler","notReadChatLength","handlerRouteChange","bar-seleced","nav","react_router","component","render","subpage_CurrentData","subpage_Backlog","src_components_Footer","reduce","prev","now","loging","Account","password","inputChange","inputFocus","refs","encrypt","JSEncrypt","setPublicKey","SparkMD5","hash","innerText","formSubmit","background","onFocus","ref","React","waitSMS","sendingSMS","PhoneLogin","phone","sms","currentTarget","msm","sms_code","res","response","sendSMS","Login","loginWay","params","search","p","way","changeLoginWay","subpage_PhoneLogin","subpage_Account","Step1","smscode","myState","smsSending","smsCodeClickHandler","validator","nextStepSubmit","ans","color","code","step1FinishAction","letter","next-wait","Step2","checkStoreNameRepeat","step2SubmitHandler","merchantName","relName","onBlur","step2FinishAction","Register","f-flush","subpage_Step3","subpage_Step2","subpage_Step1","Category","choose","showSmaill","showDetail","category","handlerCategorySubmit","isFinishChoose","productType","getItem","setBigType","itemId","setSmaillType","one","_","setCategoryChoose","detailType","detail","bigItem","cho-chosen","handlerTypeClick","bigName","borderColor","dist_default","smaillItem","smaillName","detailItem","detailName","typeId","c-submit-disable","ProductIssue","goodName","goodFrom","properties","specInfo","smaillPicture","infoPicture","filterProperties","submitProductIssue","j","splice","file","URL","webkitURL","createObjectURL","smaill","files","info","filtered","findIndex","fname","indexOf","storeId","specProp","form","FormData","append","forEach","table","arr","indexArr","indexAdd","len1","afterRow","rows","x","rowspan","specValueArrToTableArr","paddingLeft","prop","propNameBlurHandler","propNameChangeHandler","propNameCancelHandler","backgroundSize","propValueBlurHandler","propValueChangeHandler","propValueCancelHandler","margin","cellSpacing","cellPadding","fill","column","row","rowSpan","specInfoChangeHandler","createPictureURL","smaillPictureChangeHandler","multiple","smaillPictureDelete","infoPictureChangeHandler","infoPictureDelete","logoPictureChangeHandler","WaitVerify","waitComponent","subpage_WaitVerify","rest","objectWithoutProperties","assign","subMessage","messageNotReadItemToChatAction","messageItemToChatAction","msg-item-select","contactClick","online","offline","isOnline","Search","searchAns","keyword","shakeGetAns","timeout","clearTimeout","stopPropagation","keywordChange","contactsClick","addContactsClick","transMessage","images","msgs","split","ChatWindow","hasError","waitMessage","showChatImage","chatImage","scrollToButton","textarea","ondragenter","ondragleave","ondragover","ondrop","dataTransfer","size","formData","waitImg","innerHTML","nowMessage","setWaitMessageAction","getElementsByClassName","onclick","img","getAttribute","b","msgNow","msgNext","focus","chatMessageBox","swingChatWindowAction","trim","RegExp","wss","sendingMessageAction","html","sendMessage","display","swingChatWindow","dangerouslySetInnerHTML","__html","onInput","textareaInput","contentEditable","suppressContentEditableWarning","onKeyPress","textareaPress","chatImageChange","closeChatImage","hide","Chat","getElementById","onmousedown","startX","clientX","startY","clientY","top","parseInt","getComputedStyle","left","onmousemove","onmouseup","onmouseleave","routeChange","crr-select-bg","subpage_Message","subpage_Contacts","subpage_Search","subpage_ChatWindow","MessageBox","box","opacity","closeAlertAction","closeConfirmAction","jwtToken","warn","components_PrivateRoute","exact","from","src_components_Chat","src_components_MessageBox","MessageBox_Confirm","ReactDOM","es","src_App"],"mappings":"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","file":"static/js/main.0be721c5.chunk.js","sourcesContent":["let initialState = {\r\n  isAuthorized: false,\r\n  isVerify: false, // token 验证中\r\n  user: {}\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type) {\r\n    /**\r\n     * 登录成功\r\n     */\r\n    case 'SET_CURRENT_USER':\r\n      return { ...state, user: action.payload, isAuthorized: true, isVerify: false }\r\n    /**\r\n     * 主动退出\r\n     */\r\n    case 'LOGIN_OUT':\r\n      return { ...state, user: {}, isAuthorized: false, isVerify: false}\r\n\r\n      /**\r\n       * 设置验证中\r\n       */\r\n    case 'VERIFYING':\r\n      return { ...state, isVerify: true }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","/**\r\n * 判断内容是否为空\r\n * @param  {[type]} data [description]\r\n * @return {[type]}      [description]\r\n */\r\nexport const isEmpty = data => {\r\n  return data === null || data === undefined || data === '' ||\r\n    (Array.isArray(data) && data.length === 0) ||\r\n    (typeof(data) === 'object' && Object.keys(data).length === 0)\r\n}\r\n\r\nexport const isPhone = number => {\r\n\treturn /^1[0-9]{10}$/.test(number);\r\n}\r\n\r\nexport const isLength = (value, opts) => {\r\n\tif (typeof value !== 'string') return false;\r\n\treturn (value.length >= opts.min && value.length <= opts.max)\r\n}\r\n\r\nexport const isEmail = email => {\r\n  return /^[A-z\\d]+([-_.][A-z\\d]+)*@([A-z\\d]+[-.])+[A-z\\d]{2,4}$/.test(email)\r\n}\r\n","/**\r\n * goodsReducers\r\n * Simple React Snippet\r\n */\r\nimport { isEmpty } from '../../utils/validator.js'\r\n\r\nlet initialState = {\r\n  type: [],\r\n  categoryChoose: []\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type) {\r\n    /**\r\n     * 商品大类目\r\n     */\r\n    case 'SET_BIG_TYPE':\r\n      return { ...state, type: action.payload }\r\n\r\n    /**\r\n     * 商品小类目\r\n     */\r\n    case 'SET_SMAILL_TYPE':\r\n      let bigType = state.type.find(i => i._id === action.payload.bigid)\r\n      if (isEmpty(state.type) || isEmpty(bigType)) {\r\n        return state\r\n      }\r\n      bigType.smaillType = action.payload.smaillType\r\n      return state\r\n\r\n    /**\r\n     * 设置添加商品的类目选择\r\n     */\r\n    case 'SET_CATEGORY_CHOOSE':\r\n      return { ...state, categoryChoose: action.payload }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","/**\r\n * 全局消息弹框\r\n */\r\nconst initialState = {\r\n  showAlert: false,  // 消息框\r\n  message: '',\r\n  showConfirm: false, // 确认框\r\n  confirmMessage: '',\r\n  sure: null,  // 确认函数\r\n  cancel: null  // 取消函数\r\n}\r\n\r\nconst messageBoxReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'ALERT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showAlert: true,\r\n        message: action.payload\r\n      }\r\n    case 'CLOSE_ALERT':\r\n      return {\r\n        ...state,\r\n        showAlert: false,\r\n        message: ''\r\n      }\r\n    case 'CONFIRM_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showConfirm: true,\r\n        confirmMessage: action.payload.message || '',\r\n        sure: action.payload.sure || null,\r\n        cancel: action.payload.cancel || null\r\n      }\r\n    case 'CLOSE_CONFIRM':\r\n      return {\r\n        ...state,\r\n        showConfirm: false,\r\n        confirmMessage: '',\r\n        sure: null,\r\n        cancel: null\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default messageBoxReducer\r\n","const initialState = {\r\n  contacts: [], // 联系人\r\n  messagesNotRead: [],\r\n  chatnow: undefined,\r\n  messages: [],\r\n  sendingMessages: [/*{\r\n    target: 0,\r\n    message: ''\r\n  }*/],  // 发送中的消息\r\n  hideWindow: true,\r\n  hideChat: true\r\n}\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'SEND_CHAT_MESSAGE_BACK':  // 发送消息回执\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId !== action.payload.target ? i : {\r\n            ...i,\r\n            content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}]\r\n          }\r\n        }),\r\n        sendingMessages: state.sendingMessages.filter(i => i.target !== action.payload.target)\r\n      }\r\n    case 'PUT_SENDING_MESSAGE':\r\n      return {\r\n        ...state,\r\n        sendingMessages: [...state.sendingMessages, {target: state.chatnow, message: action.payload}]\r\n      }\r\n    case 'RECEIVE_CHAT_MESSAGE': // 收到聊天消息\r\n      var origin = state.messagesNotRead.find(i => i.userId === action.payload.origin)\r\n      // 聊天人在未读列表中\r\n      if (origin) {\r\n        return {\r\n          ...state,\r\n          messagesNotRead: state.messagesNotRead.map(i => {\r\n            return i.userId === action.payload.origin ? {\r\n              ...i,\r\n              notRead: i.notRead + 1,\r\n              content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}],\r\n            } : i\r\n          })\r\n        }\r\n      }\r\n      origin = state.messages.find(i => i.userId === action.payload.origin)\r\n       // 聊天对象在已读消息列表中\r\n      if (origin) {\r\n         // 是当前聊天对象\r\n        if (origin.userId === state.chatnow) {\r\n          return {\r\n            ...state,\r\n            messages: state.messages.map(i => {\r\n              return i.userId === action.payload.origin ? {\r\n                ...i,\r\n                content: Array.isArray(i.content) ? i.content.concat([{sender: action.payload.origin, msg: action.payload.content}]) : [{sender: action.payload.origin, msg: action.payload.content}]\r\n              } : i\r\n            })\r\n          }\r\n        }else {\r\n          // 不是当前聊天对象，转移到未读列表中\r\n          var newMsg = [{sender: action.payload.origin, msg: action.payload.content}]\r\n          return {\r\n            ...state,\r\n            messages: state.messages.filter(i => i.userId !== action.payload.origin),\r\n            messagesNotRead: [{\r\n              ...origin,\r\n              content: Array.isArray(origin.content) ? origin.content.concat(newMsg) : newMsg,\r\n              notRead: 1,\r\n            }].concat(state.messagesNotRead)\r\n          }\r\n        }\r\n      }\r\n       // 聊天对象新来的\r\n      return {\r\n        ...state,\r\n        messagesNotRead: [{\r\n          userId: action.payload.origin,\r\n          nickname: action.payload.nickname,\r\n          avatar: action.payload.avatar,\r\n          notRead: 1,\r\n          content: [{sender: action.payload.origin, msg: action.payload.content}]\r\n        }].concat(state.messagesNotRead)\r\n      }\r\n    case 'INIT_CONTACTS':\r\n      var m = [], n = [];\r\n      for (let i = 0, len = action.payload.length; i < len; i++) {\r\n        if (action.payload[i].notRead > 0) {\r\n          n.push(action.payload[i])\r\n        }else {\r\n          m.push(action.payload[i])\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        messagesNotRead: n,\r\n        messages: m\r\n      }\r\n\r\n    case 'MESSAGE_NOT_READ_ITEM_TO_CHAT': // 未读消息到聊天窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        messagesNotRead: state.messagesNotRead.filter(i => i.userId !== action.payload.userId),\r\n        messages: [action.payload].concat(state.messages),\r\n        hideWindow: false\r\n      }\r\n    case 'CONTACT_ITEM_TO_CHAT': // 联系人和找人 item 到聊天窗口\r\n      var newState = {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false,\r\n        hideChat: false,\r\n        messagesNotRead: state.messagesNotRead.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n            if (!here) {\r\n              action.payload.content = i.content\r\n            }\r\n          return here\r\n        }),\r\n        messages: state.messages.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n          if (!here) {\r\n            action.payload.content = i.content\r\n          }\r\n          return here\r\n        })\r\n      }\r\n      // 聊天人已在消息列表中\r\n      if (newState.messagesNotRead.length !== state.messagesNotRead.length || newState.messages.length !== state.messages.length) {\r\n        return {\r\n          ...newState,\r\n          messages: [action.payload].concat(newState.messages)\r\n        }\r\n      }\r\n      // 不在消息列表中\r\n      action.payload.content = []\r\n      return {\r\n        ...newState,\r\n        messages: [action.payload].concat(state.messages)\r\n      }\r\n\r\n    case 'MESSAGE_ITEM_TO_CHAT':  // 已读消息到窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false\r\n      }\r\n    case 'SET_CONTACTS':  // 获得联系人\r\n      return {\r\n        ...state,\r\n        contacts: action.payload\r\n      }\r\n    case 'SET_WAIT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId === state.chatnow ? {...i, wait: action.payload} : i\r\n        })\r\n      }\r\n    case 'TOGGLE_CHAT':\r\n      return {\r\n        ...state,\r\n        hideChat: action.payload\r\n      }\r\n    case 'SWING_CHAT_WINDOW':\r\n      return {\r\n        ...state,\r\n        hideWindow: action.payload\r\n      }\r\n    case 'LOGIN_OUT_CHAT':\r\n      return initialState\r\n    default:\r\n      return state\r\n  }\r\n}\r\nexport default chatReducer\r\n","const initState = {\r\n  step: 1,\r\n  account: '',\r\n  storeName: '',\r\n  idCard: '',\r\n  reallyName: '',\r\n  userId: -1\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  switch(action.type) {\r\n    // 登录场景改变\r\n    case 'STEP_CHANGE':\r\n      return { ...state, step: action.payload }\r\n\r\n    // 注册第一步完成\r\n    case 'STEP1_FINISH':\r\n      return { ...state, step: 2, account: action.payload.account, userId: action.payload.userId }\r\n\r\n    // 注册第二步完成\r\n    case 'STEP2_FINISH':\r\n      return { ...state, step: 3, ...action.payload }\r\n\r\n      default:\r\n      return state\r\n  }\r\n}\r\n","/**\r\n * 合并多个 reducer 成一个大的reducer\r\n */\r\n\r\nimport {combineReducers} from 'redux'\r\n\r\nimport auth from './auth'\r\nimport goods from './goods'\r\nimport messageBox from './messageBox'\r\nimport chat from './chat'\r\nimport register from './register'\r\n\r\nlet rootReducer = combineReducers({\r\n  auth,\r\n  goods,\r\n  messageBox,\r\n  chat,\r\n  register,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducers/index.js'\r\n\r\nlet initialState = {}\r\n\r\nlet middleWare = [thunk]\r\n// 需要合并的中间件\r\nlet composeMiddlewares = [applyMiddleware(...middleWare)]\r\n//激活 chrome 浏览器 redux 插件\r\nif (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\r\n\tcomposeMiddlewares.push(window.__REDUX_DEVTOOLS_EXTENSION__())\r\n}\r\n\r\nconst store = createStore(rootReducer, initialState, compose(...composeMiddlewares))\r\n\r\nstore.subscribe(() => {\r\n\r\n})\r\n\r\nexport default store\r\n","/**\r\n * 主机地址\r\n * @type {String}\r\n */\r\nexport const HOST = 'http://118.126.108.36'\r\n// export const HOST = 'http://localhost:5000'\r\n\r\n/**\r\n * 文件服务器地址\r\n * @type {String}\r\n */\r\nexport const FILE_HOST = 'http://118.126.108.36'\r\n\r\n/**\r\n * WebSocket 服务器地址\r\n * @type {String}\r\n */\r\n// export const WS_HOST = 'ws://localhost:5000'\r\nexport const WS_HOST = 'ws://118.126.108.36'\r\n\r\n\r\nexport const SELLER_HOST = 'http://118.126.108.36'\r\n// export const SELLER_HOST = 'http://localhost:8080'\r\n","/**\r\n * 按最大长度截取文本并返回\r\n * 字母数字算半个\r\n */\r\nexport const splitText = (text, max = 10) => {\r\n  if (typeof text !== 'string' || text.length <= max) {\r\n    return text\r\n  }\r\n\r\n  var sub = text.substring(0, max)\r\n  // 匹配单字节字符\r\n  var chars = sub.match(/[\\u0000-\\u00FF]/g)\r\n  if (!chars) {\r\n    return sub\r\n  }\r\n  var len = 0;\r\n  for (var i = sub.length; i < text.length; i++) {\r\n    len += (/^[\\u0000-\\u00FF]$/.test(text[i]) ? 1 : 2)\r\n    if (len + 1 >= chars.length) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return sub + text.substring(sub.length, sub.length + len)\r\n}\r\n/**\r\n * 将价格转换成 00.00 格式\r\n * @param {价格} price\r\n */\r\nexport const transPrice = function (price) {\r\n  return /^\\d+$/.test(price) ? price + '.00' :  // 没有小数\r\n  /^\\d+\\.\\d$/.test(price) ? price + '0' : price  // 一位小数\r\n}\r\n\r\n/**\r\n * 转换 url\r\n * @param {url 片段} url\r\n * @param {* 逆向转换} reverse\r\n */\r\nexport const transURL = (url, reverse) => {\r\n  if (typeof url !== 'string' || url === '')\r\n    return ''\r\n  if (reverse)\r\n    return url.replace(/OxO/g, '/').replace(/OdO/g, '=').replace(/OwO/g, '?').replace(/OaO/g, '&')\r\n  return url.replace(/\\//g, 'OxO').replace(/\\=/g, 'OdO').replace(/\\?/g, 'OwO').replace(/&/g, 'OaO')\r\n}\r\n\r\nexport const formatDate = function(date, year, time) {\r\n  if (!date) { return '2019-1-1 0:0:0'}\r\n  const d = new Date(date)\r\n  if (Number.isNaN(d.getDay())) {\r\n    return ''\r\n  }\r\n  var format = year ? d.getFullYear() + '-' : ''\r\n  if (time) {\r\n    return format + (d.getMonth() + 1) + '-' + d.getDate()\r\n  }\r\n  return (format + (d.getMonth() + 1) + '-' +\r\n    d.getDate() + ' ' +\r\n    d.getHours() + ':' +\r\n    d.getMinutes() + ':' +\r\n    d.getSeconds())\r\n}\r\n","import axios from 'axios'\r\nimport { isEmpty } from '../utils/validator.js'\r\nimport store from '../store/store.js'\r\nimport socket from './socket'\r\n\r\nexport const setAuthToken = (token) => {\r\n  if (token) {\r\n    if (typeof(window) === 'object') {\r\n      window.localStorage.setItem('jwtToken', token)\r\n    }\r\n    // 让每个请求头携带 token\r\n    axios.defaults.headers.common[\"Authorization\"] = token\r\n    // 初始化 socket\r\n    return socket.initSocket(token)\r\n  }\r\n  // 删除请求头 token\r\n  delete axios.defaults.headers.common['Authorization']\r\n  if (typeof(window) === 'object') {\r\n    window.localStorage.removeItem('jwtToken')\r\n  }\r\n  if (socket.status !== 'close') {\r\n    socket.ws.close()\r\n  }\r\n}\r\n\r\n\r\nexport const setCurrentUser = user => {\r\n  if (isEmpty(user)) {\r\n    return store.dispatch({ type: 'LOGIN_OUT' })\r\n  }\r\n\r\n  store.dispatch({\r\n    type: 'SET_CURRENT_USER',\r\n    payload: user\r\n  })\r\n}\r\n\r\n","import { setAuthToken } from './setAuth'\r\n\r\nimport {\r\n  // setWaitMessageAction,\r\n  sendChatMessageBackAction,\r\n  receiveChatMessageAction,\r\n  getContactsAction,\r\n  initContacts\r\n} from '../store/actions/chatActions'\r\n\r\nimport { WS_HOST } from '../config/config'\r\n\r\n\r\nconst socket = {\r\n  status: 'close',\r\n  ws: null,\r\n  initSocket: function (token) {\r\n    if (typeof(window) !== 'object' || !token) return;\r\n    const ws = new WebSocket(`${WS_HOST}?token=${token}`)\r\n\r\n    ws.onopen = function(e) {\r\n      socket.status = 'open'\r\n      console.log('socket open...')\r\n      setInterval(function() {  // 设置定时器更新 token\r\n        if (socket.status !== 'open') { return }\r\n        ws.send(JSON.stringify({\r\n          type: 'transToken',\r\n          target: 'koa'\r\n        }))\r\n      }, 1000*60*15)\r\n\r\n      ws.send('{\"type\":\"init_chat_messages\"}') // 获取聊天信息\r\n    }\r\n\r\n    ws.onmessage = function(e) {\r\n      var msg = e.data\r\n      try {\r\n        msg = JSON.parse(msg)\r\n      }catch(err) {\r\n        return\r\n      }\r\n      switch(msg.type) {\r\n        case 'transToken':\r\n          return setAuthToken(msg.content)\r\n\r\n        case 'send_chat_message':  // 发送消息后回执\r\n          return sendChatMessageBackAction(msg)\r\n\r\n        case 'init_chat_messages':  // 初始化聊天信息\r\n          return initContacts(msg.content)\r\n\r\n        case 'receive_chat_message':  // 收到聊天消息\r\n          return receiveChatMessageAction(msg)\r\n\r\n        case 'get_contacts': // 收到联系人列表信息\r\n          return getContactsAction(msg.content)\r\n\r\n        default:\r\n          return\r\n      }\r\n    }\r\n\r\n    ws.onclose = function(e) {\r\n      console.log('socket close!')\r\n      socket.status = 'close'\r\n    }\r\n\r\n    ws.onerror = function(e) {\r\n      console.error('socket error', e)\r\n    }\r\n\r\n    socket.ws = ws\r\n  }\r\n}\r\n\r\nexport default socket\r\n","import store from '../store'\r\nimport socket from '../../utils/socket'\r\n\r\nexport const toggleChatAction = state => dispatch => { // 隐藏或显示聊天窗口\r\n  dispatch({\r\n    type: 'TOGGLE_CHAT',\r\n    payload: state\r\n  })\r\n}\r\n\r\nexport const initContacts = messages => {\r\n  store.dispatch({\r\n    type: 'INIT_CONTACTS',\r\n    payload: messages\r\n  })\r\n}\r\n\r\n// 点击未读消息展示到聊天框\r\nexport const messageNotReadItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({ // 设置消息已读\r\n        type: 'msg_be_read',\r\n        content: item.userId\r\n      }))\r\n    }\r\n    dispatch({\r\n      type: 'MESSAGE_NOT_READ_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\nexport const sendingMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'PUT_SENDING_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 点击已读消息展示到聊天框\r\nexport const messageItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    dispatch({\r\n      type: 'MESSAGE_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\n// 点击联系人和找人 item 到聊天框\r\nexport const contactItemToChatAction = item => {\r\n  item = {...item, userId: item.userId || item.contactId}\r\n  var chat = store.getState().chat\r\n  if (chat.chatnow === item.userId && !chat.hideChat) return;\r\n  store.dispatch({\r\n    type: 'CONTACT_ITEM_TO_CHAT',\r\n    payload: item\r\n  })\r\n}\r\n\r\nexport const swingChatWindowAction = hide => dispatch => {\r\n  dispatch({\r\n    type: 'SWING_CHAT_WINDOW',\r\n    payload: hide\r\n  })\r\n}\r\n\r\nexport const setWaitMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'SET_WAIT_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 发送消息后回执\r\nexport const sendChatMessageBackAction = message => {\r\n  store.dispatch({\r\n    type: 'SEND_CHAT_MESSAGE_BACK',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到聊天消息\r\nexport const receiveChatMessageAction = message => {\r\n  if (message.origin === store.getState().chat.chatnow && socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'msg_be_read',\r\n      content: message.origin\r\n    }))\r\n  }\r\n  store.dispatch({\r\n    type: 'RECEIVE_CHAT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到联系人列表\r\nexport const getContactsAction = contacts => {\r\n  store.dispatch({\r\n    type: 'SET_CONTACTS',\r\n    payload: contacts\r\n  })\r\n}\r\n","import React from 'react'\r\nimport classnames from 'classnames'\r\n\r\nimport { FILE_HOST } from '../../../config/config.js'\r\n\r\n/**\r\n * abnormalOrder: 0\r\n  looker: 0\r\n  payMoney: 0\r\n  payOrder: 0\r\n  payUser: 0\r\n */\r\nfunction GeneratorCurrentData(data) {\r\n  return [\r\n    { dataName: '支付金额', amount: data.payMoney || 0, logo: `${FILE_HOST}/image/seller/money.jpg` },\r\n    { dataName: '退货订单', amount: data.abnormalOrder || 0, logo: `${FILE_HOST}/image/seller/foot.jpg` },\r\n    { dataName: '支付买家数', amount: data.payUser || 0, logo: `${FILE_HOST}/image/seller/person.jpg` },\r\n    { dataName: '浏览量', amount: data.looker || 0, logo: `${FILE_HOST}/image/seller/look.jpg` },\r\n    { dataName: '支付订单数', amount: data.payOrder || 0, logo: `${FILE_HOST}/image/seller/pay.jpg` },\r\n  ]\r\n}\r\n\r\nconst CurrentData = (props) => {\r\n  const currentData = new GeneratorCurrentData(props.data)\r\n\r\n  return (\r\n    <div className=\"data-wrap\">\r\n      <div className=\"da-head\">\r\n        <span>实时数据</span>\r\n\r\n      </div>\r\n      <div className=\"data-box f_wrap\">\r\n      {\r\n        currentData.map((item, index) => (\r\n          <div className={classnames('data-item f_L', {\r\n            'border-right': index % 2 === 0,\r\n            'border-bottom': index < currentData.length - 1,\r\n          })} key={index}>\r\n            <div className=\"f_wrap\">\r\n              <div className=\"da-logo f_L\"><img src={item.logo} alt={item.dataName}/></div>\r\n              <div className=\"da-tit f_r\">{item.dataName}</div>\r\n            </div>\r\n            <div className=\"da-amount\">{item.amount}</div>\r\n          </div>\r\n        ))\r\n      }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CurrentData\r\n","import React, { Component } from 'react'\r\n\r\nfunction BacklogData(data) {\r\n  return [\r\n    {title: '宝贝管理', logs: [\r\n      {itemName: '出售中的宝贝', amount: 0},\r\n      {itemName: '待上架的宝贝', amount: 0},\r\n      {itemName: '审核中的宝贝', amount: 0},\r\n    ]},\r\n    {title: '订单提醒', logs: [\r\n      {itemName: '待付款订单', amount: 0},\r\n      {itemName: '待发货订单', amount: 0},\r\n      {itemName: '待评价订单', amount: 0},\r\n      {itemName: '退款中订单', amount: 0},\r\n      {itemName: '待签收订单', amount: 0},\r\n    ]},\r\n    {title: '活动管理', logs: [\r\n      {itemName: '官方活动', amount: 0},\r\n    ]},\r\n    {title: '违规提醒', logs: [\r\n      {itemName: '待处理投诉', amount: 0},\r\n      {itemName: '待处理诉讼', amount: 0},\r\n      {itemName: '优化建议', amount: 0},\r\n      {itemName: '违规记录', amount: 0},\r\n      {itemName: '待处理违规', amount: 0},\r\n      {itemName: '已售假次数', amount: 0},\r\n    ]},\r\n  ]\r\n}\r\n\r\nclass Backlog extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const backlogData = new BacklogData()\r\n\r\n    return (\r\n      <div className=\"\">\r\n        <div className=\"da-head border-bottom\">待办数据</div>\r\n        <div className=\"log-body\">\r\n        {\r\n          backlogData.map((data, index) => (\r\n            <div className=\"backlog-item\" key={index}>\r\n              <div className=\"log-tit\">{data.title}</div>\r\n              <div className=\"f_wrap\">\r\n                {\r\n                  data.logs.map((log, index) => (\r\n                    <div className=\"log-item f_L f_wrap\" key={index}>\r\n                      <div className=\"f_L\">{log.itemName}：</div>\r\n                      <div className=\"log-amount f_r\">{log.amount}</div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </div>\r\n          ))\r\n        }\r\n        <div className=\"backlog-item\">\r\n          <div className=\"log-tit\">安全评分</div>\r\n          <div className=\"log-self\">\r\n            <span>您的账号新安全评分为</span>\r\n            <span style={{padding: '0 5px'}} className=\"log-amount\">80</span>\r\n            <span>分</span>\r\n            <span>, 请登录后进入我的主页提升分数</span>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Backlog\r\n\r\n/*\r\n\r\n          <div style={{border: '1px solid yellow'}}>\r\n            <div className=\"log-tit\">订单提醒</div>\r\n            <div>\r\n              <div>\r\n                <div>代付款订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>待发货订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>待评价订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>代签收订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>退款中订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{border: '1px solid yellow'}}>\r\n            <div className=\"log-tit\">活动管理</div>\r\n            <div>\r\n              <div>\r\n                <div>邀请我参加的官方活动：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{border: '1px solid orange'}}>\r\n            <div className=\"log-tit\">违规提醒</div>\r\n            <div>\r\n              <div>\r\n                <div>待处理投诉：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>待处理诉讼：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>优化建议：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>违规记录：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>带处理违规：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>已售假次数：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n*/\r\n","import React from 'react'\r\n\r\nimport './index.scss'\r\nimport { FILE_HOST } from '../../config/config.js'\r\n\r\nfunction gotoTop() {\r\n  if (typeof window !== 'object') return;\r\n  var height = document.documentElement.scrollHeight\r\n  var ms = 9\r\n  var interval = setInterval(function() {\r\n    document.documentElement.scrollTop = height / 10 * ms\r\n    ms --\r\n  }, 50)\r\n  setTimeout(function() {\r\n    clearInterval(interval)\r\n    document.documentElement.scrollTop = 0\r\n  }, 500)\r\n}\r\n\r\nconst Footer = (props) => {\r\n  const theme = {\r\n    bgColor: '#fff'\r\n  }\r\n  return (\r\n    <div style={{backgroundColor: theme.bgColor}} className=\"footer-wrap\">\r\n      <div className=\"foot-box\">\r\n        <div className=\"foot-name\">\r\n          <div className=\"ni-box f_wrap\">\r\n            <div className=\"foot-ni f_L\">北大青鸟</div>\r\n            <div className=\"foot-ni f_L\">成都智谷校区</div>\r\n            <div className=\"foot-ni f_L\">T121</div>\r\n            <div className=\"foot-ni f_L\">叶谱</div>\r\n            <div className=\"foot-ni f_L\">周围</div>\r\n            <div className=\"foot-ni f_L\" style={{border: 0}}>唐铭佑</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"foot-sec\">\r\n          <a href=\"javascript:void(0)\">关于优选</a>\r\n          <a href=\"javascript:void(0)\">合作伙伴</a>\r\n          <a href=\"javascript:void(0)\">营销中心</a>\r\n          <a href=\"javascript:void(0)\">廉正举报</a>\r\n          <a href=\"javascript:void(0)\">联系客服</a>\r\n          <a href=\"javascript:void(0)\">开放平台</a>\r\n          <a href=\"javascript:void(0)\">诚征英才</a>\r\n          <a href=\"javascript:void(0)\">联系我们</a>\r\n          <a href=\"javascript:void(0)\">网站地图</a>\r\n          <a href=\"javascript:void(0)\">法律声明</a>\r\n          <a href=\"javascript:void(0)\">隐私权政策</a>\r\n          <a href=\"http://118.126.108.36\">© 2019 ChoicePerfect.com</a>\r\n          <a href=\"javascript:void(0)\">版权所有</a>\r\n        </div>\r\n        <div className=\"copyright f_wrap\" onClick={gotoTop}>\r\n          <div className=\"logo-bdqn f_L\"><img align=\"absmiddle\" title=\"返回顶部\" src={`${FILE_HOST}/image/ui/bdqn.png`} alt=\"北大青鸟\"/></div>\r\n          <div className=\"copy f_r\">@2019 北大青鸟成都智谷</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Footer\r\n","import React, { Component } from 'react'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport { setAuthToken, setCurrentUser } from '../../utils/setAuth'\r\nimport { HOST } from '../../config/config'\r\n\r\nclass AppHeader extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n      management: 'http://118.126.108.36/image/files/choice_perfect_manager.msi',\r\n      chooseUrl: {\r\n        management: 'http://118.126.108.36/image/files/choice_perfect_manager.msi', // 管理端路径\r\n        control: '/seller/panel',\r\n        register: '/seller/register',\r\n        login: '/seller/login',\r\n        order: '/seller/login',\r\n        waitSend: '/seller/wait_send'\r\n      }\r\n\t\t}\r\n\t}\r\n\t// 退出\r\n\tloginOut() {\r\n    var url = this.props.location.pathname\r\n\t\tsetAuthToken(false); // axios token 头清除，localStorage token清除\r\n\t\tsetCurrentUser({}); // dispatch 当前空用户\r\n    this.props.history.push('/seller/login')  // 跳转到主页\r\n  }\r\n\r\n\trender() {\r\n    const auth = this.props.auth;\r\n\t\tconst hello = (<ul className=\"ul-l\">\r\n\t\t\t\t\t\t<li>哈，欢迎来到优选</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/seller/login\">请登录</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/seller/register\">免费注册</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>)\r\n\t\tconst userinfo = (<ul className=\"ul-l\">\r\n\t\t\t\t\t\t<li>Hi，<Link to=\"/member\">{auth.user.nickname}</Link></li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a onClick={this.loginOut.bind(this)} href=\"javascript:void(0)\">退出</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>)\r\n\t\treturn (\r\n\t\t\t<div className=\"app-header-wrap\">\r\n\t\t\t\t<div className=\"app-header\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauth.isAuthorized ?\r\n\t\t\t\t\t\tuserinfo :\r\n\t\t\t\t\t\thello\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<ul className=\"ul-r\">\r\n            <li><a href=\"/\">优选首页</a></li>\r\n\t\t\t\t\t\t<li className=\"h-my\">\r\n              <a to=\"/member\">我的优选</a>\r\n              <div className=\"h-my-choi\">\r\n                <div><a to=\"/member/safety\">安全设置</a></div>\r\n                <div><a to=\"/member\">个人资料</a></div>\r\n                <div><a to=\"/member/myorder\">我的订单</a></div>\r\n                <div><a to=\"/member/address\">收货地址</a></div>\r\n              </div>\r\n            </li>\r\n\r\n            {\r\n              !auth.isAuthorized || (auth.isAuthorized && auth.user.isSeller !== 1) ? (\r\n                <li className=\"h-my\">\r\n                  <Link to=\"/seller/panel\">商家支持</Link>\r\n                    <div className=\"h-my-choi\">\r\n                      <div><Link to=\"/seller/register\">注册商家</Link></div>\r\n                      <div><a href={this.state.management}>管理端下载</a></div>\r\n                  </div>\r\n                </li>) : (\r\n                  <li className=\"h-my\">\r\n                      <Link to=\"/seller/panel\">卖家中心</Link>\r\n                      <div className=\"h-my-choi\">\r\n                        <div><Link to=\"/seller/panel/wait_send\">待发货宝贝</Link></div>\r\n                        <div><Link to=\"/seller/panel/wait_send\">出售中宝贝</Link></div>\r\n                        <div><a href={this.state.management}>管理端下载</a></div>\r\n                    </div>\r\n                  </li>\r\n                )\r\n            }\r\n            <li className=\"h-my\">\r\n                <a href=\"javascript:void(0);\">联系客服</a>\r\n                <div className=\"h-my-choi\">\r\n                  <div><a href={this.state.chooseUrl.management}>管理端下载</a></div>\r\n              </div>\r\n            </li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nAppHeader.propTypes = {\r\n\tauth: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default withRouter(connect(mapStateToProps, null)(AppHeader))\r\n","// 弹出消息框\r\nexport const alertMessageAction = message => dispatch => {\r\n  dispatch({\r\n    type: 'ALERT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\nexport const closeAlertAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_ALERT'\r\n  })\r\n}\r\n\r\n// 弹出确认框\r\nexport const confirmMessageAction = (message, sure, cancel) => dispatch => {\r\n  dispatch({\r\n    type: 'CONFIRM_MESSAGE',\r\n    payload: { message, sure, cancel }\r\n  })\r\n}\r\n\r\nexport const closeConfirmAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_CONFIRM'\r\n  })\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport './subpage/index.scss'\r\nimport { formatDate } from '../../../../utils/tools'\r\n\r\nfunction splitGoodName(name) {\r\n  return typeof(name) !== 'string' ? '' : name.length < 35 ? name : name.substring(0,34) + '...'\r\n}\r\n\r\nfunction judgeOrderState(route, order) {\r\n  if (route !== '所有') {\r\n    return route\r\n  }\r\n  if (order.sign === 0) {\r\n    return '待签收'\r\n  }\r\n  if (order.sign === 1 && order.comment === 0) {\r\n    return '待评论'\r\n  }\r\n  return '订单已完成'\r\n}\r\n\r\nconst OrderItem = (props) =>{\r\n  const order = props.order\r\n  /**--order\r\n   * orderNo\r\n   * number\r\n   * monkey\r\n   *\r\n   * order.address\r\n   * order,receiveName\r\n   * goods\r\n   *   id\r\n   *   name (goodName)\r\n   *   location (logo)\r\n   *\r\n   *    青蛙 onClick={contactSeller(order.sellerId, order.sellerName, order.sellerAvatar)}\r\n   */\r\n  return <div className=\"order-item\">\r\n    <div className=\"o-i-head\">\r\n      <div className=\"oih-i oi-date\">{formatDate(order.createTime, true, true)}</div>\r\n      <div className=\"oih-i oi-no\">订单号：{order.orderNo}</div>\r\n      <div className=\"oih-i oi-sumprice\">￥{order.money}</div>\r\n    </div>\r\n    <div className=\"oi-product\">\r\n      <div className=\"oip-i-wrap\">\r\n        <div className=\"oip-i oip-i-logo\"><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${order.goods.location}_210x210q90.jpg`} alt={order.goods.name}/></div>\r\n        <div className=\"oip-i oip-i-info\">\r\n          <div className=\"oip-i-goodname\"><Link to={`/product_detail?goodId=${order.goods.id}`}>{splitGoodName(order.goods.name)}</Link></div>\r\n        </div>\r\n        <div className=\"oip-i oip-i-price\">￥{order.money}</div>\r\n        <div className=\"oip-i oip-i-number\">{order.number}</div>\r\n        <div className=\"oip-i oip-exp\"></div>\r\n\r\n        <div className=\"oip-i oip-i-operator\">\r\n         {\r\n          props.route === '待发货' || (order.pay === 1  && order.send === 0) ? <div className=\"opre-i-wrap\">\r\n            <button onClick={() => { props.sendPost() }} className=\"opre-i-sign\">立即发货</button>\r\n          </div> : <div className=\"opre-i-wrap\">\r\n            <span className=\"opre-i-waitsend\">{judgeOrderState(props.route, order)}</span>\r\n          </div>\r\n         }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nexport default OrderItem\r\n","import React, { Component } from 'react'\r\n\r\nclass SendPost extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      postway: '',\r\n      postno: ''\r\n    }\r\n\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n    this.postSubmit = this.postSubmit.bind(this)\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  postSubmit(e) {\r\n    e.preventDefault()\r\n    if (this.state.postway === '' || this.state.postno === '') {\r\n      return;\r\n    }\r\n    // 验证\r\n    this.props.submit(this.state.postway, this.state.postno)\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"post-wrap\">\r\n      <form method=\"POST\" onSubmit={this.postSubmit}>\r\n        <div className=\"post-field f_wrap\">\r\n          <label className=\"f_L\" htmlFor=\"postway\">物流公司：</label>\r\n          <input className=\"f_r\" onChange={this.fieldChangeHandler} autoComplete=\"off\" type=\"text\" placeholder=\"请输入物流公司\" value={this.state.postway} id=\"postway\" name=\"postway\"/>\r\n        </div>\r\n        <div className=\"post-field f_wrap\">\r\n          <label className=\"f_L\" htmlFor=\"postno\">订单号：</label>\r\n          <input className=\"f_r\" onChange={this.fieldChangeHandler} autoComplete=\"off\" type=\"text\" placeholder=\"请输入订单号\" value={this.state.postno} id=\"postno\" name=\"postno\"/>\r\n        </div>\r\n        <div className=\"post-operator f_wrap\">\r\n          <button className=\"f_L\" type=\"submit\">确认发货</button>\r\n          <button onClick={() => this.props.cancel()} className=\"post-cancel f_r\">取消</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default SendPost\r\n","import React, { Component } from 'react'\r\nimport Axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\n\r\nimport { SELLER_HOST } from '../../../../config/config'\r\nimport { isEmpty } from '../../../../utils/validator'\r\nimport { alertMessageAction } from '../../../../store/actions/messageActions'\r\n\r\nimport OrderItem from './OrderItem.jsx'\r\nimport SendPost from './SendPost.jsx'\r\n\r\nclass OrderManager extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      routes: [\r\n        {rule: /all_order$/, path: '/api/seller/auth/order', comment: '所有'},\r\n        {rule: /wait_pay$/, path: '/api/seller/auth/order?payState=0', comment: '待付款'},\r\n        // {rule: /quit_pay$/, path: '/api/seller/auth/order?quitState=0'},\r\n        {rule: /wait_send$/, operator: 'send', path: '/api/seller/auth/order?sendState=0',comment: '待发货'},\r\n        {rule: /wait_sign$/, path: '/api/seller/auth/order?signState=0', comment: '待签收'},\r\n        {rule: /wait_comment$/, path: '/api/seller/auth/order?commentState=0', comment: '待评论'},\r\n      ],\r\n      orders: [],\r\n      route: '',\r\n      sendPost: false,\r\n      orderId: '',\r\n      page: 0\r\n    }\r\n\r\n    this.getOrders = this.getOrders.bind(this)\r\n    this.hashNextPage = this.hashNextPage.bind(this)\r\n    this.prevPage = this.prevPage.bind(this)\r\n    this.nextPage = this.nextPage.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getOrders(this.props.location.pathname)\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.location.pathname === this.props.location.pathname) {\r\n      return;\r\n    }\r\n    this.getOrders(nextProps.location.pathname)\r\n  }\r\n\r\n  /**\r\n   * 根据 url 路径请求不同的订单数据\r\n   * @param {当前页面  路径} path\r\n   */\r\n  getOrders(path) {\r\n    var routes = this.state.routes\r\n    for (var i = 0, len = routes.length; i < len; i++) {\r\n      if (routes[i].rule.test(path)) {\r\n        this.setState({\r\n          route: routes[i].comment,\r\n          orders: []\r\n        }, () => {\r\n          Axios.get(`${SELLER_HOST}${routes[i].path}`)\r\n            .then(({ data }) => {\r\n              console.log(data)\r\n              if (!data.success) {\r\n                return this.setState({\r\n                  errors: { data: data.message }\r\n                })\r\n              }\r\n              this.setState({\r\n                orders: data.payload,\r\n                route: routes[i].comment\r\n              })\r\n            })\r\n            .catch(err => {\r\n              this.props.alertMessageAction('获取订单信息失败 ' + (err.message ||  '服务器忙'))\r\n            })\r\n        })\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  sendPostChangeHandler(orderId) {\r\n    this.setState({ sendPost: true, orderId: orderId })\r\n  }\r\n\r\n  /**\r\n   * 发货\r\n   */\r\n  postSubmitHandler(postway, postno) {\r\n    var req = {\r\n      orderId: this.state.orderId,\r\n      postWay: postway,\r\n      expNumber: postno\r\n    }\r\n    Axios.post(`${SELLER_HOST}/api/seller/auth/order/send`, req)\r\n      .then(({ data }) => {\r\n        if (!data.success) {\r\n          return this.props.alertMessageAction(data.message)\r\n        }\r\n        this.setState({\r\n          sendPost: false\r\n        }, () => {\r\n          this.getOrders(this.props.history.location.pathname)\r\n          this.props.alertMessageAction('订单已发货')\r\n        })\r\n      }).catch(err => {\r\n        this.props.alertMessageAction(err.message || '服务器忙');\r\n      })\r\n  }\r\n\r\n  hashNextPage() {\r\n    var len = this.state.orders.length\r\n    var page = this.state.page\r\n    return len % 5 === 0 ? len / 5 > page - 1 : Math.floor(len / 5) > page\r\n  }\r\n\r\n  /**\r\n   * 上一页，下一页\r\n   */\r\n  prevPage() {\r\n    if (this.state.page > 0) {\r\n      this.setState({\r\n        page: this.state.page - 1\r\n      })\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    if (this.hashNextPage()) {\r\n      this.setState({\r\n        page: this.state.page + 1\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"om-wrap f_L\">\r\n      <div className=\"om-head\">\r\n        <div>{this.state.route}的订单</div>\r\n      </div>\r\n      <div className=\"order-item-wrap\" style={{width: '760px'}}>\r\n        {\r\n          !isEmpty(this.state.orders) ? this.state.orders.slice(this.state.page * 5, this.state.page * 5 + 5).map((order, index) => {\r\n            return <OrderItem sendPost={this.sendPostChangeHandler.bind(this, order.id)} order={order} route={this.state.route}  key={index}/>\r\n          }) : <div className=\"item-empty\">\r\n            当前没有{this.state.route}的订单哦\r\n          </div>\r\n        }\r\n        {\r\n          // 订单分页\r\n          !isEmpty(this.state.products) && this.state.products.length > 5 ? <div className=\"u-o-page\">\r\n            <div onClick={this.nextPage} className={classnames(\"u-o-next\", {\r\n              'u-o-next-void': !this.hashNextPage()\r\n            })}>下一页</div>\r\n            <div onClick={this.prevPage} className={classnames(\"u-o-prev\", {\r\n              'u-o-prev-void': this.state.page === 0\r\n            })}>上一页</div>\r\n          </div> : null\r\n        }\r\n        {\r\n          this.state.sendPost ?\r\n          <SendPost\r\n            cancel={() => this.setState({sendPost: false})}\r\n            submit={this.postSubmitHandler.bind(this)}\r\n           /> : null\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction })(OrderManager)\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { FILE_HOST } from '../../../../config/config'\r\n\r\nimport { formatDate, transPrice } from '../../../../utils/tools'\r\n\r\nfunction splitGoodName(name) {\r\n  return typeof(name) !== 'string' ? '' : name.length < 35 ? name : name.substring(0,34) + '...'\r\n}\r\n\r\nconst ProductItem = props => {\r\n  const product = props.product\r\n  return <div className=\"order-item\">\r\n  <div className=\"o-i-head\">\r\n    <div className=\"oih-i oi-date\">{formatDate(product.creatTime, true, true)}</div>\r\n    <div className=\"oih-i oi-no\" style={{textAlign: 'left'}}>商品ID：{product.id}</div>\r\n    <div className=\"oih-i oi-sumprice\">￥{transPrice(product.price)}</div>\r\n  </div>\r\n  <div className=\"oi-product\">\r\n    <div className=\"oip-i-wrap\">\r\n      <div className=\"oip-i oip-i-logo\"><img width=\"80px\" src={`${FILE_HOST}/image/goods/logo/${product.location}_210x210q90.jpg`} alt={product.name}/></div>\r\n      <div className=\"oip-i oip-i-info\">\r\n        <div className=\"oip-i-goodname\"><Link to={`/product_detail?goodId=${product.id}`}>{splitGoodName(product.name)}</Link></div>\r\n      </div>\r\n      <div className=\"oip-i oip-i-price\"></div>\r\n      <div className=\"oip-i oip-i-number\">销量：{product.buyNo}</div>\r\n      <div className=\"oip-i oip-exp\"></div>\r\n\r\n      <div className=\"oip-i oip-i-operator\">\r\n       {\r\n        props.route === '出售中的宝贝' ? <div className=\"opre-i-wrap\">\r\n          <button onClick={props.downProduct} className=\"opre-i-sign\">下架</button>\r\n        </div> :\r\n        props.route === '下架的宝贝' ? <div className=\"opre-i-wrap\">\r\n          <button onClick={props.putProduct} className=\"opre-i-sign\">上架</button>\r\n        </div> :\r\n        <div className=\"opre-i-wrap\">\r\n          <span className=\"opre-i-waitsend\">审核中</span>\r\n        </div>\r\n       }\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n}\r\n\r\nexport default ProductItem\r\n","/**\r\n * get /api/seller/auth/good (checkState | goodState)\r\n */\r\nimport React, { Component } from 'react'\r\nimport Axios from 'axios';\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport { SELLER_HOST } from '../../../../config/config'\r\nimport ProductItem from './ProductItem'\r\nimport { isEmpty } from '../../../../utils/validator'\r\nimport { alertMessageAction, confirmMessageAction } from '../../../../store//actions/messageActions'\r\n\r\nclass ProductManager extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: '',\r\n      routes: [\r\n        {rule: /\\/in_seller$/, path: '/api/seller/auth/good?goodState=0', comment: '出售中的宝贝'},\r\n        {rule: /\\/un_seller$/, path: '/api/seller/auth/good?goodState=1', comment: '下架的宝贝'},\r\n        {rule: /\\/chk_products$/, path: '/api/seller/auth/good?checkState=0', comment: '审核中的宝贝'},\r\n      ],\r\n      products: [\r\n        {name: 'VR眼睛', logo: 'O8rORaHsYu_35422899.jpg', creaTime: '', price: 1000, isinseller: true},\r\n        {name: '外星人台式机', logo: 'KL7reEqhUl_84629430.jpg', price: 1000, isinseller: true},\r\n      ],\r\n      page: 0\r\n    }\r\n\r\n    this.getProductData = this.getProductData.bind(this)\r\n    this.hashNextPage = this.hashNextPage.bind(this)\r\n    this.prevPage = this.prevPage.bind(this)\r\n    this.nextPage = this.nextPage.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getProductData(this.props.location.pathname)\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.location.pathname !== this.props.location.pathname) {\r\n      this.getProductData(nextProps.location.pathname)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 下架商品的方法\r\n   * @param {*} id\r\n   */\r\n  downProduct(id, name) {\r\n    this.props.confirmMessageAction('确认下架 ' + name, () => {\r\n      Axios.post(`${SELLER_HOST}/api/seller/auth/good/down`, [id + ''])\r\n        .then(({ data }) => {\r\n          if (!data.success) {\r\n            return this.props.alertMessageAction(data.message)\r\n          }\r\n          this.getProductData(this.props.location.pathname)\r\n          this.props.alertMessageAction('下架成功')\r\n        }).catch(err => {\r\n          this.props.alertMessageAction('下架失败' + (err.message || '服务器忙'))\r\n        })\r\n    }, ()=>{})\r\n\r\n  }\r\n\r\n  putProduct(id, name) {\r\n    this.props.confirmMessageAction('确认上架 ' + name, () => {\r\n      Axios.post(`${SELLER_HOST}/api/seller/auth/good/put`, [id + ''])\r\n      .then(({ data }) => {\r\n        if (!data.success) {\r\n          return this.props.alertMessageAction(data.message)\r\n        }\r\n        this.getProductData(this.props.location.pathname)\r\n        this.props.alertMessageAction('上架成功')\r\n      }).catch(err => {\r\n        this.props.alertMessageAction('上架失败' + (err.message || '服务器忙'))\r\n      })\r\n    }, ()=>{})\r\n\r\n  }\r\n\r\n  /**\r\n   * 请求卖家管理数据\r\n   * @param {} path\r\n   */\r\n  getProductData(path) {\r\n    var routes = this.state.routes\r\n    for (var i = 0, len = routes.length; i < len; i++) {\r\n      if (routes[i].rule.test(path)) {\r\n        this.setState({\r\n          route: routes[i].comment,\r\n          products: []\r\n        })\r\n        Axios.get(`${SELLER_HOST}${routes[i].path}`)\r\n          .then(({ data }) => {\r\n            if (!data.success) {\r\n              return this.props.alertMessageAction(data.message)\r\n            }\r\n            this.setState({\r\n              products: data.payload\r\n            })\r\n          })\r\n          .catch(err => {\r\n            this.props.alertMessageAction(err.message || '服务器忙')\r\n          })\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  hashNextPage() {\r\n    var len = this.state.products.length\r\n    var page = this.state.page\r\n    return len % 5 === 0 ? len / 5 > page - 1 : Math.floor(len / 5) > page\r\n  }\r\n\r\n  /**\r\n   * 上一页，下一页\r\n   */\r\n  prevPage() {\r\n    if (this.state.page > 0) {\r\n      this.setState({\r\n        page: this.state.page - 1\r\n      })\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    if (this.hashNextPage()) {\r\n      this.setState({\r\n        page: this.state.page + 1\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"om-wrap f_L\">\r\n      <div className=\"om-head\">\r\n        <div>{this.state.route}</div>\r\n      </div>\r\n      <div className=\"order-item-wrap\" style={{width: '760px'}}>\r\n        {\r\n          !isEmpty(this.state.products) ? this.state.products.slice(this.state.page * 5, this.state.page * 5 + 5).map((product, index) => {\r\n            return <ProductItem\r\n              downProduct={this.downProduct.bind(this, product.id, product.name)}\r\n              putProduct={this.putProduct.bind(this, product.id, product.name)}\r\n              product={product} route={this.state.route}  key={index}/>\r\n          }) : <div className=\"item-empty\">\r\n            当前没有{this.state.route}哦\r\n          </div>\r\n        }\r\n        {\r\n          !isEmpty(this.state.products) && this.state.products.length > 5 ? <div className=\"u-o-page\">\r\n            <div onClick={this.nextPage} className={classnames(\"u-o-next\", {\r\n              'u-o-next-void': !this.hashNextPage()\r\n            })}>下一页</div>\r\n            <div onClick={this.prevPage} className={classnames(\"u-o-prev\", {\r\n              'u-o-prev-void': this.state.page === 0\r\n            })}>上一页</div>\r\n          </div> : null\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction, confirmMessageAction })(ProductManager)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Switch, Route, Link } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport { FILE_HOST, SELLER_HOST } from '../../config/config'\r\nimport { splitText } from '../../utils/tools.js'\r\nimport { toggleChatAction } from '../../store/actions/chatActions'\r\nimport Axios from 'axios'\r\n\r\nimport './index.scss'\r\nimport CurrentData from './subpage/CurrentData'\r\nimport Backlog from './subpage/Backlog'\r\nimport Footer from '../../components/Footer/index.jsx'\r\nimport AppHeader from '../../components/Header'\r\nimport OrderManager from './subpage/OrderManager/index.jsx'\r\nimport ProductManager from './subpage/ProductManager/index.jsx'\r\n\r\nclass SellerHome extends Component {\r\n\tconstructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      route: '',\r\n      currentData: {}, // 实时数据\r\n      sellerData: {}, // 待办数据\r\n      // 卖家操作菜单\r\n      operators: [\r\n        { routeName: '交易管理', routePath: 'transaction', logo: `${FILE_HOST}/image/seller/jiaoyi.jpg`, navs: [\r\n          { navName: '已卖出的宝贝', path: '/seller/panel/all_order'},\r\n          { navName: '评价管理', path: '/seller/panel/wait_comment'},\r\n        ] },\r\n        { routeName: '订单管理', routePath: 'order', logo: `${FILE_HOST}/image/seller/yunying.jpg`, navs: [\r\n          { navName: '待付款订单', path: '/seller/panel/wait_pay'},\r\n          { navName: '待发货订单', path: '/seller/panel/wait_send'},\r\n          { navName: '待签收订单', path: '/seller/panel/wait_sign'},\r\n          { navName: '待评价订单', path: '/seller/panel/wait_comment'},\r\n        ] },\r\n        { routeName: '物流管理', routePath: 'express', logo: `${FILE_HOST}/image/seller/wuliu.jpg`, navs: [\r\n          { navName: '发货', path: '/seller/panel/wait_send'},\r\n          { navName: '物流工具', path: '/seller'},\r\n          { navName: '物流服务', path: '/seller'},\r\n        ] },\r\n        { routeName: '宝贝管理', routePath: 'product', logo: `${FILE_HOST}/image/seller/baobei.jpg`, navs: [\r\n          { navName: '发布宝贝', path: '/seller/category'},\r\n          { navName: '出售中的宝贝', path: '/seller/panel/in_seller'},\r\n          { navName: '下架的宝贝', path: '/seller/panel/un_seller'},\r\n          { navName: '审核中的宝贝', path: '/seller/panel/chk_products'},\r\n        ] },\r\n        { routeName: '店铺管理', routePath: 'store', logo: `${FILE_HOST}/image/seller/dianpu.jpg`, navs: [\r\n          { navName: '查看淘宝店铺', path: '/seller'},\r\n          { navName: '店铺装修', path: '/seller'},\r\n          { navName: '宝贝分类管理', path: '/seller'},\r\n          { navName: '账房', path: '/seller'},\r\n        ] },\r\n      ]\r\n    }\r\n\t}\r\n\r\n  componentWillMount() {\r\n\r\n    var currentRequest = () => Axios.get(`${SELLER_HOST}/api/seller/auth/ydata`)\r\n    var sellerRequest = () => Axios.get(`${SELLER_HOST}/api/seller/auth/good/data`)\r\n    Axios.all([currentRequest(), sellerRequest()])\r\n      .then(Axios.spread((currentRes, sellerRes) => {\r\n        if (currentRes.data.success && sellerRes.data.success) {\r\n          this.setState({\r\n            currentData: { ...currentRes.data.payload },\r\n            sellerData: { ...sellerRes.data.payload }\r\n          })\r\n        }\r\n      })).catch(err => {\r\n        console.error(err)\r\n      })\r\n  }\r\n\r\n  handlerRouteChange(route) {\r\n    this.setState({\r\n      route: this.state.route === route ? '' : route\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 显示或隐藏聊天窗口\r\n   */\r\n  toggleChatWindowHandler() {\r\n    console.log(this.props.hideChat)\r\n    this.props.toggleChatAction(!this.props.hideChat)\r\n  }\r\n\r\n\trender() {\r\n    const user = this.props.user\r\n    // console.log('未读消息', this.props.notReadChatLength)\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"home\">\r\n      <AppHeader />\r\n        <div className=\"head-wrap\" style={{border: '1px solid blue'}}>\r\n          <div className=\"head-content f_wrap\">\r\n            <div className=\"head-l f_L\">\r\n              <span className=\"h-f1\">优选</span>\r\n              <span className=\"h-f2\">卖家工作台</span>\r\n            </div>\r\n\r\n            <div className=\"head-r f_r f_wrap\">\r\n              <div className=\"h-r-item f_L\"><div>描述相符</div></div>\r\n              <div className=\"h-r-item f_L\"><div>服务态度</div></div>\r\n              <div className=\"h-r-item f_L\"><div>物流服务</div></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"h-body f_wrap\">\r\n          <div className=\"list1-wrap f_L\">\r\n            {/* 会员信息 */}\r\n            <div className=\"user-info-wrap f_wrap\">\r\n              <div className=\"u-avatar f_L\"><img src={`${FILE_HOST}/image/store/logo/${user.storeLogo}`} alt={user.storeName}/></div>\r\n              <div className=\"u-storename-wrap f_L\">\r\n                <div className=\"u-storename\"><span className=\"f2\">{splitText(user.storeName, 7)}</span></div>\r\n              </div>\r\n              <div onClick={this.toggleChatWindowHandler.bind(this)} className=\"chat-bar\">\r\n                {\r\n                  // 未读消息提示或聊天 Logo\r\n                  this.props.notReadChatLength > 0 ? (\r\n                    <div className=\"notread-msg\">{this.props.notReadChatLength}</div>\r\n                  ) : (\r\n                    <img src={`${FILE_HOST}/image/ui/frog.png`} alt=\"chat\"/>\r\n                  )\r\n                }\r\n              </div>\r\n            </div>\r\n            <div className=\"oper-wrap\">\r\n            {\r\n              this.state.operators.map((operator, index) => (\r\n                <div className=\"nav-item-wrap\" key={index}>\r\n                  <div className=\"nav-item f_wrap\" onClick={this.handlerRouteChange.bind(this, operator.routePath)}>\r\n                    <div className=\"nav-logo f_L\"><img src={operator.logo} alt={operator.routeName}/></div>\r\n                    <div className={classnames(\"oper-bar f_L\", {\r\n                      'bar-seleced': this.state.route === operator.routePath\r\n                    })}>{operator.routeName}</div>\r\n                    <div className=\"nav-icon f_r\"><img src={`${FILE_HOST}/image/ui/${this.state.route === operator.routePath ? 'down' : 'right'}.png`}/></div>\r\n                  </div>\r\n                  <div className=\"nav-box\">\r\n                    {/* { React.createElement(operator.component, {route: this.state.route}) } */}\r\n                    {\r\n                      this.state.route === operator.routePath && operator.navs.map((nav, index) => (\r\n                        <div className=\"nav-cho-i\" key={index}><Link to={nav.path}>{nav.navName}</Link></div>\r\n                      ))\r\n                    }\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <Switch>\r\n              <Route path=\"/seller/panel/all_order\" component={OrderManager}/>\r\n              <Route path=\"/seller/panel/wait_pay\" component={OrderManager}/>\r\n              <Route path=\"/seller/panel/wait_send\" component={OrderManager}/>\r\n              <Route path=\"/seller/panel/wait_sign\" component={OrderManager}/>\r\n              <Route path=\"/seller/panel/wait_comment\" component={OrderManager}/>\r\n              <Route path=\"/seller/panel/in_seller\" component={ProductManager}/>\r\n              <Route path=\"/seller/panel/un_seller\" component={ProductManager}/>\r\n              <Route path=\"/seller/panel/chk_products\" component={ProductManager}/>\r\n              <Route path=\"/seller/panel\" render={() => {\r\n                return (<div>\r\n                  <div className=\"current-data f_L\">\r\n                    <CurrentData data={this.state.currentData} />\r\n                  </div>\r\n\r\n                  <div className=\"backlog f_L\">\r\n                    <Backlog data={this.state.sellerData} />\r\n                  </div>\r\n                </div>)\r\n              }} />\r\n            </Switch>\r\n          </div>\r\n\r\n        </div>\r\n        <Footer />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSellerHome.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  hideChat: PropTypes.bool.isRequired,\r\n  notReadChatLength: PropTypes.number.isRequired\r\n}\r\n\r\nconst setStateToProps = (state) => {\r\n\treturn {\r\n    user: state.auth.user,\r\n    hideChat: state.chat.hideChat,\r\n    // 未读消息提示\r\n    notReadChatLength: state.chat.messagesNotRead.reduce((prev, now) => prev + now.notRead, 0)\r\n\t}\r\n}\r\n\r\nexport default connect(setStateToProps, { toggleChatAction })(SellerHome)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { withRouter } from 'react-router-dom'\r\n// import { JSEncrypt } from 'jsencrypt'\r\nimport SparkMD5 from 'spark-md5'\r\n\r\nimport { HOST } from '../../../config/config'\r\nimport { alertMessageAction } from '../../../store/actions/messageActions'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport { isEmpty } from '../../../utils/validator'\r\n\r\nvar loging = false // 判断账户是否在登录中\r\n\r\nclass Account extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      account: '',\r\n      password: '',\r\n      errors: {}\r\n    }\r\n    this.inputChange = this.inputChange.bind(this);\r\n    this.inputFocus = this.inputFocus.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.document.title = '优选--账户登录'\r\n  }\r\n\r\n  inputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  inputFocus(e) {\r\n    this.setState({\r\n      errors: {...this.state.errors, [e.target.name]: ''}\r\n    })\r\n  }\r\n\r\n  formSubmit(e) {\r\n    e.preventDefault()\r\n    if (loging) {\r\n      return this.props.alertMessageAction('账户验证中')\r\n    }\r\n    let errors = {};\r\n    if (isEmpty(this.state.account)) {\r\n      errors.account = '账号不能为空';\r\n    }\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\r\n      errors.password = '密码格式有误';\r\n    }\r\n\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors: errors\r\n      })\r\n    }\r\n    loging = true\r\n    var target = this.refs.submit\r\n    target.value = '登录中...'\r\n    // let info = {account: this.state.account, password: SparkMD5.hash(this.state.password), hash: 'md5'};\r\n    axios.get(`${HOST}/api/users/rsa_public?account=${this.state.account}`)\r\n    .then(({ data }) => {\r\n      if (!data.success) {\r\n        return this.setState({\r\n          errors: { submit: data.message }\r\n        })\r\n      }\r\n      // 使用md5加密，再用公钥加密后传输密码\r\n      var encrypt = new window.JSEncrypt()\r\n      encrypt.setPublicKey(data.payload)\r\n      let password = encrypt.encrypt(SparkMD5.hash(this.state.password))\r\n      axios.post(`${HOST}/api/users/seller_login`, {\r\n        account: this.state.account,\r\n        password\r\n      }).then(({ data }) => {\r\n        loging = false\r\n        if (!data.success) {\r\n          return this.setState({\r\n            errors: { submit: data.message }\r\n          })\r\n        }\r\n        setAuthToken(data.payload.token)\r\n        setCurrentUser(data.payload.user)\r\n        this.props.history.push(this.props.prev)\r\n\r\n      }).catch(err => {\r\n        loging = false\r\n        target.innerText = '登录'\r\n        this.setState({\r\n          errors: { submit: err.message || '服务器忙' }\r\n        })\r\n      })\r\n\r\n    }).catch(err => {\r\n      loging = false\r\n      target.innerText = '登录'\r\n      this.setState({\r\n        errors: { submit: err.message || '服务器忙' }\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form className=\"l-input-wrap\" onSubmit={this.formSubmit.bind(this)} method=\"POST\">\r\n          <div className=\"log-input1\">\r\n            <label htmlFor=\"account\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.account ? 'account_failed.png' : 'account.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n            <input\r\n              onFocus={this.inputFocus}\r\n              onChange={this.inputChange}\r\n              value={this.state.account}\r\n              placeholder=\"昵称 / 手机号码\"\r\n              name=\"account\"\r\n              id=\"account\"\r\n              type=\"text\"\r\n              autoComplete=\"off\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.account && <div className=\"acc-log-err\">{this.state.errors.account}</div>\r\n          }\r\n          <div className=\"log-input2\">\r\n            <label htmlFor=\"password\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.password ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n            <input\r\n              onFocus={this.inputFocus}\r\n              type=\"password\"\r\n              placeholder=\"密码\"\r\n              name=\"password\"\r\n              id=\"password\"\r\n              onChange={this.inputChange}\r\n              value={this.state.password}\r\n            />\r\n          </div>\r\n          {\r\n            this.state.errors.password && <div className=\"acc-log-err\">{this.state.errors.password}</div>\r\n          }\r\n          <input ref=\"submit\" className=\"account-log-submit\" type=\"submit\" value=\"登录\"/>\r\n          {\r\n            this.state.errors.submit && <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\r\n          }\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nAccount.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToProps, { alertMessageAction })(Account))\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { HOST } from '../../../config/config'\r\nimport { setAuthToken, setCurrentUser } from '../../../utils/setAuth'\r\nimport { isPhone } from '../../../utils/validator'\r\n\r\n/**\r\n * 发送手机号到 sms接口，\r\n * 手机号合法 md5存储验证码并返回，\r\n * 登录发送手机号验证码，服务端入数据库匹配成功返回 token\r\n */\r\n\r\nvar waitSMS = 59\r\nvar sendingSMS = false\r\n\r\nclass PhoneLogin extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: '',\r\n\t\t\tsms: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.inputChange = this.inputChange.bind(this);\r\n\t}\r\n\r\n  componentDidMount() {\r\n    window.document.title = '优选--手机登录'\r\n  }\r\n\r\n\tinputChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\r\n\tsendSMS(e) {\r\n    if (sendingSMS) {\r\n      return this.props.alertMessageAction(`请 ${waitSMS} 秒后重试`)\r\n    }\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '手机号码错误'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n    var target = e.currentTarget\r\n    waitSMS = 59\r\n    sendingSMS = true\r\n    target.style.backgroundColor = '#eee'\r\n    var interval = setInterval(function() {\r\n      target.innerText = `再次发送(${waitSMS})`\r\n      waitSMS --\r\n      if (waitSMS === 0) {\r\n        clearInterval(interval)\r\n        target.innerText = '发送验证码'\r\n        target.style.backgroundColor = ''\r\n      }\r\n    }, 1000)\r\n\t\taxios.post(HOST + \"/api/operator/testsms\", {phone: this.state.phone})\r\n\t\t\t.then(({data}) => {\r\n        console.log(data);\r\n        if (!data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, sms: data.message}\r\n          })\r\n        }\r\n        this.props.alertMessageAction('发送成功请查收验证码')\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, msm: err.message || 'server busy'}\r\n        })\r\n\t\t\t});\r\n\t}\r\n\tsubmit() {\r\n\t\tlet errors = {};\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\terrors.phone = '手机号格式有误'\r\n\t\t}\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.sms)) {\r\n\t\t\terrors.sms = '验证码格式有误'\r\n\t\t}\r\n\t\tif (Object.keys(errors).length > 0) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: errors\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 格式验证成功\r\n\t\tconst user = {phone: this.state.phone, sms_code: this.state.sms}\r\n\t\taxios.post(`${HOST}/api/users/phonelogin`, user)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tsubmit: res.data.message\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// 验证通过\r\n\t\t\t\tsetAuthToken(res.data.payload.token) // 请求头附加 token\r\n\t\t\t\tsetCurrentUser(res.data.payload.user)\r\n        this.props.history.push(this.props.prev)\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"l-input-wrap\">\r\n\t\t\t\t<div className=\"log-input1\">\r\n\t\t\t\t\t<label htmlFor=\"phone\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.phone ? 'mobile_failed.png' : 'mobile.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"输入手机号码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.phone}\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\tid=\"phone\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n            autoComplete=\"off\"/>\r\n            <div>\r\n            {/*\r\n              <datalist id=\"tip\">\r\n                <option value=\"国内\" />\r\n                <option value=\"国际\" />\r\n              </datalist>\r\n            */}\r\n            </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.phone && <div className=\"acc-log-err\">{this.state.errors.phone}</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"log-input2\">\r\n\t\t\t\t\t<label htmlFor=\"sms\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.sms ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"填写验证码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.sms}\r\n\t\t\t\t\t\tname=\"sms\"\r\n\t\t\t\t\t\tid=\"sms\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t\t<button className=\"log-sendsms\" onClick={this.sendSMS.bind(this)}>发送验证码</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.sms && <div className=\"acc-log-err\">{this.state.errors.sms}</div>\r\n\t\t\t\t}\r\n\t\t\t\t<input type=\"submit\" className=\"account-log-submit\" onClick={this.submit.bind(this)} value=\"登录\"/>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.submit &&  <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nPhoneLogin.propTypes = {\r\n\tauth: PropTypes.object.isRequired\r\n}\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default withRouter(connect(mapStateToProps)(PhoneLogin))\r\n","import React, { Component } from 'react'\r\nimport { Redirect, Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nimport './login.scss'\r\nimport { FILE_HOST } from '../../config/config'\r\nimport { transURL } from '../../utils/tools'\r\nimport AppHeader from '../../components/Header'\r\nimport Account from './subpage/Account'\r\nimport PhoneLogin from './subpage/PhoneLogin'\r\nimport Footer from '../../components/Footer/index.jsx'\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      loginWay: 'phone',  // 登录方式，phone or account\r\n      prev: '/seller/panel'\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    // 登录后跳转的页面\r\n    var params = this.props.location.search\r\n    var prev = this.state.prev\r\n\r\n    if (typeof(params) === 'string' && /prev=.+/.test(params)) {\r\n      let p = params.match(/prev=.+?(&|\\b)/g)[0]\r\n      if (p) {\r\n        p = p.substring(5)\r\n        prev = /&$/.test(p) ? p.substring(0, p.length - 1) : p\r\n      }\r\n    }\r\n    // 已登录，不能访问登录页面\r\n    if (this.props.isAuthorized) {\r\n      return this.props.history.push(transURL(prev))\r\n    }\r\n    if (prev !== this.state.prev) {\r\n      this.setState({\r\n        prev: transURL(prev, true)\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.isAuthorized) {\r\n      return nextProps.history.push(this.state.prev)\r\n    }\r\n  }\r\n\r\n  changeLoginWay(way) {\r\n    if (way === this.state.loginWay) return;\r\n    this.setState({\r\n      loginWay: way\r\n    })\r\n  }\r\n\r\n\trender() {\r\n\t\t/**\r\n\t\t * v4 包含路由 和 精准路由\r\n\t\t */\r\n    if (this.props.isAuthorized === true) {  // 已登录带回原始路由\r\n      return <Redirect to={this.state.prev} />\r\n    }\r\n    // var path = this.props.location.pathname\r\n\r\n    return (\r\n\t\t\t<div className=\"login-body\">\r\n        <AppHeader />\r\n        <div className=\"login-head f_wrap\">\r\n          <div className=\"main-logo f_L\"><img src={`${FILE_HOST}/image/seller/home_logo_blue.png`} alt=\"\"/></div>\r\n          <div className=\"login-msg f_r\">为确保您账户的安全及正常使用，依《网络安全法》相关要求，6月1日起会员账户需绑定手机。如您还未绑定，请尽快完成，感谢您的理解及支持！</div>\r\n        </div>\r\n\t\t\t\t<div className=\"login-wrap\">\r\n\t\t\t\t\t<div className=\"login-title\"></div>\r\n\t\t\t\t\t<div className=\"login-form\">\r\n\t\t\t\t\t\t<div className=\"form\">\r\n\t\t\t\t\t\t\t<div className=\"form-t\">\r\n                <div onClick={this.changeLoginWay.bind(this, 'phone')} className={this.state.loginWay === 'phone' ? 't-l f1' : 't-l f2'}>手机登录</div>\r\n                <div onClick={this.changeLoginWay.bind(this, 'account')} className={this.state.loginWay === 'account' ? 't-l f1' : 't-l f2'}>账户登录</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<main>\r\n                {\r\n                  this.state.loginWay === 'phone'\r\n                  ? <PhoneLogin prev={this.state.prev} />\r\n                  : <Account prev={this.state.prev} />\r\n                }\r\n\t\t\t\t\t\t\t</main>\r\n              <div className=\"to-registory\">\r\n                <Link to=\"/seller/register\">免费注册</Link>\r\n              </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n        <Footer />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n    isAuthorized: state.auth.isAuthorized,\r\n    isVerify: state.auth.isVerify,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Login)\r\n","import React, { Component } from 'react'\r\nimport Axios from 'axios';\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { isPhone, isLength } from '../../../utils/validator'\r\nimport { HOST, SELLER_HOST } from '../../../config/config'\r\nimport { alertMessageAction } from '../../../store/actions/messageActions'\r\nimport { step1FinishAction } from '../../../store/actions/registerActions'\r\n\r\nclass Step1 extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      phone: '',\r\n      smscode: '',\r\n      errors: {} //{phone: '手机号错误', smscode: '手机号码'}\r\n    }\r\n    this.myState = {\r\n      smsSending: false\r\n    }\r\n\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n    this.smsCodeClickHandler = this.smsCodeClickHandler.bind(this)\r\n    this.validator = this.validator.bind(this)\r\n    this.nextStepSubmit = this.nextStepSubmit.bind(this)\r\n  }\r\n\r\n  /**\r\n   * 验证\r\n   */\r\n  validator() {\r\n    var ans = {}\r\n    if (!isPhone(this.state.phone)) {\r\n      ans.phone = '手机号格式不正确'\r\n    }\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.smscode)) {\r\n      ans.smscode = '验证码格式不正确'\r\n    }\r\n    return ans\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n  /**\r\n   * 点击获取验证码\r\n   */\r\n  smsCodeClickHandler(e) {\r\n    if (this.myState.smsSending) {\r\n      return this.props.alertMessageAction('验证码发送中')\r\n    }\r\n    if (this.validator().phone) {\r\n      return this.props.alertMessageAction('手机号格式不正确')\r\n    }\r\n\r\n    var target = e.currentTarget\r\n    target.style.backgroundColor = 'rgb(226,225,225)'\r\n    target.style.color = 'rgba(148,139,139)'\r\n    var interval = 0\r\n    var time = 60\r\n    Axios.post(`${HOST}/api/operator/sms`, { phone: this.state.phone })\r\n      .then(({ data }) => {\r\n        console.log(data)\r\n        if (!data.success) {\r\n          return this.setState({\r\n            smscode: data.message\r\n          })\r\n        }\r\n\r\n        // 定时器等待\r\n        interval = window.setInterval(() => {\r\n          time--\r\n          if (time <= 0) {\r\n            target.innerText = '获取验证码'\r\n            target.style.backgroundColor = ''\r\n            target.style.color = ''\r\n            return window.clearInterval(interval)\r\n          }\r\n          target.innerText = '再次发送' + time\r\n        }, 1000)\r\n        this.props.alertMessageAction('发送成功，请注意查收')\r\n\r\n      }).catch(err => {\r\n        console.error(err)\r\n      })\r\n\r\n  }\r\n\r\n  /**\r\n   * 验证手机号码，跳到下一步\r\n   */\r\n  nextStepSubmit() {\r\n    if (Object.keys(this.validator()).length !== 0) {\r\n      return this.props.alertMessageAction('请完善信息后提交')\r\n    }\r\n\r\n    Axios.post(`${SELLER_HOST}/api/seller/store/code`, {\r\n      phone: this.state.phone,\r\n      code: this.state.smscode\r\n    }).then(({ data }) => {\r\n      if (!data.success) {\r\n        return this.setState({\r\n          errors: { ...this.state.errors, smscode: data.message }\r\n        })\r\n      }\r\n      // 验证成功，下一步\r\n      this.props.step1FinishAction(this.state.phone, data.payload)\r\n\r\n      }).catch(err => {\r\n        this.setState({\r\n          errors: { ...this.state.errors, smscode: err.message || '服务器忙' }\r\n        })\r\n      })\r\n\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"step1-wrap\">\r\n      <div className=\"step1-item phone-item\">\r\n        <label htmlFor=\"phone\">会员手机</label>\r\n        <input className={classnames({\r\n          letter: this.state.phone !== ''\r\n        })} onChange={this.fieldChangeHandler} value={this.state.account} placeholder=\"请输入买家手机号码\" autoComplete=\"off\" name=\"phone\" type=\"text\" id=\"phone\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.phone && <div className=\"form-err\">{this.state.errors.phone}</div>\r\n      }\r\n      <div className=\"step1-item sms-item\">\r\n        <label htmlFor=\"smscode\">手机验证</label>\r\n        <input className={classnames(\"sms-input\", {\r\n          letter: this.state.smscode !== ''\r\n        })} onChange={this.fieldChangeHandler} value={this.state.smscode} placeholder=\"请输入验证码\" autoComplete=\"off\" name=\"smscode\" type=\"text\" id=\"smscode\"/>\r\n        <button className=\"sms-btn\" onClick={this.smsCodeClickHandler}>获取验证码</button>\r\n      </div>\r\n      {\r\n        this.state.errors.smscode && <div className=\"form-err\">{this.state.errors.smscode}</div>\r\n      }\r\n      <button onClick={this.nextStepSubmit} className={classnames('next-btn', {\r\n        'next-wait': Object.keys(this.validator()).length !== 0\r\n      })}>下一步</button>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction, step1FinishAction })(Step1)\r\n","\r\nexport const step1FinishAction = (phone, userId) => dispatch => {\r\n  dispatch({\r\n    type: 'STEP1_FINISH',\r\n    payload: {\r\n      account: phone,\r\n      userId\r\n    }\r\n  })\r\n}\r\n\r\nexport const step2FinishAction = data => dispatch => {\r\n  dispatch({\r\n    type: 'STEP2_FINISH',\r\n    payload: data\r\n  })\r\n}\r\n","import React, { Component } from 'react'\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport Axios from 'axios'\r\n\r\nimport { step2FinishAction } from '../../../store/actions/registerActions'\r\nimport { SELLER_HOST } from '../../../config/config';\r\n\r\nclass Step2 extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      storeName: '',\r\n      idCard: '',\r\n      reallyName: '',\r\n      errors: {storeName: ''}\r\n    }\r\n\r\n    this.validator = this.validator.bind(this)\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n    this.checkStoreNameRepeat = this.checkStoreNameRepeat.bind(this)\r\n    this.step2SubmitHandler = this.step2SubmitHandler.bind(this)\r\n  }\r\n\r\n  validator() {\r\n    var ans = {}\r\n    if (!this.state.storeName) {\r\n      ans.storeName = '店铺名不能为空'\r\n    }\r\n    if (!/^([1-9]\\d{14}|[1-9]\\d{17})$/.test(this.state.idCard)) {\r\n      ans.idCard = '身份证格式有误'\r\n    }\r\n    if (!/^.{1,5}$/.test(this.state.reallyName)) {\r\n      ans.reallyName = '1-5位真实姓名有误'\r\n    }\r\n    return ans\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  /**\r\n   * ajax 验证店铺名是否重复\r\n   */\r\n  checkStoreNameRepeat() {\r\n    // console.log(this.state.storeName)\r\n    // if (!this.state.storeName) return;\r\n    // Axios.post('', {storeName: this.state.storeName})\r\n    //   .then(({ data }) => {\r\n    //     console.log(data)\r\n    //   }).catch(err => {\r\n    //     console.error(err)\r\n    //   })\r\n\r\n    // this.props.step2FinishAction({\r\n    //   storeName: this.state.storeName,\r\n    //   reallyName: this.state.reallyName\r\n    // })\r\n  }\r\n\r\n  /**\r\n   * 提交\r\n   */\r\n  step2SubmitHandler() {\r\n    var ans = this.validator()\r\n    if (Object.keys(ans).length !== 0) {\r\n      return this.setState({ errors: ans })\r\n    }\r\n    console.log('提交成功')\r\n    var req = {\r\n      userId: this.props.register.userId + '',\r\n      merchantName: this.state.storeName,\r\n      relName: this.state.relName,\r\n      idCard: this.state.idCard\r\n    }\r\n    Axios.post(`${SELLER_HOST}/api/seller/store`, req)\r\n      .then(({ data }) => {\r\n\r\n        console.log(data)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"step2-wrap\">\r\n      <div className=\"step2-item f_wrap\">\r\n        <label className=\"f_L\" htmlFor=\"storeName\">店铺名称</label>\r\n        <input onBlur={this.checkStoreNameRepeat} onChange={this.fieldChangeHandler} className=\"f_r\" value={this.state.storeName} placeholder=\"请输入您的店铺名称\" autoComplete=\"off\" name=\"storeName\" type=\"text\" id=\"storeName\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.storeName && <div className=\"form-err\">{this.state.errors.storeName}</div>\r\n      }\r\n      <div className=\"step2-item f_wrap\">\r\n        <label className=\"f_L\" htmlFor=\"idCard\">身份证号码</label>\r\n        <input onChange={this.fieldChangeHandler} className=\"f_r\" value={this.state.idCard} placeholder=\"请输入您的身份证号码\" autoComplete=\"off\" name=\"idCard\" type=\"text\" id=\"idCard\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.idCard && <div className=\"form-err\">{this.state.errors.idCard}</div>\r\n      }\r\n      <div className=\"step2-item f_wrap\">\r\n        <label className=\"f_L\" htmlFor=\"reallyName\">真实姓名</label>\r\n        <input onChange={this.fieldChangeHandler} className=\"f_r\" value={this.state.reallyName} placeholder=\"请输入您的真实姓名\" autoComplete=\"off\" name=\"reallyName\" type=\"text\" id=\"reallyName\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.reallyName && <div className=\"form-err\">{this.state.errors.reallyName}</div>\r\n      }\r\n      <div>\r\n        <button onClick={this.step2SubmitHandler} className={classnames('next-btn', {\r\n          'next-wait': Object.keys(this.validator()).length !== 0\r\n        })}>确认提交</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nStep2.propTypes = {\r\n  register: PropTypes.object.isRequired\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    register: state.register\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { step2FinishAction })(Step2)\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Step3 = (props) => {\r\n  return <div className=\"step3-wrap\">\r\n    <div className=\"s3-body\">\r\n      <div className=\"s3-info\">\r\n        <span>恭喜您的店铺</span>\r\n        <span className=\"s3-storeName\">{props.storeName}</span>\r\n        <span>已经注册成功，等待管理员审核</span>\r\n      </div>\r\n      <div><button onClick={() => {props.history.push('/seller/login')}} className=\"s3-ok\">确认</button></div>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    storeName: state.register.storeName\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Step3))\r\n","import React, { Component } from 'react'\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\n\r\nimport './index.scss'\r\nimport { FILE_HOST } from '../../config/config'\r\nimport Footer from '../../components/Footer/index.jsx'\r\nimport AppHeader from '../../components/Header/index'\r\nimport Step1 from './subpage/Step1'\r\nimport Step2 from './subpage/Step2'\r\nimport Step3 from './subpage/Step3'\r\n\r\nclass Register extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"regist\">\r\n        <AppHeader/>\r\n        <div className=\"regist-head\">\r\n          <div className=\"regi-head-box f_wrap\">\r\n            <div className=\"f-logo f_L\">\r\n              <img src={`${FILE_HOST}/image/seller/seller-regi-logo.png`} alt=\"seller-logo\"/>\r\n            </div>\r\n            <div className=\"f-tit f_L\">卖家注册</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"regist-body\">\r\n          <div className=\"step-wrap f_wrap\">\r\n            <div className={classnames(\"step-one f_L\", {\r\n              'f-flush': this.props.step >= 1,\r\n            })}><span className=\"f-icon\">1</span><span className=\"f-step\">身份验证</span></div>\r\n\r\n            <div className={classnames(\"step-one f_L\", {\r\n              'f-flush': this.props.step >= 2,\r\n            })}><span className=\"f-icon\">2</span><span className=\"f-step\">填写账户信息</span></div>\r\n\r\n            <div className={classnames(\"step-one f_L\", {\r\n              'f-flush': this.props.step === 3,\r\n            })}><span className=\"f-icon\">3</span><span className=\"f-step\">注册成功</span></div>\r\n          </div>\r\n          <div>\r\n            {\r\n              this.props.step === 3 ? <Step3 /> :\r\n              this.props.step === 2 ? <Step2 /> : <Step1 />\r\n            }\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    step: state.register.step\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Register)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport FreeScrollBar from 'react-free-scrollbar'\r\n\r\nimport './index.scss'\r\nimport Footer from '../../components/Footer/index'\r\nimport AppHeader from '../../components/Header/index'\r\n\r\nimport { HOST } from '../../config/config.js'\r\nimport { setBigType, setSmaillType } from '../../store/actions/goodsAction'\r\nimport { alertMessageAction } from '../../store/actions/messageActions'\r\nimport { setCategoryChoose } from '../../store/actions/goodsAction'\r\n\r\nclass Category extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      choose: [],\r\n      showSmaill: false,\r\n      showDetail: false,\r\n      errors: {\r\n        category: '', // '类目请求失败'\r\n      }\r\n    }\r\n\r\n    this.handlerCategorySubmit = this.handlerCategorySubmit.bind(this)\r\n    this.isFinishChoose = this.isFinishChoose.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (typeof(window) === 'object') {\r\n      // 从浏览器本地存储获取\r\n      var productType = window.localStorage.getItem('productType')\r\n      try {\r\n        if (productType) {\r\n          productType = JSON.parse(productType)\r\n          return this.props.setBigType(productType)\r\n        }\r\n      } catch(e) {\r\n        console.error('localStorage category error：', e)\r\n      }\r\n    }\r\n    // 请求类别信息\r\n    axios.get(`${HOST}/api/goods/type?type=big`)\r\n      .then(({ data }) => {\r\n        if (!data.success) {\r\n          // 错误处理\r\n          return;\r\n        }\r\n        this.props.setBigType(data.payload)\r\n        // 存储到本地\r\n        if (typeof(window) === 'object') {\r\n          window.localStorage.setItem('productType', JSON.stringify(data.payload))\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, category: '读取类目失败，请刷新重试'}\r\n        })\r\n      })\r\n  }\r\n\r\n  /**\r\n   * 点击类型选择类目\r\n   * @param  {[type]} itemId [大，小，详细类型的id]\r\n   * @param  {[type]} type   ['big','smaill','detail']\r\n   * @return {[type]}        [description]\r\n   */\r\n  handlerTypeClick(itemId, type) {\r\n    let choose = this.state.choose\r\n\r\n    // 点击的是大类型\r\n    if (type === 'big' && this.state.choose[0] !== itemId) {\r\n      if (!this.props.type.find(i => i._id === itemId).smaillType) {\r\n        axios.get(`${HOST}/api/goods/type?type=smaill&bigid=${itemId}`)\r\n        .then(({ data }) => {\r\n          if (!data.success) {\r\n            // 错误处理\r\n            return;\r\n          }\r\n          // 添加请求的小类型\r\n          this.props.setSmaillType(itemId, data.payload)\r\n\r\n          this.setState({\r\n            choose: [itemId],\r\n            showSmaill: true,\r\n            showDetail: false\r\n          }, () => {\r\n            if (typeof(window) === 'object') {\r\n              console.log('setSmailType')\r\n              window.localStorage.setItem('productType', JSON.stringify(this.props.type))\r\n            }\r\n          })\r\n        })\r\n        .catch(err => {\r\n\r\n        })\r\n        return;\r\n      }else {\r\n        return this.setState({\r\n          choose: [itemId],\r\n          showSmaill: true,\r\n          showDetail: false\r\n        })\r\n      }\r\n    }\r\n\r\n    // 点击的是小类型\r\n    if (type === 'smaill' && this.state.choose[1] !== itemId) {\r\n      this.setState({\r\n        choose: [choose[0], itemId],\r\n        showDetail: true,\r\n      })\r\n      return;\r\n    }\r\n\r\n    // 点击的是详细类型\r\n    if (type === 'detail' && this.state.choose[2] !== itemId) {\r\n      choose[2] = itemId\r\n      this.setState({\r\n        choose,\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 判断是否选择完毕\r\n   */\r\n  isFinishChoose() {\r\n    return [1,1].reduce((one, _, index) => one && !!this.state.choose[index + 1], !!this.state.choose[0])\r\n  }\r\n\r\n  /**\r\n   * 点击提交栏目选择\r\n   */\r\n  handlerCategorySubmit() {\r\n    // 保存状态到 redux ，跳转到商品发布页\r\n    if (!this.isFinishChoose()) {\r\n      return this.props.alertMessageAction('请先选择类目')\r\n    }\r\n    this.props.setCategoryChoose(this.state.choose)\r\n    this.props.history.push('/seller/product_issue')\r\n  }\r\n\r\n  render() {\r\n    const category = this.props.type\r\n\r\n    // 找出选择的大类型\r\n    const bigType = this.state.choose[0] ?\r\n                      category.find(i => i._id === this.state.choose[0]) : null\r\n    // 找出选择的小类型\r\n    const smaillType = bigType && this.state.showSmaill ?\r\n                        bigType.smaillType : null\r\n\r\n    // 找出选择的详细类型\r\n    const detailType = smaillType && this.state.showDetail && this.state.choose[1] ?\r\n                        smaillType.find(i => i._id === this.state.choose[1]).detail : null\r\n\r\n    return (<div className=\"category\">\r\n        <AppHeader />\r\n        <div className=\"category-wrap\">\r\n          <h2 className=\"category-head\">选择类目</h2>\r\n          <div>\r\n            <div>\r\n              {\r\n                this.state.errors.category && <div>{this.state.errors.category}</div>\r\n              }\r\n            </div>\r\n            <div className=\"cho-wrap\">\r\n              <div className=\"cho-onece\">\r\n                {\r\n                  category && category.map((bigItem, index) => (\r\n                    <div className={classnames('cho-item', {\r\n                      'cho-chosen': this.state.choose[0] === bigItem._id\r\n                    })} onClick={this.handlerTypeClick.bind(this, bigItem._id, 'big')} key={index}>{bigItem.bigName}</div>\r\n                  ))\r\n                }\r\n              </div>\r\n              <div className=\"cho-onece\" style={{borderColor: smaillType ? null : '#ccc'}}>\r\n                <FreeScrollBar>\r\n                {\r\n                  smaillType && smaillType.map((smaillItem, index) => (\r\n                    <div className={classnames('cho-item', {\r\n                      'cho-chosen': this.state.choose[1] === smaillItem._id\r\n                    })} onClick={this.handlerTypeClick.bind(this, smaillItem._id, 'smaill')} key={index}>{smaillItem.smaillName}</div>\r\n                  ))\r\n                }\r\n                </FreeScrollBar>\r\n              </div>\r\n              <div className=\"cho-onece\" style={{borderColor: detailType ? null : '#ccc'}}>\r\n                <FreeScrollBar>\r\n                {\r\n                  detailType && detailType.map((detailItem, index) => (\r\n                    <div className={classnames('cho-item', {\r\n                      'cho-chosen': this.state.choose[2] === detailItem._id\r\n                    })} onClick={this.handlerTypeClick.bind(this, detailItem._id, 'detail')} key={index}>{detailItem.detailName}</div>\r\n                  ))\r\n                }\r\n                </FreeScrollBar>\r\n              </div>\r\n            </div>\r\n\r\n            {\r\n              bigType && <div className=\"current-cate-wrap\">\r\n                <div className=\"curr-cate-box f_wrap\">\r\n                  <div className=\"f_L\">您当前选择类目为：</div>\r\n                  <div className=\"f_L f_wrap\">\r\n                    {\r\n                      this.state.choose.map((typeId, index) => {\r\n                        return index === 0 ?\r\n                                <div className=\"curr-item f_L\" key={index}>{bigType.bigName}</div> :\r\n                                index === 1 ?\r\n                                <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{smaillType.find(i => i._id === typeId).smaillName}</span></div> :\r\n                                <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{detailType.find(i => i._id === typeId).detailName}</span></div>\r\n                      })\r\n                    }\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            }\r\n\r\n\r\n            <div>\r\n              <div onClick={this.handlerCategorySubmit} className={classnames('c-submit', {\r\n                'c-submit-disable': !this.isFinishChoose(),\r\n              })}>我已阅读以下规则，现在发布宝贝</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"readme\">\r\n            <FreeScrollBar>\r\n              <p>优选规则</p>\r\n              <p>第一章 概述</p>\r\n              <span>1.优选禁止发布侵犯他人知识产权的商品，请确认商品符合知识产权保护的规定</span><br />\r\n              <span>2.choice.com(优选)服务协议》，制定本规则。</span><br />\r\n              <span>3.优选规则，是对优选用户增加基本义务或限制基本权利的条款。 </span><br />\r\n              <span>4.违规行为的认定与处理，应基于优选认定的事实并严格依规执行。优选用户在适用规则上一律平等。</span><br />\r\n              <p>第二章 交易</p>\r\n              <span>1.会员应当严格遵循优选系统设置的注册流程完成注册。会员在选择其优选会员名、优选店铺名或域名时应遵守国家法律法规，不得包含违法、涉嫌侵犯他人权利或干扰淘宝运营秩序等相关信息。会员名注册后无法自行修改。优选有权收回未通过实名认证且连续一年未登录优选的会员名。 </span><br />\r\n              <span>2.会员符合以下任一情形的，其优选账户不得与支付宝账户取消绑定：（一）已通过优选实名认证且发布过商品或创建过店铺；（二）尚有未完结的交易或投诉举报；（三）优选账户尚未被激活或尚有被冻结款项。 </span><br />\r\n            </FreeScrollBar>\r\n          </div>\r\n\r\n        </div>\r\n        <Footer />\r\n\r\n    </div>)\r\n  }\r\n}\r\n\r\nCategory.propTypes = {\r\n  type: PropTypes.array.isRequired,\r\n  setBigType: PropTypes.func.isRequired,\r\n  setSmaillType: PropTypes.func.isRequired,\r\n}\r\n\r\nfunction setStateToProps(state) {\r\n  return {\r\n    type: state.goods.type\r\n  }\r\n}\r\n\r\nexport default connect(setStateToProps, { setBigType, setSmaillType, alertMessageAction, setCategoryChoose })(Category)\r\n","import store from '../store.js'\r\n\r\nexport const setBigType = (bigType) => dispatch => {\r\n  dispatch({\r\n    type: 'SET_BIG_TYPE',\r\n    payload: bigType\r\n  })\r\n}\r\n\r\nexport const setProductType = (bigType) => {\r\n  store.dispatch({\r\n    type: 'SET_BIG_TYPE',\r\n    payload: bigType\r\n  })\r\n}\r\n\r\n\r\nexport const setSmaillType = (bigid, smaillType) => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SMAILL_TYPE',\r\n    payload: {\r\n      bigid,\r\n      smaillType\r\n    }\r\n  })\r\n}\r\n\r\nexport const setCategoryChoose = (choose) => dispatch => {\r\n  dispatch({\r\n    type: 'SET_CATEGORY_CHOOSE',\r\n    payload: choose\r\n  })\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport AppHeader from '../../components/Header/index'\r\nimport Footer from '../../components/Footer/index'\r\nimport { FILE_HOST, HOST } from '../../config/config';\r\nimport axios from 'axios';\r\nimport { alertMessageAction, confirmMessageAction } from '../../store/actions/messageActions'\r\n\r\n/**\r\n * 将属性值数组转换成 渲染 table 表格数据\r\n * @param {属性值数组} arr [[a,b],[c,d]]\r\n */\r\nfunction specValueArrToTableArr(arr) {\r\n\tif (arr.length === 0) {\r\n\t\t// 没有属性分类\r\n\t\treturn [[]]\r\n\t}\r\n\tvar table = [] // n 行\r\n\tvar indexArr = []\r\n\tvar indexAdd = [];\r\n\tfor (var i = 0, len1 = arr.length; i < len1; i++) {\r\n\t\tindexArr[i] = 0;\r\n\t\tindexAdd[i] = (function (){\r\n\t\t\tvar max = arr[i].length\r\n\t\t\tvar index = i;\r\n\t\t\treturn function (){\r\n\t\t\t\tif (indexArr[index] + 1 >= max) {\r\n\t\t\t\t\tindexArr[index] = 0\r\n\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\tindexAdd[index -1]()\r\n\t\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\t\tindexArr[index]++\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}())\r\n\t}\r\n\tvar afterRow = []\r\n\tvar rows = 1\r\n\tfor (var i = 0, len1 = arr.length; i < len1; i++) {\r\n\t\tafterRow[i] = 1;\r\n\t\trows *= arr[i].length\r\n\t\tfor (var j = i + 1; j < arr.length; j++) {\r\n\t\t\tafterRow[i] *= arr[j].length\r\n\t\t}\r\n\t}\r\n\tfor (var x = 0; x < rows; x++) {\r\n\t\ttable[x] = [];\r\n\t\tfor (var i = 0, len1 = arr.length; i < len1; i++) {\r\n\t\t\tif (x % afterRow[i] === 0) {\r\n\t\t\t\ttable[x].push({\r\n\t\t\t\t\tvalue: arr[i][indexArr[i]],\r\n\t\t\t\t\trowspan: afterRow[i]\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tindexAdd[indexAdd.length -1]()\r\n\t}\r\n\treturn table\r\n}\r\n\r\nclass ProductIssue extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      choose: [],\r\n      goodName: '',\r\n      goodFrom: '',\r\n      // 商品属性名，属性值\r\n      properties: [\r\n        {name: '颜色', value: ['星际红','星际蓝']},\r\n        {name: '颜色', value: ['星际红','星际蓝']}\r\n      ],\r\n      // 库存价格\r\n      specInfo: [\r\n        {amount: 0, price: 0}\r\n      ],\r\n      // 宝贝图片\r\n      smaillPicture: [''],\r\n      infoPicture: [''],\r\n      logo: '',\r\n      errors: {}\r\n    }\r\n\r\n    this.filterProperties = this.filterProperties.bind(this)\r\n    this.submitProductIssue = this.submitProductIssue.bind(this)\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    var choose = this.props.categoryChoose\r\n    // 如果未选择类目跳转到选择类目界面\r\n    var flag = [1,1,1].reduce((prev, _, index) => prev && !!choose[index], true)\r\n    if (!flag) {\r\n      return this.props.history.push('/seller/category')\r\n    }\r\n    var bigType = this.props.type.find((i) => i._id === choose[0])\r\n    var smaillType = bigType.smaillType.find((i) => i._id === choose[1])\r\n    var detailType = smaillType.detail.find((i) => i._id === choose[2])\r\n\r\n    this.setState({\r\n      choose: [bigType, smaillType, detailType]\r\n    })\r\n\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 属性名内容改变\r\n   * @param {属性名索引} index\r\n   * @param {事件对象} e\r\n   */\r\n  propNameChangeHandler(index, e) {\r\n    var properties = this.state.properties\r\n    properties[index].name = e.target.value\r\n    this.setState({\r\n      properties\r\n    })\r\n  }\r\n\r\n  propValueChangeHandler(i, j, e) {\r\n    var properties = this.state.properties\r\n    properties[i].value[j] = e.target.value\r\n    this.setState({\r\n      properties\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 判断添加属性名\r\n   */\r\n  propNameBlurHandler(i) {\r\n    var props = this.state.properties\r\n    if (props[props.length-1].name && props[i].name) {\r\n      props.push({name: '', value: ['']})\r\n      this.setState({\r\n        properties: props\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * 判断添加属性值\r\n   */\r\n  propValueBlurHandler(i, j) {\r\n    var props = this.state.properties\r\n    if (props[i].name && props[i].value[props[i].value.length -1]) {\r\n      props[i].value.push('')\r\n      this.setState({\r\n        properties: props\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消规格名\r\n   */\r\n  propNameCancelHandler(i) {\r\n    if (i === 0) return;\r\n    var props = this.state.properties\r\n    props.splice(i, 1)\r\n    this.setState({\r\n      properties: props\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 取消规格值\r\n   */\r\n  propValueCancelHandler(i, j) {\r\n    if (j === 0) return;\r\n    var props = this.state.properties\r\n    props[i].value.splice(j, 1)\r\n    this.setState({\r\n      properties: props\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 库存价格改变\r\n   */\r\n  specInfoChangeHandler(index, e) {\r\n    var specInfo = this.state.specInfo\r\n    if (!specInfo[index]) {\r\n      specInfo[index] = {}\r\n    }\r\n    var key = e.target.name\r\n    var value = e.target.value\r\n    if (key === 'amount') {\r\n      if (value !== '' && !/^[1-9]\\d*$/.test(value)) return;\r\n    }else if (key === 'price') {\r\n      if (value !== '' && !/^[1-9]\\d*(\\.\\d{1,2}|)$/.test(value)) return;\r\n    }\r\n    specInfo[index][e.target.name] = e.target.value\r\n    this.setState({\r\n      specInfo\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 将文件对象转换成 img 标签的 src\r\n   * @param {*} file\r\n   */\r\n  createPictureURL(file) {\r\n    var windowURL = window.URL || window.webkitURL\r\n    return windowURL.createObjectURL(file)\r\n  }\r\n\r\n  /**\r\n   * 宝贝小图片改变事件\r\n   */\r\n  smaillPictureChangeHandler(index, e) {\r\n    var smaill = this.state.smaillPicture\r\n    var files = e.target.files\r\n    if (files.length === 0) {\r\n      return;\r\n    }else if (smaill[index] || files.length === 1) {\r\n      smaill[index] = files[0]\r\n    } else {\r\n      for (var i = index, j = 0, len = files.length > 5 ? 5 : files.length; i < len && j < files.length; ++i && ++j) {\r\n        if (!files[j]) {\r\n          // 图片不符合条件\r\n          i--\r\n          continue;\r\n        }\r\n        smaill[i] = files[j]\r\n      }\r\n    }\r\n    // 留一个空白\r\n    if (smaill.length < 5 && smaill[smaill.length -1]) {\r\n      smaill.push('')\r\n    }\r\n    this.setState({\r\n      smaillPicture: smaill\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 图文介绍图片\r\n   */\r\n  infoPictureChangeHandler(index, e) {\r\n    var info = this.state.infoPicture\r\n    var files = e.target.files\r\n    if (files.length === 0) {\r\n      return;\r\n    } else if (info[index] || files.length === 1) {\r\n      info[index] = files[0]\r\n    } else {\r\n      for (var i = index, j = 0, len = files.length; j < len; ++i && ++j) {\r\n        if (!files[j]) {\r\n          // 图片不符合条件\r\n          i--\r\n          continue;\r\n        }\r\n        info[i] = files[j]\r\n      }\r\n    }\r\n    // 留一个空白\r\n    if (info[info.length - 1]) {\r\n      info.push('')\r\n    }\r\n    this.setState({\r\n      infoPicture: info\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择 Logo\r\n   */\r\n  logoPictureChangeHandler(e) {\r\n    var files = e.target.files\r\n    if (files.length === 0) return;\r\n    this.setState({\r\n      logo: files[0]\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 删除小图片和图文图片\r\n   * @param {*} index\r\n   */\r\n  smaillPictureDelete(index) {\r\n    if ((index === 0 && this.state.smaillPicture.length === 1) || index >= this.state.smaillPicture.length) return;\r\n    var smaillPicture = this.state.smaillPicture\r\n    if (!smaillPicture[index]) {\r\n      return;\r\n    }\r\n    smaillPicture.splice(index, 1)\r\n    this.setState({\r\n      smaillPicture\r\n    })\r\n    // console.log(index)\r\n  }\r\n\r\n  infoPictureDelete(index) {\r\n    if ((index === 0 && this.state.infoPicture.length === 1) || index >= this.state.infoPicture.length) return;\r\n    var infoPicture = this.state.infoPicture\r\n    if (!infoPicture[index]) {\r\n      return;\r\n    }\r\n    infoPicture.splice(index, 1)\r\n    this.setState({\r\n      infoPicture\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * 过滤规格名 规格值\r\n   */\r\n  filterProperties() {\r\n    const props = this.state.properties\r\n    let filtered = {\r\n      name: [],\r\n      value: []\r\n    }\r\n    // 属性去重\r\n    for (var i = 0; i < props.length; i++) {\r\n      var item = {name: '', value: []}\r\n      if (props[i].name && filtered.name.findIndex(fname => fname === props[i].name) === -1) {\r\n        item.name = props[i].name\r\n        for (var j = 0; j < props[i].value.length; j++) {\r\n          if (props[i].value[j] && props[i].value.indexOf(props[i].value[j], j + 1) === -1) {\r\n            item.value.push(props[i].value[j])\r\n          }\r\n        }\r\n        if (item.value.length > 0) {\r\n          filtered.name.push(item.name)\r\n          filtered.value.push(item.value)\r\n        }\r\n      }\r\n    }\r\n    return filtered\r\n  }\r\n\r\n  /**\r\n   * 提交宝贝信息\r\n   */\r\n  submitProductIssue() {\r\n    if (!this.props.categoryChoose[2] ||\r\n        !/^[1-9]\\d*$/.test(this.props.storeId) ||\r\n        !this.state.goodName ||\r\n        !this.state.goodFrom\r\n      ) {\r\n        return this.props.alertMessageAction('请将宝贝信息填写完整后提交')\r\n    }\r\n\r\n    var specProp = this.filterProperties()\r\n    // var len1 = specProp.value.reduce((prev,now) => prev * now.length,1)\r\n\r\n    var form = new FormData()\r\n    form.append('detailId', this.props.categoryChoose[2])\r\n    form.append('storeId', this.props.storeId)\r\n    form.append('goodFrom', this.state.goodFrom)\r\n    form.append('nowPrice', this.state.specInfo[0].price)\r\n    form.append('goodName', this.state.goodName)\r\n    form.append('specName', JSON.stringify(specProp.name))\r\n    form.append('specValue', JSON.stringify(specProp.value))\r\n    form.append('goodDetailInfo', JSON.stringify(this.state.specInfo))\r\n    form.append('logo', this.state.logo)\r\n    this.state.smaillPicture.forEach((item) => {\r\n      form.append('goodSmaillPicture', item)\r\n    })\r\n    this.state.infoPicture.forEach((item) => {\r\n      form.append('goodInfoPicture', item)\r\n    })\r\n    axios.post(`${HOST}/api/goods/add_product`, form)\r\n      .then(({ data }) => {\r\n        console.log(data)\r\n        if (!data.success) {\r\n          return this.props.alertMessageAction(data.message)\r\n        }\r\n        var sure = () => this.props.history.push('/seller/panel/chk_products')\r\n        this.props.confirmMessageAction('添加成功，管理员将会在1-3小时内审核', sure, sure)\r\n      })\r\n      .catch(err => {\r\n        this.props.alertMessageAction(err.message || '服务器忙')\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const table = specValueArrToTableArr(this.filterProperties().value)\r\n\r\n    return <div className=\"issue\">\r\n      <AppHeader />\r\n      <div className=\"issue-head\">\r\n        <div className=\"ih-box\">\r\n          <span className=\"f1\">优选网</span>\r\n          <span className=\"f2\">商品发布</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"issue-body\">\r\n        <div className=\"issue-item f_wrap\">\r\n          <div className=\"iss-tit f_L\" style={{border: 0}}>当前类目：</div>\r\n          <div className=\"current-cate-wrap f_L\">\r\n            <div className=\"curr-cate-box f_wrap\">\r\n            {\r\n              this.state.choose.map((category, index) => {\r\n                return index === 0 ?\r\n                        <div className=\"curr-item f_L\" key={index}>{category.bigName}</div> :\r\n                        index === 1 ?\r\n                        <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{category.smaillName}</span></div> :\r\n                        <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{category.detailName}</span></div>\r\n              })\r\n            }\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"issue-item\">\r\n          <div className=\"iss-tit\">基础信息</div>\r\n          <div className=\"iss-mini-wrap\">\r\n            <div className=\"iss-detail f_wrap\">\r\n              <div className=\"require f_L\">宝贝标题</div>\r\n              <div className=\"good-tit f_L\"><input onChange={this.fieldChangeHandler} value={this.state.goodName} name=\"goodName\" placeholder=\"详细的标题让宝贝更容易搜索到哦\" type=\"text\"/></div>\r\n            </div>\r\n            <div className=\"iss-detail f_wrap\">\r\n              <div className=\"require f_L\">宝贝产地</div>\r\n              <div className=\"good-tit f_L\"><input style={{width: '400px'}} onChange={this.fieldChangeHandler} value={this.state.goodFrom} name=\"goodFrom\" placeholder=\"请输入宝贝的来源地\" type=\"text\"/></div>\r\n            </div>\r\n            <div className=\"iss-detail\">\r\n              <div className=\"iss-spec f_wrap\">\r\n                <div className=\"require f_L\">宝贝规格</div>\r\n                <div>\r\n                  <span className=\"f-important f_L\">选择常见属性可增加搜索/导购的机会</span>\r\n                  <span style={{paddingLeft: '10px'}}>(示例：颜色 - 星际红)</span>\r\n                </div>\r\n              </div>\r\n              {/* start 属性名-属性值 */}\r\n              <div className=\"prop-wrap\">\r\n                {\r\n                  this.state.properties.map((prop, i) => (\r\n                    <div className=\"iss-onece f_wrap\" key={i}>\r\n                      {/* 属性名 */}\r\n                      <div className=\"prop-name-wrap f_L\">\r\n                        <div className=\"prop-name\">\r\n                          <label htmlFor={`prop${i}`}>规格名：</label>\r\n                          <input onBlur={this.propNameBlurHandler.bind(this,i)} onChange={this.propNameChangeHandler.bind(this,i)} id={`prop${i}`} value={prop.name} type=\"text\"/>\r\n                        </div>\r\n                        {/* 取消按钮 */}\r\n                        { i > 0 && <p onClick={this.propNameCancelHandler.bind(this,i)} title=\"删除此规格\" style={{background: `transparent url(${FILE_HOST}/image/ui/minus-circle.png) 0px 0px no-repeat`, backgroundSize: '16px 16px'}} className=\"prop-cancel\"></p> }\r\n                      </div>\r\n                      {/* 属性值 */}\r\n                      <div className=\"prop-value-wrap f_r f_wrap\">\r\n                        <div className=\"f_L\">规格值：</div>\r\n                        <div className=\"f_r\">\r\n                        {\r\n                          prop.value.map((value, j) => (\r\n                            <div className=\"prop-value\" key={j}>\r\n                              <input onBlur={this.propValueBlurHandler.bind(this,i,j)} onChange={this.propValueChangeHandler.bind(this,i,j)} value={value} type=\"text\"/>\r\n                              {/* 取消按钮 */}\r\n                              { j > 0 && <p onClick={this.propValueCancelHandler.bind(this,i,j)} title=\"删除此属性值\" style={{background: `transparent url(${FILE_HOST}/image/ui/minus-circle.png) 0px 0px no-repeat`, backgroundSize: '16px 16px'}} className=\"prop-cancel\"></p> }\r\n                            </div>\r\n                          ))\r\n                        }\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n              {/* end 属性名-属性值 */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"issue-item\">\r\n          <div className=\"iss-tit\">销售信息</div>\r\n          <div className=\"iss-table-wrap\">\r\n            {\r\n              table.length > 0 && <table className=\"issue-table\" style={{margin: '0 auto'}} border=\"1\" cellSpacing=\"0\" cellPadding=\"0\">\r\n                <thead className=\"issue-thead\">\r\n                  <tr>\r\n                    {\r\n                      new Array(table[0].length).fill(0).map((_, index) => (\r\n                        <td key={index}>{this.state.properties[index].name}</td>\r\n                      ))\r\n                    }\r\n                    <td>库存</td>\r\n                    <td>价格</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"issue-tbody\">\r\n                  {\r\n                    table.map((column, index) => (\r\n                      <tr key={index}>\r\n                        {\r\n                          column.map((row, index) => (\r\n                            <td rowSpan={row.rowspan} key={index}>{row.value}</td>\r\n                          ))\r\n                        }\r\n                        <td><input onChange={this.specInfoChangeHandler.bind(this, index)} autoComplete=\"off\" name=\"amount\" placeholder=\"库存\" type=\"text\"/></td>\r\n                        <td><input onChange={this.specInfoChangeHandler.bind(this, index)} autoComplete=\"off\" name=\"price\" placeholder=\"价格\" type=\"text\"/></td>\r\n                      </tr>\r\n                    ))\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            }\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"iss-pics-wrap issue-item\">\r\n          <div className=\"iss-tit\">图文信息</div>\r\n          <div className=\"iss-picture-wrap\">\r\n            <div className=\"iss-pic-item-wrap pic-smaill-wrap\">\r\n              <div className=\"iss-pic-tit\">宝贝图片 最多5张</div>\r\n              <div className=\"pic-item-wrap f_wrap\">\r\n                {\r\n                  this.state.smaillPicture.map((p, index) => (\r\n                    <div className=\"pic-item f_L\" key={index}>\r\n                      <img src={p ? this.createPictureURL(p) : ''}/>\r\n                      <input key={index} onChange={this.smaillPictureChangeHandler.bind(this, index)} type=\"file\" multiple={p === ''}/>\r\n                      <div onClick={this.smaillPictureDelete.bind(this, index)} className=\"pic-cancel\">删除此图片</div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </div>\r\n            <div className=\"iss-pic-item-wrap\">\r\n              <div className=\"iss-pic-tit\">图片介绍</div>\r\n              <div className=\"pic-item-wrap f_wrap\">\r\n                {\r\n                  this.state.infoPicture.map((p, index) => (\r\n                    <div className=\"pic-item f_L\" key={index}>\r\n                      <img src={p ? this.createPictureURL(p) : ''}/>\r\n                      <input key={index} onChange={this.infoPictureChangeHandler.bind(this, index)} type=\"file\" multiple={p === ''}/>\r\n                      <div onClick={this.infoPictureDelete.bind(this, index)} className=\"pic-cancel\">删除此图片</div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </div>\r\n            <div className=\"iss-pic-item-wrap\">\r\n              <div className=\"iss-pic-tit\">宝贝 LOGO</div>\r\n              <div className=\"pic-item-wrap\">\r\n                <div className=\"pic-item\">\r\n                  <img src={this.state.logo ? this.createPictureURL(this.state.logo) : ''}/>\r\n                  <input onChange={this.logoPictureChangeHandler.bind(this)} type=\"file\"/>\r\n                  <div className=\"pic-cancel\">添加图片</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"iss-submit\"><button onClick={this.submitProductIssue}>提交宝贝信息</button></div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  }\r\n}\r\n\r\nProductIssue.propTypes = {\r\n  categoryChoose: PropTypes.array.isRequired\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    type: state.goods.type,\r\n    categoryChoose: state.goods.categoryChoose,\r\n    storeId: state.auth.user.storeId\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { alertMessageAction, confirmMessageAction })(ProductIssue)\r\n","import React from 'react'\r\n\r\nimport './index.scss'\r\n\r\nconst WaitVerify = props => (\r\n  <div className=\"wait-verify\">\r\n    <h2>{props.message}</h2>\r\n  </div>\r\n)\r\nexport default WaitVerify\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Redirect } from 'react-router-dom'\r\n\r\nimport WaitVerify from './subpage/WaitVerify'\r\nimport { transURL } from '../../utils/tools'\r\n\r\n// hydrate 注水时 bug\r\nconst waitComponent = typeof window === 'object' ? <WaitVerify message=\"账号认证中....\" /> : null\r\n\r\nconst PrivateRoute = ({component: Component, isAuthorized, isVerify, ...rest}) => (\r\n  <Route {...rest} render={(props) => (\r\n      isAuthorized ? <Component {...props} />\r\n      : isVerify  // 本地 token 验证中\r\n      ? waitComponent\r\n      : <Redirect to={`/seller/login?prev=${transURL(props.location.pathname + props.location.search)}`} />\r\n    )} />\r\n)\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isAuthorized: state.auth.isAuthorized,\r\n    isVerify: state.auth.isVerify\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(PrivateRoute)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport { formatDate } from '../../../utils/tools'\r\n\r\nimport { messageNotReadItemToChatAction, messageItemToChatAction } from '../../../store/actions/chatActions'\r\nimport { HOST } from '../../../config/config'\r\n\r\nfunction subMessage(message) {\r\n  var msg = message.replace(/{{=\\w+\\.(jpg|png|icon|gif|jpeg)}}/g, '【图片】').replace('&lt;', '<').replace('&gt;', '>')\r\n  return message.length < 19 ? msg : msg.substring(0,18) + '...'\r\n}\r\n\r\nconst Message = props => {\r\n  return (\r\n    <div className=\"chat-msg-wrap\">\r\n      { // 未读消息\r\n        [props.messagesNotRead.map((item, index) => (\r\n          <div onClick={props.messageNotReadItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n            <div className=\"msg-i-userwrap\">\r\n              <div className=\"msg-i-avatar\" style={{\r\n                background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n              }}></div>\r\n              <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n            </div>\r\n            <div className=\"msg-i-wrap\">\r\n              <div className=\"msg-i-disone\">{(Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              <div className=\"msg-i-len\">{item.notRead}</div>\r\n            </div>\r\n              <div className=\"msg-i-time\">{Array.isArray(item.content) && item.content.length > 0 ? formatDate(item.content[item.content.length-1].creaTime) : ''}</div>\r\n          </div>\r\n        )), // 已读消息\r\n          props.messages.map((item, index) => (\r\n            <div onClick={props.messageItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n              <div className=\"msg-i-userwrap\">\r\n                <div className=\"msg-i-avatar\" style={{\r\n                  background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n                }}></div>\r\n                <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n              </div>\r\n              <div className=\"msg-i-wrap\">\r\n                <div className=\"msg-i-disone\">{props.chatnow !== item.userId && item.wait ? subMessage(item.wait) : (Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    messagesNotRead: Array.isArray(state.chat.messagesNotRead) ? state.chat.messagesNotRead : [],\r\n    messages: Array.isArray(state.chat.messages) ? state.chat.messages : [],\r\n    chatnow: state.chat.chatnow\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { messageNotReadItemToChatAction, messageItemToChatAction })(Message)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { contactItemToChatAction } from '../../../store/actions/chatActions'\r\nimport socket from '../../../utils/socket'\r\nimport { HOST } from '../../../config/config'\r\n\r\n// 点击联系人到聊天框\r\nfunction contactClick(item) {\r\n  return function() {\r\n    contactItemToChatAction(item)\r\n  }\r\n}\r\n\r\nconst Contacts = (props) => {\r\n  if (socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'get_contacts'\r\n    }))\r\n  }\r\n  const online = []\r\n  const offline = []\r\n  props.contacts.forEach(i => {\r\n    if (i.isOnline) {\r\n      online.push(i)\r\n    }else {\r\n      offline.push(i)\r\n    }\r\n  })\r\n  return (\r\n    <div>\r\n      {\r\n        props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n        [\r\n          online.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          )),\r\n          offline.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item chat-item-offline\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n// class Contacts extends React.Component {\r\n//   componentWillMount() {\r\n//     // socket 请求 联系人列表\r\n//     if (socket.status === 'open') {\r\n//       socket.ws.send(JSON.stringify({\r\n//         type: 'get_contacts'\r\n//       }))\r\n//     }\r\n//   }\r\n//   // 点击联系人到聊天框\r\n//   contactClick(item) {\r\n//     contactItemToChatAction(item)\r\n//   }\r\n//   render() {\r\n//     const online = []\r\n//     const offline = []\r\n//     this.props.contacts.forEach(i => {\r\n//       if (i.isOnline) {\r\n//         online.push(i)\r\n//       }else {\r\n//         offline.push(i)\r\n//       }\r\n//     })\r\n//     return (\r\n//       <div>\r\n//         {\r\n//           this.props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n//           [\r\n//             online.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             )),\r\n//             offline.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item chat-item-offline\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             ))\r\n//           ]\r\n//         }\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    contacts: Array.isArray(state.chat.contacts) ? state.chat.contacts : []\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Contacts)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport socket from '../../../utils/socket'\r\nimport { contactItemToChatAction } from '../../../store/actions/chatActions'\r\n\r\nimport { HOST } from '../../../config/config'\r\n\r\nclass Search extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      searchAns: [],\r\n      keyword: '',\r\n      message: ''\r\n    }\r\n    this.shakeGetAns = this.shakeGetAns().bind(this)\r\n  }\r\n\r\n  // 防抖获取结果\r\n  shakeGetAns() {\r\n    var timer = 0\r\n    var timeout = -1;\r\n    return function(keyword) {\r\n      var _this = this\r\n      clearTimeout(timeout) // 清除前一个定时器\r\n      timeout = setTimeout(function() {\r\n        _this.setState({\r\n          message: '搜索中...'\r\n        })\r\n        axios.get(`${HOST}/api/users/search_contacts?keyword=${_this.state.keyword}`)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              _this.setState({\r\n                searchAns: res.data.payload,\r\n                message: res.data.payload.length === 0 ? '未搜索到联系人...' : ''\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n          })\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  keywordChange(e) {\r\n    var _this = this\r\n    var keyword = e.target.value\r\n    this.setState({\r\n      keyword\r\n    }, function() {\r\n      _this.shakeGetAns(keyword)\r\n    })\r\n  }\r\n\r\n  contactsClick(item) {\r\n    contactItemToChatAction(item)\r\n  }\r\n\r\n  addContactsClick(item) {\r\n    return function(e) {\r\n      e.stopPropagation()\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'add_contacts',\r\n          content: item.userId\r\n        }))\r\n        this.setState({\r\n          searchAns: this.state.searchAns.filter(i => i.userId !== item.userId)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-search-wrap\">\r\n        <div className=\"chat-s-input\">\r\n          <div className=\"chat-s-i-l\"><input value={this.state.keyword} placeholder=\"输入联系人昵称\" onChange={this.keywordChange.bind(this)} type=\"text\"/></div>\r\n          <div className=\"chat-s-i-r\">点击搜索</div>\r\n        </div>\r\n        <div className=\"chat-s-ans\">\r\n          {\r\n            Array.isArray(this.state.searchAns) && this.state.searchAns.length === 0 ? <div className=\"con-search-miss\">{this.state.message}</div> : this.state.searchAns.map((item, index) => (\r\n              <div onClick={this.contactsClick.bind(this, item)} className=\"c-s-item\" key={index}>\r\n                <div className=\"c-s-i-avatar\"><img src={`${HOST}/image/member/avatar/${item.avatar}`} /></div>\r\n                <div className=\"c-s-i-nickname\">{item.nickname}</div>\r\n                <div onClick={this.addContactsClick(item).bind(this)} className=\"c-s-i-btn-add\">加好友</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport wss from '../../../utils/socket'\r\nimport { swingChatWindowAction, setWaitMessageAction, sendingMessageAction } from '../../../store/actions/chatActions'\r\nimport { HOST } from '../../../config/config'\r\n\r\n// function readFile(file, callback) {\r\n//   var reader = new FileReader()\r\n//   //以二进制形式读取文件\r\n//   reader.readAsArrayBuffer(file)\r\n//   reader.onload = function(e) {\r\n//     callback(e.target.result)\r\n//   }\r\n// }\r\n\r\nfunction transMessage(msg) {\r\n  if (msg === '' || typeof(msg) !== 'string') return msg\r\n    // firefox 不支持正则前置断言\r\n    // images = msg.match(/(?<!{{=)\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\r\n  var images = msg.match(/[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)(?=}})/g)\r\n  if (images) {\r\n    // var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)}}/)\r\n    var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.[jpgenifco]{3,4}}}/i)\r\n    msg = msgs[0]\r\n    for (var i = 1, len = msgs.length; i < len; i++) {\r\n      msg += `<img chat=\"${images[i-1]}\" src=\"${HOST}/image/member/chat/${/\\.gif$/.test(images[i-1]) ? images[i-1] : images[i-1] + '_w80.jpg'}\">${msgs[i]}`\r\n    }\r\n  }\r\n  return msg\r\n}\r\n\r\nclass ChatWindow extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      message: '',\r\n      waitMessage: '',\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    }\r\n    this.scrollToButton = this.scrollToButton.bind(this)\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // console.log(error)\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    // console.log(error, info)\r\n    // logErrorToMyService(error, info);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = function (e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragleave = function(e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragover = function(e) {\r\n        e.preventDefault();\r\n    }\r\n    var _this = this\r\n    this.refs.textarea.ondrop = function(e) {\r\n      e.preventDefault()\r\n      e.stopPropagation() // 火狐浏览器，拖动时打开新页面\r\n      if (!_this.props.chat.chatnow) return;\r\n      var file = e.dataTransfer.files[0]\r\n      if (!file || file.size > '5048576‬') {\r\n        return; // 5M 以下的文件\r\n      }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\r\n        return; // 不支持的格式\r\n      }\r\n      var formData = new FormData()\r\n      formData.append('picture', file)\r\n      var waitImg = `<waitimg size=\"${file.size}\"><img src=\"${HOST}/image/ui/wait.gif\"></waitimg>`\r\n      _this.setState({\r\n        waitMessage: _this.refs.textarea.innerHTML += waitImg\r\n      })\r\n\r\n      axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n        .then(res => {\r\n          if (res.data.success) {//new RegExp(`<waitimg size=\"${file.size}\">[\\\\d\\\\D]+</waitimg>`)\r\n            var nowMessage = _this.refs.textarea.innerHTML.replace(waitImg,`<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\r\n            return _this.setState({\r\n              waitMessage: nowMessage\r\n            }, function() {\r\n              _this.props.setWaitMessageAction(nowMessage)\r\n            })\r\n\r\n          }\r\n          // 失败了\r\n          _this.setState({\r\n            waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n          })\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n          _this.setState({\r\n            waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n          })\r\n        })\r\n    }\r\n    document.getElementsByClassName(\"chatw-show-wrap\")[0].onclick = function(e) {\r\n      var img = e.target.getAttribute('chat')\r\n      if (img && /^\\w{10}_\\d{7,9}\\.(jpg|png|gif|icon|jpeg)$/.test(img)) {\r\n        _this.setState({\r\n          showChatImage: true,\r\n          chatImage: img\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  chatImageChange(e) {\r\n    var _this = this\r\n    if (!_this.props.chat.chatnow) return;\r\n    var file = e.currentTarget.files[0]\r\n    if (!file || file.size > '5048576‬') {\r\n      return; // 5M 以下的文件\r\n    }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\r\n      return; // 不支持的格式\r\n    }\r\n    var formData = new FormData()\r\n    formData.append('picture', file)\r\n    var waitImg = `<waitimg size=\"${file.size}\"><img src=\"${HOST}/image/ui/wait.gif\"></waitimg>`\r\n    _this.setState({\r\n      waitMessage: _this.refs.textarea.innerHTML += waitImg\r\n    })\r\n\r\n    axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n      .then(res => {\r\n        if (res.data.success) {//new RegExp(`<waitimg size=\"${file.size}\">[\\\\d\\\\D]+</waitimg>`)\r\n          var nowMessage = _this.refs.textarea.innerHTML.replace(waitImg,`<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\r\n          return _this.setState({\r\n            waitMessage: nowMessage\r\n          }, function() {\r\n            _this.props.setWaitMessageAction(nowMessage)\r\n          })\r\n\r\n        }\r\n        // 失败了\r\n        _this.setState({\r\n          waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        _this.setState({\r\n          waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n        })\r\n      })\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = null\r\n    this.refs.textarea.ondragleave = null\r\n    this.refs.textarea.ondragover = null\r\n    this.refs.textarea.ondrop = null\r\n  }\r\n\r\n  // 聊天对象改变时，拿出未发送消息\r\n  componentWillReceiveProps(nextProps, b) {\r\n    // console.log(nextProps, b)\r\n    if (typeof(window) !== 'object') { return }\r\n    var chat = this.props.chat\r\n    // 将消息中的 wait 提取出\r\n    if (chat.chatnow !== nextProps.chat.chatnow) {\r\n      var now = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (now && now.wait) {\r\n        // this.refs.textarea.classList.remove('textarea-f1')\r\n        this.refs.textarea.innerHTML = now.wait\r\n      }else {\r\n        this.refs.textarea.innerText = ''\r\n      }\r\n      // 将消息滚动条，到最低\r\n      this.scrollToButton()\r\n    }else {\r\n      var msgNow = chat.messages.find(i => i.userId === chat.chatnow)\r\n      var msgNext = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (msgNow && msgNext && Array.isArray(msgNow.content) && Array.isArray(msgNext.content) && msgNow.content.length !== msgNext.content.length) {\r\n        // 将消息滚动条，到最低\r\n        this.scrollToButton()\r\n      }\r\n    }\r\n    this.refs.textarea.focus()\r\n  }\r\n\r\n  scrollToButton() {\r\n      var _this = this\r\n        // 这里 render 还没执行，页面中组件\r\n      setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n        _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n          _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        }, 200)\r\n      }, 100)\r\n  }\r\n\r\n  closeChatImage() {\r\n    this.setState({\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    })\r\n  }\r\n\r\n  // 隐藏这个窗口\r\n  swingChatWindow() {\r\n    this.props.swingChatWindowAction(true)\r\n  }\r\n\r\n  sendMessage() {\r\n    var message = this.refs.textarea.innerHTML.trim().replace(new RegExp(`<waitimg>[\\\\d\\\\D]+</waitimg>`), '')\r\n    if (message === '' || !this.props.chat.chatnow) return;\r\n    // var images = message.match(/\\w+?\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\">)/g)\r\n    // 取出图片\r\n    var images = message.match(/[A-z0-9]{10}_\\d{8}\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\")/g)\r\n\r\n    if (images) {\r\n      var msgs = message.split(/<img [\\w\\W]+?>/) // 根据图片分割消息，非贪婪匹配\r\n      // console.log(msgs)\r\n      message = msgs[0]\r\n      for (var i = 1, len = msgs.length; i < len; i++) {\r\n        message += `{{=${images[i-1]}}}${msgs[i]}`\r\n      }\r\n    }\r\n    message = message.replace(/<(span|font|div|br|img)[\\d\\D]*?>/g, '').replace(/<\\/(div|span|font)>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    // console.log(images)\r\n    // return console.log(message)\r\n    //message = message.replace(/(<\\/span>|<span[^>]+?>)/g, '').replace(/(<\\/div>|<div[^>]*?>)/g, '').replace(/<br>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    if (message === '') return;\r\n    if (wss.status !== 'open') {\r\n      return this.setState({\r\n        messages: '与服务器断开连接'\r\n      })\r\n    }\r\n    this.props.sendingMessageAction(message)\r\n    wss.ws.send(JSON.stringify({\r\n      type: 'send_chat_message',\r\n      origin: this.props.user.userId,\r\n      target: this.props.chat.chatnow,\r\n      content: message\r\n    }))\r\n    this.refs.textarea.innerText = '' // 清空消息\r\n    this.props.setWaitMessageAction('')\r\n  }\r\n\r\n  // textareaFocus(e) {\r\n\r\n  // }\r\n  // textareaBlur(e) {\r\n\r\n  // }\r\n\r\n  textareaInput(e) {\r\n    this.props.setWaitMessageAction(e.target.innerHTML.trim().replace(/<div><br><\\/div>/g, ''))\r\n  }\r\n\r\n  textareaPress(e) {\r\n    var html = e.target.innerHTML\r\n    if (e.key === 'Enter') {\r\n      e.target.innerHTML = html.replace(/<div><br><\\/div>$/g, '')\r\n      this.sendMessage()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let chat = this.props.chat\r\n    let chatnow = undefined\r\n    if (chat.chatnow && Array.isArray(chat.messages)) {\r\n      chatnow = chat.messages.find(i => i.userId === chat.chatnow)\r\n    }\r\n    return (\r\n      <div className=\"chat-window\" style={{\r\n        display: chat.hideWindow ? 'none' : 'block'\r\n      }}>\r\n        <div className=\"chatw-header\">\r\n          <div onClick={this.swingChatWindow.bind(this)} className=\"charw-hide\" style={{\r\n            background: `url(${HOST}/image/ui/left.png) center center / 25px 25px no-repeat #628ef9`\r\n          }}></div>\r\n          <div className=\"chatw-h-targetname\">{chatnow && chatnow.nickname}</div>\r\n        </div>\r\n        <div className=\"chatw-show-scroll-wrap\">\r\n          <div ref=\"chatMessageBox\" className=\"chatw-show-wrap\">\r\n          {\r\n            [chatnow && chatnow.content.map((item, index) => (\r\n              <div className=\"chat-chatnow-wrap\" key={index}>\r\n                {\r\n                  item.sender === chatnow.userId ? (\r\n                    <div className=\"chat-target-wrap\">\r\n                      <div className=\"chat-target\" key=\"1\">\r\n                        <div className=\"chat-ta-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${chatnow.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-ta-nickname\">{chatnow.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-target\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"chat-me-wrap\">\r\n                      <div className=\"chat-me\" key=\"1\">\r\n                        <div className=\"chat-me-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  )\r\n                }\r\n              </div>\r\n            )),\r\n              chatnow && chat.sendingMessages.map((item, index) => {\r\n                return item.target !== chatnow.userId ? null : (\r\n                <div className=\"chat-chatnow-wrap\" key={index}>\r\n                  <div className=\"chat-me-wrap\">\r\n                    <div className=\"chat-me\" key=\"1\">\r\n                      <div className=\"chat-me-avatar\" style={{\r\n                        background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                      }}></div>\r\n                      <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                    </div>\r\n                    <div className=\"wait-msg-box\">\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.message)}} key=\"2\"></div>\r\n                      <div className=\"wait-logo\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )})]\r\n          }\r\n          </div>\r\n        </div>\r\n        <div className=\"chatw-send-wrap\">\r\n          <div className=\"chatw-s-textarea\">\r\n            <div id=\"textarea\"\r\n              ref=\"textarea\"\r\n              // onFocus={this.textareaFocus.bind(this)}\r\n              // onBlur={this.textareaBlur.bind(this)}\r\n              onInput={this.textareaInput.bind(this)}\r\n              contentEditable={!!chatnow}\r\n              suppressContentEditableWarning=\"true\"\r\n              onKeyPress={this.textareaPress.bind(this)}\r\n              dangerouslySetInnerHTML={{__html: this.state.waitMessage}}\r\n            ></div>\r\n          </div>\r\n          <div className=\"chatw-s-sendbox\">\r\n            <div className=\"chat-add-img\">\r\n              <input onChange={this.chatImageChange.bind(this)} className=\"add-img-file\" type=\"file\"/>\r\n              <img src={`${HOST}/image/ui/plus-circle.png`} title=\"添加图片\"/>\r\n            </div>\r\n            {\r\n              this.state.message && <div className=\"char-err\">{this.state.message}</div>\r\n            }\r\n            <div onClick={this.sendMessage.bind(this)} className=\"chatw-s-sendbtn\">发送</div>\r\n\r\n          </div>\r\n        </div>\r\n        {\r\n          this.state.showChatImage && <div onClick={this.closeChatImage.bind(this)} className=\"chat-img-wrap\">\r\n            <img src={`${HOST}/image/member/chat/${this.state.chatImage}`}/>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.auth.user,\r\n    chat: state.chat\r\n  }\r\n}\r\n\r\nChatWindow.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  chat: PropTypes.object.isRequired,\r\n  setWaitMessageAction: PropTypes.func.isRequired,\r\n  swingChatWindowAction: PropTypes.func.isRequired\r\n}\r\nexport default connect(mapStateToProps, { swingChatWindowAction, setWaitMessageAction, sendingMessageAction })(ChatWindow)\r\n","/**\r\n * 在 App.js 中判断显示 store 中是否显示聊天功能，购物车点击青蛙显示\r\n * 请求消息记录，显示条数\r\n * 系统消息，用户消息\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport Message from './subpage/Message'\r\nimport Contacts from './subpage/Contacts'\r\nimport Search from './subpage/Search'\r\nimport ChatWindow from './subpage/ChatWindow'\r\n\r\nimport { initContacts } from '../../store/actions/chatActions'\r\n\r\nimport { HOST } from '../../config/config'\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: 'message',  // 显示 message，contacts，search\r\n      message: '',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var chat = document.getElementById('chat')\r\n      var chatMove = document.getElementById('chat-move')\r\n\r\n      chatMove.onmousedown = function(e) {\r\n        var startX = e.clientX\r\n        var startY = e.clientY\r\n        var top = parseInt(window.getComputedStyle(chat)['top'])\r\n        var left = parseInt(window.getComputedStyle(chat)['left'])\r\n        // var X = document.documentElement.clientWidth  // 窗口高宽\r\n        // var Y = document.documentElement.clientHeight\r\n        document.onmousemove = function(e) {\r\n          /**\r\n           * 判断将窗口拖出文档\r\n           */\r\n          chat.style.left = left + (e.clientX - startX) + 'px'\r\n          chat.style.top = top + (e.clientY - startY) + 'px'\r\n        }\r\n\r\n        document.onmouseup = function() {\r\n          // chat.onmousedown = null\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n        }\r\n      }\r\n      document.onmouseleave = function() {\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      document.getElementById('chat-move').onmousedown = null\r\n      document.onmouseleave = null\r\n    }\r\n  }\r\n\r\n  routeChange(route) {\r\n    this.setState({\r\n      route\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (typeof(window) !== 'object') {\r\n      return <div></div>\r\n    }\r\n\r\n    return (\r\n      <div id=\"chat\">\r\n        <div className=\"chat-route\">\r\n          <div id=\"chat-move\" className=\"cr-user-wrap\">\r\n            <div className=\"cr-user-avatar\" style={{\r\n              'background': `url(${HOST}/image/member/avatar/${this.props.auth.user.avatar}) center center / 30px 30px no-repeat`\r\n            }}></div>\r\n           <div className=\"cr-user-name\">{this.props.auth.user.nickname}</div>\r\n          </div>\r\n          <div className=\"cr-routes-wrap\">\r\n            <div onClick={this.routeChange.bind(this, 'message')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'message'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/message.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>消息</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'contacts')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'contacts'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/user.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>联系人</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'search')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'search'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/monitor.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>找人</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-body\">\r\n          <div className=\"chat-body-box\">\r\n            {\r\n              this.state.route === 'message' ? <Message /> :\r\n              this.state.route === 'contacts' ? <Contacts /> :\r\n              this.state.route === 'search' ? <Search /> : null\r\n            }\r\n          </div>\r\n        </div>\r\n        <ChatWindow />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    // chat: state.chat\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  // chat: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, { initContacts })(Chat)\r\n","/**\r\n * 在页面中显示消息，显示 1.5 秒后消失\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { closeAlertAction } from '../../store/actions/messageActions'\r\nimport './index.scss'\r\n\r\nclass MessageBox extends React.Component {\r\n\r\n  componentDidMount() {\r\n    var box = this.refs.messageBox\r\n    var _this = this\r\n    setTimeout(function() {\r\n      var opacity = 1\r\n      var interval = setInterval(function() {\r\n        opacity -= 0.1\r\n        box.style.opacity = opacity\r\n      }, 100)\r\n      setTimeout(function() {\r\n        clearInterval(interval)\r\n        _this.props.closeAlertAction()\r\n      }, 1000)\r\n    }, 500)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref=\"messageBox\" className=\"message-box\">\r\n        {this.props.messageBox.message}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messageBox: state.messageBox\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { closeAlertAction })(MessageBox)\r\n","/**\r\n * 确认或取消\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeConfirmAction } from '../../store/actions/messageActions'\r\n\r\nfunction limitMessage(message) {\r\n  if (typeof(message) !== 'string') {\r\n    return ''\r\n  }\r\n  return message.length < 31 ? message : message.substring(0,30) + '...'\r\n}\r\n\r\nconst Confirm = props => {\r\n\r\n  var sureBtnClick = function() {\r\n    if (typeof(props.sure) === 'function') {\r\n      props.sure()\r\n    }\r\n    props.closeConfirmAction()\r\n  }\r\n\r\n  var cancelBtnClick = function() {\r\n    props.closeConfirmAction()\r\n    if (typeof(props.cancel) === 'function') {\r\n      props.cancel()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"confirm-box\">\r\n      <div className=\"msg-content\">{limitMessage(props.confirmMessage)}</div>\r\n      <div className=\"btn-wrap\">\r\n        <div onClick={sureBtnClick} className=\"btn-yes\">确认</div>\r\n        <div onClick={cancelBtnClick} className=\"btn-cancel\">取消</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    confirmMessage: state.messageBox.confirmMessage,\r\n    sure: state.messageBox.sure,\r\n    cancel: state.messageBox.cancel,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { closeConfirmAction })(Confirm)\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nimport store from './store/store.js'\r\nimport SellerHome from './containers/SellerHome/index.jsx'\r\nimport Login from './containers/Login/index.jsx'\r\nimport Register from './containers/Register/index.jsx'\r\nimport Category from './containers/Category/index.jsx'\r\nimport ProductIssue from './containers/ProductIssue/index'\r\nimport PrivateRoute from './components/PrivateRoute/index'\r\n\r\nimport Chat from './components/Chat'\r\nimport MessageBox from './components/MessageBox/index'\r\nimport Confirm from './components/MessageBox/Confirm'\r\n\r\nimport { setProductType } from './store/actions/goodsAction'\r\nimport { setAuthToken, setCurrentUser } from './utils/setAuth'\r\nimport { HOST } from './config/config'\r\n\r\nif (typeof(window) === 'object') {\r\n  // 彩蛋\r\n  console.log('%c优选提示！','color:#3680f1;font-size:30px;font-weight:bold;')\r\n  console.log('%c此浏览器功能专供开发者使用。请不要在此粘贴执行任何内容，这可能会导致您的账户受到攻击，给您带来损失 ！','font-size:20px;color:#777777;font-weight:400;')\r\n\r\n  // 验证本地 token\r\n  const jwtToken = window.localStorage.jwtToken;\r\n  if (!jwtToken) {\r\n    setAuthToken(false);\r\n    setCurrentUser({});\r\n  } else {\r\n    axios.defaults.headers.common[\"Authorization\"] = jwtToken // 设置请求头 token\r\n    store.dispatch({ type: 'VERIFYING' })\r\n\r\n    // 验证请求头token\r\n    axios.get(`${HOST}/api/users/current`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          setAuthToken(false)\r\n          setCurrentUser({})\r\n        } else {\r\n          // token 验证成功\r\n          setAuthToken(res.data.payload.token)\r\n          setCurrentUser(res.data.payload.user)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.warn('at verify local token:', err)\r\n        setAuthToken(false);\r\n        setCurrentUser({});\r\n      })\r\n  }\r\n\r\n  // 取出本地储存的商品目录\r\n  var productType = window.localStorage.getItem('productType')\r\n  try {\r\n    setProductType(JSON.parse(productType))\r\n  } catch(e) {\r\n\r\n  }\r\n}\r\n\r\n// <Provider store={ store }>\r\n// </Provider>\r\nconst App = (props) => {\r\n  return (\r\n  \t\t<div>\r\n          <Switch>\r\n            <PrivateRoute path=\"/seller/panel\" component={SellerHome} />\r\n            <Route exact path=\"/seller/login\" component={Login} />\r\n            <Route exact path=\"/seller/register\" component={Register} />\r\n            <PrivateRoute exact path=\"/seller/category\" component={Category} />\r\n            <PrivateRoute exact path=\"/seller/product_issue\" component={ProductIssue} />\r\n            {/* 重定向 */}\r\n            <Redirect exact from=\"/seller\" to=\"/seller/panel\" />\r\n            <Redirect exact from=\"/*\" to=\"/seller/panel\" />\r\n          </Switch>\r\n          {\r\n            // 聊天框\r\n            props.hideChat ? null : <Chat />\r\n          }\r\n          {\r\n            !props.showAlert ? null : <MessageBox />\r\n          }\r\n          {\r\n            !props.showConfirm ? null : <Confirm />\r\n          }\r\n  \t\t</div>\r\n\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    hideChat: state.chat.hideChat,\r\n    showAlert: state.messageBox.showAlert,\r\n    showConfirm: state.messageBox.showConfirm,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App)\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport './index.scss';\r\nimport App from './App';\r\nimport store from './store/store'\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>\r\n , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}