{"version":3,"sources":["store/reducers/auth.js","utils/validator.js","store/reducers/goods.js","store/reducers/messageBox.js","store/reducers/chat.js","store/reducers/register.js","store/reducers/index.js","store/store.js","config/config.js","utils/tools.js","utils/setAuth.js","utils/socket.js","store/actions/chatActions.js","containers/SellerHome/subpage/CurrentData.jsx","containers/SellerHome/subpage/Backlog.jsx","components/Footer/index.jsx","components/Header/index.js","store/actions/messageActions.js","containers/SellerHome/subpage/OrderManager/OrderItem.jsx","containers/SellerHome/subpage/OrderManager/SendPost.jsx","containers/SellerHome/subpage/OrderManager/index.jsx","containers/SellerHome/subpage/ProductManager/ProductItem.jsx","containers/SellerHome/subpage/ProductManager/index.jsx","containers/SellerHome/index.jsx","containers/Login/subpage/Account.js","containers/Login/subpage/PhoneLogin.js","containers/Login/index.jsx","containers/Register/subpage/Step1.jsx","store/actions/registerActions.js","containers/Register/subpage/Step2.jsx","containers/Register/subpage/Step3.jsx","containers/Register/index.jsx","containers/Category/index.jsx","store/actions/goodsAction.js","containers/ProductIssue/index.jsx","components/PrivateRoute/subpage/WaitVerify.jsx","components/PrivateRoute/index.jsx","components/Chat/subpage/Message.js","components/Chat/subpage/Contacts.js","components/Chat/subpage/Search.js","components/Chat/subpage/ChatWindow.js","components/Chat/index.js","components/MessageBox/index.js","components/MessageBox/Confirm.js","App.js","index.js"],"names":["initialState","isAuthorized","isVerify","user","isEmpty","data","undefined","Array","isArray","length","Object","keys","isPhone","number","test","type","categoryChoose","showAlert","message","showConfirm","confirmMessage","sure","cancel","messageBoxReducer","state","arguments","action","objectSpread","payload","contacts","messagesNotRead","chatnow","messages","sendingMessages","hideWindow","hideChat","chatReducer","map","i","userId","target","content","concat","toConsumableArray","sender","origin","msg","filter","find","notRead","newMsg","nickname","avatar","m","n","len","push","newState","here","wait","initState","step","account","storeName","idCard","reallyName","rootReducer","combineReducers","auth","goods","bigType","_id","bigid","smaillType","messageBox","chat","register","middleWare","thunk","composeMiddlewares","applyMiddleware","apply","window","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","compose","subscribe","HOST","FILE_HOST","SELLER_HOST","transURL","url","reverse","replace","formatDate","date","year","time","d","Date","Number","isNaN","getDay","format","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","setAuthToken","token","localStorage","setItem","axios","defaults","headers","common","socket","initSocket","removeItem","status","ws","close","setCurrentUser","dispatch","WebSocket","onopen","e","console","log","setInterval","send","JSON","stringify","onmessage","parse","err","sendChatMessageBackAction","initContacts","receiveChatMessageAction","getContactsAction","onclose","onerror","error","contactItemToChatAction","item","contactId","getState","GeneratorCurrentData","dataName","amount","payMoney","logo","abnormalOrder","payUser","looker","payOrder","CurrentData","props","currentData","_react_16_8_5_react_default","a","createElement","className","index","classnames","border-right","border-bottom","key","src","alt","BacklogData","title","logs","itemName","Backlog","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","backlogData","style","padding","Component","gotoTop","height","document","documentElement","scrollHeight","ms","interval","scrollTop","setTimeout","clearInterval","Footer","backgroundColor","border","href","onClick","align","AppHeader","management","chooseUrl","control","login","order","waitSend","location","pathname","history","hello","userinfo","loginOut","bind","isSeller","withRouter","connect","alertMessageAction","confirmMessageAction","OrderItem","name","createTime","orderNo","money","width","id","substring","route","pay","sendPost","sign","comment","judgeOrderState","SendPost","postway","postno","fieldChangeHandler","assertThisInitialized","postSubmit","setState","defineProperty","value","preventDefault","submit","_this2","method","onSubmit","htmlFor","onChange","autoComplete","placeholder","OrderManager","routes","rule","path","operator","orders","orderId","page","getOrders","hashNextPage","prevPage","nextPage","nextProps","Axios","get","then","_ref","success","errors","catch","_this3","req","postWay","expNumber","post","_ref2","Math","floor","_this4","slice","OrderManager_OrderItem","sendPostChangeHandler","products","u-o-next-void","u-o-prev-void","OrderManager_SendPost","postSubmitHandler","ProductItem","price","product","creatTime","textAlign","buyNo","downProduct","putProduct","ProductManager","creaTime","isinseller","getProductData","_ref3","_this5","ProductManager_ProductItem","SellerHome","sellerData","operators","routeName","routePath","navs","navName","all","spread","currentRes","sellerRes","toggleChatAction","components_Header","storeLogo","text","max","sub","chars","match","splitText","toggleChatWindowHandler","notReadChatLength","handlerRouteChange","bar-seleced","nav","Switch","Route","component","render","subpage_CurrentData","subpage_Backlog","src_components_Footer","reduce","prev","now","loging","Account","password","inputChange","inputFocus","refs","encrypt","JSEncrypt","setPublicKey","SparkMD5","hash","innerText","formSubmit","background","onFocus","ref","React","waitSMS","sendingSMS","PhoneLogin","phone","sms","currentTarget","msm","sms_code","res","response","sendSMS","Login","loginWay","params","search","p","way","Redirect","to","changeLoginWay","subpage_PhoneLogin","subpage_Account","Link","Step1","smscode","myState","smsSending","smsCodeClickHandler","validator","nextStepSubmit","ans","color","code","step1FinishAction","letter","next-wait","Step2","checkStoreNameRepeat","step2SubmitHandler","merchantName","relName","onBlur","step2FinishAction","Register","f-flush","subpage_Step3","subpage_Step2","subpage_Step1","Category","choose","showSmaill","showDetail","category","handlerCategorySubmit","isFinishChoose","productType","getItem","setBigType","itemId","setSmaillType","one","_","setCategoryChoose","detailType","detail","bigItem","cho-chosen","handlerTypeClick","bigName","borderColor","dist_default","smaillItem","smaillName","detailItem","detailName","typeId","c-submit-disable","ProductIssue","goodName","goodFrom","properties","specInfo","smaillPicture","infoPicture","filterProperties","submitProductIssue","j","splice","file","URL","webkitURL","createObjectURL","smaill","files","info","filtered","findIndex","fname","indexOf","storeId","specProp","form","FormData","append","forEach","table","arr","indexArr","indexAdd","len1","afterRow","rows","x","rowspan","specValueArrToTableArr","paddingLeft","prop","propNameBlurHandler","propNameChangeHandler","propNameCancelHandler","backgroundSize","propValueBlurHandler","propValueChangeHandler","propValueCancelHandler","margin","cellSpacing","cellPadding","fill","column","row","rowSpan","specInfoChangeHandler","createPictureURL","smaillPictureChangeHandler","multiple","smaillPictureDelete","infoPictureChangeHandler","infoPictureDelete","logoPictureChangeHandler","WaitVerify","waitComponent","subpage_WaitVerify","rest","objectWithoutProperties","assign","subMessage","messageNotReadItemToChatAction","messageItemToChatAction","msg-item-select","contactClick","online","offline","isOnline","Search","searchAns","keyword","shakeGetAns","timeout","clearTimeout","stopPropagation","keywordChange","contactsClick","addContactsClick","transMessage","images","msgs","split","ChatWindow","hasError","waitMessage","showChatImage","chatImage","scrollToButton","textarea","ondragenter","ondragleave","ondragover","ondrop","dataTransfer","size","formData","waitImg","innerHTML","nowMessage","setWaitMessageAction","getElementsByClassName","onclick","img","getAttribute","b","msgNow","msgNext","focus","chatMessageBox","swingChatWindowAction","trim","RegExp","wss","sendingMessageAction","html","sendMessage","display","swingChatWindow","dangerouslySetInnerHTML","__html","onInput","textareaInput","contentEditable","suppressContentEditableWarning","onKeyPress","textareaPress","chatImageChange","closeChatImage","hide","Chat","getElementById","onmousedown","startX","clientX","startY","clientY","top","parseInt","getComputedStyle","left","onmousemove","onmouseup","onmouseleave","routeChange","crr-select-bg","subpage_Message","subpage_Contacts","subpage_Search","subpage_ChatWindow","MessageBox","box","opacity","closeAlertAction","closeConfirmAction","jwtToken","warn","components_PrivateRoute","exact","from","src_components_Chat","src_components_MessageBox","MessageBox_Confirm","ReactDOM","es","BrowserRouter","src_App"],"mappings":"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","file":"static/js/main.8f45c4c9.chunk.js","sourcesContent":["let initialState = {\r\n  isAuthorized: false,\r\n  isVerify: false, // token 验证中\r\n  user: {}\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type) {\r\n    /**\r\n     * 登录成功\r\n     */\r\n    case 'SET_CURRENT_USER':\r\n      return { ...state, user: action.payload, isAuthorized: true, isVerify: false }\r\n    /**\r\n     * 主动退出\r\n     */\r\n    case 'LOGIN_OUT':\r\n      return { ...state, user: {}, isAuthorized: false, isVerify: false}\r\n\r\n      /**\r\n       * 设置验证中\r\n       */\r\n    case 'VERIFYING':\r\n      return { ...state, isVerify: true }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","/**\r\n * 判断内容是否为空\r\n * @param  {[type]} data [description]\r\n * @return {[type]}      [description]\r\n */\r\nexport const isEmpty = data => {\r\n  return data === null || data === undefined || data === '' ||\r\n    (Array.isArray(data) && data.length === 0) ||\r\n    (typeof(data) === 'object' && Object.keys(data).length === 0)\r\n}\r\n\r\nexport const isPhone = number => {\r\n\treturn /^1[0-9]{10}$/.test(number);\r\n}\r\n\r\nexport const isLength = (value, opts) => {\r\n\tif (typeof value !== 'string') return false;\r\n\treturn (value.length >= opts.min && value.length <= opts.max)\r\n}\r\n\r\nexport const isEmail = email => {\r\n  return /^[A-z\\d]+([-_.][A-z\\d]+)*@([A-z\\d]+[-.])+[A-z\\d]{2,4}$/.test(email)\r\n}\r\n","/**\r\n * goodsReducers\r\n * Simple React Snippet\r\n */\r\nimport { isEmpty } from '../../utils/validator.js'\r\n\r\nlet initialState = {\r\n  type: [],\r\n  categoryChoose: []\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type) {\r\n    /**\r\n     * 商品大类目\r\n     */\r\n    case 'SET_BIG_TYPE':\r\n      return { ...state, type: action.payload }\r\n\r\n    /**\r\n     * 商品小类目\r\n     */\r\n    case 'SET_SMAILL_TYPE':\r\n      let bigType = state.type.find(i => i._id === action.payload.bigid)\r\n      if (isEmpty(state.type) || isEmpty(bigType)) {\r\n        return state\r\n      }\r\n      bigType.smaillType = action.payload.smaillType\r\n      return state\r\n\r\n    /**\r\n     * 设置添加商品的类目选择\r\n     */\r\n    case 'SET_CATEGORY_CHOOSE':\r\n      return { ...state, categoryChoose: action.payload }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","/**\r\n * 全局消息弹框\r\n */\r\nconst initialState = {\r\n  showAlert: false,  // 消息框\r\n  message: '',\r\n  showConfirm: false, // 确认框\r\n  confirmMessage: '',\r\n  sure: null,  // 确认函数\r\n  cancel: null  // 取消函数\r\n}\r\n\r\nconst messageBoxReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'ALERT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showAlert: true,\r\n        message: action.payload\r\n      }\r\n    case 'CLOSE_ALERT':\r\n      return {\r\n        ...state,\r\n        showAlert: false,\r\n        message: ''\r\n      }\r\n    case 'CONFIRM_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showConfirm: true,\r\n        confirmMessage: action.payload.message || '',\r\n        sure: action.payload.sure || null,\r\n        cancel: action.payload.cancel || null\r\n      }\r\n    case 'CLOSE_CONFIRM':\r\n      return {\r\n        ...state,\r\n        showConfirm: false,\r\n        confirmMessage: '',\r\n        sure: null,\r\n        cancel: null\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default messageBoxReducer\r\n","const initialState = {\r\n  contacts: [], // 联系人\r\n  messagesNotRead: [],\r\n  chatnow: undefined,\r\n  messages: [],\r\n  sendingMessages: [/*{\r\n    target: 0,\r\n    message: ''\r\n  }*/],  // 发送中的消息\r\n  hideWindow: true,\r\n  hideChat: true\r\n}\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'SEND_CHAT_MESSAGE_BACK':  // 发送消息回执\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId !== action.payload.target ? i : {\r\n            ...i,\r\n            content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}]\r\n          }\r\n        }),\r\n        sendingMessages: state.sendingMessages.filter(i => i.target !== action.payload.target)\r\n      }\r\n    case 'PUT_SENDING_MESSAGE':\r\n      return {\r\n        ...state,\r\n        sendingMessages: [...state.sendingMessages, {target: state.chatnow, message: action.payload}]\r\n      }\r\n    case 'RECEIVE_CHAT_MESSAGE': // 收到聊天消息\r\n      var origin = state.messagesNotRead.find(i => i.userId === action.payload.origin)\r\n      // 聊天人在未读列表中\r\n      if (origin) {\r\n        return {\r\n          ...state,\r\n          messagesNotRead: state.messagesNotRead.map(i => {\r\n            return i.userId === action.payload.origin ? {\r\n              ...i,\r\n              notRead: i.notRead + 1,\r\n              content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}],\r\n            } : i\r\n          })\r\n        }\r\n      }\r\n      origin = state.messages.find(i => i.userId === action.payload.origin)\r\n       // 聊天对象在已读消息列表中\r\n      if (origin) {\r\n         // 是当前聊天对象\r\n        if (origin.userId === state.chatnow) {\r\n          return {\r\n            ...state,\r\n            messages: state.messages.map(i => {\r\n              return i.userId === action.payload.origin ? {\r\n                ...i,\r\n                content: Array.isArray(i.content) ? i.content.concat([{sender: action.payload.origin, msg: action.payload.content}]) : [{sender: action.payload.origin, msg: action.payload.content}]\r\n              } : i\r\n            })\r\n          }\r\n        }else {\r\n          // 不是当前聊天对象，转移到未读列表中\r\n          var newMsg = [{sender: action.payload.origin, msg: action.payload.content}]\r\n          return {\r\n            ...state,\r\n            messages: state.messages.filter(i => i.userId !== action.payload.origin),\r\n            messagesNotRead: [{\r\n              ...origin,\r\n              content: Array.isArray(origin.content) ? origin.content.concat(newMsg) : newMsg,\r\n              notRead: 1,\r\n            }].concat(state.messagesNotRead)\r\n          }\r\n        }\r\n      }\r\n       // 聊天对象新来的\r\n      return {\r\n        ...state,\r\n        messagesNotRead: [{\r\n          userId: action.payload.origin,\r\n          nickname: action.payload.nickname,\r\n          avatar: action.payload.avatar,\r\n          notRead: 1,\r\n          content: [{sender: action.payload.origin, msg: action.payload.content}]\r\n        }].concat(state.messagesNotRead)\r\n      }\r\n    case 'INIT_CONTACTS':\r\n      var m = [], n = [];\r\n      for (let i = 0, len = action.payload.length; i < len; i++) {\r\n        if (action.payload[i].notRead > 0) {\r\n          n.push(action.payload[i])\r\n        }else {\r\n          m.push(action.payload[i])\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        messagesNotRead: n,\r\n        messages: m\r\n      }\r\n\r\n    case 'MESSAGE_NOT_READ_ITEM_TO_CHAT': // 未读消息到聊天窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        messagesNotRead: state.messagesNotRead.filter(i => i.userId !== action.payload.userId),\r\n        messages: [action.payload].concat(state.messages),\r\n        hideWindow: false\r\n      }\r\n    case 'CONTACT_ITEM_TO_CHAT': // 联系人和找人 item 到聊天窗口\r\n      var newState = {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false,\r\n        hideChat: false,\r\n        messagesNotRead: state.messagesNotRead.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n            if (!here) {\r\n              action.payload.content = i.content\r\n            }\r\n          return here\r\n        }),\r\n        messages: state.messages.filter(i => {\r\n          var here = i.userId !== action.payload.userId\r\n          if (!here) {\r\n            action.payload.content = i.content\r\n          }\r\n          return here\r\n        })\r\n      }\r\n      // 聊天人已在消息列表中\r\n      if (newState.messagesNotRead.length !== state.messagesNotRead.length || newState.messages.length !== state.messages.length) {\r\n        return {\r\n          ...newState,\r\n          messages: [action.payload].concat(newState.messages)\r\n        }\r\n      }\r\n      // 不在消息列表中\r\n      action.payload.content = []\r\n      return {\r\n        ...newState,\r\n        messages: [action.payload].concat(state.messages)\r\n      }\r\n\r\n    case 'MESSAGE_ITEM_TO_CHAT':  // 已读消息到窗口\r\n      return {\r\n        ...state,\r\n        chatnow: action.payload.userId,\r\n        hideWindow: false\r\n      }\r\n    case 'SET_CONTACTS':  // 获得联系人\r\n      return {\r\n        ...state,\r\n        contacts: action.payload\r\n      }\r\n    case 'SET_WAIT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        messages: state.messages.map(i => {\r\n          return i.userId === state.chatnow ? {...i, wait: action.payload} : i\r\n        })\r\n      }\r\n    case 'TOGGLE_CHAT':\r\n      return {\r\n        ...state,\r\n        hideChat: action.payload\r\n      }\r\n    case 'SWING_CHAT_WINDOW':\r\n      return {\r\n        ...state,\r\n        hideWindow: action.payload\r\n      }\r\n    case 'LOGIN_OUT_CHAT':\r\n      return initialState\r\n    default:\r\n      return state\r\n  }\r\n}\r\nexport default chatReducer\r\n","const initState = {\r\n  step: 1,\r\n  account: '',\r\n  storeName: '',\r\n  idCard: '',\r\n  reallyName: '',\r\n  userId: -1\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  switch(action.type) {\r\n    // 登录场景改变\r\n    case 'STEP_CHANGE':\r\n      return { ...state, step: action.payload }\r\n\r\n    // 注册第一步完成\r\n    case 'STEP1_FINISH':\r\n      return { ...state, step: 2, account: action.payload.account, userId: action.payload.userId }\r\n\r\n    // 注册第二步完成\r\n    case 'STEP2_FINISH':\r\n      return { ...state, step: 3, ...action.payload }\r\n\r\n      default:\r\n      return state\r\n  }\r\n}\r\n","/**\r\n * 合并多个 reducer 成一个大的reducer\r\n */\r\n\r\nimport {combineReducers} from 'redux'\r\n\r\nimport auth from './auth'\r\nimport goods from './goods'\r\nimport messageBox from './messageBox'\r\nimport chat from './chat'\r\nimport register from './register'\r\n\r\nlet rootReducer = combineReducers({\r\n  auth,\r\n  goods,\r\n  messageBox,\r\n  chat,\r\n  register,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducers/index.js'\r\n\r\nlet initialState = {}\r\n\r\nlet middleWare = [thunk]\r\n// 需要合并的中间件\r\nlet composeMiddlewares = [applyMiddleware(...middleWare)]\r\n//激活 chrome 浏览器 redux 插件\r\nif (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\r\n\tcomposeMiddlewares.push(window.__REDUX_DEVTOOLS_EXTENSION__())\r\n}\r\n\r\nconst store = createStore(rootReducer, initialState, compose(...composeMiddlewares))\r\n\r\nstore.subscribe(() => {\r\n\r\n})\r\n\r\nexport default store\r\n","/**\r\n * 主机地址\r\n * @type {String}\r\n */\r\nexport const HOST = 'http://118.126.108.36'\r\n// export const HOST = 'http://localhost:5000'\r\n\r\n/**\r\n * 文件服务器地址\r\n * @type {String}\r\n */\r\nexport const FILE_HOST = 'http://118.126.108.36'\r\n\r\n/**\r\n * WebSocket 服务器地址\r\n * @type {String}\r\n */\r\n// export const WS_HOST = 'ws://localhost:5000'\r\nexport const WS_HOST = 'ws://118.126.108.36'\r\n\r\n\r\nexport const SELLER_HOST = 'http://118.126.108.36'\r\n// export const SELLER_HOST = 'http://localhost:8080'\r\n","/**\r\n * 按最大长度截取文本并返回\r\n * 字母数字算半个\r\n */\r\nexport const splitText = (text, max = 10) => {\r\n  if (typeof text !== 'string' || text.length <= max) {\r\n    return text\r\n  }\r\n\r\n  var sub = text.substring(0, max)\r\n  // 匹配单字节字符\r\n  var chars = sub.match(/[\\u0000-\\u00FF]/g)\r\n  if (!chars) {\r\n    return sub\r\n  }\r\n  var len = 0;\r\n  for (var i = sub.length; i < text.length; i++) {\r\n    len += (/^[\\u0000-\\u00FF]$/.test(text[i]) ? 1 : 2)\r\n    if (len + 1 >= chars.length) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return sub + text.substring(sub.length, sub.length + len)\r\n}\r\n/**\r\n * 将价格转换成 00.00 格式\r\n * @param {价格} price\r\n */\r\nexport const transPrice = function (price) {\r\n  return /^\\d+$/.test(price) ? price + '.00' :  // 没有小数\r\n  /^\\d+\\.\\d$/.test(price) ? price + '0' : price  // 一位小数\r\n}\r\n\r\n/**\r\n * 转换 url\r\n * @param {url 片段} url\r\n * @param {* 逆向转换} reverse\r\n */\r\nexport const transURL = (url, reverse) => {\r\n  if (typeof url !== 'string' || url === '')\r\n    return ''\r\n  if (reverse)\r\n    return url.replace(/OxO/g, '/').replace(/OdO/g, '=').replace(/OwO/g, '?').replace(/OaO/g, '&')\r\n  return url.replace(/\\//g, 'OxO').replace(/\\=/g, 'OdO').replace(/\\?/g, 'OwO').replace(/&/g, 'OaO')\r\n}\r\n\r\nexport const formatDate = function(date, year, time) {\r\n  if (!date) { return '2019-1-1 0:0:0'}\r\n  const d = new Date(date)\r\n  if (Number.isNaN(d.getDay())) {\r\n    return ''\r\n  }\r\n  var format = year ? d.getFullYear() + '-' : ''\r\n  if (time) {\r\n    return format + (d.getMonth() + 1) + '-' + d.getDate()\r\n  }\r\n  return (format + (d.getMonth() + 1) + '-' +\r\n    d.getDate() + ' ' +\r\n    d.getHours() + ':' +\r\n    d.getMinutes() + ':' +\r\n    d.getSeconds())\r\n}\r\n","import axios from 'axios'\r\nimport { isEmpty } from '../utils/validator.js'\r\nimport store from '../store/store.js'\r\nimport socket from './socket'\r\n\r\nexport const setAuthToken = (token) => {\r\n  if (token) {\r\n    if (typeof(window) === 'object') {\r\n      window.localStorage.setItem('jwtToken', token)\r\n    }\r\n    // 让每个请求头携带 token\r\n    axios.defaults.headers.common[\"Authorization\"] = token\r\n    // 初始化 socket\r\n    return socket.initSocket(token)\r\n  }\r\n  // 删除请求头 token\r\n  delete axios.defaults.headers.common['Authorization']\r\n  if (typeof(window) === 'object') {\r\n    window.localStorage.removeItem('jwtToken')\r\n  }\r\n  if (socket.status !== 'close') {\r\n    socket.ws.close()\r\n  }\r\n}\r\n\r\n\r\nexport const setCurrentUser = user => {\r\n  if (isEmpty(user)) {\r\n    return store.dispatch({ type: 'LOGIN_OUT' })\r\n  }\r\n\r\n  store.dispatch({\r\n    type: 'SET_CURRENT_USER',\r\n    payload: user\r\n  })\r\n}\r\n\r\n","import { setAuthToken } from './setAuth'\r\n\r\nimport {\r\n  // setWaitMessageAction,\r\n  sendChatMessageBackAction,\r\n  receiveChatMessageAction,\r\n  getContactsAction,\r\n  initContacts\r\n} from '../store/actions/chatActions'\r\n\r\nimport { WS_HOST } from '../config/config'\r\n\r\n\r\nconst socket = {\r\n  status: 'close',\r\n  ws: null,\r\n  initSocket: function (token) {\r\n    if (typeof(window) !== 'object' || !token) return;\r\n    const ws = new WebSocket(`${WS_HOST}?token=${token}`)\r\n\r\n    ws.onopen = function(e) {\r\n      socket.status = 'open'\r\n      console.log('socket open...')\r\n      setInterval(function() {  // 设置定时器更新 token\r\n        if (socket.status !== 'open') { return }\r\n        ws.send(JSON.stringify({\r\n          type: 'transToken',\r\n          target: 'koa'\r\n        }))\r\n      }, 1000*60*15)\r\n\r\n      ws.send('{\"type\":\"init_chat_messages\"}') // 获取聊天信息\r\n    }\r\n\r\n    ws.onmessage = function(e) {\r\n      var msg = e.data\r\n      try {\r\n        msg = JSON.parse(msg)\r\n      }catch(err) {\r\n        return\r\n      }\r\n      switch(msg.type) {\r\n        case 'transToken':\r\n          return setAuthToken(msg.content)\r\n\r\n        case 'send_chat_message':  // 发送消息后回执\r\n          return sendChatMessageBackAction(msg)\r\n\r\n        case 'init_chat_messages':  // 初始化聊天信息\r\n          return initContacts(msg.content)\r\n\r\n        case 'receive_chat_message':  // 收到聊天消息\r\n          return receiveChatMessageAction(msg)\r\n\r\n        case 'get_contacts': // 收到联系人列表信息\r\n          return getContactsAction(msg.content)\r\n\r\n        default:\r\n          return\r\n      }\r\n    }\r\n\r\n    ws.onclose = function(e) {\r\n      console.log('socket close!')\r\n      socket.status = 'close'\r\n    }\r\n\r\n    ws.onerror = function(e) {\r\n      console.error('socket error', e)\r\n    }\r\n\r\n    socket.ws = ws\r\n  }\r\n}\r\n\r\nexport default socket\r\n","import store from '../store'\r\nimport socket from '../../utils/socket'\r\n\r\nexport const toggleChatAction = state => dispatch => { // 隐藏或显示聊天窗口\r\n  dispatch({\r\n    type: 'TOGGLE_CHAT',\r\n    payload: state\r\n  })\r\n}\r\n\r\nexport const initContacts = messages => {\r\n  store.dispatch({\r\n    type: 'INIT_CONTACTS',\r\n    payload: messages\r\n  })\r\n}\r\n\r\n// 点击未读消息展示到聊天框\r\nexport const messageNotReadItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    if (socket.status === 'open') {\r\n      socket.ws.send(JSON.stringify({ // 设置消息已读\r\n        type: 'msg_be_read',\r\n        content: item.userId\r\n      }))\r\n    }\r\n    dispatch({\r\n      type: 'MESSAGE_NOT_READ_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\nexport const sendingMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'PUT_SENDING_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 点击已读消息展示到聊天框\r\nexport const messageItemToChatAction = item => dispatch => {\r\n  return function() {\r\n    dispatch({\r\n      type: 'MESSAGE_ITEM_TO_CHAT',\r\n      payload: item\r\n    })\r\n  }\r\n}\r\n\r\n// 点击联系人和找人 item 到聊天框\r\nexport const contactItemToChatAction = item => {\r\n  item = {...item, userId: item.userId || item.contactId}\r\n  var chat = store.getState().chat\r\n  if (chat.chatnow === item.userId && !chat.hideChat) return;\r\n  store.dispatch({\r\n    type: 'CONTACT_ITEM_TO_CHAT',\r\n    payload: item\r\n  })\r\n}\r\n\r\nexport const swingChatWindowAction = hide => dispatch => {\r\n  dispatch({\r\n    type: 'SWING_CHAT_WINDOW',\r\n    payload: hide\r\n  })\r\n}\r\n\r\nexport const setWaitMessageAction = msg => dispatch => {\r\n  dispatch({\r\n    type: 'SET_WAIT_MESSAGE',\r\n    payload: msg\r\n  })\r\n}\r\n\r\n// 发送消息后回执\r\nexport const sendChatMessageBackAction = message => {\r\n  store.dispatch({\r\n    type: 'SEND_CHAT_MESSAGE_BACK',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到聊天消息\r\nexport const receiveChatMessageAction = message => {\r\n  if (message.origin === store.getState().chat.chatnow && socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'msg_be_read',\r\n      content: message.origin\r\n    }))\r\n  }\r\n  store.dispatch({\r\n    type: 'RECEIVE_CHAT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\n// 收到联系人列表\r\nexport const getContactsAction = contacts => {\r\n  store.dispatch({\r\n    type: 'SET_CONTACTS',\r\n    payload: contacts\r\n  })\r\n}\r\n","import React from 'react'\r\nimport classnames from 'classnames'\r\n\r\nimport { FILE_HOST } from '../../../config/config.js'\r\n\r\n/**\r\n * abnormalOrder: 0\r\n  looker: 0\r\n  payMoney: 0\r\n  payOrder: 0\r\n  payUser: 0\r\n */\r\nfunction GeneratorCurrentData(data) {\r\n  return [\r\n    { dataName: '支付金额', amount: data.payMoney || 0, logo: `${FILE_HOST}/image/seller/money.jpg` },\r\n    { dataName: '退货订单', amount: data.abnormalOrder || 0, logo: `${FILE_HOST}/image/seller/foot.jpg` },\r\n    { dataName: '支付买家数', amount: data.payUser || 0, logo: `${FILE_HOST}/image/seller/person.jpg` },\r\n    { dataName: '浏览量', amount: data.looker || 0, logo: `${FILE_HOST}/image/seller/look.jpg` },\r\n    { dataName: '支付订单数', amount: data.payOrder || 0, logo: `${FILE_HOST}/image/seller/pay.jpg` },\r\n  ]\r\n}\r\n\r\nconst CurrentData = (props) => {\r\n  const currentData = new GeneratorCurrentData(props.data)\r\n\r\n  return (\r\n    <div className=\"data-wrap\">\r\n      <div className=\"da-head\">\r\n        <span>实时数据</span>\r\n\r\n      </div>\r\n      <div className=\"data-box f_wrap\">\r\n      {\r\n        currentData.map((item, index) => (\r\n          <div className={classnames('data-item f_L', {\r\n            'border-right': index % 2 === 0,\r\n            'border-bottom': index < currentData.length - 1,\r\n          })} key={index}>\r\n            <div className=\"f_wrap\">\r\n              <div className=\"da-logo f_L\"><img src={item.logo} alt={item.dataName}/></div>\r\n              <div className=\"da-tit f_r\">{item.dataName}</div>\r\n            </div>\r\n            <div className=\"da-amount\">{item.amount}</div>\r\n          </div>\r\n        ))\r\n      }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CurrentData\r\n","import React, { Component } from 'react'\r\n\r\nfunction BacklogData(data) {\r\n  return [\r\n    {title: '宝贝管理', logs: [\r\n      {itemName: '出售中的宝贝', amount: 0},\r\n      {itemName: '待上架的宝贝', amount: 0},\r\n      {itemName: '审核中的宝贝', amount: 0},\r\n    ]},\r\n    {title: '订单提醒', logs: [\r\n      {itemName: '待付款订单', amount: 0},\r\n      {itemName: '待发货订单', amount: 0},\r\n      {itemName: '待评价订单', amount: 0},\r\n      {itemName: '退款中订单', amount: 0},\r\n      {itemName: '待签收订单', amount: 0},\r\n    ]},\r\n    {title: '活动管理', logs: [\r\n      {itemName: '官方活动', amount: 0},\r\n    ]},\r\n    {title: '违规提醒', logs: [\r\n      {itemName: '待处理投诉', amount: 0},\r\n      {itemName: '待处理诉讼', amount: 0},\r\n      {itemName: '优化建议', amount: 0},\r\n      {itemName: '违规记录', amount: 0},\r\n      {itemName: '待处理违规', amount: 0},\r\n      {itemName: '已售假次数', amount: 0},\r\n    ]},\r\n  ]\r\n}\r\n\r\nclass Backlog extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const backlogData = new BacklogData()\r\n\r\n    return (\r\n      <div className=\"\">\r\n        <div className=\"da-head border-bottom\">待办数据</div>\r\n        <div className=\"log-body\">\r\n        {\r\n          backlogData.map((data, index) => (\r\n            <div className=\"backlog-item\" key={index}>\r\n              <div className=\"log-tit\">{data.title}</div>\r\n              <div className=\"f_wrap\">\r\n                {\r\n                  data.logs.map((log, index) => (\r\n                    <div className=\"log-item f_L f_wrap\" key={index}>\r\n                      <div className=\"f_L\">{log.itemName}：</div>\r\n                      <div className=\"log-amount f_r\">{log.amount}</div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </div>\r\n          ))\r\n        }\r\n        <div className=\"backlog-item\">\r\n          <div className=\"log-tit\">安全评分</div>\r\n          <div className=\"log-self\">\r\n            <span>您的账号新安全评分为</span>\r\n            <span style={{padding: '0 5px'}} className=\"log-amount\">80</span>\r\n            <span>分</span>\r\n            <span>, 请登录后进入我的主页提升分数</span>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Backlog\r\n\r\n/*\r\n\r\n          <div style={{border: '1px solid yellow'}}>\r\n            <div className=\"log-tit\">订单提醒</div>\r\n            <div>\r\n              <div>\r\n                <div>代付款订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>待发货订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>待评价订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>代签收订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>退款中订单：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{border: '1px solid yellow'}}>\r\n            <div className=\"log-tit\">活动管理</div>\r\n            <div>\r\n              <div>\r\n                <div>邀请我参加的官方活动：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{border: '1px solid orange'}}>\r\n            <div className=\"log-tit\">违规提醒</div>\r\n            <div>\r\n              <div>\r\n                <div>待处理投诉：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>待处理诉讼：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>优化建议：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>违规记录：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>带处理违规：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n              <div>\r\n                <div>已售假次数：</div>\r\n                <div className=\"log-amount\">0</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n*/\r\n","import React from 'react'\r\n\r\nimport './index.scss'\r\nimport { FILE_HOST } from '../../config/config.js'\r\n\r\nfunction gotoTop() {\r\n  if (typeof window !== 'object') return;\r\n  var height = document.documentElement.scrollHeight\r\n  var ms = 9\r\n  var interval = setInterval(function() {\r\n    document.documentElement.scrollTop = height / 10 * ms\r\n    ms --\r\n  }, 50)\r\n  setTimeout(function() {\r\n    clearInterval(interval)\r\n    document.documentElement.scrollTop = 0\r\n  }, 500)\r\n}\r\n\r\nconst Footer = (props) => {\r\n  const theme = {\r\n    bgColor: '#fff'\r\n  }\r\n  return (\r\n    <div style={{backgroundColor: theme.bgColor}} className=\"footer-wrap\">\r\n      <div className=\"foot-box\">\r\n        <div className=\"foot-name\">\r\n          <div className=\"ni-box f_wrap\">\r\n            <div className=\"foot-ni f_L\">北大青鸟</div>\r\n            <div className=\"foot-ni f_L\">成都智谷校区</div>\r\n            <div className=\"foot-ni f_L\">T121</div>\r\n            <div className=\"foot-ni f_L\">叶谱</div>\r\n            <div className=\"foot-ni f_L\">周围</div>\r\n            <div className=\"foot-ni f_L\" style={{border: 0}}>唐铭佑</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"foot-sec\">\r\n          <a href=\"javascript:void(0)\">关于优选</a>\r\n          <a href=\"javascript:void(0)\">合作伙伴</a>\r\n          <a href=\"javascript:void(0)\">营销中心</a>\r\n          <a href=\"javascript:void(0)\">廉正举报</a>\r\n          <a href=\"javascript:void(0)\">联系客服</a>\r\n          <a href=\"javascript:void(0)\">开放平台</a>\r\n          <a href=\"javascript:void(0)\">诚征英才</a>\r\n          <a href=\"javascript:void(0)\">联系我们</a>\r\n          <a href=\"javascript:void(0)\">网站地图</a>\r\n          <a href=\"javascript:void(0)\">法律声明</a>\r\n          <a href=\"javascript:void(0)\">隐私权政策</a>\r\n          <a href=\"http://118.126.108.36\">© 2019 ChoicePerfect.com</a>\r\n          <a href=\"javascript:void(0)\">版权所有</a>\r\n        </div>\r\n        <div className=\"copyright f_wrap\" onClick={gotoTop}>\r\n          <div className=\"logo-bdqn f_L\"><img align=\"absmiddle\" title=\"返回顶部\" src={`${FILE_HOST}/image/ui/bdqn.png`} alt=\"北大青鸟\"/></div>\r\n          <div className=\"copy f_r\">@2019 北大青鸟成都智谷</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Footer\r\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport './index.scss'\nimport { setAuthToken, setCurrentUser } from '../../utils/setAuth'\nimport { HOST } from '../../config/config'\n\nclass AppHeader extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n      management: 'http://118.126.108.36/image/files/choice_perfect_manager.msi',\n      chooseUrl: {\n        management: 'http://118.126.108.36/image/files/choice_perfect_manager.msi', // 管理端路径\n        control: '/seller/panel',\n        register: '/seller/register',\n        login: '/seller/login',\n        order: '/seller/login',\n        waitSend: '/seller/wait_send'\n      }\n\t\t}\n\t}\n\t// 退出\n\tloginOut() {\n    var url = this.props.location.pathname\n\t\tsetAuthToken(false); // axios token 头清除，localStorage token清除\n\t\tsetCurrentUser({}); // dispatch 当前空用户\n    this.props.history.push('/seller/login')  // 跳转到主页\n  }\n\n\trender() {\n    const auth = this.props.auth;\n\t\tconst hello = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>哈，欢迎来到优选</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"/seller/login\">请登录</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"/seller/register\">免费注册</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\tconst userinfo = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>Hi，<a href=\"/member\">{auth.user.nickname}</a></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a onClick={this.loginOut.bind(this)} href=\"javascript:void(0)\">退出</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\treturn (\n\t\t\t<div className=\"app-header-wrap\">\n\t\t\t\t<div className=\"app-header\">\n\t\t\t\t\t{\n\t\t\t\t\t\tauth.isAuthorized ?\n\t\t\t\t\t\tuserinfo :\n\t\t\t\t\t\thello\n\t\t\t\t\t}\n\t\t\t\t\t<ul className=\"ul-r\">\n            <li><a href=\"/\">优选首页</a></li>\n\t\t\t\t\t\t<li className=\"h-my\">\n              <a href=\"/member\">我的优选</a>\n              <div className=\"h-my-choi\">\n                <div><a href=\"/member/safety\">安全设置</a></div>\n                <div><a href=\"/member\">个人资料</a></div>\n                <div><a href=\"/member/myorder\">我的订单</a></div>\n                <div><a href=\"/member/address\">收货地址</a></div>\n              </div>\n            </li>\n\n            {\n              !auth.isAuthorized || (auth.isAuthorized && auth.user.isSeller !== 1) ? (\n                <li className=\"h-my\">\n                  <a href=\"/seller/panel\">商家支持</a>\n                    <div className=\"h-my-choi\">\n                      <div><a href=\"/seller/register\">注册商家</a></div>\n                      <div><a href={this.state.management}>管理端下载</a></div>\n                  </div>\n                </li>) : (\n                  <li className=\"h-my\">\n                      <a href=\"/seller/panel\">卖家中心</a>\n                      <div className=\"h-my-choi\">\n                        <div><a href=\"/seller/panel/wait_send\">待发货宝贝</a></div>\n                        <div><a href=\"/seller/panel/wait_send\">出售中宝贝</a></div>\n                        <div><a href={this.state.management}>管理端下载</a></div>\n                    </div>\n                  </li>\n                )\n            }\n            <li className=\"h-my\">\n                <a href=\"javascript:void(0);\">联系客服</a>\n                <div className=\"h-my-choi\">\n                  <div><a href={this.state.chooseUrl.management}>管理端下载</a></div>\n              </div>\n            </li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nAppHeader.propTypes = {\n\tauth: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\nexport default withRouter(connect(mapStateToProps, null)(AppHeader))\n","// 弹出消息框\r\nexport const alertMessageAction = message => dispatch => {\r\n  dispatch({\r\n    type: 'ALERT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\nexport const closeAlertAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_ALERT'\r\n  })\r\n}\r\n\r\n// 弹出确认框\r\nexport const confirmMessageAction = (message, sure, cancel) => dispatch => {\r\n  dispatch({\r\n    type: 'CONFIRM_MESSAGE',\r\n    payload: { message, sure, cancel }\r\n  })\r\n}\r\n\r\nexport const closeConfirmAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_CONFIRM'\r\n  })\r\n}\r\n","import React from 'react'\n\nimport './subpage/index.scss'\nimport { formatDate } from '../../../../utils/tools'\n\nfunction splitGoodName(name) {\n  return typeof(name) !== 'string' ? '' : name.length < 35 ? name : name.substring(0,34) + '...'\n}\n\nfunction judgeOrderState(route, order) {\n  if (route !== '所有') {\n    return route\n  }\n  if (order.sign === 0) {\n    return '待签收'\n  }\n  if (order.sign === 1 && order.comment === 0) {\n    return '待评论'\n  }\n  return '订单已完成'\n}\n\nconst OrderItem = (props) =>{\n  const order = props.order\n  /**--order\n   * orderNo\n   * number\n   * monkey\n   *\n   * order.address\n   * order,receiveName\n   * goods\n   *   id\n   *   name (goodName)\n   *   location (logo)\n   *\n   *    青蛙 onClick={contactSeller(order.sellerId, order.sellerName, order.sellerAvatar)}\n   */\n  return <div className=\"order-item\">\n    <div className=\"o-i-head\">\n      <div className=\"oih-i oi-date\">{formatDate(order.createTime, true, true)}</div>\n      <div className=\"oih-i oi-no\">订单号：{order.orderNo}</div>\n      <div className=\"oih-i oi-sumprice\">￥{order.money}</div>\n    </div>\n    <div className=\"oi-product\">\n      <div className=\"oip-i-wrap\">\n        <div className=\"oip-i oip-i-logo\"><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${order.goods.location}_210x210q90.jpg`} alt={order.goods.name}/></div>\n        <div className=\"oip-i oip-i-info\">\n          <div className=\"oip-i-goodname\"><a href={`/product_detail?goodId=${order.goods.id}`}>{splitGoodName(order.goods.name)}</a></div>\n        </div>\n        <div className=\"oip-i oip-i-price\">￥{order.money}</div>\n        <div className=\"oip-i oip-i-number\">{order.number}</div>\n        <div className=\"oip-i oip-exp\"></div>\n\n        <div className=\"oip-i oip-i-operator\">\n         {\n          props.route === '待发货' || (order.pay === 1  && order.send === 0) ? <div className=\"opre-i-wrap\">\n            <button onClick={() => { props.sendPost() }} className=\"opre-i-sign\">立即发货</button>\n          </div> : <div className=\"opre-i-wrap\">\n            <span className=\"opre-i-waitsend\">{judgeOrderState(props.route, order)}</span>\n          </div>\n         }\n        </div>\n      </div>\n    </div>\n  </div>\n}\n\nexport default OrderItem\n","import React, { Component } from 'react'\r\n\r\nclass SendPost extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      postway: '',\r\n      postno: ''\r\n    }\r\n\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n    this.postSubmit = this.postSubmit.bind(this)\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  postSubmit(e) {\r\n    e.preventDefault()\r\n    if (this.state.postway === '' || this.state.postno === '') {\r\n      return;\r\n    }\r\n    // 验证\r\n    this.props.submit(this.state.postway, this.state.postno)\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"post-wrap\">\r\n      <form method=\"POST\" onSubmit={this.postSubmit}>\r\n        <div className=\"post-field f_wrap\">\r\n          <label className=\"f_L\" htmlFor=\"postway\">物流公司：</label>\r\n          <input className=\"f_r\" onChange={this.fieldChangeHandler} autoComplete=\"off\" type=\"text\" placeholder=\"请输入物流公司\" value={this.state.postway} id=\"postway\" name=\"postway\"/>\r\n        </div>\r\n        <div className=\"post-field f_wrap\">\r\n          <label className=\"f_L\" htmlFor=\"postno\">订单号：</label>\r\n          <input className=\"f_r\" onChange={this.fieldChangeHandler} autoComplete=\"off\" type=\"text\" placeholder=\"请输入订单号\" value={this.state.postno} id=\"postno\" name=\"postno\"/>\r\n        </div>\r\n        <div className=\"post-operator f_wrap\">\r\n          <button className=\"f_L\" type=\"submit\">确认发货</button>\r\n          <button onClick={() => this.props.cancel()} className=\"post-cancel f_r\">取消</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default SendPost\r\n","import React, { Component } from 'react'\r\nimport Axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\n\r\nimport { SELLER_HOST } from '../../../../config/config'\r\nimport { isEmpty } from '../../../../utils/validator'\r\nimport { alertMessageAction } from '../../../../store/actions/messageActions'\r\n\r\nimport OrderItem from './OrderItem.jsx'\r\nimport SendPost from './SendPost.jsx'\r\n\r\nclass OrderManager extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      routes: [\r\n        {rule: /all_order$/, path: '/api/seller/auth/order', comment: '所有'},\r\n        {rule: /wait_pay$/, path: '/api/seller/auth/order?payState=0', comment: '待付款'},\r\n        // {rule: /quit_pay$/, path: '/api/seller/auth/order?quitState=0'},\r\n        {rule: /wait_send$/, operator: 'send', path: '/api/seller/auth/order?sendState=0',comment: '待发货'},\r\n        {rule: /wait_sign$/, path: '/api/seller/auth/order?signState=0', comment: '待签收'},\r\n        {rule: /wait_comment$/, path: '/api/seller/auth/order?commentState=0', comment: '待评论'},\r\n      ],\r\n      orders: [],\r\n      route: '',\r\n      sendPost: false,\r\n      orderId: '',\r\n      page: 0\r\n    }\r\n\r\n    this.getOrders = this.getOrders.bind(this)\r\n    this.hashNextPage = this.hashNextPage.bind(this)\r\n    this.prevPage = this.prevPage.bind(this)\r\n    this.nextPage = this.nextPage.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getOrders(this.props.location.pathname)\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.location.pathname === this.props.location.pathname) {\r\n      return;\r\n    }\r\n    this.getOrders(nextProps.location.pathname)\r\n  }\r\n\r\n  /**\r\n   * 根据 url 路径请求不同的订单数据\r\n   * @param {当前页面  路径} path\r\n   */\r\n  getOrders(path) {\r\n    var routes = this.state.routes\r\n    for (var i = 0, len = routes.length; i < len; i++) {\r\n      if (routes[i].rule.test(path)) {\r\n        this.setState({\r\n          route: routes[i].comment,\r\n          orders: []\r\n        }, () => {\r\n          Axios.get(`${SELLER_HOST}${routes[i].path}`)\r\n            .then(({ data }) => {\r\n              console.log(data)\r\n              if (!data.success) {\r\n                return this.setState({\r\n                  errors: { data: data.message }\r\n                })\r\n              }\r\n              this.setState({\r\n                orders: data.payload,\r\n                route: routes[i].comment\r\n              })\r\n            })\r\n            .catch(err => {\r\n              this.props.alertMessageAction('获取订单信息失败 ' + (err.message ||  '服务器忙'))\r\n            })\r\n        })\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  sendPostChangeHandler(orderId) {\r\n    this.setState({ sendPost: true, orderId: orderId })\r\n  }\r\n\r\n  /**\r\n   * 发货\r\n   */\r\n  postSubmitHandler(postway, postno) {\r\n    var req = {\r\n      orderId: this.state.orderId,\r\n      postWay: postway,\r\n      expNumber: postno\r\n    }\r\n    Axios.post(`${SELLER_HOST}/api/seller/auth/order/send`, req)\r\n      .then(({ data }) => {\r\n        if (!data.success) {\r\n          return this.props.alertMessageAction(data.message)\r\n        }\r\n        this.setState({\r\n          sendPost: false\r\n        }, () => {\r\n          this.getOrders(this.props.history.location.pathname)\r\n          this.props.alertMessageAction('订单已发货')\r\n        })\r\n      }).catch(err => {\r\n        this.props.alertMessageAction(err.message || '服务器忙');\r\n      })\r\n  }\r\n\r\n  hashNextPage() {\r\n    var len = this.state.orders.length\r\n    var page = this.state.page\r\n    return len % 5 === 0 ? len / 5 > page - 1 : Math.floor(len / 5) > page\r\n  }\r\n\r\n  /**\r\n   * 上一页，下一页\r\n   */\r\n  prevPage() {\r\n    if (this.state.page > 0) {\r\n      this.setState({\r\n        page: this.state.page - 1\r\n      })\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    if (this.hashNextPage()) {\r\n      this.setState({\r\n        page: this.state.page + 1\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"om-wrap f_L\">\r\n      <div className=\"om-head\">\r\n        <div>{this.state.route}的订单</div>\r\n      </div>\r\n      <div className=\"order-item-wrap\" style={{width: '760px'}}>\r\n        {\r\n          !isEmpty(this.state.orders) ? this.state.orders.slice(this.state.page * 5, this.state.page * 5 + 5).map((order, index) => {\r\n            return <OrderItem sendPost={this.sendPostChangeHandler.bind(this, order.id)} order={order} route={this.state.route}  key={index}/>\r\n          }) : <div className=\"item-empty\">\r\n            当前没有{this.state.route}的订单哦\r\n          </div>\r\n        }\r\n        {\r\n          // 订单分页\r\n          !isEmpty(this.state.products) && this.state.products.length > 5 ? <div className=\"u-o-page\">\r\n            <div onClick={this.nextPage} className={classnames(\"u-o-next\", {\r\n              'u-o-next-void': !this.hashNextPage()\r\n            })}>下一页</div>\r\n            <div onClick={this.prevPage} className={classnames(\"u-o-prev\", {\r\n              'u-o-prev-void': this.state.page === 0\r\n            })}>上一页</div>\r\n          </div> : null\r\n        }\r\n        {\r\n          this.state.sendPost ?\r\n          <SendPost\r\n            cancel={() => this.setState({sendPost: false})}\r\n            submit={this.postSubmitHandler.bind(this)}\r\n           /> : null\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction })(OrderManager)\r\n","import React from 'react'\nimport { FILE_HOST } from '../../../../config/config'\n\nimport { formatDate, transPrice } from '../../../../utils/tools'\n\nfunction splitGoodName(name) {\n  return typeof(name) !== 'string' ? '' : name.length < 35 ? name : name.substring(0,34) + '...'\n}\n\nconst ProductItem = props => {\n  const product = props.product\n  return <div className=\"order-item\">\n  <div className=\"o-i-head\">\n    <div className=\"oih-i oi-date\">{formatDate(product.creatTime, true, true)}</div>\n    <div className=\"oih-i oi-no\" style={{textAlign: 'left'}}>商品ID：{product.id}</div>\n    <div className=\"oih-i oi-sumprice\">￥{transPrice(product.price)}</div>\n  </div>\n  <div className=\"oi-product\">\n    <div className=\"oip-i-wrap\">\n      <div className=\"oip-i oip-i-logo\"><img width=\"80px\" src={`${FILE_HOST}/image/goods/logo/${product.location}_210x210q90.jpg`} alt={product.name}/></div>\n      <div className=\"oip-i oip-i-info\">\n        <div className=\"oip-i-goodname\"><a href={`/product_detail?goodId=${product.id}`}>{splitGoodName(product.name)}</a></div>\n      </div>\n      <div className=\"oip-i oip-i-price\"></div>\n      <div className=\"oip-i oip-i-number\">销量：{product.buyNo}</div>\n      <div className=\"oip-i oip-exp\"></div>\n\n      <div className=\"oip-i oip-i-operator\">\n       {\n        props.route === '出售中的宝贝' ? <div className=\"opre-i-wrap\">\n          <button onClick={props.downProduct} className=\"opre-i-sign\">下架</button>\n        </div> :\n        props.route === '下架的宝贝' ? <div className=\"opre-i-wrap\">\n          <button onClick={props.putProduct} className=\"opre-i-sign\">上架</button>\n        </div> :\n        <div className=\"opre-i-wrap\">\n          <span className=\"opre-i-waitsend\">审核中</span>\n        </div>\n       }\n      </div>\n    </div>\n  </div>\n</div>\n}\n\nexport default ProductItem\n","/**\r\n * get /api/seller/auth/good (checkState | goodState)\r\n */\r\nimport React, { Component } from 'react'\r\nimport Axios from 'axios';\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport { SELLER_HOST } from '../../../../config/config'\r\nimport ProductItem from './ProductItem'\r\nimport { isEmpty } from '../../../../utils/validator'\r\nimport { alertMessageAction, confirmMessageAction } from '../../../../store//actions/messageActions'\r\n\r\nclass ProductManager extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: '',\r\n      routes: [\r\n        {rule: /\\/in_seller$/, path: '/api/seller/auth/good?goodState=0', comment: '出售中的宝贝'},\r\n        {rule: /\\/un_seller$/, path: '/api/seller/auth/good?goodState=1', comment: '下架的宝贝'},\r\n        {rule: /\\/chk_products$/, path: '/api/seller/auth/good?checkState=0', comment: '审核中的宝贝'},\r\n      ],\r\n      products: [\r\n        {name: 'VR眼睛', logo: 'O8rORaHsYu_35422899.jpg', creaTime: '', price: 1000, isinseller: true},\r\n        {name: '外星人台式机', logo: 'KL7reEqhUl_84629430.jpg', price: 1000, isinseller: true},\r\n      ],\r\n      page: 0\r\n    }\r\n\r\n    this.getProductData = this.getProductData.bind(this)\r\n    this.hashNextPage = this.hashNextPage.bind(this)\r\n    this.prevPage = this.prevPage.bind(this)\r\n    this.nextPage = this.nextPage.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getProductData(this.props.location.pathname)\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.location.pathname !== this.props.location.pathname) {\r\n      this.getProductData(nextProps.location.pathname)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 下架商品的方法\r\n   * @param {*} id\r\n   */\r\n  downProduct(id, name) {\r\n    this.props.confirmMessageAction('确认下架 ' + name, () => {\r\n      Axios.post(`${SELLER_HOST}/api/seller/auth/good/down`, [id + ''])\r\n        .then(({ data }) => {\r\n          if (!data.success) {\r\n            return this.props.alertMessageAction(data.message)\r\n          }\r\n          this.getProductData(this.props.location.pathname)\r\n          this.props.alertMessageAction('下架成功')\r\n        }).catch(err => {\r\n          this.props.alertMessageAction('下架失败' + (err.message || '服务器忙'))\r\n        })\r\n    }, ()=>{})\r\n\r\n  }\r\n\r\n  putProduct(id, name) {\r\n    this.props.confirmMessageAction('确认上架 ' + name, () => {\r\n      Axios.post(`${SELLER_HOST}/api/seller/auth/good/put`, [id + ''])\r\n      .then(({ data }) => {\r\n        if (!data.success) {\r\n          return this.props.alertMessageAction(data.message)\r\n        }\r\n        this.getProductData(this.props.location.pathname)\r\n        this.props.alertMessageAction('上架成功')\r\n      }).catch(err => {\r\n        this.props.alertMessageAction('上架失败' + (err.message || '服务器忙'))\r\n      })\r\n    }, ()=>{})\r\n\r\n  }\r\n\r\n  /**\r\n   * 请求卖家管理数据\r\n   * @param {} path\r\n   */\r\n  getProductData(path) {\r\n    var routes = this.state.routes\r\n    for (var i = 0, len = routes.length; i < len; i++) {\r\n      if (routes[i].rule.test(path)) {\r\n        this.setState({\r\n          route: routes[i].comment,\r\n          products: []\r\n        })\r\n        Axios.get(`${SELLER_HOST}${routes[i].path}`)\r\n          .then(({ data }) => {\r\n            if (!data.success) {\r\n              return this.props.alertMessageAction(data.message)\r\n            }\r\n            this.setState({\r\n              products: data.payload\r\n            })\r\n          })\r\n          .catch(err => {\r\n            this.props.alertMessageAction(err.message || '服务器忙')\r\n          })\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  hashNextPage() {\r\n    var len = this.state.products.length\r\n    var page = this.state.page\r\n    return len % 5 === 0 ? len / 5 > page - 1 : Math.floor(len / 5) > page\r\n  }\r\n\r\n  /**\r\n   * 上一页，下一页\r\n   */\r\n  prevPage() {\r\n    if (this.state.page > 0) {\r\n      this.setState({\r\n        page: this.state.page - 1\r\n      })\r\n    }\r\n  }\r\n\r\n  nextPage() {\r\n    if (this.hashNextPage()) {\r\n      this.setState({\r\n        page: this.state.page + 1\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"om-wrap f_L\">\r\n      <div className=\"om-head\">\r\n        <div>{this.state.route}</div>\r\n      </div>\r\n      <div className=\"order-item-wrap\" style={{width: '760px'}}>\r\n        {\r\n          !isEmpty(this.state.products) ? this.state.products.slice(this.state.page * 5, this.state.page * 5 + 5).map((product, index) => {\r\n            return <ProductItem\r\n              downProduct={this.downProduct.bind(this, product.id, product.name)}\r\n              putProduct={this.putProduct.bind(this, product.id, product.name)}\r\n              product={product} route={this.state.route}  key={index}/>\r\n          }) : <div className=\"item-empty\">\r\n            当前没有{this.state.route}哦\r\n          </div>\r\n        }\r\n        {\r\n          !isEmpty(this.state.products) && this.state.products.length > 5 ? <div className=\"u-o-page\">\r\n            <div onClick={this.nextPage} className={classnames(\"u-o-next\", {\r\n              'u-o-next-void': !this.hashNextPage()\r\n            })}>下一页</div>\r\n            <div onClick={this.prevPage} className={classnames(\"u-o-prev\", {\r\n              'u-o-prev-void': this.state.page === 0\r\n            })}>上一页</div>\r\n          </div> : null\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction, confirmMessageAction })(ProductManager)\r\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Switch, Route } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\n\nimport { FILE_HOST, SELLER_HOST } from '../../config/config'\nimport { splitText } from '../../utils/tools.js'\nimport { toggleChatAction } from '../../store/actions/chatActions'\nimport Axios from 'axios'\n\nimport './index.scss'\nimport CurrentData from './subpage/CurrentData'\nimport Backlog from './subpage/Backlog'\nimport Footer from '../../components/Footer/index.jsx'\nimport AppHeader from '../../components/Header'\nimport OrderManager from './subpage/OrderManager/index.jsx'\nimport ProductManager from './subpage/ProductManager/index.jsx'\n\nclass SellerHome extends Component {\n\tconstructor(props) {\n    super(props)\n\n    this.state = {\n      route: '',\n      currentData: {}, // 实时数据\n      sellerData: {}, // 待办数据\n      // 卖家操作菜单\n      operators: [\n        { routeName: '交易管理', routePath: 'transaction', logo: `${FILE_HOST}/image/seller/jiaoyi.jpg`, navs: [\n          { navName: '已卖出的宝贝', path: '/seller/panel/all_order'},\n          { navName: '评价管理', path: '/seller/panel/wait_comment'},\n        ] },\n        { routeName: '订单管理', routePath: 'order', logo: `${FILE_HOST}/image/seller/yunying.jpg`, navs: [\n          { navName: '待付款订单', path: '/seller/panel/wait_pay'},\n          { navName: '待发货订单', path: '/seller/panel/wait_send'},\n          { navName: '待签收订单', path: '/seller/panel/wait_sign'},\n          { navName: '待评价订单', path: '/seller/panel/wait_comment'},\n        ] },\n        { routeName: '物流管理', routePath: 'express', logo: `${FILE_HOST}/image/seller/wuliu.jpg`, navs: [\n          { navName: '发货', path: '/seller/panel/wait_send'},\n          { navName: '物流工具', path: '/seller'},\n          { navName: '物流服务', path: '/seller'},\n        ] },\n        { routeName: '宝贝管理', routePath: 'product', logo: `${FILE_HOST}/image/seller/baobei.jpg`, navs: [\n          { navName: '发布宝贝', path: '/seller/category'},\n          { navName: '出售中的宝贝', path: '/seller/panel/in_seller'},\n          { navName: '下架的宝贝', path: '/seller/panel/un_seller'},\n          { navName: '审核中的宝贝', path: '/seller/panel/chk_products'},\n        ] },\n        { routeName: '店铺管理', routePath: 'store', logo: `${FILE_HOST}/image/seller/dianpu.jpg`, navs: [\n          { navName: '查看淘宝店铺', path: '/seller'},\n          { navName: '店铺装修', path: '/seller'},\n          { navName: '宝贝分类管理', path: '/seller'},\n          { navName: '账房', path: '/seller'},\n        ] },\n      ]\n    }\n\t}\n\n  componentWillMount() {\n\n    var currentRequest = () => Axios.get(`${SELLER_HOST}/api/seller/auth/ydata`)\n    var sellerRequest = () => Axios.get(`${SELLER_HOST}/api/seller/auth/good/data`)\n    Axios.all([currentRequest(), sellerRequest()])\n      .then(Axios.spread((currentRes, sellerRes) => {\n        if (currentRes.data.success && sellerRes.data.success) {\n          this.setState({\n            currentData: { ...currentRes.data.payload },\n            sellerData: { ...sellerRes.data.payload }\n          })\n        }\n      })).catch(err => {\n        console.error(err)\n      })\n  }\n\n  handlerRouteChange(route) {\n    this.setState({\n      route: this.state.route === route ? '' : route\n    })\n  }\n\n  /**\n   * 显示或隐藏聊天窗口\n   */\n  toggleChatWindowHandler() {\n    console.log(this.props.hideChat)\n    this.props.toggleChatAction(!this.props.hideChat)\n  }\n\n\trender() {\n    const user = this.props.user\n    // console.log('未读消息', this.props.notReadChatLength)\n\n\t\treturn (\n\t\t\t<div className=\"home\">\n      <AppHeader />\n        <div className=\"head-wrap\" style={{border: '1px solid blue'}}>\n          <div className=\"head-content f_wrap\">\n            <div className=\"head-l f_L\">\n              <span className=\"h-f1\">优选</span>\n              <span className=\"h-f2\">卖家工作台</span>\n            </div>\n\n            <div className=\"head-r f_r f_wrap\">\n              <div className=\"h-r-item f_L\"><div>描述相符</div></div>\n              <div className=\"h-r-item f_L\"><div>服务态度</div></div>\n              <div className=\"h-r-item f_L\"><div>物流服务</div></div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"h-body f_wrap\">\n          <div className=\"list1-wrap f_L\">\n            {/* 会员信息 */}\n            <div className=\"user-info-wrap f_wrap\">\n              <div className=\"u-avatar f_L\"><img src={`${FILE_HOST}/image/store/logo/${user.storeLogo}`} alt={user.storeName}/></div>\n              <div className=\"u-storename-wrap f_L\">\n                <div className=\"u-storename\"><span className=\"f2\">{splitText(user.storeName, 7)}</span></div>\n              </div>\n              <div onClick={this.toggleChatWindowHandler.bind(this)} className=\"chat-bar\">\n                {\n                  // 未读消息提示或聊天 Logo\n                  this.props.notReadChatLength > 0 ? (\n                    <div className=\"notread-msg\">{this.props.notReadChatLength}</div>\n                  ) : (\n                    <img src={`${FILE_HOST}/image/ui/frog.png`} alt=\"chat\"/>\n                  )\n                }\n              </div>\n            </div>\n            <div className=\"oper-wrap\">\n            {\n              this.state.operators.map((operator, index) => (\n                <div className=\"nav-item-wrap\" key={index}>\n                  <div className=\"nav-item f_wrap\" onClick={this.handlerRouteChange.bind(this, operator.routePath)}>\n                    <div className=\"nav-logo f_L\"><img src={operator.logo} alt={operator.routeName}/></div>\n                    <div className={classnames(\"oper-bar f_L\", {\n                      'bar-seleced': this.state.route === operator.routePath\n                    })}>{operator.routeName}</div>\n                    <div className=\"nav-icon f_r\"><img src={`${FILE_HOST}/image/ui/${this.state.route === operator.routePath ? 'down' : 'right'}.png`}/></div>\n                  </div>\n                  <div className=\"nav-box\">\n                    {/* { React.createElement(operator.component, {route: this.state.route}) } */}\n                    {\n                      this.state.route === operator.routePath && operator.navs.map((nav, index) => (\n                        <div className=\"nav-cho-i\" key={index}><a href={nav.path}>{nav.navName}</a></div>\n                      ))\n                    }\n                  </div>\n                </div>\n              ))\n            }\n            </div>\n          </div>\n          <div>\n            <Switch>\n              <Route path=\"/seller/panel/all_order\" component={OrderManager}/>\n              <Route path=\"/seller/panel/wait_pay\" component={OrderManager}/>\n              <Route path=\"/seller/panel/wait_send\" component={OrderManager}/>\n              <Route path=\"/seller/panel/wait_sign\" component={OrderManager}/>\n              <Route path=\"/seller/panel/wait_comment\" component={OrderManager}/>\n              <Route path=\"/seller/panel/in_seller\" component={ProductManager}/>\n              <Route path=\"/seller/panel/un_seller\" component={ProductManager}/>\n              <Route path=\"/seller/panel/chk_products\" component={ProductManager}/>\n              <Route path=\"/seller/panel\" render={() => {\n                return (<div>\n                  <div className=\"current-data f_L\">\n                    <CurrentData data={this.state.currentData} />\n                  </div>\n\n                  <div className=\"backlog f_L\">\n                    <Backlog data={this.state.sellerData} />\n                  </div>\n                </div>)\n              }} />\n            </Switch>\n          </div>\n\n        </div>\n        <Footer />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nSellerHome.propTypes = {\n  user: PropTypes.object.isRequired,\n  hideChat: PropTypes.bool.isRequired,\n  notReadChatLength: PropTypes.number.isRequired\n}\n\nconst setStateToProps = (state) => {\n\treturn {\n    user: state.auth.user,\n    hideChat: state.chat.hideChat,\n    // 未读消息提示\n    notReadChatLength: state.chat.messagesNotRead.reduce((prev, now) => prev + now.notRead, 0)\n\t}\n}\n\nexport default connect(setStateToProps, { toggleChatAction })(SellerHome)\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport { withRouter } from 'react-router-dom'\r\n// import { JSEncrypt } from 'jsencrypt'\r\nimport SparkMD5 from 'spark-md5'\r\n\r\nimport { HOST } from '../../../config/config'\r\nimport { alertMessageAction } from '../../../store/actions/messageActions'\r\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\r\nimport { isEmpty } from '../../../utils/validator'\r\n\r\nvar loging = false // 判断账户是否在登录中\r\n\r\nclass Account extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      account: '',\r\n      password: '',\r\n      errors: {}\r\n    }\r\n    this.inputChange = this.inputChange.bind(this);\r\n    this.inputFocus = this.inputFocus.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.document.title = '优选--账户登录'\r\n  }\r\n\r\n  inputChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  inputFocus(e) {\r\n    this.setState({\r\n      errors: {...this.state.errors, [e.target.name]: ''}\r\n    })\r\n  }\r\n\r\n  formSubmit(e) {\r\n    e.preventDefault()\r\n    if (loging) {\r\n      return this.props.alertMessageAction('账户验证中')\r\n    }\r\n    let errors = {};\r\n    if (isEmpty(this.state.account)) {\r\n      errors.account = '账号不能为空';\r\n    }\r\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\r\n      errors.password = '密码格式有误';\r\n    }\r\n\r\n    if (Object.keys(errors).length > 0) {\r\n      return this.setState({\r\n        errors: errors\r\n      })\r\n    }\r\n    loging = true\r\n    var target = this.refs.submit\r\n    target.value = '登录中...'\r\n    // let info = {account: this.state.account, password: SparkMD5.hash(this.state.password), hash: 'md5'};\r\n    axios.get(`${HOST}/api/users/rsa_public?account=${this.state.account}`)\r\n    .then(({ data }) => {\r\n      if (!data.success) {\r\n        return this.setState({\r\n          errors: { submit: data.message }\r\n        })\r\n      }\r\n      // 使用md5加密，再用公钥加密后传输密码\r\n      var encrypt = new window.JSEncrypt()\r\n      encrypt.setPublicKey(data.payload)\r\n      let password = encrypt.encrypt(SparkMD5.hash(this.state.password))\r\n      axios.post(`${HOST}/api/users/seller_login`, {\r\n        account: this.state.account,\r\n        password\r\n      }).then(({ data }) => {\r\n        loging = false\r\n        if (!data.success) {\r\n          return this.setState({\r\n            errors: { submit: data.message }\r\n          })\r\n        }\r\n        setAuthToken(data.payload.token)\r\n        setCurrentUser(data.payload.user)\r\n        this.props.history.push(this.props.prev)\r\n\r\n      }).catch(err => {\r\n        loging = false\r\n        target.innerText = '登录'\r\n        this.setState({\r\n          errors: { submit: err.message || '服务器忙' }\r\n        })\r\n      })\r\n\r\n    }).catch(err => {\r\n      loging = false\r\n      target.innerText = '登录'\r\n      this.setState({\r\n        errors: { submit: err.message || '服务器忙' }\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form className=\"l-input-wrap\" onSubmit={this.formSubmit.bind(this)} method=\"POST\">\r\n          <div className=\"log-input1\">\r\n            <label htmlFor=\"account\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.account ? 'account_failed.png' : 'account.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n            <input\r\n              onFocus={this.inputFocus}\r\n              onChange={this.inputChange}\r\n              value={this.state.account}\r\n              placeholder=\"昵称 / 手机号码\"\r\n              name=\"account\"\r\n              id=\"account\"\r\n              type=\"text\"\r\n              autoComplete=\"off\"/>\r\n          </div>\r\n          {\r\n            this.state.errors.account && <div className=\"acc-log-err\">{this.state.errors.account}</div>\r\n          }\r\n          <div className=\"log-input2\">\r\n            <label htmlFor=\"password\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.password ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n            <input\r\n              onFocus={this.inputFocus}\r\n              type=\"password\"\r\n              placeholder=\"密码\"\r\n              name=\"password\"\r\n              id=\"password\"\r\n              onChange={this.inputChange}\r\n              value={this.state.password}\r\n            />\r\n          </div>\r\n          {\r\n            this.state.errors.password && <div className=\"acc-log-err\">{this.state.errors.password}</div>\r\n          }\r\n          <input ref=\"submit\" className=\"account-log-submit\" type=\"submit\" value=\"登录\"/>\r\n          {\r\n            this.state.errors.submit && <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\r\n          }\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nAccount.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToProps, { alertMessageAction })(Account))\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { HOST } from '../../../config/config'\r\nimport { setAuthToken, setCurrentUser } from '../../../utils/setAuth'\r\nimport { isPhone } from '../../../utils/validator'\r\n\r\n/**\r\n * 发送手机号到 sms接口，\r\n * 手机号合法 md5存储验证码并返回，\r\n * 登录发送手机号验证码，服务端入数据库匹配成功返回 token\r\n */\r\n\r\nvar waitSMS = 59\r\nvar sendingSMS = false\r\n\r\nclass PhoneLogin extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphone: '',\r\n\t\t\tsms: '',\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\tthis.inputChange = this.inputChange.bind(this);\r\n\t}\r\n\r\n  componentDidMount() {\r\n    window.document.title = '优选--手机登录'\r\n  }\r\n\r\n\tinputChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\r\n\tsendSMS(e) {\r\n    if (sendingSMS) {\r\n      return this.props.alertMessageAction(`请 ${waitSMS} 秒后重试`)\r\n    }\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\tphone: '手机号码错误'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n    var target = e.currentTarget\r\n    waitSMS = 59\r\n    sendingSMS = true\r\n    target.style.backgroundColor = '#eee'\r\n    var interval = setInterval(function() {\r\n      target.innerText = `再次发送(${waitSMS})`\r\n      waitSMS --\r\n      if (waitSMS === 0) {\r\n        clearInterval(interval)\r\n        target.innerText = '发送验证码'\r\n        target.style.backgroundColor = ''\r\n      }\r\n    }, 1000)\r\n\t\taxios.post(HOST + \"/api/operator/testsms\", {phone: this.state.phone})\r\n\t\t\t.then(({data}) => {\r\n        console.log(data);\r\n        if (!data.success) {\r\n          return this.setState({\r\n            errors: {...this.state.errors, sms: data.message}\r\n          })\r\n        }\r\n        this.props.alertMessageAction('发送成功请查收验证码')\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, msm: err.message || 'server busy'}\r\n        })\r\n\t\t\t});\r\n\t}\r\n\tsubmit() {\r\n\t\tlet errors = {};\r\n\t\tif (!isPhone(this.state.phone)) {\r\n\t\t\terrors.phone = '手机号格式有误'\r\n\t\t}\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.sms)) {\r\n\t\t\terrors.sms = '验证码格式有误'\r\n\t\t}\r\n\t\tif (Object.keys(errors).length > 0) {\r\n\t\t\treturn this.setState({\r\n\t\t\t\terrors: errors\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 格式验证成功\r\n\t\tconst user = {phone: this.state.phone, sms_code: this.state.sms}\r\n\t\taxios.post(`${HOST}/api/users/phonelogin`, user)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.data.success) {\r\n\t\t\t\t\treturn this.setState({\r\n\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\t\tsubmit: res.data.message\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// 验证通过\r\n\t\t\t\tsetAuthToken(res.data.payload.token) // 请求头附加 token\r\n\t\t\t\tsetCurrentUser(res.data.payload.user)\r\n        this.props.history.push(this.props.prev)\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t...this.state.errors,\r\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"l-input-wrap\">\r\n\t\t\t\t<div className=\"log-input1\">\r\n\t\t\t\t\t<label htmlFor=\"phone\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.phone ? 'mobile_failed.png' : 'mobile.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"输入手机号码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.phone}\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\tid=\"phone\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n            autoComplete=\"off\"/>\r\n            <div>\r\n            {/*\r\n              <datalist id=\"tip\">\r\n                <option value=\"国内\" />\r\n                <option value=\"国际\" />\r\n              </datalist>\r\n            */}\r\n            </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.phone && <div className=\"acc-log-err\">{this.state.errors.phone}</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"log-input2\">\r\n\t\t\t\t\t<label htmlFor=\"sms\" style={{\r\n              background: `url(${HOST}/image/ui/${this.state.errors.sms ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\r\n            }}></label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"填写验证码\"\r\n\t\t\t\t\t\tonChange={this.inputChange}\r\n\t\t\t\t\t\tvalue={this.state.sms}\r\n\t\t\t\t\t\tname=\"sms\"\r\n\t\t\t\t\t\tid=\"sms\"\r\n\t\t\t\t\t\ttype=\"text\"/>\r\n\t\t\t\t\t<button className=\"log-sendsms\" onClick={this.sendSMS.bind(this)}>发送验证码</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.sms && <div className=\"acc-log-err\">{this.state.errors.sms}</div>\r\n\t\t\t\t}\r\n\t\t\t\t<input type=\"submit\" className=\"account-log-submit\" onClick={this.submit.bind(this)} value=\"登录\"/>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.errors.submit &&  <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nPhoneLogin.propTypes = {\r\n\tauth: PropTypes.object.isRequired\r\n}\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tauth: state.auth\r\n\t}\r\n}\r\nexport default withRouter(connect(mapStateToProps)(PhoneLogin))\r\n","import React, { Component } from 'react'\r\nimport { Redirect, Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nimport './login.scss'\r\nimport { FILE_HOST } from '../../config/config'\r\nimport { transURL } from '../../utils/tools'\r\nimport AppHeader from '../../components/Header'\r\nimport Account from './subpage/Account'\r\nimport PhoneLogin from './subpage/PhoneLogin'\r\nimport Footer from '../../components/Footer/index.jsx'\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      loginWay: 'phone',  // 登录方式，phone or account\r\n      prev: '/seller/panel'\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    // 登录后跳转的页面\r\n    var params = this.props.location.search\r\n    var prev = this.state.prev\r\n\r\n    if (typeof(params) === 'string' && /prev=.+/.test(params)) {\r\n      let p = params.match(/prev=.+?(&|\\b)/g)[0]\r\n      if (p) {\r\n        p = p.substring(5)\r\n        prev = /&$/.test(p) ? p.substring(0, p.length - 1) : p\r\n      }\r\n    }\r\n    // 已登录，不能访问登录页面\r\n    if (this.props.isAuthorized) {\r\n      return this.props.history.push(transURL(prev))\r\n    }\r\n    if (prev !== this.state.prev) {\r\n      this.setState({\r\n        prev: transURL(prev, true)\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.isAuthorized) {\r\n      return nextProps.history.push(this.state.prev)\r\n    }\r\n  }\r\n\r\n  changeLoginWay(way) {\r\n    if (way === this.state.loginWay) return;\r\n    this.setState({\r\n      loginWay: way\r\n    })\r\n  }\r\n\r\n\trender() {\r\n\t\t/**\r\n\t\t * v4 包含路由 和 精准路由\r\n\t\t */\r\n    if (this.props.isAuthorized === true) {  // 已登录带回原始路由\r\n      return <Redirect to={this.state.prev} />\r\n    }\r\n    // var path = this.props.location.pathname\r\n\r\n    return (\r\n\t\t\t<div className=\"login-body\">\r\n        <AppHeader />\r\n        <div className=\"login-head f_wrap\">\r\n          <div className=\"main-logo f_L\"><img src={`${FILE_HOST}/image/seller/home_logo_blue.png`} alt=\"\"/></div>\r\n          <div className=\"login-msg f_r\">为确保您账户的安全及正常使用，依《网络安全法》相关要求，6月1日起会员账户需绑定手机。如您还未绑定，请尽快完成，感谢您的理解及支持！</div>\r\n        </div>\r\n\t\t\t\t<div className=\"login-wrap\">\r\n\t\t\t\t\t<div className=\"login-title\"></div>\r\n\t\t\t\t\t<div className=\"login-form\">\r\n\t\t\t\t\t\t<div className=\"form\">\r\n\t\t\t\t\t\t\t<div className=\"form-t\">\r\n                <div onClick={this.changeLoginWay.bind(this, 'phone')} className={this.state.loginWay === 'phone' ? 't-l f1' : 't-l f2'}>手机登录</div>\r\n                <div onClick={this.changeLoginWay.bind(this, 'account')} className={this.state.loginWay === 'account' ? 't-l f1' : 't-l f2'}>账户登录</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<main>\r\n                {\r\n                  this.state.loginWay === 'phone'\r\n                  ? <PhoneLogin prev={this.state.prev} />\r\n                  : <Account prev={this.state.prev} />\r\n                }\r\n\t\t\t\t\t\t\t</main>\r\n              <div className=\"to-registory\">\r\n                <Link to=\"/seller/register\">免费注册</Link>\r\n              </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n        <Footer />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n    isAuthorized: state.auth.isAuthorized,\r\n    isVerify: state.auth.isVerify,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Login)\r\n","import React, { Component } from 'react'\r\nimport Axios from 'axios';\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { isPhone, isLength } from '../../../utils/validator'\r\nimport { HOST, SELLER_HOST } from '../../../config/config'\r\nimport { alertMessageAction } from '../../../store/actions/messageActions'\r\nimport { step1FinishAction } from '../../../store/actions/registerActions'\r\n\r\nclass Step1 extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      phone: '',\r\n      smscode: '',\r\n      errors: {} //{phone: '手机号错误', smscode: '手机号码'}\r\n    }\r\n    this.myState = {\r\n      smsSending: false\r\n    }\r\n\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n    this.smsCodeClickHandler = this.smsCodeClickHandler.bind(this)\r\n    this.validator = this.validator.bind(this)\r\n    this.nextStepSubmit = this.nextStepSubmit.bind(this)\r\n  }\r\n\r\n  /**\r\n   * 验证\r\n   */\r\n  validator() {\r\n    var ans = {}\r\n    if (!isPhone(this.state.phone)) {\r\n      ans.phone = '手机号格式不正确'\r\n    }\r\n    if (!/^[1-9]\\d{5}$/.test(this.state.smscode)) {\r\n      ans.smscode = '验证码格式不正确'\r\n    }\r\n    return ans\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n  /**\r\n   * 点击获取验证码\r\n   */\r\n  smsCodeClickHandler(e) {\r\n    if (this.myState.smsSending) {\r\n      return this.props.alertMessageAction('验证码发送中')\r\n    }\r\n    if (this.validator().phone) {\r\n      return this.props.alertMessageAction('手机号格式不正确')\r\n    }\r\n\r\n    var target = e.currentTarget\r\n    target.style.backgroundColor = 'rgb(226,225,225)'\r\n    target.style.color = 'rgba(148,139,139)'\r\n    var interval = 0\r\n    var time = 60\r\n    Axios.post(`${HOST}/api/operator/testsms`, { phone: this.state.phone })\r\n      .then(({ data }) => {\r\n        console.log(data)\r\n        if (!data.success) {\r\n          return this.setState({\r\n            smscode: data.message\r\n          })\r\n        }\r\n\r\n        // 定时器等待\r\n        interval = window.setInterval(() => {\r\n          time--\r\n          if (time <= 0) {\r\n            target.innerText = '获取验证码'\r\n            target.style.backgroundColor = ''\r\n            target.style.color = ''\r\n            return window.clearInterval(interval)\r\n          }\r\n          target.innerText = '再次发送' + time\r\n        }, 1000)\r\n        this.props.alertMessageAction('发送成功，请注意查收')\r\n\r\n      }).catch(err => {\r\n        console.error(err)\r\n      })\r\n\r\n  }\r\n\r\n  /**\r\n   * 验证手机号码，跳到下一步\r\n   */\r\n  nextStepSubmit() {\r\n    if (Object.keys(this.validator()).length !== 0) {\r\n      return this.props.alertMessageAction('请完善信息后提交')\r\n    }\r\n\r\n    Axios.post(`${SELLER_HOST}/api/seller/store/code`, {\r\n      phone: this.state.phone,\r\n      code: this.state.smscode\r\n    }).then(({ data }) => {\r\n      if (!data.success) {\r\n        return this.setState({\r\n          errors: { ...this.state.errors, smscode: data.message }\r\n        })\r\n      }\r\n      // 验证成功，下一步\r\n      this.props.step1FinishAction(this.state.phone, data.payload)\r\n\r\n      }).catch(err => {\r\n        this.setState({\r\n          errors: { ...this.state.errors, smscode: err.message || '服务器忙' }\r\n        })\r\n      })\r\n\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"step1-wrap\">\r\n      <div className=\"step1-item phone-item\">\r\n        <label htmlFor=\"phone\">会员手机</label>\r\n        <input className={classnames({\r\n          letter: this.state.phone !== ''\r\n        })} onChange={this.fieldChangeHandler} value={this.state.account} placeholder=\"请输入买家手机号码\" autoComplete=\"off\" name=\"phone\" type=\"text\" id=\"phone\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.phone && <div className=\"form-err\">{this.state.errors.phone}</div>\r\n      }\r\n      <div className=\"step1-item sms-item\">\r\n        <label htmlFor=\"smscode\">手机验证</label>\r\n        <input className={classnames(\"sms-input\", {\r\n          letter: this.state.smscode !== ''\r\n        })} onChange={this.fieldChangeHandler} value={this.state.smscode} placeholder=\"请输入验证码\" autoComplete=\"off\" name=\"smscode\" type=\"text\" id=\"smscode\"/>\r\n        <button className=\"sms-btn\" onClick={this.smsCodeClickHandler}>获取验证码</button>\r\n      </div>\r\n      {\r\n        this.state.errors.smscode && <div className=\"form-err\">{this.state.errors.smscode}</div>\r\n      }\r\n      <button onClick={this.nextStepSubmit} className={classnames('next-btn', {\r\n        'next-wait': Object.keys(this.validator()).length !== 0\r\n      })}>下一步</button>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default connect(null, { alertMessageAction, step1FinishAction })(Step1)\r\n","\r\nexport const step1FinishAction = (phone, userId) => dispatch => {\r\n  dispatch({\r\n    type: 'STEP1_FINISH',\r\n    payload: {\r\n      account: phone,\r\n      userId\r\n    }\r\n  })\r\n}\r\n\r\nexport const step2FinishAction = data => dispatch => {\r\n  dispatch({\r\n    type: 'STEP2_FINISH',\r\n    payload: data\r\n  })\r\n}\r\n","import React, { Component } from 'react'\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport Axios from 'axios'\r\n\r\nimport { step2FinishAction } from '../../../store/actions/registerActions'\r\nimport { SELLER_HOST } from '../../../config/config';\r\n\r\nclass Step2 extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      storeName: '',\r\n      idCard: '',\r\n      reallyName: '',\r\n      errors: {storeName: ''}\r\n    }\r\n\r\n    this.validator = this.validator.bind(this)\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n    this.checkStoreNameRepeat = this.checkStoreNameRepeat.bind(this)\r\n    this.step2SubmitHandler = this.step2SubmitHandler.bind(this)\r\n  }\r\n\r\n  validator() {\r\n    var ans = {}\r\n    if (!this.state.storeName) {\r\n      ans.storeName = '店铺名不能为空'\r\n    }\r\n    if (!/^([1-9]\\d{14}|[1-9]\\d{17})$/.test(this.state.idCard)) {\r\n      ans.idCard = '身份证格式有误'\r\n    }\r\n    if (!/^.{1,5}$/.test(this.state.reallyName)) {\r\n      ans.reallyName = '1-5位真实姓名有误'\r\n    }\r\n    return ans\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  /**\r\n   * ajax 验证店铺名是否重复\r\n   */\r\n  checkStoreNameRepeat() {\r\n    // console.log(this.state.storeName)\r\n    // if (!this.state.storeName) return;\r\n    // Axios.post('', {storeName: this.state.storeName})\r\n    //   .then(({ data }) => {\r\n    //     console.log(data)\r\n    //   }).catch(err => {\r\n    //     console.error(err)\r\n    //   })\r\n\r\n    // this.props.step2FinishAction({\r\n    //   storeName: this.state.storeName,\r\n    //   reallyName: this.state.reallyName\r\n    // })\r\n  }\r\n\r\n  /**\r\n   * 提交\r\n   */\r\n  step2SubmitHandler() {\r\n    var ans = this.validator()\r\n    if (Object.keys(ans).length !== 0) {\r\n      return this.setState({ errors: ans })\r\n    }\r\n    console.log('提交成功')\r\n    var req = {\r\n      userId: this.props.register.userId + '',\r\n      merchantName: this.state.storeName,\r\n      relName: this.state.relName,\r\n      idCard: this.state.idCard\r\n    }\r\n    Axios.post(`${SELLER_HOST}/api/seller/store`, req)\r\n      .then(({ data }) => {\r\n\r\n        console.log(data)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"step2-wrap\">\r\n      <div className=\"step2-item f_wrap\">\r\n        <label className=\"f_L\" htmlFor=\"storeName\">店铺名称</label>\r\n        <input onBlur={this.checkStoreNameRepeat} onChange={this.fieldChangeHandler} className=\"f_r\" value={this.state.storeName} placeholder=\"请输入您的店铺名称\" autoComplete=\"off\" name=\"storeName\" type=\"text\" id=\"storeName\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.storeName && <div className=\"form-err\">{this.state.errors.storeName}</div>\r\n      }\r\n      <div className=\"step2-item f_wrap\">\r\n        <label className=\"f_L\" htmlFor=\"idCard\">身份证号码</label>\r\n        <input onChange={this.fieldChangeHandler} className=\"f_r\" value={this.state.idCard} placeholder=\"请输入您的身份证号码\" autoComplete=\"off\" name=\"idCard\" type=\"text\" id=\"idCard\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.idCard && <div className=\"form-err\">{this.state.errors.idCard}</div>\r\n      }\r\n      <div className=\"step2-item f_wrap\">\r\n        <label className=\"f_L\" htmlFor=\"reallyName\">真实姓名</label>\r\n        <input onChange={this.fieldChangeHandler} className=\"f_r\" value={this.state.reallyName} placeholder=\"请输入您的真实姓名\" autoComplete=\"off\" name=\"reallyName\" type=\"text\" id=\"reallyName\"/>\r\n      </div>\r\n      {\r\n        this.state.errors.reallyName && <div className=\"form-err\">{this.state.errors.reallyName}</div>\r\n      }\r\n      <div>\r\n        <button onClick={this.step2SubmitHandler} className={classnames('next-btn', {\r\n          'next-wait': Object.keys(this.validator()).length !== 0\r\n        })}>确认提交</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nStep2.propTypes = {\r\n  register: PropTypes.object.isRequired\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    register: state.register\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { step2FinishAction })(Step2)\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Step3 = (props) => {\r\n  return <div className=\"step3-wrap\">\r\n    <div className=\"s3-body\">\r\n      <div className=\"s3-info\">\r\n        <span>恭喜您的店铺</span>\r\n        <span className=\"s3-storeName\">{props.storeName}</span>\r\n        <span>已经注册成功，等待管理员审核</span>\r\n      </div>\r\n      <div><button onClick={() => {props.history.push('/seller/login')}} className=\"s3-ok\">确认</button></div>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    storeName: state.register.storeName\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Step3))\r\n","import React, { Component } from 'react'\r\nimport classnames from 'classnames'\r\nimport { connect } from 'react-redux'\r\n\r\nimport './index.scss'\r\nimport { FILE_HOST } from '../../config/config'\r\nimport Footer from '../../components/Footer/index.jsx'\r\nimport AppHeader from '../../components/Header/index'\r\nimport Step1 from './subpage/Step1'\r\nimport Step2 from './subpage/Step2'\r\nimport Step3 from './subpage/Step3'\r\n\r\nclass Register extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"regist\">\r\n        <AppHeader/>\r\n        <div className=\"regist-head\">\r\n          <div className=\"regi-head-box f_wrap\">\r\n            <div className=\"f-logo f_L\">\r\n              <img src={`${FILE_HOST}/image/seller/seller-regi-logo.png`} alt=\"seller-logo\"/>\r\n            </div>\r\n            <div className=\"f-tit f_L\">卖家注册</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"regist-body\">\r\n          <div className=\"step-wrap f_wrap\">\r\n            <div className={classnames(\"step-one f_L\", {\r\n              'f-flush': this.props.step >= 1,\r\n            })}><span className=\"f-icon\">1</span><span className=\"f-step\">身份验证</span></div>\r\n\r\n            <div className={classnames(\"step-one f_L\", {\r\n              'f-flush': this.props.step >= 2,\r\n            })}><span className=\"f-icon\">2</span><span className=\"f-step\">填写账户信息</span></div>\r\n\r\n            <div className={classnames(\"step-one f_L\", {\r\n              'f-flush': this.props.step === 3,\r\n            })}><span className=\"f-icon\">3</span><span className=\"f-step\">注册成功</span></div>\r\n          </div>\r\n          <div>\r\n            {\r\n              this.props.step === 3 ? <Step3 /> :\r\n              this.props.step === 2 ? <Step2 /> : <Step1 />\r\n            }\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    step: state.register.step\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Register)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport FreeScrollBar from 'react-free-scrollbar'\r\n\r\nimport './index.scss'\r\nimport Footer from '../../components/Footer/index'\r\nimport AppHeader from '../../components/Header/index'\r\n\r\nimport { HOST } from '../../config/config.js'\r\nimport { setBigType, setSmaillType } from '../../store/actions/goodsAction'\r\nimport { alertMessageAction } from '../../store/actions/messageActions'\r\nimport { setCategoryChoose } from '../../store/actions/goodsAction'\r\n\r\nclass Category extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      choose: [],\r\n      showSmaill: false,\r\n      showDetail: false,\r\n      errors: {\r\n        category: '', // '类目请求失败'\r\n      }\r\n    }\r\n\r\n    this.handlerCategorySubmit = this.handlerCategorySubmit.bind(this)\r\n    this.isFinishChoose = this.isFinishChoose.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (typeof(window) === 'object') {\r\n      // 从浏览器本地存储获取\r\n      var productType = window.localStorage.getItem('productType')\r\n      try {\r\n        if (productType) {\r\n          productType = JSON.parse(productType)\r\n          return this.props.setBigType(productType)\r\n        }\r\n      } catch(e) {\r\n        console.error('localStorage category error：', e)\r\n      }\r\n    }\r\n    // 请求类别信息\r\n    axios.get(`${HOST}/api/goods/type?type=big`)\r\n      .then(({ data }) => {\r\n        if (!data.success) {\r\n          // 错误处理\r\n          return;\r\n        }\r\n        this.props.setBigType(data.payload)\r\n        // 存储到本地\r\n        if (typeof(window) === 'object') {\r\n          window.localStorage.setItem('productType', JSON.stringify(data.payload))\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          errors: {...this.state.errors, category: '读取类目失败，请刷新重试'}\r\n        })\r\n      })\r\n  }\r\n\r\n  /**\r\n   * 点击类型选择类目\r\n   * @param  {[type]} itemId [大，小，详细类型的id]\r\n   * @param  {[type]} type   ['big','smaill','detail']\r\n   * @return {[type]}        [description]\r\n   */\r\n  handlerTypeClick(itemId, type) {\r\n    let choose = this.state.choose\r\n\r\n    // 点击的是大类型\r\n    if (type === 'big' && this.state.choose[0] !== itemId) {\r\n      if (!this.props.type.find(i => i._id === itemId).smaillType) {\r\n        axios.get(`${HOST}/api/goods/type?type=smaill&bigid=${itemId}`)\r\n        .then(({ data }) => {\r\n          if (!data.success) {\r\n            // 错误处理\r\n            return;\r\n          }\r\n          // 添加请求的小类型\r\n          this.props.setSmaillType(itemId, data.payload)\r\n\r\n          this.setState({\r\n            choose: [itemId],\r\n            showSmaill: true,\r\n            showDetail: false\r\n          }, () => {\r\n            if (typeof(window) === 'object') {\r\n              console.log('setSmailType')\r\n              window.localStorage.setItem('productType', JSON.stringify(this.props.type))\r\n            }\r\n          })\r\n        })\r\n        .catch(err => {\r\n\r\n        })\r\n        return;\r\n      }else {\r\n        return this.setState({\r\n          choose: [itemId],\r\n          showSmaill: true,\r\n          showDetail: false\r\n        })\r\n      }\r\n    }\r\n\r\n    // 点击的是小类型\r\n    if (type === 'smaill' && this.state.choose[1] !== itemId) {\r\n      this.setState({\r\n        choose: [choose[0], itemId],\r\n        showDetail: true,\r\n      })\r\n      return;\r\n    }\r\n\r\n    // 点击的是详细类型\r\n    if (type === 'detail' && this.state.choose[2] !== itemId) {\r\n      choose[2] = itemId\r\n      this.setState({\r\n        choose,\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 判断是否选择完毕\r\n   */\r\n  isFinishChoose() {\r\n    return [1,1].reduce((one, _, index) => one && !!this.state.choose[index + 1], !!this.state.choose[0])\r\n  }\r\n\r\n  /**\r\n   * 点击提交栏目选择\r\n   */\r\n  handlerCategorySubmit() {\r\n    // 保存状态到 redux ，跳转到商品发布页\r\n    if (!this.isFinishChoose()) {\r\n      return this.props.alertMessageAction('请先选择类目')\r\n    }\r\n    this.props.setCategoryChoose(this.state.choose)\r\n    this.props.history.push('/seller/product_issue')\r\n  }\r\n\r\n  render() {\r\n    const category = this.props.type\r\n\r\n    // 找出选择的大类型\r\n    const bigType = this.state.choose[0] ?\r\n                      category.find(i => i._id === this.state.choose[0]) : null\r\n    // 找出选择的小类型\r\n    const smaillType = bigType && this.state.showSmaill ?\r\n                        bigType.smaillType : null\r\n\r\n    // 找出选择的详细类型\r\n    const detailType = smaillType && this.state.showDetail && this.state.choose[1] ?\r\n                        smaillType.find(i => i._id === this.state.choose[1]).detail : null\r\n\r\n    return (<div className=\"category\">\r\n        <AppHeader />\r\n        <div className=\"category-wrap\">\r\n          <h2 className=\"category-head\">选择类目</h2>\r\n          <div>\r\n            <div>\r\n              {\r\n                this.state.errors.category && <div>{this.state.errors.category}</div>\r\n              }\r\n            </div>\r\n            <div className=\"cho-wrap\">\r\n              <div className=\"cho-onece\">\r\n                {\r\n                  category && category.map((bigItem, index) => (\r\n                    <div className={classnames('cho-item', {\r\n                      'cho-chosen': this.state.choose[0] === bigItem._id\r\n                    })} onClick={this.handlerTypeClick.bind(this, bigItem._id, 'big')} key={index}>{bigItem.bigName}</div>\r\n                  ))\r\n                }\r\n              </div>\r\n              <div className=\"cho-onece\" style={{borderColor: smaillType ? null : '#ccc'}}>\r\n                <FreeScrollBar>\r\n                {\r\n                  smaillType && smaillType.map((smaillItem, index) => (\r\n                    <div className={classnames('cho-item', {\r\n                      'cho-chosen': this.state.choose[1] === smaillItem._id\r\n                    })} onClick={this.handlerTypeClick.bind(this, smaillItem._id, 'smaill')} key={index}>{smaillItem.smaillName}</div>\r\n                  ))\r\n                }\r\n                </FreeScrollBar>\r\n              </div>\r\n              <div className=\"cho-onece\" style={{borderColor: detailType ? null : '#ccc'}}>\r\n                <FreeScrollBar>\r\n                {\r\n                  detailType && detailType.map((detailItem, index) => (\r\n                    <div className={classnames('cho-item', {\r\n                      'cho-chosen': this.state.choose[2] === detailItem._id\r\n                    })} onClick={this.handlerTypeClick.bind(this, detailItem._id, 'detail')} key={index}>{detailItem.detailName}</div>\r\n                  ))\r\n                }\r\n                </FreeScrollBar>\r\n              </div>\r\n            </div>\r\n\r\n            {\r\n              bigType && <div className=\"current-cate-wrap\">\r\n                <div className=\"curr-cate-box f_wrap\">\r\n                  <div className=\"f_L\">您当前选择类目为：</div>\r\n                  <div className=\"f_L f_wrap\">\r\n                    {\r\n                      this.state.choose.map((typeId, index) => {\r\n                        return index === 0 ?\r\n                                <div className=\"curr-item f_L\" key={index}>{bigType.bigName}</div> :\r\n                                index === 1 ?\r\n                                <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{smaillType.find(i => i._id === typeId).smaillName}</span></div> :\r\n                                <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{detailType.find(i => i._id === typeId).detailName}</span></div>\r\n                      })\r\n                    }\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            }\r\n\r\n\r\n            <div>\r\n              <div onClick={this.handlerCategorySubmit} className={classnames('c-submit', {\r\n                'c-submit-disable': !this.isFinishChoose(),\r\n              })}>我已阅读以下规则，现在发布宝贝</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"readme\">\r\n            <FreeScrollBar>\r\n              <p>优选规则</p>\r\n              <p>第一章 概述</p>\r\n              <span>1.优选禁止发布侵犯他人知识产权的商品，请确认商品符合知识产权保护的规定</span><br />\r\n              <span>2.choice.com(优选)服务协议》，制定本规则。</span><br />\r\n              <span>3.优选规则，是对优选用户增加基本义务或限制基本权利的条款。 </span><br />\r\n              <span>4.违规行为的认定与处理，应基于优选认定的事实并严格依规执行。优选用户在适用规则上一律平等。</span><br />\r\n              <p>第二章 交易</p>\r\n              <span>1.会员应当严格遵循优选系统设置的注册流程完成注册。会员在选择其优选会员名、优选店铺名或域名时应遵守国家法律法规，不得包含违法、涉嫌侵犯他人权利或干扰淘宝运营秩序等相关信息。会员名注册后无法自行修改。优选有权收回未通过实名认证且连续一年未登录优选的会员名。 </span><br />\r\n              <span>2.会员符合以下任一情形的，其优选账户不得与支付宝账户取消绑定：（一）已通过优选实名认证且发布过商品或创建过店铺；（二）尚有未完结的交易或投诉举报；（三）优选账户尚未被激活或尚有被冻结款项。 </span><br />\r\n            </FreeScrollBar>\r\n          </div>\r\n\r\n        </div>\r\n        <Footer />\r\n\r\n    </div>)\r\n  }\r\n}\r\n\r\nCategory.propTypes = {\r\n  type: PropTypes.array.isRequired,\r\n  setBigType: PropTypes.func.isRequired,\r\n  setSmaillType: PropTypes.func.isRequired,\r\n}\r\n\r\nfunction setStateToProps(state) {\r\n  return {\r\n    type: state.goods.type\r\n  }\r\n}\r\n\r\nexport default connect(setStateToProps, { setBigType, setSmaillType, alertMessageAction, setCategoryChoose })(Category)\r\n","import store from '../store.js'\r\n\r\nexport const setBigType = (bigType) => dispatch => {\r\n  dispatch({\r\n    type: 'SET_BIG_TYPE',\r\n    payload: bigType\r\n  })\r\n}\r\n\r\nexport const setProductType = (bigType) => {\r\n  store.dispatch({\r\n    type: 'SET_BIG_TYPE',\r\n    payload: bigType\r\n  })\r\n}\r\n\r\n\r\nexport const setSmaillType = (bigid, smaillType) => dispatch => {\r\n  dispatch({\r\n    type: 'SET_SMAILL_TYPE',\r\n    payload: {\r\n      bigid,\r\n      smaillType\r\n    }\r\n  })\r\n}\r\n\r\nexport const setCategoryChoose = (choose) => dispatch => {\r\n  dispatch({\r\n    type: 'SET_CATEGORY_CHOOSE',\r\n    payload: choose\r\n  })\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './index.scss'\r\nimport AppHeader from '../../components/Header/index'\r\nimport Footer from '../../components/Footer/index'\r\nimport { FILE_HOST, HOST } from '../../config/config';\r\nimport axios from 'axios';\r\nimport { alertMessageAction, confirmMessageAction } from '../../store/actions/messageActions'\r\n\r\n/**\r\n * 将属性值数组转换成 渲染 table 表格数据\r\n * @param {属性值数组} arr [[a,b],[c,d]]\r\n */\r\nfunction specValueArrToTableArr(arr) {\r\n\tif (arr.length === 0) {\r\n\t\t// 没有属性分类\r\n\t\treturn [[]]\r\n\t}\r\n\tvar table = [] // n 行\r\n\tvar indexArr = []\r\n\tvar indexAdd = [];\r\n\tfor (var i = 0, len1 = arr.length; i < len1; i++) {\r\n\t\tindexArr[i] = 0;\r\n\t\tindexAdd[i] = (function (){\r\n\t\t\tvar max = arr[i].length\r\n\t\t\tvar index = i;\r\n\t\t\treturn function (){\r\n\t\t\t\tif (indexArr[index] + 1 >= max) {\r\n\t\t\t\t\tindexArr[index] = 0\r\n\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\tindexAdd[index -1]()\r\n\t\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\t\tindexArr[index]++\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}())\r\n\t}\r\n\tvar afterRow = []\r\n\tvar rows = 1\r\n\tfor (var i = 0, len1 = arr.length; i < len1; i++) {\r\n\t\tafterRow[i] = 1;\r\n\t\trows *= arr[i].length\r\n\t\tfor (var j = i + 1; j < arr.length; j++) {\r\n\t\t\tafterRow[i] *= arr[j].length\r\n\t\t}\r\n\t}\r\n\tfor (var x = 0; x < rows; x++) {\r\n\t\ttable[x] = [];\r\n\t\tfor (var i = 0, len1 = arr.length; i < len1; i++) {\r\n\t\t\tif (x % afterRow[i] === 0) {\r\n\t\t\t\ttable[x].push({\r\n\t\t\t\t\tvalue: arr[i][indexArr[i]],\r\n\t\t\t\t\trowspan: afterRow[i]\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tindexAdd[indexAdd.length -1]()\r\n\t}\r\n\treturn table\r\n}\r\n\r\nclass ProductIssue extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      choose: [],\r\n      goodName: '',\r\n      goodFrom: '',\r\n      // 商品属性名，属性值\r\n      properties: [\r\n        {name: '颜色', value: ['星际红','星际蓝']},\r\n        {name: '颜色', value: ['星际红','星际蓝']}\r\n      ],\r\n      // 库存价格\r\n      specInfo: [\r\n        {amount: 0, price: 0}\r\n      ],\r\n      // 宝贝图片\r\n      smaillPicture: [''],\r\n      infoPicture: [''],\r\n      logo: '',\r\n      errors: {}\r\n    }\r\n\r\n    this.filterProperties = this.filterProperties.bind(this)\r\n    this.submitProductIssue = this.submitProductIssue.bind(this)\r\n    this.fieldChangeHandler = this.fieldChangeHandler.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    var choose = this.props.categoryChoose\r\n    // 如果未选择类目跳转到选择类目界面\r\n    var flag = [1,1,1].reduce((prev, _, index) => prev && !!choose[index], true)\r\n    if (!flag) {\r\n      return this.props.history.push('/seller/category')\r\n    }\r\n    var bigType = this.props.type.find((i) => i._id === choose[0])\r\n    var smaillType = bigType.smaillType.find((i) => i._id === choose[1])\r\n    var detailType = smaillType.detail.find((i) => i._id === choose[2])\r\n\r\n    this.setState({\r\n      choose: [bigType, smaillType, detailType]\r\n    })\r\n\r\n  }\r\n\r\n  fieldChangeHandler(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 属性名内容改变\r\n   * @param {属性名索引} index\r\n   * @param {事件对象} e\r\n   */\r\n  propNameChangeHandler(index, e) {\r\n    var properties = this.state.properties\r\n    properties[index].name = e.target.value\r\n    this.setState({\r\n      properties\r\n    })\r\n  }\r\n\r\n  propValueChangeHandler(i, j, e) {\r\n    var properties = this.state.properties\r\n    properties[i].value[j] = e.target.value\r\n    this.setState({\r\n      properties\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 判断添加属性名\r\n   */\r\n  propNameBlurHandler(i) {\r\n    var props = this.state.properties\r\n    if (props[props.length-1].name && props[i].name) {\r\n      props.push({name: '', value: ['']})\r\n      this.setState({\r\n        properties: props\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * 判断添加属性值\r\n   */\r\n  propValueBlurHandler(i, j) {\r\n    var props = this.state.properties\r\n    if (props[i].name && props[i].value[props[i].value.length -1]) {\r\n      props[i].value.push('')\r\n      this.setState({\r\n        properties: props\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消规格名\r\n   */\r\n  propNameCancelHandler(i) {\r\n    if (i === 0) return;\r\n    var props = this.state.properties\r\n    props.splice(i, 1)\r\n    this.setState({\r\n      properties: props\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 取消规格值\r\n   */\r\n  propValueCancelHandler(i, j) {\r\n    if (j === 0) return;\r\n    var props = this.state.properties\r\n    props[i].value.splice(j, 1)\r\n    this.setState({\r\n      properties: props\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 库存价格改变\r\n   */\r\n  specInfoChangeHandler(index, e) {\r\n    var specInfo = this.state.specInfo\r\n    if (!specInfo[index]) {\r\n      specInfo[index] = {}\r\n    }\r\n    var key = e.target.name\r\n    var value = e.target.value\r\n    if (key === 'amount') {\r\n      if (value !== '' && !/^[1-9]\\d*$/.test(value)) return;\r\n    }else if (key === 'price') {\r\n      if (value !== '' && !/^[1-9]\\d*(\\.\\d{1,2}|)$/.test(value)) return;\r\n    }\r\n    specInfo[index][e.target.name] = e.target.value\r\n    this.setState({\r\n      specInfo\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 将文件对象转换成 img 标签的 src\r\n   * @param {*} file\r\n   */\r\n  createPictureURL(file) {\r\n    var windowURL = window.URL || window.webkitURL\r\n    return windowURL.createObjectURL(file)\r\n  }\r\n\r\n  /**\r\n   * 宝贝小图片改变事件\r\n   */\r\n  smaillPictureChangeHandler(index, e) {\r\n    var smaill = this.state.smaillPicture\r\n    var files = e.target.files\r\n    if (files.length === 0) {\r\n      return;\r\n    }else if (smaill[index] || files.length === 1) {\r\n      smaill[index] = files[0]\r\n    } else {\r\n      for (var i = index, j = 0, len = files.length > 5 ? 5 : files.length; i < len && j < files.length; ++i && ++j) {\r\n        if (!files[j]) {\r\n          // 图片不符合条件\r\n          i--\r\n          continue;\r\n        }\r\n        smaill[i] = files[j]\r\n      }\r\n    }\r\n    // 留一个空白\r\n    if (smaill.length < 5 && smaill[smaill.length -1]) {\r\n      smaill.push('')\r\n    }\r\n    this.setState({\r\n      smaillPicture: smaill\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 图文介绍图片\r\n   */\r\n  infoPictureChangeHandler(index, e) {\r\n    var info = this.state.infoPicture\r\n    var files = e.target.files\r\n    if (files.length === 0) {\r\n      return;\r\n    } else if (info[index] || files.length === 1) {\r\n      info[index] = files[0]\r\n    } else {\r\n      for (var i = index, j = 0, len = files.length; j < len; ++i && ++j) {\r\n        if (!files[j]) {\r\n          // 图片不符合条件\r\n          i--\r\n          continue;\r\n        }\r\n        info[i] = files[j]\r\n      }\r\n    }\r\n    // 留一个空白\r\n    if (info[info.length - 1]) {\r\n      info.push('')\r\n    }\r\n    this.setState({\r\n      infoPicture: info\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择 Logo\r\n   */\r\n  logoPictureChangeHandler(e) {\r\n    var files = e.target.files\r\n    if (files.length === 0) return;\r\n    this.setState({\r\n      logo: files[0]\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 删除小图片和图文图片\r\n   * @param {*} index\r\n   */\r\n  smaillPictureDelete(index) {\r\n    if ((index === 0 && this.state.smaillPicture.length === 1) || index >= this.state.smaillPicture.length) return;\r\n    var smaillPicture = this.state.smaillPicture\r\n    if (!smaillPicture[index]) {\r\n      return;\r\n    }\r\n    smaillPicture.splice(index, 1)\r\n    this.setState({\r\n      smaillPicture\r\n    })\r\n    // console.log(index)\r\n  }\r\n\r\n  infoPictureDelete(index) {\r\n    if ((index === 0 && this.state.infoPicture.length === 1) || index >= this.state.infoPicture.length) return;\r\n    var infoPicture = this.state.infoPicture\r\n    if (!infoPicture[index]) {\r\n      return;\r\n    }\r\n    infoPicture.splice(index, 1)\r\n    this.setState({\r\n      infoPicture\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * 过滤规格名 规格值\r\n   */\r\n  filterProperties() {\r\n    const props = this.state.properties\r\n    let filtered = {\r\n      name: [],\r\n      value: []\r\n    }\r\n    // 属性去重\r\n    for (var i = 0; i < props.length; i++) {\r\n      var item = {name: '', value: []}\r\n      if (props[i].name && filtered.name.findIndex(fname => fname === props[i].name) === -1) {\r\n        item.name = props[i].name\r\n        for (var j = 0; j < props[i].value.length; j++) {\r\n          if (props[i].value[j] && props[i].value.indexOf(props[i].value[j], j + 1) === -1) {\r\n            item.value.push(props[i].value[j])\r\n          }\r\n        }\r\n        if (item.value.length > 0) {\r\n          filtered.name.push(item.name)\r\n          filtered.value.push(item.value)\r\n        }\r\n      }\r\n    }\r\n    return filtered\r\n  }\r\n\r\n  /**\r\n   * 提交宝贝信息\r\n   */\r\n  submitProductIssue() {\r\n    if (!this.props.categoryChoose[2] ||\r\n        !/^[1-9]\\d*$/.test(this.props.storeId) ||\r\n        !this.state.goodName ||\r\n        !this.state.goodFrom\r\n      ) {\r\n        return this.props.alertMessageAction('请将宝贝信息填写完整后提交')\r\n    }\r\n\r\n    var specProp = this.filterProperties()\r\n    // var len1 = specProp.value.reduce((prev,now) => prev * now.length,1)\r\n\r\n    var form = new FormData()\r\n    form.append('detailId', this.props.categoryChoose[2])\r\n    form.append('storeId', this.props.storeId)\r\n    form.append('goodFrom', this.state.goodFrom)\r\n    form.append('nowPrice', this.state.specInfo[0].price)\r\n    form.append('goodName', this.state.goodName)\r\n    form.append('specName', JSON.stringify(specProp.name))\r\n    form.append('specValue', JSON.stringify(specProp.value))\r\n    form.append('goodDetailInfo', JSON.stringify(this.state.specInfo))\r\n    form.append('logo', this.state.logo)\r\n    this.state.smaillPicture.forEach((item) => {\r\n      form.append('goodSmaillPicture', item)\r\n    })\r\n    this.state.infoPicture.forEach((item) => {\r\n      form.append('goodInfoPicture', item)\r\n    })\r\n    axios.post(`${HOST}/api/goods/add_product`, form)\r\n      .then(({ data }) => {\r\n        console.log(data)\r\n        if (!data.success) {\r\n          return this.props.alertMessageAction(data.message)\r\n        }\r\n        var sure = () => this.props.history.push('/seller/panel/chk_products')\r\n        this.props.confirmMessageAction('添加成功，管理员将会在1-3小时内审核', sure, sure)\r\n      })\r\n      .catch(err => {\r\n        this.props.alertMessageAction(err.message || '服务器忙')\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const table = specValueArrToTableArr(this.filterProperties().value)\r\n\r\n    return <div className=\"issue\">\r\n      <AppHeader />\r\n      <div className=\"issue-head\">\r\n        <div className=\"ih-box\">\r\n          <span className=\"f1\">优选网</span>\r\n          <span className=\"f2\">商品发布</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"issue-body\">\r\n        <div className=\"issue-item f_wrap\">\r\n          <div className=\"iss-tit f_L\" style={{border: 0}}>当前类目：</div>\r\n          <div className=\"current-cate-wrap f_L\">\r\n            <div className=\"curr-cate-box f_wrap\">\r\n            {\r\n              this.state.choose.map((category, index) => {\r\n                return index === 0 ?\r\n                        <div className=\"curr-item f_L\" key={index}>{category.bigName}</div> :\r\n                        index === 1 ?\r\n                        <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{category.smaillName}</span></div> :\r\n                        <div className=\"curr-item f_L\" key={index}><span className=\"curr-gt\">&gt;</span><span>{category.detailName}</span></div>\r\n              })\r\n            }\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"issue-item\">\r\n          <div className=\"iss-tit\">基础信息</div>\r\n          <div className=\"iss-mini-wrap\">\r\n            <div className=\"iss-detail f_wrap\">\r\n              <div className=\"require f_L\">宝贝标题</div>\r\n              <div className=\"good-tit f_L\"><input onChange={this.fieldChangeHandler} value={this.state.goodName} name=\"goodName\" placeholder=\"详细的标题让宝贝更容易搜索到哦\" type=\"text\"/></div>\r\n            </div>\r\n            <div className=\"iss-detail f_wrap\">\r\n              <div className=\"require f_L\">宝贝产地</div>\r\n              <div className=\"good-tit f_L\"><input style={{width: '400px'}} onChange={this.fieldChangeHandler} value={this.state.goodFrom} name=\"goodFrom\" placeholder=\"请输入宝贝的来源地\" type=\"text\"/></div>\r\n            </div>\r\n            <div className=\"iss-detail\">\r\n              <div className=\"iss-spec f_wrap\">\r\n                <div className=\"require f_L\">宝贝规格</div>\r\n                <div>\r\n                  <span className=\"f-important f_L\">选择常见属性可增加搜索/导购的机会</span>\r\n                  <span style={{paddingLeft: '10px'}}>(示例：颜色 - 星际红)</span>\r\n                </div>\r\n              </div>\r\n              {/* start 属性名-属性值 */}\r\n              <div className=\"prop-wrap\">\r\n                {\r\n                  this.state.properties.map((prop, i) => (\r\n                    <div className=\"iss-onece f_wrap\" key={i}>\r\n                      {/* 属性名 */}\r\n                      <div className=\"prop-name-wrap f_L\">\r\n                        <div className=\"prop-name\">\r\n                          <label htmlFor={`prop${i}`}>规格名：</label>\r\n                          <input onBlur={this.propNameBlurHandler.bind(this,i)} onChange={this.propNameChangeHandler.bind(this,i)} id={`prop${i}`} value={prop.name} type=\"text\"/>\r\n                        </div>\r\n                        {/* 取消按钮 */}\r\n                        { i > 0 && <p onClick={this.propNameCancelHandler.bind(this,i)} title=\"删除此规格\" style={{background: `transparent url(${FILE_HOST}/image/ui/minus-circle.png) 0px 0px no-repeat`, backgroundSize: '16px 16px'}} className=\"prop-cancel\"></p> }\r\n                      </div>\r\n                      {/* 属性值 */}\r\n                      <div className=\"prop-value-wrap f_r f_wrap\">\r\n                        <div className=\"f_L\">规格值：</div>\r\n                        <div className=\"f_r\">\r\n                        {\r\n                          prop.value.map((value, j) => (\r\n                            <div className=\"prop-value\" key={j}>\r\n                              <input onBlur={this.propValueBlurHandler.bind(this,i,j)} onChange={this.propValueChangeHandler.bind(this,i,j)} value={value} type=\"text\"/>\r\n                              {/* 取消按钮 */}\r\n                              { j > 0 && <p onClick={this.propValueCancelHandler.bind(this,i,j)} title=\"删除此属性值\" style={{background: `transparent url(${FILE_HOST}/image/ui/minus-circle.png) 0px 0px no-repeat`, backgroundSize: '16px 16px'}} className=\"prop-cancel\"></p> }\r\n                            </div>\r\n                          ))\r\n                        }\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n              {/* end 属性名-属性值 */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"issue-item\">\r\n          <div className=\"iss-tit\">销售信息</div>\r\n          <div className=\"iss-table-wrap\">\r\n            {\r\n              table.length > 0 && <table className=\"issue-table\" style={{margin: '0 auto'}} border=\"1\" cellSpacing=\"0\" cellPadding=\"0\">\r\n                <thead className=\"issue-thead\">\r\n                  <tr>\r\n                    {\r\n                      new Array(table[0].length).fill(0).map((_, index) => (\r\n                        <td key={index}>{this.state.properties[index].name}</td>\r\n                      ))\r\n                    }\r\n                    <td>库存</td>\r\n                    <td>价格</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"issue-tbody\">\r\n                  {\r\n                    table.map((column, index) => (\r\n                      <tr key={index}>\r\n                        {\r\n                          column.map((row, index) => (\r\n                            <td rowSpan={row.rowspan} key={index}>{row.value}</td>\r\n                          ))\r\n                        }\r\n                        <td><input onChange={this.specInfoChangeHandler.bind(this, index)} autoComplete=\"off\" name=\"amount\" placeholder=\"库存\" type=\"text\"/></td>\r\n                        <td><input onChange={this.specInfoChangeHandler.bind(this, index)} autoComplete=\"off\" name=\"price\" placeholder=\"价格\" type=\"text\"/></td>\r\n                      </tr>\r\n                    ))\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            }\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"iss-pics-wrap issue-item\">\r\n          <div className=\"iss-tit\">图文信息</div>\r\n          <div className=\"iss-picture-wrap\">\r\n            <div className=\"iss-pic-item-wrap pic-smaill-wrap\">\r\n              <div className=\"iss-pic-tit\">宝贝图片 最多5张</div>\r\n              <div className=\"pic-item-wrap f_wrap\">\r\n                {\r\n                  this.state.smaillPicture.map((p, index) => (\r\n                    <div className=\"pic-item f_L\" key={index}>\r\n                      <img src={p ? this.createPictureURL(p) : ''}/>\r\n                      <input key={index} onChange={this.smaillPictureChangeHandler.bind(this, index)} type=\"file\" multiple={p === ''}/>\r\n                      <div onClick={this.smaillPictureDelete.bind(this, index)} className=\"pic-cancel\">删除此图片</div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </div>\r\n            <div className=\"iss-pic-item-wrap\">\r\n              <div className=\"iss-pic-tit\">图片介绍</div>\r\n              <div className=\"pic-item-wrap f_wrap\">\r\n                {\r\n                  this.state.infoPicture.map((p, index) => (\r\n                    <div className=\"pic-item f_L\" key={index}>\r\n                      <img src={p ? this.createPictureURL(p) : ''}/>\r\n                      <input key={index} onChange={this.infoPictureChangeHandler.bind(this, index)} type=\"file\" multiple={p === ''}/>\r\n                      <div onClick={this.infoPictureDelete.bind(this, index)} className=\"pic-cancel\">删除此图片</div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </div>\r\n            <div className=\"iss-pic-item-wrap\">\r\n              <div className=\"iss-pic-tit\">宝贝 LOGO</div>\r\n              <div className=\"pic-item-wrap\">\r\n                <div className=\"pic-item\">\r\n                  <img src={this.state.logo ? this.createPictureURL(this.state.logo) : ''}/>\r\n                  <input onChange={this.logoPictureChangeHandler.bind(this)} type=\"file\"/>\r\n                  <div className=\"pic-cancel\">添加图片</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"iss-submit\"><button onClick={this.submitProductIssue}>提交宝贝信息</button></div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  }\r\n}\r\n\r\nProductIssue.propTypes = {\r\n  categoryChoose: PropTypes.array.isRequired\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    type: state.goods.type,\r\n    categoryChoose: state.goods.categoryChoose,\r\n    storeId: state.auth.user.storeId\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { alertMessageAction, confirmMessageAction })(ProductIssue)\r\n","import React from 'react'\r\n\r\nimport './index.scss'\r\n\r\nconst WaitVerify = props => (\r\n  <div className=\"wait-verify\">\r\n    <h2>{props.message}</h2>\r\n  </div>\r\n)\r\nexport default WaitVerify\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Redirect } from 'react-router-dom'\r\n\r\nimport WaitVerify from './subpage/WaitVerify'\r\nimport { transURL } from '../../utils/tools'\r\n\r\n// hydrate 注水时 bug\r\nconst waitComponent = typeof window === 'object' ? <WaitVerify message=\"账号认证中....\" /> : null\r\n\r\nconst PrivateRoute = ({component: Component, isAuthorized, isVerify, ...rest}) => (\r\n  <Route {...rest} render={(props) => (\r\n      isAuthorized ? <Component {...props} />\r\n      : isVerify  // 本地 token 验证中\r\n      ? waitComponent\r\n      : <Redirect to={`/seller/login?prev=${transURL(props.location.pathname + props.location.search)}`} />\r\n    )} />\r\n)\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isAuthorized: state.auth.isAuthorized,\r\n    isVerify: state.auth.isVerify\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(PrivateRoute)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport { formatDate } from '../../../utils/tools'\r\n\r\nimport { messageNotReadItemToChatAction, messageItemToChatAction } from '../../../store/actions/chatActions'\r\nimport { HOST } from '../../../config/config'\r\n\r\nfunction subMessage(message) {\r\n  var msg = message.replace(/{{=\\w+\\.(jpg|png|icon|gif|jpeg)}}/g, '【图片】').replace('&lt;', '<').replace('&gt;', '>')\r\n  return message.length < 19 ? msg : msg.substring(0,18) + '...'\r\n}\r\n\r\nconst Message = props => {\r\n  return (\r\n    <div className=\"chat-msg-wrap\">\r\n      { // 未读消息\r\n        [props.messagesNotRead.map((item, index) => (\r\n          <div onClick={props.messageNotReadItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n            <div className=\"msg-i-userwrap\">\r\n              <div className=\"msg-i-avatar\" style={{\r\n                background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n              }}></div>\r\n              <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n            </div>\r\n            <div className=\"msg-i-wrap\">\r\n              <div className=\"msg-i-disone\">{(Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              <div className=\"msg-i-len\">{item.notRead}</div>\r\n            </div>\r\n              <div className=\"msg-i-time\">{Array.isArray(item.content) && item.content.length > 0 ? formatDate(item.content[item.content.length-1].creaTime) : ''}</div>\r\n          </div>\r\n        )), // 已读消息\r\n          props.messages.map((item, index) => (\r\n            <div onClick={props.messageItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n              <div className=\"msg-i-userwrap\">\r\n                <div className=\"msg-i-avatar\" style={{\r\n                  background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n                }}></div>\r\n                <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n              </div>\r\n              <div className=\"msg-i-wrap\">\r\n                <div className=\"msg-i-disone\">{props.chatnow !== item.userId && item.wait ? subMessage(item.wait) : (Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    messagesNotRead: Array.isArray(state.chat.messagesNotRead) ? state.chat.messagesNotRead : [],\r\n    messages: Array.isArray(state.chat.messages) ? state.chat.messages : [],\r\n    chatnow: state.chat.chatnow\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { messageNotReadItemToChatAction, messageItemToChatAction })(Message)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { contactItemToChatAction } from '../../../store/actions/chatActions'\r\nimport socket from '../../../utils/socket'\r\nimport { HOST } from '../../../config/config'\r\n\r\n// 点击联系人到聊天框\r\nfunction contactClick(item) {\r\n  return function() {\r\n    contactItemToChatAction(item)\r\n  }\r\n}\r\n\r\nconst Contacts = (props) => {\r\n  if (socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'get_contacts'\r\n    }))\r\n  }\r\n  const online = []\r\n  const offline = []\r\n  props.contacts.forEach(i => {\r\n    if (i.isOnline) {\r\n      online.push(i)\r\n    }else {\r\n      offline.push(i)\r\n    }\r\n  })\r\n  return (\r\n    <div>\r\n      {\r\n        props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n        [\r\n          online.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          )),\r\n          offline.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item chat-item-offline\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n// class Contacts extends React.Component {\r\n//   componentWillMount() {\r\n//     // socket 请求 联系人列表\r\n//     if (socket.status === 'open') {\r\n//       socket.ws.send(JSON.stringify({\r\n//         type: 'get_contacts'\r\n//       }))\r\n//     }\r\n//   }\r\n//   // 点击联系人到聊天框\r\n//   contactClick(item) {\r\n//     contactItemToChatAction(item)\r\n//   }\r\n//   render() {\r\n//     const online = []\r\n//     const offline = []\r\n//     this.props.contacts.forEach(i => {\r\n//       if (i.isOnline) {\r\n//         online.push(i)\r\n//       }else {\r\n//         offline.push(i)\r\n//       }\r\n//     })\r\n//     return (\r\n//       <div>\r\n//         {\r\n//           this.props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n//           [\r\n//             online.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             )),\r\n//             offline.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item chat-item-offline\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             ))\r\n//           ]\r\n//         }\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    contacts: Array.isArray(state.chat.contacts) ? state.chat.contacts : []\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Contacts)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport socket from '../../../utils/socket'\r\nimport { contactItemToChatAction } from '../../../store/actions/chatActions'\r\n\r\nimport { HOST } from '../../../config/config'\r\n\r\nclass Search extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      searchAns: [],\r\n      keyword: '',\r\n      message: ''\r\n    }\r\n    this.shakeGetAns = this.shakeGetAns().bind(this)\r\n  }\r\n\r\n  // 防抖获取结果\r\n  shakeGetAns() {\r\n    var timer = 0\r\n    var timeout = -1;\r\n    return function(keyword) {\r\n      var _this = this\r\n      clearTimeout(timeout) // 清除前一个定时器\r\n      timeout = setTimeout(function() {\r\n        _this.setState({\r\n          message: '搜索中...'\r\n        })\r\n        axios.get(`${HOST}/api/users/search_contacts?keyword=${_this.state.keyword}`)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              _this.setState({\r\n                searchAns: res.data.payload,\r\n                message: res.data.payload.length === 0 ? '未搜索到联系人...' : ''\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n          })\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  keywordChange(e) {\r\n    var _this = this\r\n    var keyword = e.target.value\r\n    this.setState({\r\n      keyword\r\n    }, function() {\r\n      _this.shakeGetAns(keyword)\r\n    })\r\n  }\r\n\r\n  contactsClick(item) {\r\n    contactItemToChatAction(item)\r\n  }\r\n\r\n  addContactsClick(item) {\r\n    return function(e) {\r\n      e.stopPropagation()\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'add_contacts',\r\n          content: item.userId\r\n        }))\r\n        this.setState({\r\n          searchAns: this.state.searchAns.filter(i => i.userId !== item.userId)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-search-wrap\">\r\n        <div className=\"chat-s-input\">\r\n          <div className=\"chat-s-i-l\"><input value={this.state.keyword} placeholder=\"输入联系人昵称\" onChange={this.keywordChange.bind(this)} type=\"text\"/></div>\r\n          <div className=\"chat-s-i-r\">点击搜索</div>\r\n        </div>\r\n        <div className=\"chat-s-ans\">\r\n          {\r\n            Array.isArray(this.state.searchAns) && this.state.searchAns.length === 0 ? <div className=\"con-search-miss\">{this.state.message}</div> : this.state.searchAns.map((item, index) => (\r\n              <div onClick={this.contactsClick.bind(this, item)} className=\"c-s-item\" key={index}>\r\n                <div className=\"c-s-i-avatar\"><img src={`${HOST}/image/member/avatar/${item.avatar}`} /></div>\r\n                <div className=\"c-s-i-nickname\">{item.nickname}</div>\r\n                <div onClick={this.addContactsClick(item).bind(this)} className=\"c-s-i-btn-add\">加好友</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\n\r\nimport wss from '../../../utils/socket'\r\nimport { swingChatWindowAction, setWaitMessageAction, sendingMessageAction } from '../../../store/actions/chatActions'\r\nimport { HOST } from '../../../config/config'\r\n\r\n// function readFile(file, callback) {\r\n//   var reader = new FileReader()\r\n//   //以二进制形式读取文件\r\n//   reader.readAsArrayBuffer(file)\r\n//   reader.onload = function(e) {\r\n//     callback(e.target.result)\r\n//   }\r\n// }\r\n\r\nfunction transMessage(msg) {\r\n  if (msg === '' || typeof(msg) !== 'string') return msg\r\n    // firefox 不支持正则前置断言\r\n    // images = msg.match(/(?<!{{=)\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\r\n  var images = msg.match(/[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)(?=}})/g)\r\n  if (images) {\r\n    // var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)}}/)\r\n    var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.[jpgenifco]{3,4}}}/i)\r\n    msg = msgs[0]\r\n    for (var i = 1, len = msgs.length; i < len; i++) {\r\n      msg += `<img chat=\"${images[i-1]}\" src=\"${HOST}/image/member/chat/${/\\.gif$/.test(images[i-1]) ? images[i-1] : images[i-1] + '_w80.jpg'}\">${msgs[i]}`\r\n    }\r\n  }\r\n  return msg\r\n}\r\n\r\nclass ChatWindow extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      message: '',\r\n      waitMessage: '',\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    }\r\n    this.scrollToButton = this.scrollToButton.bind(this)\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // console.log(error)\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    // console.log(error, info)\r\n    // logErrorToMyService(error, info);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = function (e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragleave = function(e) {\r\n      e.preventDefault()\r\n    }\r\n    this.refs.textarea.ondragover = function(e) {\r\n        e.preventDefault();\r\n    }\r\n    var _this = this\r\n    this.refs.textarea.ondrop = function(e) {\r\n      e.preventDefault()\r\n      e.stopPropagation() // 火狐浏览器，拖动时打开新页面\r\n      if (!_this.props.chat.chatnow) return;\r\n      var file = e.dataTransfer.files[0]\r\n      if (!file || file.size > '5048576‬') {\r\n        return; // 5M 以下的文件\r\n      }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\r\n        return; // 不支持的格式\r\n      }\r\n      var formData = new FormData()\r\n      formData.append('picture', file)\r\n      var waitImg = `<waitimg size=\"${file.size}\"><img src=\"${HOST}/image/ui/wait.gif\"></waitimg>`\r\n      _this.setState({\r\n        waitMessage: _this.refs.textarea.innerHTML += waitImg\r\n      })\r\n\r\n      axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n        .then(res => {\r\n          if (res.data.success) {//new RegExp(`<waitimg size=\"${file.size}\">[\\\\d\\\\D]+</waitimg>`)\r\n            var nowMessage = _this.refs.textarea.innerHTML.replace(waitImg,`<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\r\n            return _this.setState({\r\n              waitMessage: nowMessage\r\n            }, function() {\r\n              _this.props.setWaitMessageAction(nowMessage)\r\n            })\r\n\r\n          }\r\n          // 失败了\r\n          _this.setState({\r\n            waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n          })\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n          _this.setState({\r\n            waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n          })\r\n        })\r\n    }\r\n    document.getElementsByClassName(\"chatw-show-wrap\")[0].onclick = function(e) {\r\n      var img = e.target.getAttribute('chat')\r\n      if (img && /^\\w{10}_\\d{7,9}\\.(jpg|png|gif|icon|jpeg)$/.test(img)) {\r\n        _this.setState({\r\n          showChatImage: true,\r\n          chatImage: img\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  chatImageChange(e) {\r\n    var _this = this\r\n    if (!_this.props.chat.chatnow) return;\r\n    var file = e.currentTarget.files[0]\r\n    if (!file || file.size > '5048576‬') {\r\n      return; // 5M 以下的文件\r\n    }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\r\n      return; // 不支持的格式\r\n    }\r\n    var formData = new FormData()\r\n    formData.append('picture', file)\r\n    var waitImg = `<waitimg size=\"${file.size}\"><img src=\"${HOST}/image/ui/wait.gif\"></waitimg>`\r\n    _this.setState({\r\n      waitMessage: _this.refs.textarea.innerHTML += waitImg\r\n    })\r\n\r\n    axios.post(`${HOST}/api/users/save_chat_image`, formData)\r\n      .then(res => {\r\n        if (res.data.success) {//new RegExp(`<waitimg size=\"${file.size}\">[\\\\d\\\\D]+</waitimg>`)\r\n          var nowMessage = _this.refs.textarea.innerHTML.replace(waitImg,`<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\r\n          return _this.setState({\r\n            waitMessage: nowMessage\r\n          }, function() {\r\n            _this.props.setWaitMessageAction(nowMessage)\r\n          })\r\n\r\n        }\r\n        // 失败了\r\n        _this.setState({\r\n          waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        _this.setState({\r\n          waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\r\n        })\r\n      })\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) !== 'object') return;\r\n    this.refs.textarea.ondragenter = null\r\n    this.refs.textarea.ondragleave = null\r\n    this.refs.textarea.ondragover = null\r\n    this.refs.textarea.ondrop = null\r\n  }\r\n\r\n  // 聊天对象改变时，拿出未发送消息\r\n  componentWillReceiveProps(nextProps, b) {\r\n    // console.log(nextProps, b)\r\n    if (typeof(window) !== 'object') { return }\r\n    var chat = this.props.chat\r\n    // 将消息中的 wait 提取出\r\n    if (chat.chatnow !== nextProps.chat.chatnow) {\r\n      var now = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (now && now.wait) {\r\n        // this.refs.textarea.classList.remove('textarea-f1')\r\n        this.refs.textarea.innerHTML = now.wait\r\n      }else {\r\n        this.refs.textarea.innerText = ''\r\n      }\r\n      // 将消息滚动条，到最低\r\n      this.scrollToButton()\r\n    }else {\r\n      var msgNow = chat.messages.find(i => i.userId === chat.chatnow)\r\n      var msgNext = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\r\n      if (msgNow && msgNext && Array.isArray(msgNow.content) && Array.isArray(msgNext.content) && msgNow.content.length !== msgNext.content.length) {\r\n        // 将消息滚动条，到最低\r\n        this.scrollToButton()\r\n      }\r\n    }\r\n    this.refs.textarea.focus()\r\n  }\r\n\r\n  scrollToButton() {\r\n      var _this = this\r\n        // 这里 render 还没执行，页面中组件\r\n      setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n        _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        setTimeout(function() {\r\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\r\n          _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\r\n        }, 200)\r\n      }, 100)\r\n  }\r\n\r\n  closeChatImage() {\r\n    this.setState({\r\n      showChatImage: false,\r\n      chatImage: ''\r\n    })\r\n  }\r\n\r\n  // 隐藏这个窗口\r\n  swingChatWindow() {\r\n    this.props.swingChatWindowAction(true)\r\n  }\r\n\r\n  sendMessage() {\r\n    var message = this.refs.textarea.innerHTML.trim().replace(new RegExp(`<waitimg>[\\\\d\\\\D]+</waitimg>`), '')\r\n    if (message === '' || !this.props.chat.chatnow) return;\r\n    // var images = message.match(/\\w+?\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\">)/g)\r\n    // 取出图片\r\n    var images = message.match(/[A-z0-9]{10}_\\d{8}\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\")/g)\r\n\r\n    if (images) {\r\n      var msgs = message.split(/<img [\\w\\W]+?>/) // 根据图片分割消息，非贪婪匹配\r\n      // console.log(msgs)\r\n      message = msgs[0]\r\n      for (var i = 1, len = msgs.length; i < len; i++) {\r\n        message += `{{=${images[i-1]}}}${msgs[i]}`\r\n      }\r\n    }\r\n    message = message.replace(/<(span|font|div|br|img)[\\d\\D]*?>/g, '').replace(/<\\/(div|span|font)>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    // console.log(images)\r\n    // return console.log(message)\r\n    //message = message.replace(/(<\\/span>|<span[^>]+?>)/g, '').replace(/(<\\/div>|<div[^>]*?>)/g, '').replace(/<br>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n    if (message === '') return;\r\n    if (wss.status !== 'open') {\r\n      return this.setState({\r\n        messages: '与服务器断开连接'\r\n      })\r\n    }\r\n    this.props.sendingMessageAction(message)\r\n    wss.ws.send(JSON.stringify({\r\n      type: 'send_chat_message',\r\n      origin: this.props.user.userId,\r\n      target: this.props.chat.chatnow,\r\n      content: message\r\n    }))\r\n    this.refs.textarea.innerText = '' // 清空消息\r\n    this.props.setWaitMessageAction('')\r\n  }\r\n\r\n  // textareaFocus(e) {\r\n\r\n  // }\r\n  // textareaBlur(e) {\r\n\r\n  // }\r\n\r\n  textareaInput(e) {\r\n    this.props.setWaitMessageAction(e.target.innerHTML.trim().replace(/<div><br><\\/div>/g, ''))\r\n  }\r\n\r\n  textareaPress(e) {\r\n    var html = e.target.innerHTML\r\n    if (e.key === 'Enter') {\r\n      e.target.innerHTML = html.replace(/<div><br><\\/div>$/g, '')\r\n      this.sendMessage()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let chat = this.props.chat\r\n    let chatnow = undefined\r\n    if (chat.chatnow && Array.isArray(chat.messages)) {\r\n      chatnow = chat.messages.find(i => i.userId === chat.chatnow)\r\n    }\r\n    return (\r\n      <div className=\"chat-window\" style={{\r\n        display: chat.hideWindow ? 'none' : 'block'\r\n      }}>\r\n        <div className=\"chatw-header\">\r\n          <div onClick={this.swingChatWindow.bind(this)} className=\"charw-hide\" style={{\r\n            background: `url(${HOST}/image/ui/left.png) center center / 25px 25px no-repeat #628ef9`\r\n          }}></div>\r\n          <div className=\"chatw-h-targetname\">{chatnow && chatnow.nickname}</div>\r\n        </div>\r\n        <div className=\"chatw-show-scroll-wrap\">\r\n          <div ref=\"chatMessageBox\" className=\"chatw-show-wrap\">\r\n          {\r\n            [chatnow && chatnow.content.map((item, index) => (\r\n              <div className=\"chat-chatnow-wrap\" key={index}>\r\n                {\r\n                  item.sender === chatnow.userId ? (\r\n                    <div className=\"chat-target-wrap\">\r\n                      <div className=\"chat-target\" key=\"1\">\r\n                        <div className=\"chat-ta-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${chatnow.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-ta-nickname\">{chatnow.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-target\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"chat-me-wrap\">\r\n                      <div className=\"chat-me\" key=\"1\">\r\n                        <div className=\"chat-me-avatar\" style={{\r\n                          background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                        }}></div>\r\n                        <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                      </div>\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\r\n                    </div>\r\n                  )\r\n                }\r\n              </div>\r\n            )),\r\n              chatnow && chat.sendingMessages.map((item, index) => {\r\n                return item.target !== chatnow.userId ? null : (\r\n                <div className=\"chat-chatnow-wrap\" key={index}>\r\n                  <div className=\"chat-me-wrap\">\r\n                    <div className=\"chat-me\" key=\"1\">\r\n                      <div className=\"chat-me-avatar\" style={{\r\n                        background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\r\n                      }}></div>\r\n                      <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\r\n                    </div>\r\n                    <div className=\"wait-msg-box\">\r\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.message)}} key=\"2\"></div>\r\n                      <div className=\"wait-logo\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )})]\r\n          }\r\n          </div>\r\n        </div>\r\n        <div className=\"chatw-send-wrap\">\r\n          <div className=\"chatw-s-textarea\">\r\n            <div id=\"textarea\"\r\n              ref=\"textarea\"\r\n              // onFocus={this.textareaFocus.bind(this)}\r\n              // onBlur={this.textareaBlur.bind(this)}\r\n              onInput={this.textareaInput.bind(this)}\r\n              contentEditable={!!chatnow}\r\n              suppressContentEditableWarning=\"true\"\r\n              onKeyPress={this.textareaPress.bind(this)}\r\n              dangerouslySetInnerHTML={{__html: this.state.waitMessage}}\r\n            ></div>\r\n          </div>\r\n          <div className=\"chatw-s-sendbox\">\r\n            <div className=\"chat-add-img\">\r\n              <input onChange={this.chatImageChange.bind(this)} className=\"add-img-file\" type=\"file\"/>\r\n              <img src={`${HOST}/image/ui/plus-circle.png`} title=\"添加图片\"/>\r\n            </div>\r\n            {\r\n              this.state.message && <div className=\"char-err\">{this.state.message}</div>\r\n            }\r\n            <div onClick={this.sendMessage.bind(this)} className=\"chatw-s-sendbtn\">发送</div>\r\n\r\n          </div>\r\n        </div>\r\n        {\r\n          this.state.showChatImage && <div onClick={this.closeChatImage.bind(this)} className=\"chat-img-wrap\">\r\n            <img src={`${HOST}/image/member/chat/${this.state.chatImage}`}/>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.auth.user,\r\n    chat: state.chat\r\n  }\r\n}\r\n\r\nChatWindow.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n  chat: PropTypes.object.isRequired,\r\n  setWaitMessageAction: PropTypes.func.isRequired,\r\n  swingChatWindowAction: PropTypes.func.isRequired\r\n}\r\nexport default connect(mapStateToProps, { swingChatWindowAction, setWaitMessageAction, sendingMessageAction })(ChatWindow)\r\n","/**\r\n * 在 App.js 中判断显示 store 中是否显示聊天功能，购物车点击青蛙显示\r\n * 请求消息记录，显示条数\r\n * 系统消息，用户消息\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport Message from './subpage/Message'\r\nimport Contacts from './subpage/Contacts'\r\nimport Search from './subpage/Search'\r\nimport ChatWindow from './subpage/ChatWindow'\r\n\r\nimport { initContacts } from '../../store/actions/chatActions'\r\n\r\nimport { HOST } from '../../config/config'\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: 'message',  // 显示 message，contacts，search\r\n      message: '',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var chat = document.getElementById('chat')\r\n      var chatMove = document.getElementById('chat-move')\r\n\r\n      chatMove.onmousedown = function(e) {\r\n        var startX = e.clientX\r\n        var startY = e.clientY\r\n        var top = parseInt(window.getComputedStyle(chat)['top'])\r\n        var left = parseInt(window.getComputedStyle(chat)['left'])\r\n        // var X = document.documentElement.clientWidth  // 窗口高宽\r\n        // var Y = document.documentElement.clientHeight\r\n        document.onmousemove = function(e) {\r\n          /**\r\n           * 判断将窗口拖出文档\r\n           */\r\n          chat.style.left = left + (e.clientX - startX) + 'px'\r\n          chat.style.top = top + (e.clientY - startY) + 'px'\r\n        }\r\n\r\n        document.onmouseup = function() {\r\n          // chat.onmousedown = null\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n        }\r\n      }\r\n      document.onmouseleave = function() {\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      document.getElementById('chat-move').onmousedown = null\r\n      document.onmouseleave = null\r\n    }\r\n  }\r\n\r\n  routeChange(route) {\r\n    this.setState({\r\n      route\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (typeof(window) !== 'object') {\r\n      return <div></div>\r\n    }\r\n\r\n    return (\r\n      <div id=\"chat\">\r\n        <div className=\"chat-route\">\r\n          <div id=\"chat-move\" className=\"cr-user-wrap\">\r\n            <div className=\"cr-user-avatar\" style={{\r\n              'background': `url(${HOST}/image/member/avatar/${this.props.auth.user.avatar}) center center / 30px 30px no-repeat`\r\n            }}></div>\r\n           <div className=\"cr-user-name\">{this.props.auth.user.nickname}</div>\r\n          </div>\r\n          <div className=\"cr-routes-wrap\">\r\n            <div onClick={this.routeChange.bind(this, 'message')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'message'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/message.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>消息</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'contacts')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'contacts'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/user.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>联系人</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'search')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'search'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/monitor.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>找人</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-body\">\r\n          <div className=\"chat-body-box\">\r\n            {\r\n              this.state.route === 'message' ? <Message /> :\r\n              this.state.route === 'contacts' ? <Contacts /> :\r\n              this.state.route === 'search' ? <Search /> : null\r\n            }\r\n          </div>\r\n        </div>\r\n        <ChatWindow />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    // chat: state.chat\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  // chat: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, { initContacts })(Chat)\r\n","/**\r\n * 在页面中显示消息，显示 1.5 秒后消失\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { closeAlertAction } from '../../store/actions/messageActions'\r\nimport './index.scss'\r\n\r\nclass MessageBox extends React.Component {\r\n\r\n  componentDidMount() {\r\n    var box = this.refs.messageBox\r\n    var _this = this\r\n    setTimeout(function() {\r\n      var opacity = 1\r\n      var interval = setInterval(function() {\r\n        opacity -= 0.1\r\n        box.style.opacity = opacity\r\n      }, 100)\r\n      setTimeout(function() {\r\n        clearInterval(interval)\r\n        _this.props.closeAlertAction()\r\n      }, 1000)\r\n    }, 500)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref=\"messageBox\" className=\"message-box\">\r\n        {this.props.messageBox.message}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messageBox: state.messageBox\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { closeAlertAction })(MessageBox)\r\n","/**\r\n * 确认或取消\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeConfirmAction } from '../../store/actions/messageActions'\r\n\r\nfunction limitMessage(message) {\r\n  if (typeof(message) !== 'string') {\r\n    return ''\r\n  }\r\n  return message.length < 31 ? message : message.substring(0,30) + '...'\r\n}\r\n\r\nconst Confirm = props => {\r\n\r\n  var sureBtnClick = function() {\r\n    if (typeof(props.sure) === 'function') {\r\n      props.sure()\r\n    }\r\n    props.closeConfirmAction()\r\n  }\r\n\r\n  var cancelBtnClick = function() {\r\n    props.closeConfirmAction()\r\n    if (typeof(props.cancel) === 'function') {\r\n      props.cancel()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"confirm-box\">\r\n      <div className=\"msg-content\">{limitMessage(props.confirmMessage)}</div>\r\n      <div className=\"btn-wrap\">\r\n        <div onClick={sureBtnClick} className=\"btn-yes\">确认</div>\r\n        <div onClick={cancelBtnClick} className=\"btn-cancel\">取消</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    confirmMessage: state.messageBox.confirmMessage,\r\n    sure: state.messageBox.sure,\r\n    cancel: state.messageBox.cancel,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { closeConfirmAction })(Confirm)\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nimport store from './store/store.js'\r\nimport SellerHome from './containers/SellerHome/index.jsx'\r\nimport Login from './containers/Login/index.jsx'\r\nimport Register from './containers/Register/index.jsx'\r\nimport Category from './containers/Category/index.jsx'\r\nimport ProductIssue from './containers/ProductIssue/index'\r\nimport PrivateRoute from './components/PrivateRoute/index'\r\n\r\nimport Chat from './components/Chat'\r\nimport MessageBox from './components/MessageBox/index'\r\nimport Confirm from './components/MessageBox/Confirm'\r\n\r\nimport { setProductType } from './store/actions/goodsAction'\r\nimport { setAuthToken, setCurrentUser } from './utils/setAuth'\r\nimport { HOST } from './config/config'\r\n\r\nif (typeof(window) === 'object') {\r\n  // 彩蛋\r\n  console.log('%c优选提示！','color:#3680f1;font-size:30px;font-weight:bold;')\r\n  console.log('%c此浏览器功能专供开发者使用。请不要在此粘贴执行任何内容，这可能会导致您的账户受到攻击，给您带来损失 ！','font-size:20px;color:#777777;font-weight:400;')\r\n\r\n  // 验证本地 token\r\n  const jwtToken = window.localStorage.jwtToken;\r\n  if (!jwtToken) {\r\n    setAuthToken(false);\r\n    setCurrentUser({});\r\n  } else {\r\n    axios.defaults.headers.common[\"Authorization\"] = jwtToken // 设置请求头 token\r\n    store.dispatch({ type: 'VERIFYING' })\r\n\r\n    // 验证请求头token\r\n    axios.get(`${HOST}/api/users/current`)\r\n      .then(res => {\r\n        if (!res.data.success) {\r\n          setAuthToken(false)\r\n          setCurrentUser({})\r\n        } else {\r\n          // token 验证成功\r\n          setAuthToken(res.data.payload.token)\r\n          setCurrentUser(res.data.payload.user)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.warn('at verify local token:', err)\r\n        setAuthToken(false);\r\n        setCurrentUser({});\r\n      })\r\n  }\r\n\r\n  // 取出本地储存的商品目录\r\n  var productType = window.localStorage.getItem('productType')\r\n  try {\r\n    setProductType(JSON.parse(productType))\r\n  } catch(e) {\r\n\r\n  }\r\n}\r\n\r\n// <Provider store={ store }>\r\n// </Provider>\r\nconst App = (props) => {\r\n  return (\r\n  \t\t<div>\r\n          <Switch>\r\n            <PrivateRoute path=\"/seller/panel\" component={SellerHome} />\r\n            <Route exact path=\"/seller/login\" component={Login} />\r\n            <Route exact path=\"/seller/register\" component={Register} />\r\n            <PrivateRoute exact path=\"/seller/category\" component={Category} />\r\n            <PrivateRoute exact path=\"/seller/product_issue\" component={ProductIssue} />\r\n            {/* 重定向 */}\r\n            <Redirect exact from=\"/seller\" to=\"/seller/panel\" />\r\n            {/* <Redirect exact from=\"/\" to=\"/seller/panel\" /> */}\r\n          </Switch>\r\n          {\r\n            // 聊天框\r\n            props.hideChat ? null : <Chat />\r\n          }\r\n          {\r\n            !props.showAlert ? null : <MessageBox />\r\n          }\r\n          {\r\n            !props.showConfirm ? null : <Confirm />\r\n          }\r\n  \t\t</div>\r\n\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    hideChat: state.chat.hideChat,\r\n    showAlert: state.messageBox.showAlert,\r\n    showConfirm: state.messageBox.showConfirm,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App)\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport './index.scss';\r\nimport App from './App';\r\nimport store from './store/store'\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>\r\n , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}