{"version":3,"sources":["utils/config.js","components/PrivateRoute/subpage/WaitVerify.js","utils/tools.js","components/PrivateRoute/index.js","flux/reducers/register.js","utils/validator.js","flux/reducers/authReducer.js","flux/reducers/product.js","flux/reducers/order.js","flux/reducers/myOrders.js","flux/reducers/chat.js","flux/reducers/messageBox.js","flux/reducers/index.js","flux/store.js","flux/actions/productActions.js","flux/actions/messageAction.js","flux/actions/orderActions.js","flux/actions/authActions.js","flux/actions/chatActions.js","utils/socket.js","utils/setAuth.js","components/Header/index.js","containers/Home/subpage/Slide.js","containers/Home/subpage/SmaillType.js","containers/Home/subpage/ProductBox.js","components/Footer/index.js","containers/Home/index.js","containers/Register/subpage/Success.js","containers/Register/index.js","containers/Login/subpage/Account.js","containers/Login/subpage/PhoneLogin.js","containers/Login/index.js","components/Goods/SearchProductsList.js","containers/SearchProduct/subpage/SubStore.js","containers/SearchProduct/index.js","containers/SearchProduct/GotoSearchProduct.js","components/StoreHeader/index.js","containers/ProductDetail/subpage/Spec.js","containers/ProductDetail/subpage/ProductInfo.js","containers/ProductDetail/index.js","containers/UserInfo/subpage/Safety.js","containers/UserInfo/subpage/MyInfo.js","containers/UserInfo/subpage/Address.js","components/OrderItem/index.js","components/CommentBox/index.js","containers/UserInfo/subpage/MyOrder.js","containers/UserInfo/index.js","containers/Order/index.js","containers/PayOrder/subpage/PayHeader.js","containers/PayOrder/subpage/Success.js","containers/PayOrder/index.js","containers/ShopingCart/index.js","components/Chat/subpage/Message.js","components/Chat/subpage/Contacts.js","components/Chat/subpage/Search.js","components/Chat/subpage/ChatWindow.js","components/Chat/index.js","components/MessageBox/index.js","components/MessageBox/Confirm.js","components/MessageBox/Loading.js","App.js","index.js"],"names":["config","WaitVerify","props","_react_16_8_5_react_default","a","createElement","className","message","intMultiplication","b","deci","test","replace","length","result","Number","substring","intAdd","deci1","deci2","i","len","Math","abs","maxDeci","max","transPrice","price","formatDate","date","year","d","Date","isNaN","getDay","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","month","days","push","transSearchKeyword","q","trim","encodeURIComponent","transURL","url","reverse","cutString","str","waitComponent","window","subpage_WaitVerify","connect","state","isLogin","auth","isVerify","_ref","Component","component","rest","Object","objectWithoutProperties","Route","assign","render","Redirect","to","concat","location","pathname","search","initialState","step","phone","isEmpty","value","undefined","keys","isPhone","number","user","address","shopCar","authReducer","arguments","action","type","objectSpread","payload","searchGoods","searchStores","searchKey","productDetail","comments","goodDetail","goodInfo","infoPicture","smaillPicture","productReducer","productDetailInitialState","buyProducts","payOrder","payStatus","orderReducer","end","limit","orders","status","waitPay","waitSend","waitSign","waitComment","finish","myOrdersInitState","myOrdersReducer","contacts","messagesNotRead","chatnow","messages","sendingMessages","hideWindow","hideChat","chatReducer","map","userId","target","content","toConsumableArray","sender","origin","msg","filter","find","notRead","Array","isArray","newMsg","nickname","avatar","m","n","newState","here","wait","showAlert","showConfirm","confirmMessage","sure","cancel","messageBoxReducer","rootReducer","combineReducers","register","product","order","myOrders","chat","messageBox","middleWare","thunk","localStore","localStorage","getItem","JSON","parse","err","console","error","composeMiddlewares","applyMiddleware","apply","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","compose","subscribe","getState","setItem","stringify","HOST","alertMessageAction","dispatch","confirmMessageAction","setBuyProductsAction","products","setPayOrderAction","payOrderSuccessAction","orderno","setRouterLocationAction","setAddressAction","initContacts","contactItemToChatAction","item","contactId","WS_HOST","socket","ws","initSocket","token","WebSocket","onopen","e","setInterval","send","onmessage","data","setAuthToken","shopCarInfo","storeId","storeName","j","len2","setShopCarAction","receiveChatMessageAction","onclose","log","onerror","axios","defaults","headers","common","removeItem","setCurrentUser","close","AppHeader","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","chooseUrl","management","control","login","history","hello","Link","userinfo","onClick","loginOut","bind","href","isSeller","withRouter","slide","slideboxs","slideImg","goodId","bgimg","bgcolor","load","0","1","2","3","4","slideStop","slideIndex","slideInterval","slideTimeout","slideAnimate","assertThisInitialized","gotoSlide","slideStart","_this2","setState","document","getElementsByClassName","style","opacity","clearInterval","clearTimeout","next","before","setAttribute","beforeOpa","nextOpa","interval","setTimeout","zIndex","defineProperty","time","timeout","nowtime","index","currentTarget","getAttribute","_this3","onMouseLeave","key","backgroundColor","src","onMouseOver","_","cnames","slide-nav-selected","SmaillType","smaillType","_id","smaillName","detail","classnames","bigTypeIndex","random","detailName","ProductBox","loading","success","productBigTypeId","get","then","catch","background","productBackImage","color","productBigType","logo","title","goodName","name","nowPrice","React","FILE_HOST","gotoTop","height","documentElement","scrollHeight","ms","scrollTop","Footer","border","align","alt","Home","bigType","selectedBigid","recommendProducts","bigId","bgImg","navTop","tit","detailId","onBigTypeSelect","CurrentSmaillType","res","bigid","getSmaill","preventDefault","keyword","setSearchKeyAction","_this4","components_Header","onSubmit","searchProduct","onChange","searchInputChange","placeholder","width","onBigTypeLeave","nav-l-item-sel","bigName","subpage_SmaillType","Slide","lib_default","offset","subpage_ProductBox","src_components_Footer","RegisterSuccess","textAlign","marginTop","sendingSMS","waitSecond","Register","smscode","password","password2","registerSuccess","edit","errors","inputTextChange","inputTextFocus","inputTextBlur","innerText","post","submit","id","subpage_Success","registerSubmit","method","onFocus","onBlur","autoComplete","regi-inp-err","sendSMS","loging","Account","account","inputChange","inputFocus","refs","encrypt","JSEncrypt","setPublicKey","SparkMD5","hash","_ref2","prev","formSubmit","htmlFor","ref","waitSMS","PhoneLogin","sms","msm","sms_code","response","Login","loginWay","params","queryString","way","changeLoginWay","subpage_PhoneLogin","subpage_Account","rowlast","mid","connectid","SubStore","stores","detailTypes","nextProps","goods","storeIds","repeat","jsonStoreIds","smaillId","detailType","crum-selected","SearchProduct","condition","onscroll","bodyScrollTop","documentScrollTop","body","getScrollTop","compatMode","clientHeight","bodyScrollHeight","documentScrollHeight","getDocumentHeight","productsWrap","onclick","parseInt","group","reduce","count","searchProductSubmit","keywordChangeHandler","subpage_SubStore","Goods_SearchProductsList","lineHeight","GotoSearchProduct","StoreHeader","onSearchInputChange","storeInfo","connectBoos","searchAllProduct","searchStoreProduct","initShopCar","Spec","smaillx","smailly","bigImg","showMustChoice","selectImg","link","allAmount","specChoice","choiceProductDetail","choiceNumber","specConfig","specValueClick","onSmaillMouseOver","newConfig","detailIndex","specNameIndex","specValueIndex","amount","specName","wrap","magnifier","bigImageBox","bigImage","magnifyGlass","onmouseover","scrollX","scrollLeft","scrollY","startX","offsetLeft","startY","offsetTop","display","onmousemove","x","clientX","y","clientY","cx","cy","left","top","onmouseleave","indexx","isOK","choiceNumberChange","buyProduct","goodDetailId","spec","v","specValue","val","addShopCar","position","show-choice","closeMustChoice","value-item-selected","plusNumber","backgroundSize","marginBottom","minusNumber","marginLeft","buyNow","buy-now-noPost","add-shopcat-noPost","ProductInfo","showDetail","showMagnify","magnifyCommPicture","bigsrc","product-info-selected","showDetial","once","commentPictureClick","pictures","pic","creaTime","hideMagnify","ProductDetail","info","setProductDetailAction","src_components_StoreHeader","subpage_Spec","subpage_ProductInfo","Safety","newEmail","newPhone","newPhone2","smsCode1","smsCode2","newPassword","smsCode3","smsState","property","pay","showProperty","btn","email","smsCode","emailSubmit","phoneSubmit","_this5","passwordSubmit","_this6","editChange","checkProperty","editInputChange","editEmailSubmit","editPhoneSubmit","editPasswordSubmit","paySubmit","transDate","sending","MyInfo","birthDate","birthMonth","birthYear","reallyName","idCard","gender","years","genderRadioChange","birthChange","diff","userInfo","birth","_this$setState","files","size","formData","FormData","append","updateUserInfo","avatarChange","hidefocus","reallyNameInputChange","idCardInputChange","checked","defaultValue","day","lastLogin","initState","editState","detailAddress","postcode","receiveName","receivePhone","isDefault","Address","opts","min","formInputChange","setDefailtChange","saveAddress","cancelEdit","borderColor","cellSpacing","cellPadding","default-ads","editStateChange","deleteAddress","memberId","OrderItem","sumPrice","sellerId","sellerName","sellerAvatar","nav","hasNullArray","handler","postWay","expNumber","isPay","isComment","isSign","isSend","CommentBox","comment","commentTypeChange","orderDetailId","closeCommentBox","picture","p","indexOf","commentChange","cols","rows","choicePicture","pictureChange","deletePicture","submitComment","Order","showCommentBox","commentOrderDetailId","route","orderDetail","sign","prevPageOrdersAction","prod","productArray","isNullArray","_this$props$myOrders$","routeChangeHandler","uoi-hit","nextPage","u-o-next-void","prevPage","u-o-prev-void","src_components_OrderItem","orderItemOperatorHandler","src_components_CommentBox","UserInfo","mn-navselected","Switch","components_PrivateRoute","path","exact","MyOrder","choiceAddress","numbers","totalPrice","computeTotal","defaultAddress","nums","numberChange","submitOrder","request","goodDetailIds","addressId","shopCarIds","shopCarId","wo-add-item-choi","addressChoice","numberMinus","numberPlus","commentFocus","commentBlur","payEnd","Success","payOrderEnd","PayOrder","payway","myState","smsSending","second","paywayChange","wallet","payBody","onresize","parseFloat","ordernos","now","subpage_PayHeader","PayOrder_subpage_Success","pay-selected","setPayway","fontSize","marginRight","alipayURL","frameBorder","SMSInputChange","userPhone","submitPay","pay-submit","pay-suffice","ShopingCart","bodyStatus","navStatus","choiceAll","choiceStores","choiceProducts","windowResize","addEventListener","removeEventListener","isHide","inter","out","shopCarBody","timer","shopCarProductsLength","forEach","showCarBody","computeChoice","computeChoiceCount","shopcar-nav-transparent","showNav","hideNav","shop-mab-focus","toggleChat","allCheckboxChange","storeCheckboxChange","productCheckboxChange","deleteShopProduct","cashierShopCar","sc-empty","subMessage","messageNotReadItemToChatAction","messageItemToChatAction","msg-item-select","contactClick","online","offline","isOnline","Search","searchAns","shakeGetAns","stopPropagation","keywordChange","contactsClick","addContactsClick","transMessage","images","match","msgs","split","ChatWindow","hasError","waitMessage","showChatImage","chatImage","scrollToButton","textarea","ondragenter","ondragleave","ondragover","ondrop","file","dataTransfer","waitImg","innerHTML","nowMessage","setWaitMessageAction","img","msgNow","msgNext","focus","chatMessageBox","swingChatWindowAction","RegExp","wss","sendingMessageAction","html","sendMessage","swingChatWindow","dangerouslySetInnerHTML","__html","onInput","textareaInput","contentEditable","suppressContentEditableWarning","onKeyPress","textareaPress","chatImageChange","closeChatImage","hide","Chat","getElementById","onmousedown","getComputedStyle","onmouseup","routeChange","crr-select-bg","subpage_Message","subpage_Contacts","subpage_Search","subpage_ChatWindow","MessageBox","box","closeAlertAction","closeConfirmAction","jwtToken","src_containers_ShopingCart","src_components_Chat","src_components_MessageBox","MessageBox_Confirm","ReactDOM","hydrate","es","BrowserRouter","src_App_0"],"mappings":"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","file":"static/js/main.17dfd350.chunk.js","sourcesContent":["export default {\n //  HOST: 'http://127.0.0.1:5000',\n\t// WS_HOST: 'ws://127.0.0.1:5000',\n  HOST: 'http://118.126.108.36',\n\tWS_HOST: 'ws://118.126.108.36'\n}\n","import React from 'react'\n\nimport './index.scss'\n\nconst WaitVerify = props => {\n  return (\n    <div className=\"wait-verify\">\n      <h2>{props.message}</h2>\n    </div>\n  )\n}\n\nexport default WaitVerify\n","// 将两个数转换成整数相乘\nexport const intMultiplication = function (a, b) {\n  a = a + ''\n  b = b + ''\n  var deci = 0  // 2个操作数的小数位数\n  // 判断是否小数\n  if (/^\\d+\\.\\d+$/.test(a)) {\n    deci += a.replace(/^\\d+\\.(?=\\d+$)/, '').length\n    a = a.replace('.', '')\n  }\n  if (/^\\d+\\.\\d+$/.test(b)) {\n    deci += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\n    b = b.replace('.', '')\n  }\n  var result = (Number(a) * Number(b)) + ''\n  return deci > 0 ? result.substring(0, result.length - deci) + '.' + result.substring(result.length - deci) : result\n}\n\n// 将两个数转换成整数相加\nexport const intAdd = function (a, b) {\n  a = a + ''\n  b = b + ''\n  var deci1 = 0;\n  var deci2 = 0;\n  if (/^\\d+\\.\\d+$/.test(a)) {\n    deci1 = a.replace(/^\\d+\\.(?=\\d+$)/, '').length\n    a = a.replace('.', '')\n  }\n  if (/^\\d+\\.\\d+$/.test(b)) {\n    deci2 += b.replace(/^\\d+\\.(?=\\d+$)/, '').length\n    b = b.replace('.', '')\n  }\n  if (deci1 !== deci2) {\n    for (var i = 0, len = Math.abs(deci1 - deci2); i < len; i++) {\n      if (deci1 < deci2) {\n        a += '0'\n      }else {\n        b += '0'\n      }\n    }\n  }\n  var result = Number(a) + Number(b) + ''\n  var maxDeci = Math.max(deci1, deci2)\n  return maxDeci !== 0 ? result.substring(0, result.length - maxDeci) + '.' + result.substring(result.length - maxDeci) : result\n}\n\nexport const transPrice = function (price) {\n  return /^\\d+$/.test(price) ? price + '.00' :  // 没有小数\n  /^\\d+\\.\\d$/.test(price) ? price + '0' : price  // 一位小数\n}\n\nexport const formatDate = function(date, year) {\n  const d = new Date(date)\n  if (Number.isNaN(d.getDay())) {\n    return ''\n  }\n  var format = year ? d.getFullYear() + '-' : ''\n\n  return (format + (d.getMonth() + 1) + '-' +\n    d.getDate() + ' ' +\n    d.getHours() + ':' +\n    d.getMinutes() + ':' +\n    d.getSeconds())\n}\n\nexport const getDate = function(year, month) {\n  if (!/^(19|20)\\d{2}$/.test(year) || !/^([1-9]|1[012])$/.test(month)) return null\n  var date = new Date(year, month, 0).getDate()\n  var days = []\n  for (var i = 1; i <= date; i++) {\n    days.push(i)\n  }\n  return days;\n}\n\nexport const transSearchKeyword = (q) => {\n  if (typeof(q) !== 'string') return null\n  q = q.trim()\n  if (q === '') return null\n  return encodeURIComponent(q.replace(/([ ,.|]+)/g, '+'))\n}\n\nexport const transURL = (url, reverse) => {\n  if (typeof url !== 'string' || url === '')\n    return ''\n  if (reverse)\n    return url.replace(/OxO/g, '/').replace(/OdO/g, '=').replace(/OwO/g, '?').replace(/OaO/g, '&')\n  return url.replace(/\\//g, 'OxO').replace(/\\=/g, 'OdO').replace(/\\?/g, 'OwO').replace(/&/g, 'OaO')\n}\n\nexport const cutString = (str, len) => {\n  if (typeof str !== 'string') return '';\n  len = len || 10\n  return str.length > len ? str.substring(0, len) + '...' : str\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Redirect } from 'react-router-dom'\nimport WaitVerify from './subpage/WaitVerify'\n\nimport { transURL } from '../../utils/tools'\n\n// hydrate 注水时 bug\nconst waitComponent = typeof window === 'object' ? <WaitVerify message=\"账号认证中....\" /> : null\n\nconst PrivateRoute = ({component: Component, isLogin, isVerify, ...rest}) => (\n  <Route {...rest} render={(props) => (\n      isLogin ? <Component {...props} />\n      : isVerify  // 本地 token 验证中\n      ? waitComponent\n      : <Redirect to={`/login?prev=${transURL(props.location.pathname + props.location.search)}`} />\n    )} />\n)\n\n// Redirect 传当前 URL 路径\n// to={{\n//   pathname: `/login?prev=${transURL(props.location.pathname + props.location.search)}`,\n//   state: {from: props.location} //通过将字符串中Redirect的toprop替换为对象并传递一个state键，该键的值是location用户尝试访问的路径的当前值。\n// }}\nfunction mapStateToProps(state) {\n  return {\n    isLogin: state.auth.isLogin,\n    isVerify: state.auth.isVerify\n  }\n}\nexport default connect(mapStateToProps)(PrivateRoute)\n","let initialState = {\r\n\tstep: 0,\r\n\tphone: '13888888888'\r\n}\r\nexport default (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase \"STEP_CHANGE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstep: action.step\r\n\t\t\t}\r\n\t\tcase \"GET_PHONE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tphone: action.phone\r\n\t\t\t}\r\n\t\tcase \"NEW_USER\":\r\n\t\t\treturn action.user;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","export const isEmpty = value => {\r\n\treturn value === undefined || value === null ||\r\n\t\t(typeof value === 'object' && Object.keys(value).length === 0) ||\r\n\t\t(typeof value === 'string' && value.length === 0)\r\n}\r\n\r\nexport const isPhone = number => {\r\n\treturn /^1[0-9]{10}$/.test(number);\r\n}\r\n\r\nexport const isLength = (value, opts) => {\r\n\tif (typeof value !== 'string') return false;\r\n\treturn (value.length >= opts.min && value.length <= opts.max)\r\n}\r\n\r\nexport const isEmail = email => {\r\n  return /^[A-z\\d]+([-_.][A-z\\d]+)*@([A-z\\d]+[-.])+[A-z\\d]{2,4}$/.test(email)\r\n}\r\n","import {isEmpty} from '../../utils/validator'\n\nvar initialState = {\n  location: '',  // 记录路由地址\n\tisLogin: false,\n\tuser: {},\n  isVerify: true,  // 账号验证中\n  address: [],  // 收货地址\n  shopCar: [],  // 购物车\n}\nconst authReducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase 'SET_CURRENT_USER': // 登陆或 App.js 验证 localStorage中 token 时触发\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLogin: !isEmpty(action.payload),\n\t\t\t\tuser: !isEmpty(action.payload) ? action.payload : {},\n        isVerify: false,  // 设置 auth.isVerifu = false (验证结束)\n        // address: action.payload.address || []\n\t\t\t}\n    case 'SET_ROUTER_LOCATION':\n      return {\n        ...state,\n        location: action.payload\n      }\n    case 'SET_SHOP_CAR':\n      return {\n        ...state,\n        shopCar: action.payload\n      }\n    case 'SET_ADDRESS':\n      return {\n        ...state,\n        address: action.payload\n      }\n    case 'UPDATE_USER_INFO':\n      return {\n        ...state,\n        user: action.payload\n      }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\nexport default authReducer;\n","var initialState = {\n  searchGoods: [],\n  searchStores: [],\n  searchKey: '',\n  productDetail: {\n    comments: [],\n    goodDetail: [],\n    goodInfo: {},\n    infoPicture: [],\n    smaillPicture: [{}],\n    message: '加载中。。。'\n  }\n}\n\nvar productReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case 'SET_SEARCH_GOODS':\n      return {\n        ...state,\n        searchGoods: action.payload\n      }\n    case 'SET_SEARCH_STORES':\n      return {\n        ...state,\n        searchStores: action.payload\n      }\n    case 'SET_SEARCH_KEY':\n      return {\n        ...state,\n        searchKey: action.payload\n      }\n    case 'SET_PRODUCT_DETAIL':\n      return {\n        ...state,\n        productDetail: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default productReducer\nexport const productDetailInitialState = initialState","const initialState = {\r\n  buyProducts: [],   // 待购买的商品\r\n  payOrder: {},\r\n  payStatus: 'nosuccess',\r\n}\r\n\r\nconst orderReducer = (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n    case 'SET_BUY_PRODUCTS':\r\n      return {\r\n        ...state,\r\n        buyProducts: action.payload\r\n      }\r\n    case 'SET_PAY_ORDER':\r\n      return {\r\n        ...state,\r\n        payOrder: action.payload\r\n      }\r\n    case 'PAY_SUCCESS':\r\n      return {\r\n        ...state,\r\n        payStatus: 'success'\r\n      }\r\n\r\n    case 'PAY_ORDER_SUCCESS':\r\n      return {\r\n        ...state,\r\n        buyProducts: [],   // 待购买的商品\r\n        payOrder: {},\r\n        payStatus: 'nosuccess',\r\n      }\r\n    default:\r\n      return state\r\n\t}\r\n}\r\nexport default orderReducer\r\n","/**\r\n * FireFox 初始 store 深层对象消失，从 order 单独提取出来\r\n */\r\nconst initialState = { // 我的订单\r\n  end: true,\r\n  limit: 0,\r\n  orders: [],\r\n  status: {\r\n    waitPay: 0,\r\n    waitSend: 0,\r\n    waitSign: 0,\r\n    waitComment: 0,\r\n    finish: 0\r\n  }\r\n}\r\nconst myOrdersReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'GET_MY_ORDERS':\r\n      return {\r\n        ...action.payload\r\n      }\r\n    case 'PREV_PAGE_ORDERS':\r\n      return {\r\n        ...state,\r\n        end: false,\r\n        limit: state.limit > 0 ? state.limit -1 : state.limit\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const myOrdersInitState = initialState\r\n\r\nexport default myOrdersReducer\r\n\r\n","const initialState = {\n  contacts: [], // 联系人\n  messagesNotRead: [],\n  chatnow: undefined,\n  messages: [],\n  sendingMessages: [/*{\n    target: 0,\n    message: ''\n  }*/],  // 发送中的消息\n  hideWindow: true,\n  hideChat: true\n}\n\nconst chatReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case 'SEND_CHAT_MESSAGE_BACK':  // 发送消息回执\n      return {\n        ...state,\n        messages: state.messages.map(i => {\n          return i.userId !== action.payload.target ? i : {\n            ...i,\n            content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}]\n          }\n        }),\n        sendingMessages: state.sendingMessages.filter(i => i.target !== action.payload.target)\n      }\n    case 'PUT_SENDING_MESSAGE':\n      return {\n        ...state,\n        sendingMessages: [...state.sendingMessages, {target: state.chatnow, message: action.payload}]\n      }\n    case 'RECEIVE_CHAT_MESSAGE': // 收到聊天消息\n      var origin = state.messagesNotRead.find(i => i.userId === action.payload.origin)\n      // 聊天人在未读列表中\n      if (origin) {\n        return {\n          ...state,\n          messagesNotRead: state.messagesNotRead.map(i => {\n            return i.userId === action.payload.origin ? {\n              ...i,\n              notRead: i.notRead + 1,\n              content: [...i.content, {sender: action.payload.origin, msg: action.payload.content}],\n            } : i\n          })\n        }\n      }\n      origin = state.messages.find(i => i.userId === action.payload.origin)\n       // 聊天对象在已读消息列表中\n      if (origin) {\n         // 是当前聊天对象\n        if (origin.userId === state.chatnow) {\n          return {\n            ...state,\n            messages: state.messages.map(i => {\n              return i.userId === action.payload.origin ? {\n                ...i,\n                content: Array.isArray(i.content) ? i.content.concat([{sender: action.payload.origin, msg: action.payload.content}]) : [{sender: action.payload.origin, msg: action.payload.content}]\n              } : i\n            })\n          }\n        }else {\n          // 不是当前聊天对象，转移到未读列表中\n          var newMsg = [{sender: action.payload.origin, msg: action.payload.content}]\n          return {\n            ...state,\n            messages: state.messages.filter(i => i.userId !== action.payload.origin),\n            messagesNotRead: [{\n              ...origin,\n              content: Array.isArray(origin.content) ? origin.content.concat(newMsg) : newMsg,\n              notRead: 1,\n            }].concat(state.messagesNotRead)\n          }\n        }\n      }\n       // 聊天对象新来的\n      return {\n        ...state,\n        messagesNotRead: [{\n          userId: action.payload.origin,\n          nickname: action.payload.nickname,\n          avatar: action.payload.avatar,\n          notRead: 1,\n          content: [{sender: action.payload.origin, msg: action.payload.content}]\n        }].concat(state.messagesNotRead)\n      }\n    case 'INIT_CONTACTS':\n      var m = [], n = [];\n      for (let i = 0, len = action.payload.length; i < len; i++) {\n        if (action.payload[i].notRead > 0) {\n          n.push(action.payload[i])\n        }else {\n          m.push(action.payload[i])\n        }\n      }\n      return {\n        ...state,\n        messagesNotRead: n,\n        messages: m\n      }\n\n    case 'MESSAGE_NOT_READ_ITEM_TO_CHAT': // 未读消息到聊天窗口\n      return {\n        ...state,\n        chatnow: action.payload.userId,\n        messagesNotRead: state.messagesNotRead.filter(i => i.userId !== action.payload.userId),\n        messages: [action.payload].concat(state.messages),\n        hideWindow: false\n      }\n    case 'CONTACT_ITEM_TO_CHAT': // 联系人和找人 item 到聊天窗口\n      var newState = {\n        ...state,\n        chatnow: action.payload.userId,\n        hideWindow: false,\n        hideChat: false,\n        messagesNotRead: state.messagesNotRead.filter(i => {\n          var here = i.userId !== action.payload.userId\n            if (!here) {\n              action.payload.content = i.content\n            }\n          return here\n        }),\n        messages: state.messages.filter(i => {\n          var here = i.userId !== action.payload.userId\n          if (!here) {\n            action.payload.content = i.content\n          }\n          return here\n        })\n      }\n      // 聊天人已在消息列表中\n      if (newState.messagesNotRead.length !== state.messagesNotRead.length || newState.messages.length !== state.messages.length) {\n        return {\n          ...newState,\n          messages: [action.payload].concat(newState.messages)\n        }\n      }\n      // 不在消息列表中\n      action.payload.content = []\n      return {\n        ...newState,\n        messages: [action.payload].concat(state.messages)\n      }\n\n    case 'MESSAGE_ITEM_TO_CHAT':  // 已读消息到窗口\n      return {\n        ...state,\n        chatnow: action.payload.userId,\n        hideWindow: false\n      }\n    case 'SET_CONTACTS':  // 获得联系人\n      return {\n        ...state,\n        contacts: action.payload\n      }\n    case 'SET_WAIT_MESSAGE':\n      return {\n        ...state,\n        messages: state.messages.map(i => {\n          return i.userId === state.chatnow ? {...i, wait: action.payload} : i\n        })\n      }\n    case 'TOGGLE_CHAT':\n      return {\n        ...state,\n        hideChat: action.payload\n      }\n    case 'SWING_CHAT_WINDOW':\n      return {\n        ...state,\n        hideWindow: action.payload\n      }\n    case 'LOGIN_OUT_CHAT':\n      return initialState\n    default:\n      return state\n  }\n}\nexport default chatReducer\n","const initialState = {\r\n  showAlert: false,  // 消息框\r\n  message: '',\r\n  showConfirm: false, // 确认框\r\n  confirmMessage: '',\r\n  sure: null,  // 确认函数\r\n  cancel: null  // 取消函数\r\n}\r\n\r\nconst messageBoxReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'ALERT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showAlert: true,\r\n        message: action.payload\r\n      }\r\n    case 'CLOSE_ALERT':\r\n      return {\r\n        ...state,\r\n        showAlert: false,\r\n        message: ''\r\n      }\r\n    case 'CONFIRM_MESSAGE':\r\n      return {\r\n        ...state,\r\n        showConfirm: true,\r\n        confirmMessage: action.payload.message || '',\r\n        sure: action.payload.sure || null,\r\n        cancel: action.payload.cancel || null\r\n      }\r\n    case 'CLOSE_CONFIRM':\r\n      return {\r\n        ...state,\r\n        showConfirm: false,\r\n        confirmMessage: '',\r\n        sure: null,\r\n        cancel: null\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default messageBoxReducer\r\n","/**\r\n * 合并多个 reducer 成一个大的reducer\r\n */\r\n\r\nimport {combineReducers} from 'redux'\r\n\r\nimport register from './register'\r\nimport auth from './authReducer'\r\nimport product from './product'\r\nimport order from './order'\r\nimport myOrders from './myOrders'\r\nimport chat from './chat'\r\nimport messageBox from './messageBox'\r\n\r\nlet rootReducer = combineReducers({\r\n\tregister,\r\n\tauth,\r\n  product,\r\n  order,\r\n  myOrders,\r\n  chat,\r\n  messageBox\r\n});\r\n\r\nexport default rootReducer;\r\n","import {createStore, applyMiddleware, compose} from 'redux'\nimport thunk from 'redux-thunk'\n\nimport rootReducer from './reducers/index.js'\n\nlet middleWare = [thunk];\nlet initialState = {};\n// 从本地储存获取 store 初始状态\nif (typeof(window) === 'object') {\n  var localStore = window.localStorage.getItem('localStoreState')\n  if (localStore) {\n    try {\n      initialState = JSON.parse(localStore)\n    }catch(err) {\n      console.error(err)\n    }\n  }\n}\n\n// 需要合并的中间件\nlet composeMiddlewares = [applyMiddleware(...middleWare),];\n//激活 chrome 浏览器 redux 插件\nif (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\n\tcomposeMiddlewares.push(window.__REDUX_DEVTOOLS_EXTENSION__())\n}\nconst store = createStore(rootReducer, initialState, compose(...composeMiddlewares));\n\n// 订阅更新函数，每次状态更新都会执行\nstore.subscribe(() => {\n  if (typeof(window) !== 'object') return;\n  var state = store.getState()\n  window.localStorage.setItem('localStoreState', JSON.stringify({\n    order: state.order,\n    auth: state.auth\n  }))\n})\n\nexport default store;\n","import store from '../store'\nimport axios from 'axios'\nimport config from '../../utils/config'\nimport { productDetailInitialState } from '../reducers/product.js'\n\nconst HOST = config.HOST\nconst state = store.getState()\n\n// 搜索的 goods\nexport const setSearchGoodsAction = goods => dispatch => {\n  dispatch({\n    type: 'SET_SEARCH_GOODS',\n    payload: goods\n  })\n}\n\n// 设置搜索的 Store\nexport const setSearchStoresAction = stores => dispatch => {\n  dispatch({\n    type: 'SET_SEARCH_STORES',\n    payload: stores\n  })\n}\n\n// 设置搜索关键字\nexport const setSearchKeyAction = searchKey => dispatch => {\n  dispatch({\n    type: 'SET_SEARCH_KEY',\n    payload: searchKey\n  })\n}\n\n// 设置商品详情页数据\nexport const setProductDetailAction = goodId => dispatch => {\n  // if (state.product.productDetail._id === goodId) return;\n  if (goodId === -1) {\n    // 清空数据\n    dispatch({\n      type: 'SET_PRODUCT_DETAIL',\n      payload: productDetailInitialState\n    })\n  }\n  axios.get(`${HOST}/api/goods/product_detail?goodId=${goodId}`)\n    .then(res => {\n      if (res.data.success) {\n        dispatch({\n          type: 'SET_PRODUCT_DETAIL',\n          payload: res.data.payload\n        })\n      }else {\n        dispatch({\n          type: 'SET_PRODUCT_DETAIL',\n          payload: { ...state.product.productDetail, message: res.data.message, error: '' }\n        })\n      }\n    })\n    .catch(err => {\n      dispatch({\n        type: 'SET_PRODUCT_DETAIL',\n        payload: { ...state.product.productDetail, error: err.message, message: '' }\n      })\n    })\n}\n","// 弹出消息框\r\nexport const alertMessageAction = message => dispatch => {\r\n  dispatch({\r\n    type: 'ALERT_MESSAGE',\r\n    payload: message\r\n  })\r\n}\r\n\r\nexport const closeAlertAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_ALERT'\r\n  })\r\n}\r\n\r\n// 弹出确认框\r\nexport const confirmMessageAction = (message, sure, cancel) => dispatch => {\r\n  dispatch({\r\n    type: 'CONFIRM_MESSAGE',\r\n    payload: { message, sure, cancel }\r\n  })\r\n}\r\n\r\nexport const closeConfirmAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'CLOSE_CONFIRM'\r\n  })\r\n}\r\n","import store from '../store'\r\n/**\r\n * 订单 Action\r\n */\r\nexport const setBuyProductsAction = products => dispatch => {\r\n  dispatch({\r\n    type: 'SET_BUY_PRODUCTS',\r\n    payload: products\r\n  })\r\n}\r\n\r\n/**\r\n * 付款页面信息\r\n */\r\nexport const setPayOrderAction = payOrder => dispatch => {\r\n  dispatch({\r\n    type: 'SET_PAY_ORDER',\r\n    payload: payOrder\r\n  })\r\n}\r\n/**\r\n * 付款成功\r\n */\r\nexport const payOrderSuccessAction = orderno => {\r\n  store.dispatch({\r\n    type: 'PAY_SUCCESS'\r\n  })\r\n}\r\n\r\n/**\r\n * myOrders Actions\r\n */\r\nexport const getMyOrdersAction = myOrders => {\r\n  store.dispatch({\r\n    type: 'GET_MY_ORDERS',\r\n    payload: myOrders\r\n  })\r\n}\r\n\r\nexport const prevPageOrdersAction = () => dispatch => {\r\n  dispatch({\r\n    type: 'PREV_PAGE_ORDERS'\r\n  })\r\n}\r\n","import store from '../store'\r\n\r\nexport const setRouterLocationAction = location => dispatch => {\r\n  dispatch({\r\n    type: 'SET_ROUTER_LOCATION',\r\n    payload: location\r\n  })\r\n}\r\n\r\nexport const setShopCarAction = shopCarInfo => {\r\n  if (!Array.isArray(shopCarInfo)) return;\r\n  // 将商品按 店铺进行分组\r\n  let shopCar = []\r\n  if (shopCarInfo.length > 0) {\r\n    shopCar[0] = {\r\n      storeId: shopCarInfo[0].product.storeId,\r\n      storeName: shopCarInfo[0].product.storeName,\r\n      products: [shopCarInfo[0]]\r\n    }\r\n    for (let i = 1, len = shopCarInfo.length; i < len; i++) {\r\n      for (let j = 0, len2 = shopCar.length; j < len2; j++) {\r\n        if (shopCarInfo[i].product.storeId === shopCar[j].storeId) {\r\n          shopCar[j].products.push(shopCarInfo[i])\r\n          break\r\n        }\r\n        if (j === len2-1) {\r\n          shopCar.push({\r\n            storeId: shopCarInfo[i].product.storeId,\r\n            storeName: shopCarInfo[i].product.storeName,\r\n            products: [shopCarInfo[i]]\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  store.dispatch({\r\n    type: 'SET_SHOP_CAR',\r\n    payload: shopCar\r\n  })\r\n}\r\n\r\n// 获取收货地址\r\nexport const setAddressAction = address => {\r\n  if (!Array.isArray(address)) return;\r\n  store.dispatch({\r\n    type: 'SET_ADDRESS',\r\n    payload: address\r\n  })\r\n}\r\n\r\nexport const updateUserInfo = userInfo => dispatch => {\r\n  dispatch({\r\n    type: 'UPDATE_USER_INFO',\r\n    payload: userInfo\r\n  })\r\n}\r\n","import store from '../store'\nimport socket from '../../utils/socket'\n\nexport const toggleChatAction = state => { // 隐藏或显示聊天窗口\n  store.dispatch({\n    type: 'TOGGLE_CHAT',\n    payload: state\n  })\n}\n\nexport const initContacts = messages => {\n  store.dispatch({\n    type: 'INIT_CONTACTS',\n    payload: messages\n  })\n}\n\n// 点击未读消息展示到聊天框\nexport const messageNotReadItemToChatAction = item => dispatch => {\n  return function() {\n    if (socket.status === 'open') {\n      socket.ws.send(JSON.stringify({ // 设置消息已读\n        type: 'msg_be_read',\n        content: item.userId\n      }))\n    }\n    dispatch({\n      type: 'MESSAGE_NOT_READ_ITEM_TO_CHAT',\n      payload: item\n    })\n  }\n}\n\nexport const sendingMessageAction = msg => dispatch => {\n  dispatch({\n    type: 'PUT_SENDING_MESSAGE',\n    payload: msg\n  })\n}\n\n// 点击已读消息展示到聊天框\nexport const messageItemToChatAction = item => dispatch => {\n  return function() {\n    dispatch({\n      type: 'MESSAGE_ITEM_TO_CHAT',\n      payload: item\n    })\n  }\n}\n\n// 点击联系人和找人 item 到聊天框\nexport const contactItemToChatAction = item => {\n  item = {...item, userId: item.userId || item.contactId}\n  var chat = store.getState().chat\n  if (chat.chatnow === item.userId && !chat.hideChat) return;\n  store.dispatch({\n    type: 'CONTACT_ITEM_TO_CHAT',\n    payload: item\n  })\n}\n\nexport const swingChatWindowAction = hide => dispatch => {\n  dispatch({\n    type: 'SWING_CHAT_WINDOW',\n    payload: hide\n  })\n}\n\nexport const setWaitMessageAction = msg => dispatch => {\n  dispatch({\n    type: 'SET_WAIT_MESSAGE',\n    payload: msg\n  })\n}\n\n// 发送消息后回执\nexport const sendChatMessageBackAction = message => {\n  store.dispatch({\n    type: 'SEND_CHAT_MESSAGE_BACK',\n    payload: message\n  })\n}\n\n// 收到聊天消息\nexport const receiveChatMessageAction = message => {\n  if (message.origin === store.getState().chat.chatnow && socket.status === 'open') {\n    socket.ws.send(JSON.stringify({\n      type: 'msg_be_read',\n      content: message.origin\n    }))\n  }\n  store.dispatch({\n    type: 'RECEIVE_CHAT_MESSAGE',\n    payload: message\n  })\n}\n\n// 收到联系人列表\nexport const getContactsAction = contacts => {\n  store.dispatch({\n    type: 'SET_CONTACTS',\n    payload: contacts\n  })\n}\n","import { setAuthToken } from './setAuth'\nimport {\n  payOrderSuccessAction,\n  getMyOrdersAction\n} from '../flux/actions/orderActions'\nimport {\n  setShopCarAction,\n  setAddressAction\n} from '../flux/actions/authActions'\nimport {\n  // setWaitMessageAction,\n  sendChatMessageBackAction,\n  receiveChatMessageAction,\n  getContactsAction,\n  initContacts\n} from '../flux/actions/chatActions'\nimport config from './config'\n\nconst WS_HOST = config.WS_HOST\n\n\nconst socket = {\n  status: 'close',\n  ws: null,\n  initSocket: function (token) {\n    if (typeof(window) !== 'object' || !token) return;\n    const ws = new WebSocket(`${WS_HOST}?token=${token}`)\n\n    ws.onopen = function(e) {\n      socket.status = 'open'\n      setInterval(function() {  // 设置定时器更新 token\n        if (socket.status !== 'open') { return }\n        ws.send(JSON.stringify({\n          type: 'transToken',\n          target: 'koa'\n        }))\n      }, 1000*60*15)\n      ws.send('{\"type\":\"get_shop_cat\"}') // 获取购物车信息\n      ws.send('{\"type\":\"init_chat_messages\"}') // 获取聊天信息\n    }\n\n    ws.onmessage = function(e) {\n      var msg = e.data\n      try {\n        msg = JSON.parse(msg)\n      }catch(err) {\n        return\n      }\n      switch(msg.type) {\n        case 'transToken':\n          return setAuthToken(msg.content)\n\n        case 'payOrderSuccess':  // 付款成功服务端消息\n          return payOrderSuccessAction(msg.content)\n\n        case 'get_shop_cat':  // 获取购物车信息\n          // if (!state.initShopCar) {\n          //   // 添加购物车\n          //   alertMessageBox('添加成功，在购物车等亲')\n          // }\n          // state.initShopCar = false\n          return setShopCarAction(msg.content)\n\n        case 'send_chat_message':  // 发送消息后回执\n          return sendChatMessageBackAction(msg)\n\n        case 'init_chat_messages':  // 初始化聊天信息\n          return initContacts(msg.content)\n\n        case 'receive_chat_message':  // 收到聊天消息\n          return receiveChatMessageAction(msg)\n\n        case 'get_contacts': // 收到联系人列表信息\n          return getContactsAction(msg.content)\n\n        case 'get_address':\n          return setAddressAction(msg.content)\n        case 'get_orders':  // 获取所有订单信息\n          return getMyOrdersAction(msg.content)\n        default:\n          return\n      }\n    }\n\n    ws.onclose = function(e) {\n      console.log('socket close!')\n      socket.status = 'close'\n    }\n\n    ws.onerror = function(e) {\n      console.error('socket error', e)\n    }\n\n    socket.ws = ws\n  }\n}\n\nexport default socket\n","import axios from 'axios'\r\nimport store from '../flux/store'\r\nimport socket from './socket'\r\nimport { isEmpty } from '../utils/validator'\r\nimport { myOrdersInitState } from '../flux/reducers/myOrders'\r\nexport const setAuthToken = token => {\r\n\tif (token) {\r\n\t\t// 让每个请求头携带 token\r\n\t\taxios.defaults.headers.common[\"Authorization\"] = token;\r\n\t\t // 添加localStorage 储存token\r\n\t\twindow.localStorage.setItem(\"jwtToken\", token);\r\n    // 初始化 websocket\r\n    if (socket.status === 'close') {\r\n      socket.initSocket(token)\r\n    }\r\n\t} else {\r\n\t\t// 删除请求头 token\r\n\t\tdelete axios.defaults.headers.common[\"Authorization\"];\r\n\t\t// 删除localStorage储存的 token\r\n    window.localStorage.removeItem(\"jwtToken\");\r\n\t\t// window.localStorage.clear();\r\n\t}\r\n}\r\n\r\nexport const setCurrentUser = user => {\r\n  if (isEmpty(user)) {\r\n    if (socket.status === 'open') {\r\n      socket.ws.close()\r\n    }\r\n    store.dispatch({ type: 'LOGIN_OUT_CHAT' })\r\n    store.dispatch({\r\n      type: 'GET_MY_ORDERS',\r\n      payload: myOrdersInitState\r\n    })\r\n  }\r\n\tstore.dispatch({\r\n\t\ttype: 'SET_CURRENT_USER',\r\n\t\tpayload: user\r\n\t})\r\n}\r\n\r\n","import React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport './index.scss'\nimport { setAuthToken, setCurrentUser } from '../../utils/setAuth'\n\nclass AppHeader extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n      chooseUrl: {\n        management: 'http://118.126.108.36/image/files/choice_perfect_manager.msi', // 管理端路径\n        control: '/choose/Control.jsp',\n        register: '/choose/Register.jsp',\n        login: '/choose/index.jsp',\n        order: '/choose/OrderShow.jsp',\n        waitSend: '/choose/WatishipmentsGoods.jsp'\n      }\n\t\t}\n\t}\n\t// 退出\n\tloginOut() {\n    var url = this.props.location.pathname\n    if (/^\\/member/.test(url) || /^\\/order/.test(url) || /^\\/payorder/.test(url)) {\n      this.props.history.push('/')  // 跳转到主页\n    }\n\t\tsetAuthToken(false); // axios token 头清除，localStorage token清除\n\t\tsetCurrentUser({}); // dispatch 当前空用户\n\t}\n\trender() {\n\t\tconst auth = this.props.auth;\n\t\tconst hello = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>哈，欢迎来到优选</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/login\">请登录</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/register\">免费注册</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\tconst userinfo = (<ul className=\"ul-l\">\n\t\t\t\t\t\t<li>Hi，<Link to=\"/member\">{auth.user.nickname}</Link></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a onClick={this.loginOut.bind(this)} href=\"javascript:void(0)\">退出</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>)\n\t\treturn (\n\t\t\t<div className=\"app-header-wrap\">\n\t\t\t\t<div className=\"app-header\">\n\t\t\t\t\t{\n\t\t\t\t\t\tauth.isLogin ?\n\t\t\t\t\t\tuserinfo :\n\t\t\t\t\t\thello\n\t\t\t\t\t}\n\t\t\t\t\t<ul className=\"ul-r\">\n            <li><Link to=\"/\">优选首页</Link></li>\n\t\t\t\t\t\t<li className=\"h-my\">\n              <Link to=\"/member\">我的优选</Link>\n              <div className=\"h-my-choi\">\n                <div><Link to=\"/member/safety\">安全设置</Link></div>\n                <div><Link to=\"/member\">个人资料</Link></div>\n                <div><Link to=\"/member/myorder\">我的订单</Link></div>\n                <div><Link to=\"/member/address\">收货地址</Link></div>\n              </div>\n            </li>\n\n            {\n              !auth.isLogin || (auth.isLogin && auth.user.isSeller !== 1) ? (\n                <li className=\"h-my\">\n                  <a href=\"/seller/panel\">商家支持</a>\n                    <div className=\"h-my-choi\">\n                      <div><a href=\"/seller/register\">注册商家</a></div>\n                      <div><a href={this.state.chooseUrl.management}>管理端下载</a></div>\n                  </div>\n                </li>) : (\n                  <li className=\"h-my\">\n                      <a href=\"/seller/panel\">卖家中心</a>\n                      <div className=\"h-my-choi\">\n                        <div><a href=\"/seller/panel/wait_send\">待发货宝贝</a></div>\n                        <div><a href=\"/seller/panel/in_seller\">出售中宝贝</a></div>\n                        <div><a href={this.state.chooseUrl.management}>管理端下载</a></div>\n                    </div>\n                  </li>\n                )\n            }\n            <li className=\"h-my\">\n                <a href=\"javascript:void(0);\">联系客服</a>\n                <div className=\"h-my-choi\">\n                  <div><a href={this.state.chooseUrl.management}>管理端下载</a></div>\n              </div>\n            </li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nAppHeader.propTypes = {\n\tauth: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\nexport default withRouter(connect(mapStateToProps, null)(AppHeader))\n","/**\r\n * 轮播图组件\r\n */\r\nimport React,{Component} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport cnames from 'classnames'\r\nimport LazyLoad from 'react-lazyload'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass slide extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tslideboxs: null,\r\n\t\t\t// 轮播图图片\r\n\t\t\tslideImg: [\r\n        {goodId: 43, bgimg: '/image/slide_wall/TB1fxrzI3HqK1RjSZFkSut.WFXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 45, bgimg: '/image/slide_wall/TB1FmwTvHZnBKNjSZFGSuvt3FXa.jpg', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 48, bgimg: '/image/slide_wall/O1CN01Tms3Pn1D7tpGbFK5a_!!170-0-luban.jpg_q100.jpg_.webp', bgcolor: '#CA1124', load: false},\r\n\t\t\t\t{goodId: 49, bgimg: '/image/slide_wall/TB1wbKtvIfpK1RjSZFOSuu6nFXa.jpg', bgcolor: '#584BFB'},\r\n\t\t\t\t{goodId: 42, bgimg: '/image/slide_wall/TB13jplKCzqK1RjSZFHwu23CpXa.png', bgcolor: '#E8E8E8'},\r\n\t\t\t\t{goodId: 50, bgimg: '/image/slide_wall/TB10lfQxpzqK1RjSZSgSuwpAVXa.jpg', bgcolor: '#E9EAEC'}\r\n\t\t\t],\r\n      load: {0: true, 1: false, 2: false, 3: false, 4: false, length: 5},\r\n\t\t\tslideStop: false,  // 是否停止轮播图\r\n\t\t\tslideIndex: 0,  // 轮播图索引\r\n\t\t\tslideInterval: -1,  // 主定时器\r\n      slideTimeout: -1\r\n\t\t}\r\n\t\tthis.slideAnimate = this.slideAnimate.bind(this);\r\n\t\tthis.gotoSlide = this.gotoSlide().bind(this);\r\n\t\tthis.slideStart = this.slideStart.bind(this);\r\n\t\tthis.slideStop = this.slideStop.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n    if (typeof window !== 'object') return;\r\n\t\t// 组件挂载完毕,获取轮播图组件，开启轮播图\r\n\t\tthis.setState({\r\n\t\t\tslideboxs: window.document.getElementsByClassName(\"slide-img-box\")\r\n\t\t}, () => {\r\n\t\t\tthis.state.slideboxs[this.state.slideIndex].style.opacity = 1;\r\n\t\t\tvar _this = this;\r\n\t\t\tvar slideInterval = window.setInterval(function(){\r\n\t\t\t\tif (!_this.state.slideStop)\r\n\t\t\t\t\t_this.slideAnimate();\r\n\t\t\t}, 5000);\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideInterval\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t// 组件卸载\r\n\tcomponentWillUnmount() {\r\n    if (typeof window !== 'object') return;\r\n      // 清除轮播图主定时器\r\n    window.clearInterval(this.state.slideInterval);\r\n    window.clearTimeout(this.state.slideTimeout);\r\n\t}\r\n\t// 动画切换函数，before 消失，next 显示\r\n\tslideAnimate(next) {\r\n\t\tvar before = this.state.slideIndex;\r\n\t\tif (next === undefined) {next = ((before + 1) % this.state.slideboxs.length)};\r\n    if (!this.state.load[next]) { // 延时加载轮播图片\r\n      this.state.slideboxs[next].getElementsByClassName('slide-img-box-i')[0].setAttribute('src', HOST + this.state.slideImg[next].bgimg)\r\n    }\r\n\t\tvar _this = this;\r\n\t\tvar slideboxs = this.state.slideboxs;\r\n\t\tvar beforeOpa = 1,nextOpa = 0;\r\n\t\t// 开始动画\r\n\t\tvar interval = window.setInterval(function() {\r\n\t\t\tbeforeOpa -= 0.2; nextOpa += 0.2;\r\n      // 组件卸载后定时器未及时清除\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = beforeOpa;\r\n        slideboxs[next].style.opacity = nextOpa;\r\n      }\r\n\t\t}, 50);\r\n\t\t// 停止动画，完成转换\r\n\t\tvar slideTimeout = window.setTimeout(function() {\r\n\t\t\twindow.clearInterval(interval);\r\n      if (slideboxs[before] && slideboxs[next]) {\r\n        slideboxs[before].style.opacity = 0;\r\n        slideboxs[next].style.opacity = 1;\r\n        slideboxs[before].style.zIndex = -1;\r\n        slideboxs[next].style.zIndex = 5;\r\n      }\r\n\t\t\t// 更新显示索引\r\n      _this.setState({\r\n        slideIndex: next,\r\n        slideTimeout: slideTimeout,\r\n        load: {..._this.state.load, [next]: true}\r\n      });\r\n\t\t}, 200);\r\n\t}\r\n\t// 切换动画索引\r\n\tgotoSlide() {\r\n\t\tvar time = 0,timeout = null;\r\n\t\treturn function (e) {\r\n\t\t\twindow.clearTimeout(timeout);\r\n\t\t\t// this.slideStop();\r\n\t\t\tvar nowtime = new Date();\r\n\t\t\tvar _this = this;\r\n\t\t\tvar index = Number(e.currentTarget.getAttribute('index'));\r\n\t\t\tif (nowtime - time > 500) {\r\n\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\ttime = nowtime;\r\n\t\t\t}else {\r\n\t\t\t\ttimeout = window.setTimeout(function(){\r\n\t\t\t\t\tif (index !== _this.state.slideIndex)\r\n\t\t\t\t\t\t_this.slideAnimate(index);\r\n\t\t\t\t\t\ttime = nowtime;\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\t// 停止动画\r\n\tslideStop(){\r\n\t\tif (!this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t// 开启动画\r\n\tslideStart() {\r\n\t\tif (this.state.slideStop) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tslideStop: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tvar slideImg = this.state.slideImg;\r\n\t\treturn(\r\n\t\t<div className=\"nav-slide-wrap\" onMouseLeave={this.slideStart}>\r\n\t\t{/*轮播图图片*/}\r\n\t\t{\r\n\t\t\tslideImg.map((item,i) => (\r\n\t\t\t\t<div key={i} className=\"slide-img-box\" style={{backgroundColor: item.bgcolor}}>\r\n          <Link to={`/product_detail?goodId=${item.goodId}`}>\r\n              <img className=\"slide-img-box-i\" src={i === 0 ? `${HOST}${item.bgimg}` : null}\r\n              onMouseOver={this.slideStop}\r\n              ></img>\r\n          </Link>\r\n\t\t\t\t</div>\r\n\t\t\t))\r\n\t\t}\r\n\t\t\t{/*小按钮*/}\r\n\t\t\t<ul className=\"slide-nav\">\r\n\t\t\t{\r\n\t\t\t\tslideImg.map((_, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={index}\r\n\t\t\t\t\t\t\tclassName={cnames(\"slide-nav-item\",{\r\n\t\t\t\t\t\t\t\t'slide-nav-selected': index === this.state.slideIndex\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\tonMouseOver={this.gotoSlide}\r\n\t\t\t\t\t\t></li>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n\t}\r\n}\r\n\r\nexport default slide\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport classnames from 'classnames'\r\n\r\nfunction SmaillType(props) {\r\n\tvar smaillType = props.smaillType || [];\r\n\treturn (\r\n\t\t<div className=\"smaillType\">\r\n\t\t{\r\n\t\t\tsmaillType.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={item._id} className=\"smaill-item\">\r\n\t\t\t\t\t\t<div className=\"smaill-item-title\">{item.smaillName}</div>\r\n\t\t\t\t\t\t<div className=\"smaill-detail\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.detail.map(detail => {\r\n\t\t\t\t\t\t\t\treturn (<div className=\"sd-item\" key={detail._id}>\r\n                  <Link className={classnames({\r\n                    [`color${props.bigTypeIndex}`]: Math.random() > 0.75\r\n                  })} to={`/search_products?detailId=${detail._id}`}>{detail.detailName}</Link>\r\n                </div>)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SmaillType;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport axios from 'axios'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport config from '../../../utils/config'\r\nimport { transPrice } from '../../../utils/tools'\r\n\r\nconst HOST = config.HOST\r\n\r\nfunction splitProductName(name) {\r\n  if (typeof(name) !== 'string') return ''\r\n  return name.length < 20 ? name : name.substring(0, 19) + '...'\r\n}\r\n\r\nclass ProductBox extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      products: [],\r\n      loading: true,\r\n      success: true\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (!/^[1-9]\\d*$/.test(this.props.productBigTypeId)) return;\r\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=9&bigId=${this.props.productBigTypeId}`)\r\n      .then(({data}) => {\r\n        console.log('懒加载', data)\r\n        if (!data.success) {\r\n          return this.setState({\r\n            loading: false,\r\n            success: false,\r\n          })\r\n        }\r\n        this.setState({\r\n          success: true,\r\n          loading: false,\r\n          products: data.payload.products\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          loading: false,\r\n          success: false,\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"rec-item\" style={{background: `url(${HOST}/image/ui/${this.props.productBackImage}) left top no-repeat`}}>\r\n      <h3 className=\"rec-item-tit\" style={{\r\n        color: this.props.color\r\n      }}>{ this.props.productBigType }</h3>\r\n      {\r\n        this.state.loading ? <div>加载中</div> :\r\n        !this.state.success ? <div>加载失败</div> :\r\n        this.state.products.length === 0 ? <div>商品为空</div> : (\r\n          this.state.products.map((product, index) => (\r\n            <div className=\"rec-i-item\" key={index}>\r\n              <div className=\"rec-i-item-wrap\">\r\n                <div className=\"rec-i-logo\"><Link to={`/product_detail?goodId=${product._id}`}><img src={`${HOST}/image/goods/logo/${product.logo}_210x210q90.jpg`}/></Link></div>\r\n                <div className=\"rec-i-name\"><Link to={`/product_detail?goodId=${product._id}`}>\r\n                  <p title={product.goodName}>{splitProductName(product.goodName)}</p>\r\n                </Link></div>\r\n                <div className=\"rec-i-number\">购买次数: <span className=\"rec-i-number-font\">{product.number}</span></div>\r\n                <div className=\"rec-i-price\">￥{transPrice(product.nowPrice)}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )\r\n      }\r\n    </div>\r\n  }\r\n}\r\n\r\nProductBox.propTypes = {\r\n  productBigTypeId: PropTypes.number.isRequired,\r\n  productBigType: PropTypes.string.isRequired,\r\n  productBackImage: PropTypes.string.isRequired\r\n}\r\n\r\nexport default ProductBox\r\n","import React from 'react'\n\nimport './index.scss'\n// import { FILE_HOST } from '../../config/config.js'\nimport config from '../../utils/config.js'\n\nconst FILE_HOST = config.HOST\n\nfunction gotoTop() {\n  if (typeof window !== 'object') return;\n  var height = document.documentElement.scrollHeight\n  var ms = 9\n  var interval = setInterval(function() {\n    document.documentElement.scrollTop = height / 10 * ms\n    ms --\n  }, 50)\n  setTimeout(function() {\n    clearInterval(interval)\n    document.documentElement.scrollTop = 0\n  }, 500)\n}\n\nconst Footer = (props) => {\n  const theme = {\n    bgColor: '#fff'\n  }\n  return (\n    <div style={{backgroundColor: theme.bgColor}} className=\"footer-wrap\">\n      <div className=\"foot-box\">\n        <div className=\"foot-name\">\n          <div className=\"ni-box f_wrap\">\n            <div className=\"foot-ni f_L\">北大青鸟</div>\n            <div className=\"foot-ni f_L\">成都智谷校区</div>\n            <div className=\"foot-ni f_L\">T121</div>\n            <div className=\"foot-ni f_L\">叶谱</div>\n            <div className=\"foot-ni f_L\">周围</div>\n            <div className=\"foot-ni f_L\" style={{border: 0}}>唐铭佑</div>\n          </div>\n        </div>\n        <div className=\"foot-sec\">\n          <a href=\"javascript:void(0)\">关于优选</a>\n          <a href=\"javascript:void(0)\">合作伙伴</a>\n          <a href=\"javascript:void(0)\">营销中心</a>\n          <a href=\"javascript:void(0)\">廉正举报</a>\n          <a href=\"javascript:void(0)\">联系客服</a>\n          <a href=\"javascript:void(0)\">开放平台</a>\n          <a href=\"javascript:void(0)\">诚征英才</a>\n          <a href=\"javascript:void(0)\">联系我们</a>\n          <a href=\"javascript:void(0)\">网站地图</a>\n          <a href=\"javascript:void(0)\">法律声明</a>\n          <a href=\"javascript:void(0)\">隐私权政策</a>\n          <a href=\"http://118.126.108.36\">© 2019 ChoicePerfect.com</a>\n          <a href=\"javascript:void(0)\">版权所有</a>\n        </div>\n        <div className=\"copyright f_wrap\" onClick={gotoTop}>\n          <div className=\"logo-bdqn f_L\"><img align=\"absmiddle\" title=\"返回顶部\" src={`${FILE_HOST}/image/ui/bdqn.png`} alt=\"北大青鸟\"/></div>\n          <div className=\"copy f_r\">@2019 北大青鸟成都智谷</div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default Footer\n","import React, {Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport axios from 'axios'\nimport cnames from 'classnames'\nimport { connect } from 'react-redux'\nimport Lazyload from 'react-lazyload'\n\nimport { setSearchKeyAction } from '../../flux/actions/productActions'\nimport { alertMessageAction } from '../../flux/actions/messageAction'\n// import { setRouterLocationAction } from '../../flux/actions/authActions'\n\nimport './home.scss'\nimport config from '../../utils/config.js'\nimport { transSearchKeyword } from '../../utils/tools'\nimport AppHeader from '../../components/Header'\nimport Slide from './subpage/Slide'\nimport SmaillType from './subpage/SmaillType'\nimport ProductBox from './subpage/ProductBox'\nimport Footer from '../../components//Footer/'\n\nclass Home extends Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\t// 大分类信息\n\t\t\tbigType:[],\n\t\t\tselectedBigid: -1, // -1 不展示，其他为 bigType的 id\n      bigTypeIndex: -1,\n      searchKey: '',\n      recommendProducts: [\n        {bigId: 3, type: '女鞋 男鞋 箱包', bgImg: 'nvxie.jpg', color: 'rgb(255,95,95)'},\n        {bigId: 6, type: '手机 数码 电脑办公', bgImg: 'shouji_shuma_recommend.jpg', color: '#fff'},\n        {bigId: 2, type: '男装 运动户外', bgImg: 'yundong.jpg', color: 'rgb(199,56,56)'},\n        {bigId: 10, type: '大家电 生活电器', bgImg: 'dajiadian.jpg', color: '#fff'},\n      ],\n      navTop: [\n        {tit: '游戏本', detailId: 390},\n        {tit: '休闲裤', detailId: 1167},\n        {tit: '短袖衬衫', detailId: 1157},\n        {tit: '夹克', detailId: 1140},\n        {tit: '耳机', detailId: 423},\n        {tit: 'VR眼镜', detailId: 396},\n        {tit: '双肩背包', detailId: 113},\n        {tit: '健身服', detailId: 110},\n      ],\n\t\t}\n\t\tthis.onBigTypeSelect = this.onBigTypeSelect.bind(this);\n\t\tthis.CurrentSmaillType = this.CurrentSmaillType.bind(this);\n\t}\n\tcomponentWillMount() {\n    // this.props.setRouterLocationAction('/')\n    if (typeof(window) === 'object') {  // 从本地储存取出\n      var bigType = localStorage.getItem('productType')\n      if (bigType) {\n        try {\n          bigType = JSON.parse(bigType)\n          return this.setState({\n            bigType\n          })\n        }catch(err) {\n          console.error('bigType', err)\n        }\n      }\n    }\n\t\t// 获取大分类表中数据\n\t\taxios.get(config.HOST + '/api/goods/type?type=big&limit=16')\n\t\t\t.then(res => {\n\t\t\t\tif (!res.data.success) {\n\t\t\t\t\treturn console.error('商品分类列表获取失败');\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tbigType: res.data.payload\n\t\t\t\t}, () => {\n          if (typeof(window) === 'object') {\n            localStorage.setItem('productType', JSON.stringify(res.data.payload))\n          }\n        });\n\t\t\t})\n\t\t\t.catch(err => {\n        if (typeof(window) === 'object')\n\t\t\t\t  console.error(err);\n\t\t\t});\n\t}\n\n  componentDidMount() {\n    window.document.title = '优选--ChoicePerfect'\n  }\n\n\t// 设置或获取 state的bigType 的 smaillType\n\tCurrentSmaillType(bigid, smaillType, getSmaill = false) {\n\t\tvar bigType = this.state.bigType\n\t\tif (bigType.length === 0) return;\n\t\tfor (var i = 0,len = bigType.length; i < len; i++) {\n\t\t\tif (bigType[i]._id === bigid) {\n\t\t\t\t// 获取smaillType\n\t\t\t\tif (getSmaill) {\n\t\t\t\t\treturn bigType[i].smaillType\n\t\t\t\t}\n        // 存储到本地储存中\n        if (typeof(window) === 'object' && !bigType[i].smaillType) {\n          bigType[i].smaillType = smaillType\n          localStorage.setItem('productType', JSON.stringify(this.state.bigType))\n        }else {\n          bigType[i].smaillType = smaillType\n        }\n\t\t\t\t// 设置 smaillType\n\t\t\t\tthis.setState({\n\t\t\t\t\tbigType: bigType\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n  // 获取小分类表\n\tonBigTypeSelect(e) {\n\t\t// showsmaill => true\n    var target = e.currentTarget\n\t\tvar bigid = Number(target.getAttribute('bigid'));\n    var index = target.getAttribute('index')\n\t\tthis.setState({\n\t\t\tselectedBigid: bigid,\n      bigTypeIndex: index\n\t\t}, () => {\n      var bigType = this.state.bigType.find(i => i._id === bigid)\n      if (Array.isArray(bigType.smaillType)) return; // 小分类已存在\n\n      axios.get(config.HOST + '/api/goods/type?type=smaill&bigid=' + bigid)\n        .then(res => {\n          if (!res.data.success) return;\n          this.CurrentSmaillType(bigid, res.data.payload);\n        })\n        .catch(err => {\n          console.error(err);\n        })\n    })\n\t}\n\n\tonBigTypeLeave(){\n\t\tthis.setState({selectedBigid: -1});\n\t}\n  searchInputChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    })\n  }\n  searchProduct(e) {\n    e.preventDefault();\n    var keyword = transSearchKeyword(this.state.searchKey)\n    if (!keyword) {\n      return this.props.alertMessageAction('请输入搜索的内容')\n    }\n    this.props.setSearchKeyAction(this.state.searchKey)\n    this.props.history.push(`/search_product?q=${keyword}&limit1=0&limit2=50`)\n  }\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"home-body\">\n\t\t\t\t<AppHeader />\n\t\t\t\t<div className=\"headerCon\">\n\t\t\t\t\t<form onSubmit={this.searchProduct.bind(this)}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"search-text\"\n              value={this.state.searchKey}\n              onChange={this.searchInputChange.bind(this)}\n\t\t\t\t\t\t\tplaceholder=\"搜索 优选 商品/品牌/店铺\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type=\"submit\" className=\"search-btn\">搜索</button>\n\t\t\t\t\t</form>\n\t\t\t\t\t<ul className=\"hot-query\">\n\t\t\t\t\t{/*搜索框下面展示*/}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.navTop.map((item, index) => (\n              <li key={index}>\n                <Link to={`/search_product?detailId=${item.detailId}`}>{item.tit}</Link>\n              </li>\n            ))\n\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main-nav\">\n\t\t\t\t\t<ul className=\"nav-t-wrap\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.navTop.map((item, i) => (<li key={i}><Link to={`/search_product?detailId=${item.detailId}`}>{item.tit}</Link></li>))\n\t\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t\t{/*商品主分类*/}\n\t\t\t\t\t<div className=\"nav-l-box\">\n\t\t\t\t\t\t<div className=\"main-logo-wrap\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<a href={config.HOST}>\n\t\t\t\t\t\t\t\t\t<img width=\"240px\" height=\"130px\" src={config.HOST + \"/image/ui/home_logo.png\"} alt=\"优选\"/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"nav-l-wrap\" onMouseLeave={this.onBigTypeLeave.bind(this)}>\n\t\t\t\t\t\t\t<div className=\"nav-l-title\">商品分类</div>\n\t\t\t\t\t\t\t<div className=\"nav-l-typewrap\">\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.bigType.map((item, index) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\t\t\tclassName={cnames(`nav-l-item`, {\n\t\t\t\t\t\t\t\t\t\t\t'nav-l-item-sel': this.state.selectedBigid === item._id,\n                      [`color${index}`]: this.state.selectedBigid === item._id,\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tbigid={item._id}\n                    index={index}\n\t\t\t\t\t\t\t\t\t\tonMouseOver={this.onBigTypeSelect}\n\t\t\t\t\t\t\t\t\t>{item.bigName}</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.selectedBigid === -1 ? null :\n\t\t\t\t\t\t\t\t<SmaillType bigTypeIndex={this.state.bigTypeIndex} smaillType={this.CurrentSmaillType(this.state.selectedBigid,null,true)} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*轮播图组件，传递slideImg图片组*/}\n\t\t\t\t\t<Slide />\n\t\t\t\t</div>\n        <div className=\"product-box\">\n          <div className=\"product_recomment_wrap\">\n            {\n              // 懒加载推荐商品组件\n              this.state.recommendProducts.map((item, index) => (\n                <Lazyload key={index} height={600} offset={100}>\n                  <ProductBox\n                    color={item.color}\n                    productBigTypeId={item.bigId}\n                    productBigType={item.type}\n                    productBackImage={item.bgImg} />\n                </Lazyload>)\n              )\n            }\n          </div>\n        </div>\n        <Footer />\n\t\t\t</div>\n\t\t)\n\t}\n}\n//setRouterLocationAction\nexport default connect(null, { setSearchKeyAction, alertMessageAction })(Home);\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport config from '../../../utils/config'\r\n\r\nconst HOST = config.HOST\r\n\r\nconst RegisterSuccess = (props) => {\r\n  return <div>\r\n    <div style={{textAlign: 'center', marginTop: '30px'}}><span className=\"main_font1\">优选注册</span></div>\r\n    <div className=\"regi-success\">\r\n      <div className=\"rs-tit-logo\"><img src={`${HOST}/image/ui/success.png`} alt=\"\"/></div>\r\n      <div className=\"rs-in-wrap\">\r\n        <div className=\"rs-tit\">\r\n          <div className=\"rs-tit-info\">恭喜注册成功，你的账户为：</div>\r\n        </div>\r\n        <div className=\"rs-logname\">登录名：<span className=\"rs-logname-imp\">{props.phone}</span></div>\r\n        <div className=\"rs-nickname\">会员名：{props.nickname}</div>\r\n        <div className=\"rs-operator\">\r\n          <div className=\"rs-to-home\"><Link to=\"/\">去逛逛</Link></div>\r\n          <div className=\"rs-to-log\"><Link to=\"/login\">现在去登录</Link></div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n}\r\n\r\nRegisterSuccess.propTypes = {\r\n  phone: PropTypes.string.isRequired,\r\n  nickname: PropTypes.string.isRequired,\r\n}\r\nexport default RegisterSuccess\r\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport classnames from 'classnames'\n\nimport config from '../../utils/config'\nimport { alertMessageAction } from '../../flux/actions/messageAction'\n\nimport './index.scss'\nimport Success from './subpage/Success'\n\nconst HOST = config.HOST\n\nvar sendingSMS = false\nvar waitSecond = 59\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      nickname: '',\n      phone: '',\n      smscode: '',\n      password: '',\n      password2: '',\n      registerSuccess: false,\n      edit: '',\n      errors: {}\n    }\n    this.inputTextChange = this.inputTextChange.bind(this)\n    this.inputTextFocus = this.inputTextFocus.bind(this)\n    this.inputTextBlur = this.inputTextBlur.bind(this)\n  }\n\n  componentDidMount() {\n    window.document.title = '优选--账户注册'\n  }\n\n  inputTextChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  inputTextFocus(e) {\n    this.setState({\n      edit: e.target.name,\n      errors: {...this.state.errors, [e.target.name]: ''}\n    })\n  }\n\n  inputTextBlur(e) {\n    if (this.state.edit === e.target.name) {\n      this.setState({ edit: '' })\n    }\n  }\n\n  sendSMS(e) {\n    if (sendingSMS) {\n      return this.props.alertMessageAction(`请等待 ${waitSecond} 秒后重新发送`)\n    }\n    if (!/^1\\d{10}$/.test(this.state.phone)) {\n      return this.setState({errors: {...this.state.errors, smscode: '手机号格式有误'}})\n    }\n    var target = e.currentTarget\n    target.style.backgroundColor = 'rgb(226,225,225)'\n    target.style.color = 'rgba(148,139,139)'\n    waitSecond = 59\n    var interval = setInterval(function() {\n      target.innerText = `再次发送(${waitSecond})`\n      waitSecond--\n      if (waitSecond <= 0){\n        clearInterval(interval)\n        sendingSMS = false\n        target.innerText = '获取验证码'\n        target.style.backgroundColor = ''\n        target.style.color = ''\n      }\n    }, 1000)\n    sendingSMS = true\n    axios.post(`${HOST}/api/operator/sms`, {phone: this.state.phone})\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({\n            errors: {...this.state.errors, smscode: res.data.message}\n          })\n        }\n        this.props.alertMessageAction('短信发送成功，请查收')\n      })\n      .catch(err => {\n        this.setState({\n          errors: {...this.state.errors, smscode: err.message}\n        })\n      })\n  }\n\n  registerSubmit(e) {\n    e.preventDefault()\n    var errors = {}\n    // return console.log(SparkMD5.hash(this.state.password))\n    if (!/^[^0-9][\\w\\W]{2,10}$/.test(this.state.nickname)) {\n      errors.nickname = '昵称格式有误'\n    }\n    if (!/^1\\d{10}$/.test(this.state.phone)) {\n      errors.phone = '手机号格式有误'\n    }\n    if (!/^\\d{5,6}$/.test(this.state.smscode)) {\n      errors.smscode = '验证码格式有误'\n    }\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\n      errors.password = '密码格式有误，6-20位，可包含,\\';)(!~·`/\\\\{}\"<>?+-=_.特殊字符'\n    }else if (this.state.password2 !== this.state.password) {\n      errors.password2 = '两次输入密码不一致'\n    }\n    if (this.state.password2 === '') {\n      errors.password2 = '请再次输入密码'\n    }\n    if (Object.keys(errors).length > 0) {\n      return this.setState({ errors: errors })\n    }\n    axios.post(`${HOST}/api/users/register`, {\n      nickname: this.state.nickname,\n      phone: this.state.phone,\n      smscode: this.state.smscode,\n      password: this.state.password\n    }).then(res => {\n      if (!res.data.success) {\n        return this.setState({\n          errors: {submit: res.data.message}\n        })\n      }\n      // 注册成功\n      this.setState({\n        registerSuccess: true,\n        password: '',\n        password2: '',\n        smscode: ''\n      })\n    }).catch(err => {\n      this.setState({\n        errors: {submit: '发生了错误：' + err.message}\n      })\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <div id=\"head0\">\n          <div id=\"head1\">\n            <div className=\"head_left\"><Link to=\"/\"><img src={`${HOST}/image/ui/home_logo.png`} /></Link></div>\n            <div className=\"head_right\"><span className=\"font_sty1\">你好，欢迎光临优选！</span><Link to=\"/login\"><span className=\"font_sty2\">请登陆</span></Link><span className=\"font_sty3\">帮助中心</span></div>\n          </div>\n        </div>\n        {\n          this.state.registerSuccess ? <Success nickname={this.state.nickname} phone={this.state.phone} /> : <div id=\"main0\">\n            <div id=\"main1\">\n              <form onSubmit={this.registerSubmit.bind(this)} method=\"POST\">\n                <ul>\n                  <li><span className=\"main_font1\">优选注册</span></li>\n                  <li>\n                    <input\n                      onChange={this.inputTextChange}\n                      onFocus={this.inputTextFocus}\n                      onBlur={this.inputTextBlur}\n                      value={this.state.nickname}\n                      autoComplete=\"off\"\n                      className={classnames(\"main_li2\", {\n                        'regi-inp-err': this.state.errors.nickname\n                      })} type=\"text\" name=\"nickname\" placeholder=\"用户名\"\n                    ></input>\n                    {\n                      this.state.edit === \"nickname\" ? <div className=\"regi-hint\">2-10位字符组成，不能以数字开头</div> :\n                      this.state.errors.nickname && <div className=\"regi-err\">{this.state.errors.nickname}</div>\n                    }\n                  </li>\n                  <li>\n                    <input\n                      onChange={this.inputTextChange}\n                      onFocus={this.inputTextFocus}\n                      onBlur={this.inputTextBlur}\n                      value={this.state.phone}\n                      className={classnames(\"main_li2\", {\n                        'regi-inp-err': this.state.errors.phone\n                      })} type=\"text\" name=\"phone\" placeholder=\"手机号\"\n                      autoComplete=\"off\"\n                    ></input>\n                    {\n                      this.state.edit === \"phone\" ? <div className=\"regi-hint\">输入手机号</div> :\n                      this.state.errors.phone && <div className=\"regi-err\">{this.state.errors.phone}</div>\n                    }\n                  </li>\n                  <li className=\"li_3\">\n                    <input\n                      onChange={this.inputTextChange}\n                      onFocus={this.inputTextFocus}\n                      onBlur={this.inputTextBlur}\n                      value={this.state.smscode}\n                      className={classnames(\"main_li3\", {\n                        'regi-inp-err': this.state.errors.smscode\n                      })} type=\"text\" name=\"smscode\" placeholder=\"验证码\"\n                      autoComplete=\"off\"\n                    ></input>\n                    <div onClick={this.sendSMS.bind(this)} className=\"main_yz\">获取验证码</div>\n                    {\n                      this.state.edit === \"smscode\" ? <div className=\"regi-hint\">输入短信验证码</div> :\n                      this.state.errors.smscode && <div className=\"regi-err\">{this.state.errors.smscode}</div>\n                    }\n                  </li>\n                  <li>\n                    <input\n                      onChange={this.inputTextChange}\n                      onFocus={this.inputTextFocus}\n                      onBlur={this.inputTextBlur}\n                      value={this.state.password}\n                      className={classnames(\"main_li4\", {\n                        'regi-inp-err': this.state.errors.password\n                      })} type=\"password\" name=\"password\" placeholder=\"密码\"\n                    ></input>\n                    {\n                      this.state.edit === \"password\" ? <div className=\"regi-hint\">6-20位字母数字，可包含,\\';)(!~·`\\/\\\\{}\"&lf;&gt;?+-=_.特殊字符</div> :\n                      this.state.errors.password && <div className=\"regi-err\">{this.state.errors.password}</div>\n                    }\n                  </li>\n                  <li>\n                    <input\n                      onChange={this.inputTextChange}\n                      onFocus={this.inputTextFocus}\n                      onBlur={this.inputTextBlur}\n                      value={this.state.password2}\n                      className={classnames(\"main_li4\", {\n                        'regi-inp-err': this.state.errors.password2\n                      })} type=\"password\" name=\"password2\" placeholder=\"确认密码\"\n                    ></input>\n                    {\n                      this.state.edit === \"password2\" ? <div className=\"regi-hint\">请再次输入密码</div> :\n                      this.state.errors.password2 && <div className=\"regi-err\">{this.state.errors.password2}</div>\n                    }\n                  </li>\n                  <li><span className=\"main_li6\">点击注册，表示您同意优选<a href=\"javascript:void(0);\" className=\"main_li6a\">《服务协议》</a></span></li>\n                  <li>\n                    <button type=\"submit\" className=\"main_li7\">同意协议并注册</button>\n                    {\n                      this.state.errors.submit && <div className=\"regi-err\">{this.state.errors.submit}</div>\n                    }\n                  </li>\n                  <li><div className=\"main_li8\"><span className=\"main_li8_1\">沪ICP备13044278号丨合字B1.B2-20130004丨营业执照</span><span className=\"main_li8_2\">Copyright&copy; 周围 叶谱 唐铭佑 2018-2019，ALL Rights Reserved</span></div></li>\n                </ul>\n              </form>\n            </div>\n          </div>\n        }\n\n      </div>\n    )\n  }\n}\n\nexport default connect(null, { alertMessageAction })(Register)\n","import React from 'react'\nimport axios from 'axios'\nimport {connect} from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { withRouter } from 'react-router-dom'\nimport SparkMD5 from 'spark-md5'\n// import JSEncrypt from 'jsencrypt'\n\nimport config from '../../../utils/config.js'\nimport { alertMessageAction } from '../../../flux/actions/messageAction'\nimport {setAuthToken, setCurrentUser} from '../../../utils/setAuth'\nimport { isEmpty } from '../../../utils/validator'\nconst HOST = config.HOST\n\nvar loging = false // 判断账户是否在登录中\n\nclass Account extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: '',\n      password: '',\n      errors: {}\n    }\n    this.inputChange = this.inputChange.bind(this);\n    this.inputFocus = this.inputFocus.bind(this);\n  }\n\n  componentDidMount() {\n    window.document.title = '优选--账户登录'\n  }\n\n  inputChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  inputFocus(e) {\n    this.setState({\n      errors: {...this.state.errors, [e.target.name]: ''}\n    })\n  }\n\n  formSubmit(e) {\n    e.preventDefault()\n    if (loging) {\n      return this.props.alertMessageAction('账户验证中')\n    }\n    let errors = {};\n    if (isEmpty(this.state.account)) {\n      errors.account = '账号不能为空';\n    }\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\n      errors.password = '密码格式有误';\n    }\n\n    if (Object.keys(errors).length > 0) {\n      return this.setState({\n        errors: errors\n      })\n    }\n    loging = true\n    var target = this.refs.submit\n    target.innerText = '登录中。。。'\n\n    axios.get(`${HOST}/api/users/rsa_public?account=${this.state.account}`)\n    .then(({ data }) => {\n      if (!data.success) {\n        return this.setState({\n          errors: { submit: data.message }\n        })\n      }\n      // 使用md5加密，再用公钥加密后传输密码\n      var encrypt = new window.JSEncrypt()\n      encrypt.setPublicKey(data.payload)\n      let password = encrypt.encrypt(SparkMD5.hash(this.state.password))\n      // let password = SparkMD5.hash(this.state.password)\n      axios.post(`${HOST}/api/users/login`, {\n        account: this.state.account,\n        password\n      }).then(({ data }) => {\n        loging = false\n        if (!data.success) {\n          return this.setState({\n            errors: { submit: data.message }\n          })\n        }\n        setAuthToken(data.payload.token)\n        setCurrentUser(data.payload.user)\n        this.props.history.push(this.props.prev)\n\n      }).catch(err => {\n        loging = false\n        target.innerText = '登录'\n        this.setState({\n          errors: { submit: err.message || '服务器忙' }\n        })\n      })\n\n    }).catch(err => {\n      loging = false\n      target.innerText = '登录'\n      this.setState({\n        errors: { submit: err.message || '服务器忙' }\n      })\n    })\n  }\n  render() {\n    return (\n      <div>\n        <form className=\"l-input-wrap\" onSubmit={this.formSubmit.bind(this)} method=\"POST\">\n          <div className=\"log-input1\">\n            <label htmlFor=\"account\" style={{\n              background: `url(${HOST}/image/ui/${this.state.errors.account ? 'account_failed.png' : 'account.png'}) center center / 30px 30px no-repeat`\n            }}></label>\n            <input\n              onFocus={this.inputFocus}\n              onChange={this.inputChange}\n              value={this.state.account}\n              placeholder=\"昵称 / 手机号码\"\n              name=\"account\"\n              id=\"account\"\n              autoComplete=\"off\"\n              type=\"text\"/>\n          </div>\n          {\n            this.state.errors.account && <div className=\"acc-log-err\">{this.state.errors.account}</div>\n          }\n          <div className=\"log-input2\">\n            <label htmlFor=\"password\" style={{\n              background: `url(${HOST}/image/ui/${this.state.errors.password ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\n            }}></label>\n            <input\n              onFocus={this.inputFocus}\n              type=\"password\"\n              placeholder=\"密码\"\n              name=\"password\"\n              id=\"password\"\n              onChange={this.inputChange}\n              value={this.state.password}\n            />\n          </div>\n          {\n            this.state.errors.password && <div className=\"acc-log-err\">{this.state.errors.password}</div>\n          }\n          <input ref=\"submit\" className=\"account-log-submit\" type=\"submit\" value=\"登录\"/>\n          {\n            this.state.errors.submit && <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\n          }\n        </form>\n      </div>\n    )\n  }\n}\nAccount.propTypes = {\n  auth: PropTypes.object.isRequired,\n}\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth\n  }\n}\nexport default withRouter(connect(mapStateToProps, { alertMessageAction })(Account))\n","import React from 'react'\nimport axios from 'axios'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport config from '../../../utils/config.js'\nimport { setAuthToken, setCurrentUser } from '../../../utils/setAuth'\nimport { isPhone } from '../../../utils/validator'\n\n/**\n * 发送手机号到 sms接口，\n * 手机号合法 md5存储验证码并返回，\n * 登录发送手机号验证码，服务端入数据库匹配成功返回 token\n */\nconst HOST = config.HOST\n\nvar waitSMS = 59\nvar sendingSMS = false\n\nclass PhoneLogin extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tphone: '',\n\t\t\tsms: '',\n\t\t\terrors: {}\n\t\t}\n\t\tthis.inputChange = this.inputChange.bind(this);\n\t}\n\n  componentDidMount() {\n    window.document.title = '优选--手机登录'\n  }\n\n\tinputChange(e) {\n\t\tthis.setState({\n\t\t\t[e.target.name]: e.target.value\n\t\t});\n\t}\n\n\tsendSMS(e) {\n    if (sendingSMS) {\n      return this.props.alertMessageAction(`请 ${waitSMS} 秒后重试`)\n    }\n\t\tif (!isPhone(this.state.phone)) {\n\t\t\treturn this.setState({\n\t\t\t\terrors: {\n\t\t\t\t\t...this.state.errors,\n\t\t\t\t\tphone: '手机号码错误'\n\t\t\t\t}\n\t\t\t})\n\t\t}\n    var target = e.currentTarget\n    waitSMS = 59\n    sendingSMS = true\n    target.style.backgroundColor = '#eee'\n    var interval = setInterval(function() {\n      target.innerText = `再次发送(${waitSMS})`\n      waitSMS --\n      if (waitSMS === 0) {\n        clearInterval(interval)\n        target.innerText = '发送验证码'\n        target.style.backgroundColor = ''\n      }\n    }, 1000)\n\t\taxios.post(config.HOST + \"/api/operator/testsms\", {phone: this.state.phone})\n\t\t\t.then(({data}) => {\n        console.log(data);\n        if (!data.success) {\n          return this.setState({\n            errors: {...this.state.errors, sms: data.message}\n          })\n        }\n        this.props.alertMessageAction('发送成功请查收验证码')\n\t\t\t})\n\t\t\t.catch(err => {\n        this.setState({\n          errors: {...this.state.errors, msm: err.message || 'server busy'}\n        })\n\t\t\t});\n\t}\n\tsubmit() {\n\t\tlet errors = {};\n\t\tif (!isPhone(this.state.phone)) {\n\t\t\terrors.phone = '手机号格式有误'\n\t\t}\n    if (!/^[1-9]\\d{5}$/.test(this.state.sms)) {\n\t\t\terrors.sms = '验证码格式有误'\n\t\t}\n\t\tif (Object.keys(errors).length > 0) {\n\t\t\treturn this.setState({\n\t\t\t\terrors: errors\n\t\t\t})\n\t\t}\n\t\t// 格式验证成功\n\t\tconst user = {phone: this.state.phone, sms_code: this.state.sms}\n\t\taxios.post(config.HOST + '/api/users/phonelogin', user)\n\t\t\t.then(res => {\n\t\t\t\tif (!res.data.success) {\n\t\t\t\t\treturn this.setState({\n\t\t\t\t\t\terrors: {\n\t\t\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t\t\tsubmit: res.data.message\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// 验证通过\n\t\t\t\tsetAuthToken(res.data.payload.token) // 请求头附加 token\n\t\t\t\tsetCurrentUser(res.data.payload.user)\n        this.props.history.push(this.props.prev)\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({\n\t\t\t\t\terrors: {\n\t\t\t\t\t\t...this.state.errors,\n\t\t\t\t\t\tsubmit: err.response ? err.response.message : '服务器忙'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"l-input-wrap\">\n\t\t\t\t<div className=\"log-input1\">\n\t\t\t\t\t<label htmlFor=\"phone\" style={{\n              background: `url(${HOST}/image/ui/${this.state.errors.phone ? 'mobile_failed.png' : 'mobile.png'}) center center / 30px 30px no-repeat`\n            }}></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"输入手机号码\"\n            autoComplete=\"off\"\n\t\t\t\t\t\tonChange={this.inputChange}\n\t\t\t\t\t\tvalue={this.state.phone}\n\t\t\t\t\t\tname=\"phone\"\n\t\t\t\t\t\tid=\"phone\"\n\t\t\t\t\t\ttype=\"text\"/>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tthis.state.errors.phone && <div className=\"acc-log-err\">{this.state.errors.phone}</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"log-input2\">\n\t\t\t\t\t<label htmlFor=\"sms\" style={{\n              background: `url(${HOST}/image/ui/${this.state.errors.sms ? 'lock_failed.png' : 'lock.png'}) center center / 30px 30px no-repeat`\n            }}></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tplaceholder=\"填写验证码\"\n\t\t\t\t\t\tonChange={this.inputChange}\n\t\t\t\t\t\tvalue={this.state.sms}\n\t\t\t\t\t\tname=\"sms\"\n\t\t\t\t\t\tid=\"sms\"\n\t\t\t\t\t\ttype=\"text\"/>\n\t\t\t\t\t<button className=\"log-sendsms\" onClick={this.sendSMS.bind(this)}>发送验证码</button>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tthis.state.errors.sms && <div className=\"acc-log-err\">{this.state.errors.sms}</div>\n\t\t\t\t}\n\t\t\t\t<input type=\"submit\" className=\"account-log-submit\" onClick={this.submit.bind(this)} value=\"登录\"/>\n\t\t\t\t{\n\t\t\t\t\tthis.state.errors.submit &&  <div className=\"acc-log-err acc-log-err-submit\">{this.state.errors.submit}</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nPhoneLogin.propTypes = {\n\tauth: PropTypes.object.isRequired\n}\nconst mapStateToProps = state => {\n\treturn {\n\t\tauth: state.auth\n\t}\n}\nexport default withRouter(connect(mapStateToProps)(PhoneLogin))\n","import React, {Component} from 'react'\nimport {Link, Route, Redirect} from 'react-router-dom'\nimport queryString from 'query-string'\nimport {connect} from 'react-redux'\nimport classnames from 'classnames'\n\nimport { transURL } from '../../utils/tools'\n\nimport './login.scss'\nimport AppHeader from '../../components/Header'\nimport Account from './subpage/Account'\nimport PhoneLogin from './subpage/PhoneLogin'\nimport Footer from '../../components/Footer'\n\nclass Login extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loginWay: 'phone',  // 登录方式，phone or account\n      prev: '/'\n    }\n  }\n  componentWillMount() {\n    var params = queryString.parse(this.props.location.search)\n    // 已登录，不能访问登录页面\n    if (this.props.isLogin) {\n      if (params.prev) {\n        return this.props.history.push(transURL(params.prev))\n      }\n      return this.props.history.push('/')\n    }\n    this.setState({\n      prev: params.prev ? transURL(params.prev, true) : '/'\n    })\n  }\n\n  changeLoginWay(way) {\n    if (way === this.state.loginWay) return;\n    this.setState({\n      loginWay: way\n    })\n  }\n\n\trender() {\n\t\t/**\n\t\t * v4 包含路由 和 精准路由\n\t\t */\n    if (this.props.isLogin === true) {  // 已登录带回原始路由\n      return <Redirect to={this.state.prev} />\n    }\n    var path = this.props.location.pathname\n\t\treturn (\n\t\t\t<div className=\"login-body\">\n        <AppHeader />\n\t\t\t\t<div className=\"login-wrap\">\n\t\t\t\t\t<div className=\"login-title\"></div>\n\t\t\t\t\t<div className=\"login-form\">\n\t\t\t\t\t\t<div className=\"form\">\n\t\t\t\t\t\t\t<div className=\"form-t\">\n                <div onClick={this.changeLoginWay.bind(this, 'phone')} className={this.state.loginWay === 'phone' ? 't-l f1' : 't-l f2'}>手机登录</div>\n                <div onClick={this.changeLoginWay.bind(this, 'account')} className={this.state.loginWay === 'account' ? 't-l f1' : 't-l f2'}>账户登录</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<main>\n                {\n                  this.state.loginWay === 'phone'\n                  ? <PhoneLogin prev={this.state.prev} />\n                  : <Account prev={this.state.prev} />\n                }\n\t\t\t\t\t\t\t</main>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n        <Footer />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n    isLogin: state.auth.isLogin\n\t}\n}\n\nexport default connect(mapStateToProps, null)(Login);\n","/**\n * 搜索页商品列表\n */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport config from '../../utils/config'\n\nimport { transPrice } from '../../utils/tools'\n\nimport './goods.scss'\n\nfunction splitName(name) {\n  if (name.length <= 50) return name;\n  return name.substring(0,50) + '...'\n}\n\nconst HOST = config.HOST\n\nconst SearchProductsList = (props) => {\n\n  var toChat = (userId, avatar, nickname) => {\n    return userId === props.userId ? null : <div\n      connectid={userId}\n      avatar={avatar}\n      nickname={nickname}\n      className=\"good-number-chat\">聊</div>\n  }\n\n  return (\n    <div  className=\"goodlist-wrap\">\n      {\n        props.products.map((product, index) => {\n          return (\n            <div className={classnames(\"good-wrap\", {\n              rowlast: (index + 1) % 5 === 0\n            })} key={index}>\n              <Link to={`/product_detail?goodId=${product._id}`}>\n                <div className=\"goodlogo-box\"><img src={`${HOST}/image/goods/logo/${product.logo}_210x210q90.jpg`} alt=\"\"/></div>\n              </Link>\n              <div className=\"good-price\"><span className=\"p_f1\">￥</span><span className=\"p_f2\">{transPrice(product.nowPrice)}</span></div>\n              <Link to={`/product_detail?goodId=${product._id}`}>\n                <div className=\"good-name\"><span>{splitName(product.goodName)}</span></div>\n              </Link>\n              <div className=\"good-store\"><span className=\"s_f1\">店铺：</span><span className=\"s_f2\">{product.storeName}</span></div>\n              <div className=\"good-number-box\">\n                <div className=\"good-number\">\n                  <span className=\"n_f1\">成交量：</span><span className=\"n_f2\">{product.number}笔</span>\n                </div>\n                {\n                  toChat(product.mid, product.avatar, product.nickname)\n                }\n              </div>\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}\n\nSearchProductsList.propTypes = {\n  products: PropTypes.array.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userId: state.auth.user.userId\n  }\n}\n\nexport default connect(mapStateToProps)(SearchProductsList)\n","import React from 'react'\nimport axios from 'axios'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\n\nconst HOST = config.HOST\n\nfunction subStoreName(name) {\n  if (typeof name !== 'string' || name.length < 6) return name;\n  return name.substring(0,5) + '...';\n}\nclass SubStore extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      stores: [],\n      detailTypes: []\n    }\n  }\n\n  // props.goods 参数更新, 根据 goods 请求 store 的信息\n  componentWillReceiveProps(nextProps) {\n    const goods = nextProps.goods\n    if (!Array.isArray(goods) || goods.length < 1) return;\n    // 根据detailType 请求 smaillType\n    axios.get(`${HOST}/api/goods/type?type=detail&detailId=${goods[0].detailId}`)\n      .then(res => {\n        if (res.data.success) {\n          this.setState({\n            detailTypes: res.data.payload\n          })\n        }\n      })\n      .catch(err => {\n        if (typeof(window) === 'object')\n          console.error(err)\n      })\n    // 获取 goods 中的 storeId\n    let storeIds = [];\n    storeIds.push(goods[0].storeId)\n    for (var i = 1, len = goods.length; i < len; i ++) {\n      var storeId = goods[i].storeId\n      var repeat = false\n        // 去重\n      for (var j = 0, len2 = storeIds.length; j < len2; j++) {\n        if (storeId === storeIds[j]) {\n          repeat = true\n          break\n        }\n      }\n      if (!repeat) storeIds.push(storeId)\n    }\n    // 请求 stores\n    if (storeIds.length < 1) return;\n    const jsonStoreIds = JSON.stringify(storeIds)\n    axios.get(`${HOST}/api/goods/search_store?storeIds=${jsonStoreIds}`)\n      .then(res => {\n        if (res.data.success) {\n          this.setState({\n            stores: res.data.payload\n          })\n        }\n      })\n      .catch(err => {\n        if (typeof(window) === 'object')\n          console.error(err)\n      })\n  }\n\n  render() {\n    var detail = this.state.detailTypes.find((detail, index) => {\n                    return detail.detailId === this.props.goods[0].detailId\n                  })\n    return (\n      <div className=\"substore\">\n        {\n          /*展示首页 > 小分类 > 详细分类s */\n          this.state.detailTypes.length > 0 && (\n            <div className=\"crum\">\n              <div className=\"crum-1\"><Link to=\"/\"><span>首页</span></Link></div>\n              <div className=\"crum-2\">\n                <Link to={`/search_product?smaillId=${this.state.detailTypes[0].smaillId}`}>\n                  <span>{this.state.detailTypes[0].smaillName}</span>\n                </Link>\n              </div>\n              <div  className=\"crum-3\">\n                <Link to={`/search_product?detailId=${this.props.goods[0].detailId}`}>\n                  <span>\n                  {\n                    detail ? detail.detailName : this.state.detailTypes[0].detailName\n                  }\n                  </span>\n                </Link>\n                <ul className=\"crum-details\">\n                {\n                  this.state.detailTypes.map((detailType, index) => (\n                    <li className=\"\" key={index}>\n                      <Link\n                        className={classnames({'crum-selected': detailType.detailId === this.props.goods[0].detailId})}\n                        to={`/search_product?detailId=${detailType.detailId}`}\n                      >{detailType.detailName}</Link>\n                    </li>\n                  ))\n                }\n                </ul>\n              </div>\n            </div>\n          )\n        }\n        {\n          this.state.stores.length > 0 && <div className=\"substore-logo-box\">\n            <div className=\"s-logo-title\">推荐店铺</div>\n            <div className=\"s-logo-wrap\">\n            {\n              /*展示店铺图片*/\n              this.state.stores.map((store, index) => {\n                if (index > 7) return null\n                return (\n                  <div className=\"s-logo-item\" key={index}>\n                    <div className=\"s-store-logo\"><img src={`${HOST}/image/store/logo/${store.logo}`} alt=\"\"/></div>\n                    <div className=\"s-store-name\"><Link to={`/search_product?storeId=${store._id}`}><span>{subStoreName(store.storeName)}</span></Link></div>\n                  </div>\n                )\n              })\n            }\n            </div>\n          </div>\n        }\n      </div>\n    )\n  }\n}\nSubStore.propTypes = {\n  goods: PropTypes.array.isRequired\n}\n\nexport default SubStore\n","import React, { Component } from 'react'\nimport axios from 'axios'\nimport queryString from 'query-string'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport config from '../../utils/config'\nimport { transSearchKeyword, transURL } from '../../utils/tools'\nimport { alertMessageAction, confirmMessageAction } from '../../flux/actions/messageAction'\nimport { contactItemToChatAction } from '../../flux/actions/chatActions'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport SearchProductsList from '../../components/Goods/SearchProductsList'\nimport SubStore from './subpage/SubStore'\nimport Loading from '../../components/PrivateRoute/subpage/WaitVerify'\nimport Footer from '../../components/Footer'\n\n// 获取浏览器视口的高度\nfunction getWindowHeight(){\n　　var windowHeight = 0;\n　　if(document.compatMode === \"CSS1Compat\"){\n　　　　windowHeight = document.documentElement.clientHeight;\n　　}else{\n　　　　windowHeight = document.body.clientHeight;\n　　}\n　　return windowHeight;\n}\n\n// 获取文档的总高度\nfunction getDocumentHeight(){\n　　var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;\n　　if(document.body){\n　　　　bodyScrollHeight = document.body.scrollHeight;\n　　}\n　　if(document.documentElement){\n　　　　documentScrollHeight = document.documentElement.scrollHeight;\n　　}\n　　scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;\n　　return scrollHeight;\n}\n// 滚动条在 Y 轴上的滚动距离\nfunction getScrollTop(){\n　　var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;\n　　if(document.body){\n　　　　bodyScrollTop = document.body.scrollTop;\n　　}\n　　if(document.documentElement){\n　　　　documentScrollTop = document.documentElement.scrollTop;\n　　}\n　　scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;\n　　return scrollTop;\n}\n\nconst HOST = config.HOST\n\nclass SearchProduct extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      condition: '?', //  搜索关键字\n      keyword: '',\n      limit: 0, // 搜索页数\n      end: false,  // 分页结束\n      products: [], // 搜索结果\n      length: -1,\n      loading: true,\n      errors: {}\n    }\n  }\n\n  componentWillMount() {\n    var condition = this.props.location.search\n    var search = queryString.parse(condition)\n\n    // 第一次请求 20 条数据，后面每次请求 10 条\n    condition = ''\n    if (search.q) {\n    // 1. 有关键字\n      condition += `&q=${encodeURIComponent(search.q)}`\n    }\n    if (/^[1-9]\\d*$/.test(search.storeId)) {\n    // 2. 有店铺 id\n      condition += `&storeId=${search.storeId}`\n    }else if (/^[1-9]\\d*$/.test(search.detailId)) {\n    // 3. 有详细分类 id\n      condition += `&detailId=${search.detailId}`\n    }else if (/^[1-9]\\d*$/.test(search.smaillId)) {\n    // 4. else 有小分类 id\n      condition += `&smaillId=${search.smaillId}`\n    }else if (/^[1-9]\\d*$/.test(search.bigId)) {\n    // 5. else 有大分类 id\n      condition += `&bigId=${search.bigId}`\n    }\n    if (condition === '') {\n      return this.setState({\n        loading: false,\n        condition: ''\n      })\n    }\n\n    if (search.q) {\n      this.setState({ keyword: search.q.replace(/\\+/g, ' ') })\n    }\n\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=20${condition}`)\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({\n            loading: false,\n            errors: { ...this.state.errors, search: res.data.message }\n          })\n        }\n        this.setState({\n          loading: false,\n          length: res.data.payload.length,\n          products: res.data.payload.products || [],\n          end: res.data.payload.end,\n          condition,\n          keyword: search.q ? search.q.replace(/\\+/g, ' ') : ''\n        }, () => {\n          this.props.history.push(`/search_products?limit1=0&limit2=10${condition}`)\n        })\n      })\n      .catch(err => {\n        this.setState({\n          loading: false,\n          errors: { ...this.state.errors, search: err.message }\n        })\n      })\n  }\n\n  componentDidMount() {\n    window.document.title = (this.state.keyword ? this.state.keyword + '-' : '') + '优选-ChoicePerfect'\n\n    // 如果商品有更多，往下滑一直加载\n    var _this = this\n    window.onscroll = function() {\n      if (!_this.state.end && !_this.state.loading && getScrollTop() + getWindowHeight() >= getDocumentHeight() - 200) {\n        // 先暂停后发送请求\n        _this.setState({\n          loading: true\n        }, function() {\n            var get = `limit1=${this.state.products.length}&limit2=10${this.state.condition}`\n            axios.get(`${HOST}/api/goods/search_product?${get}`)\n              .then(res => {\n                console.log(res)\n                if (!res.data.success) {\n                  return _this.setState({\n                    loading: false,\n                    errors: { ..._this.state.errors, search: res.data.message }\n                  })\n                }\n                _this.setState({\n                  loading: false,\n                  products: _this.state.products.concat(res.data.payload.products),\n                  end: res.data.payload.end,\n                  // limit: Number(_this.state.limit) + 1\n                }, function () {\n                  // if (res.data.payload.end) {\n                  //   window.onscroll = null\n                  // }\n                  _this.props.history.push(`/search_products?${get}`)\n                })\n              })\n              .catch(err => {\n                _this.setState({\n                    loading: false,\n                  errors: { ..._this.state.errors, search: err.message }\n                })\n              })\n        })\n      }\n    }\n\n    // 点击与店家卖家聊天\n    this.refs.productsWrap.onclick = function(e) {\n\n      var userId = e.target.getAttribute('connectid')\n      if (/^[1-9]\\d*$/.test(userId)) {\n        if (!_this.props.isLogin) {\n          return _this.props.confirmMessageAction('登录后与卖家聊天，现在登录吗？', function() {\n            _this.props.history.push('/login?prev=' + transURL(_this.props.location.pathname + _this.props.location.search))\n          })\n        }\n        var avatar = e.target.getAttribute('avatar')\n        var nickname = e.target.getAttribute('nickname')\n        if (avatar && nickname) {\n          contactItemToChatAction({ userId: parseInt(userId), avatar, nickname })\n        }\n      }\n    }\n\n  }\n\n  componentWillUnmount() {\n    window.onscroll = null\n  }\n\n  keywordChangeHandler(e) {\n    this.setState({\n      keyword: e.target.value\n    })\n  }\n\n  // 点击搜索关键字\n  searchProductSubmit(e) {\n    e.preventDefault()\n    if (this.state.keyword.trim() === '') {\n      return this.props.alertMessageAction('请输入要搜索的商品描述')\n    }\n    var condition = `&q=${transSearchKeyword(this.state.keyword)}`\n    axios.get(`${HOST}/api/goods/search_product?limit1=0&limit2=20${condition}`)\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({\n            errors: { ...this.state.errors, search: res.data.message }\n          })\n        }\n        this.setState({\n          length: res.data.payload.length || 0,\n          products: res.data.payload.products || [],\n          end: res.data.payload.end,\n          condition\n        }, () => {\n          this.props.history.push(`/search_products?limit1=0&limit2=20${condition}`)\n        })\n      })\n      .catch(err => {\n        this.setState({\n          errors: { ...this.state.errors, search: err.message }\n        })\n      })\n  }\n\n  render() {\n    if (!this.state.products) {\n      return <div><Header /><h2>发生了未知的错误</h2></div>\n    }\n    // 将 goods 20个一组进行分组\n    var group = this.state.products.reduce((prev, next) => {\n      if (prev.goods[prev.count].length >= prev.limit) {\n        prev.goods.push([next])\n        prev.count++\n      }else {\n        prev.goods[prev.count].push(next)\n      }\n      return prev\n    }, {count: 0, limit: 20, goods: [[]]})\n    var products = group.goods[0].length === 0 ? [] : group.goods\n\n    return (\n      <div>\n        <Header />\n        <div className=\"sear\">\n          <div className=\"sear-logo\"><Link to=\"/\"><img src={`${HOST}/image/ui/search_home_logo.png`} alt=\"\"/></Link></div>\n          <div className=\"sear-input-wrap\">\n            <form onSubmit={this.searchProductSubmit.bind(this)}>\n              <div>\n                <input value={this.state.keyword} onChange={this.keywordChangeHandler.bind(this)} placeholder=\"在此输入商品描述\" className=\"sear-input\" type=\"text\"/>\n              </div>\n              <div>\n                <button type=\"submit\" onClick={this.searchProductSubmit.bind(this)} className=\"com-search-btn\">搜索</button>\n              </div>\n            </form>\n          </div>\n        </div>\n        <div className=\"search-product\">\n          <hr className=\"search-hr\" />\n          {\n            this.state.products.length > 0 && <SubStore goods={this.state.products} />\n          }\n          {\n            this.state.length === 0 ? <div className=\"se-notfound\">没有搜索到\"<span className=\"se-not-f1\">{this.state.keyword}</span>\"相关的商品，为您推荐</div> : null\n          }\n          <div ref=\"productsWrap\">\n            { products.map((item, index) => <SearchProductsList products={item} key={index}/>) }\n          </div>\n          {\n            this.state.loading && <Loading message=\"努力加载中。。。\" />\n          }\n          {\n            this.state.condition === '' && <h2 style={{height: '200px', lineHeight: '200px'}}>搜索条件为空！</h2>\n          }\n        </div>\n        <Footer />\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    isLogin: state.auth.isLogin\n  }\n}\nexport default connect(mapStateToProps, { alertMessageAction, confirmMessageAction, contactItemToChatAction })(SearchProduct)\n\n","import React from 'react'\nimport { historyPush } from './index'\n\nclass GotoSearchProduct extends React.Component {\n  componentWillMount() {\n    this.props.history.push('/search_products' + this.props.location.search)\n  }\n  render() {\n    return (\n      <div>404</div>\n    )\n  }\n}\nexport default GotoSearchProduct\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { withRouter, Link } from 'react-router-dom'\n\nimport './index.scss'\nimport { contactItemToChatAction } from '../../flux/actions/chatActions'\nimport { alertMessageAction, confirmMessageAction } from '../../flux/actions/messageAction'\nimport { transSearchKeyword, transURL } from '../../utils/tools'\nimport config from '../../utils/config'\nconst HOST = config.HOST\n\nclass StoreHeader extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      searchKey: ''\n    }\n    this.onSearchInputChange = this.onSearchInputChange.bind(this)\n  }\n  onSearchInputChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    })\n  }\n  // 搜所有\n  searchAllProduct() {\n    if (this.state.searchKey === '')\n      return this.props.alertMessageAction('请输入要搜索的内容')\n    this.props.history.push(`/search_products?limit1=0&limit2=20&q=${transSearchKeyword(this.state.searchKey)}`)\n  }\n  // 搜本店\n  searchStoreProduct() {\n    if (this.state.searchKey === '')\n      return this.props.alertMessageAction('请输入要搜索的内容')\n    console.log(`/search_products?limit1=0&limit2=20&q=${transSearchKeyword(this.state.searchKey)}&storeId=${this.props.storeInfo.storeId}`)\n    this.props.history.push(`/search_products?limit1=0&limit2=20&storeId=${this.props.storeInfo.storeId}&q=${transSearchKeyword(this.state.searchKey)}`)\n  }\n\n  connectBoos() {\n    if (!this.props.isLogin) {\n      var _this = this\n      return _this.props.confirmMessageAction('登录后与卖家聊天，现在登录吗？', function() {\n        _this.props.history.push('/login?prev=' + transURL(_this.props.location.pathname + _this.props.location.search))\n      })\n    }\n    contactItemToChatAction({\n      userId: this.props.storeInfo.userId,\n      avatar: this.props.storeInfo.avatar,\n      nickname: this.props.storeInfo.nickname,\n    })\n  }\n\n  render() {\n    const storeInfo = this.props.storeInfo\n    return (\n      <div className=\"store-header\">\n          <div className=\"store-cp-logo\">\n            <Link to=\"/\">\n              <img src={`${HOST}/image/ui/storetitle.png`} height=\"60px\" />\n            </Link>\n          </div>\n        <div className=\"store-info-wrap\">\n          <div className=\"store-info-logo\">\n              <img height=\"60px\" src={`${HOST}/image/store/logo/${storeInfo.logo || 'default.jpg'}`} alt=\"优选\"/>\n          </div>\n\n          <div className=\"store-info\">\n            <p className=\"store-name\">店铺：{storeInfo.storeName}</p>\n            <div className=\"store-boos\">\n              <span>掌柜：{storeInfo.nickname}</span>\n              {\n                this.props.userId === storeInfo.userId ? null : <p onClick={this.connectBoos.bind(this)} title=\"点此和掌柜联系\" className=\"store-connect\"></p>\n              }\n            </div>\n          </div>\n        </div>\n        <div className=\"store-search\">\n          <div className=\"store-search-input\"><input value={this.state.searchKey} onChange={this.onSearchInputChange} type=\"text\"/></div>\n          <button style={{background: `url(\"${HOST}/image/ui/TB1ZWVhJpXXXXa4XVXXs1m4TXXX-458-36.png\") top right no-repeat`}} className=\"store-search-btn-all\" onClick={this.searchAllProduct.bind(this)}>搜索</button>\n          <button className=\"store-search-btn-this\" onClick={this.searchStoreProduct.bind(this)}>搜本店</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nStoreHeader.propTypes = {\n  storeInfo: PropTypes.object.isRequired,\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userId: state.auth.user.userId,\n    isLogin: state.auth.isLogin,\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, { alertMessageAction, confirmMessageAction })(StoreHeader))\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link, withRouter } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\nimport { transPrice, transURL } from '../../../utils/tools'\n\nimport { setBuyProductsAction } from '../../../flux/actions/orderActions'\nimport { alertMessageAction } from '../../../flux/actions/messageAction'\nimport socket from '../../../utils/socket'\n\nconst HOST = config.HOST\n\nvar initShopCar = true  // 记录是第一次更新购物车\n\nclass Spec extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      smaillx: 0,\n      smailly: 0,\n      bigImg: false, // 是否展示大图\n      showMustChoice: false,\n      selectImg: props.smaillPicture[0].link,\n      nowPrice: 99999,\n      allAmount: 0, // 商品总库存\n      specChoice: [],  // 选中的属性组合\n      choiceProductDetail: {},  // 选中属性组合的商品详情\n      choiceNumber: 1,\n      specConfig: [] // 重新组合后的属性关系映射\n    }\n    this.specValueClick = this.specValueClick.bind(this)\n    this.onSmaillMouseOver = this.onSmaillMouseOver.bind(this)\n  }\n\n  componentWillMount() {\n    if (this.props.shopCar.length > 0) { initShopCar = false } // 购物车已初始化\n    // 重新组合属性关系映射\n    var config = this.props.specConfig\n    var newConfig = []\n    if (Array.isArray(config)) {\n      for (var j = 0; j < config.length; j++) {\n        if (newConfig[config[j].detailIndex - 1] === undefined) {\n           newConfig[config[j].detailIndex - 1] = []\n        }\n        newConfig[config[j].detailIndex - 1][config[j].specNameIndex-1] = config[j].specValueIndex\n      }\n      // 计算总库存\n      var allAmount = 0\n      for (var i = 0, len = this.props.goodDetail.length; i < len; i++) {\n        allAmount += this.props.goodDetail[i].amount\n      }\n    }\n    // 删除库存为 0 属性\n    this.setState({\n      nowPrice: this.props.goodInfo.nowPrice || 99999,\n      specConfig: newConfig,\n      allAmount: allAmount,\n      selectImg: this.props.smaillPicture[0].link,\n      // 商品没有属性分类\n      choiceProductDetail: Array.isArray(this.props.specName) && this.props.specName.length > 0 ? {} : this.props.goodDetail[0]\n    })\n  }\n\n  componentDidMount() {\n    var wrap = document.getElementsByClassName('spec-wrap')[0]\n    var magnifier = this.refs.magnifier\n    var bigImageBox = this.refs.bigImageBox\n    var bigImage = this.refs.bigImage\n    var magnifyGlass = this.refs.magnifyGlass\n    if (!wrap || !magnifier || !bigImageBox || !bigImage || !magnifyGlass) return;\n    var _this = this\n    // 绑定放大镜事件\n    magnifier.onmouseover = function(e) {\n       // 页面滚动条卷去的\n      var scrollX = document.documentElement.scrollLeft\n      var scrollY = document.documentElement.scrollTop\n       // magnifier 加了 position 获取不到，只能取这个\n      var startX = wrap.offsetLeft\n      var startY = wrap.offsetTop\n      // 鼠标悬浮后这时才加载大图片\n      bigImage.setAttribute('src', `${HOST}/image/goods/smaill/${_this.state.selectImg}`)\n      bigImageBox.style.display = 'block'\n      magnifyGlass.style.display = 'block'\n\n      magnifier.onmousemove = function(e) {\n        var x = e.clientX + scrollX, y = e.clientY + scrollY, cx = x - startX, cy = y - startY\n        bigImage.style.left = '-' + parseInt((x - startX) / 420 * 100) + '%'\n        bigImage.style.top = '-' + parseInt((y - startY) / 430 * 100) + '%'\n        magnifyGlass.style.left = cx < 100 ? '0px' : cx > 320 ? '220px' : cx - 100 + 'px'\n        magnifyGlass.style.top = cy < 100 ? '0px' : cy > 320 ? '230px' : cy - 100 + 'px'\n\n      }\n\n      magnifier.onmouseleave = function() {\n        bigImageBox.style.display = 'none'\n        magnifyGlass.style.display = 'none'\n        magnifier.onmousemove = null\n        magnifier.onmouseleave = null\n      }\n    }\n\n  }\n\n\n  componentWillUnmount() {\n    this.refs.magnifier.onmouseover = null\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (initShopCar) {\n      initShopCar = false\n      return\n    }\n    let nowcount = this.props.shopCar.reduce((prev, next) => prev + next.products.length, 0)\n    var nextcount = nextProps.shopCar.reduce((prev, next) => prev + next.products.length, 0)\n    if (nowcount < nextcount) {\n      // 添加商品到购物车成功\n      this.props.alertMessageAction('添加成功，在购物车等 亲 >_<')\n    }\n  }\n\n  // 点击选择属性\n  specValueClick(value) {\n    var _this = this\n    return function () {\n      // 更新选择的属性\n      if (_this.state.specChoice[value.specNameIndex-1] === value.indexx) return;\n      var specChoice = [..._this.state.specChoice]\n      specChoice[value.specNameIndex-1] = value.indexx\n\n      // 更新选择的商品详情和价格\n      var specConfig = _this.state.specConfig\n      var choiceProductDetail = _this.state.choiceProductDetail\n      for (var i = 0, len = specConfig.length; i < len; i++) {\n        var isOK = true\n        for (var j = 0, len2 = specConfig[i].length; j < len2; j++) {\n          if (specChoice[j] !== specConfig[i][j]) {\n            isOK = false\n            break;\n          }\n        }\n        if (isOK) {\n          choiceProductDetail = _this.props.goodDetail.find(item => item.indexx === i+1)\n          break;\n        }\n      }\n      _this.setState({\n        specChoice,\n        choiceProductDetail\n      })\n    }\n  }\n\n  // 点击选择数量\n  choiceNumberChange(e) {\n    var number = e.target.value\n    var before = this.state.choiceNumber\n    var _this = this\n    this.setState({\n      choiceNumber: number\n    }, function () {\n      if (!/^[1-9]\\d{0,}$/.test(number)) {\n        setTimeout(function () {\n          _this.setState({\n            choiceNumber: /^[1-9]\\d{0,}$/.test(before) ? before : 1\n          })\n        }, 200)\n      }\n    })\n  }\n  // 数量减一\n  minusNumber() {\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) - 1} })\n  }\n  // 数量加一\n  plusNumber() {\n    this.choiceNumberChange({ target: {value: Number(this.state.choiceNumber) + 1} })\n  }\n  // 鼠标移到小图片上\n  onSmaillMouseOver(link) {\n    var _this = this\n    return function () {\n      _this.setState({\n        selectImg: link\n      })\n    }\n  }\n  // 关闭必须选择框\n  closeMustChoice() {\n    this.setState({\n      showMustChoice: false\n    })\n  }\n  buyNow() {\n    // 如果商品未选择，或选择数量大于库存量\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\n      return this.setState({\n        showMustChoice: true\n      })\n    }\n    // var buyProduct = [{\n    //   goodId: this.props.goodId,\n    //   productName: this.props.goodInfo.goodName,\n    //   specName: this.props.specName,\n    //   specValue: this.props.specValue,\n    //   specChoice: this.state.specChoice,\n    //   productDetail: this.state.choiceProductDetail,\n    //   number: this.state.choiceNumber,\n    //   storeName: this.props.storeInfo.storeName,\n    //   nickname: this.props.storeInfo.nickname\n    // }]\n    // specName: this.props.specName,\n    // specValue: this.props.specValue,\n    // specChoice: this.state.specChoice,\n    var buyProduct = [{\n      goodId: this.props.goodId,\n      goodName: this.props.goodInfo.goodName,\n      storeName: this.props.storeInfo.storeName,\n      storeId: this.props.storeInfo.storeId,\n      nickname: this.props.storeInfo.nickname,\n      number: this.state.choiceNumber,\n      goodDetailId: this.state.choiceProductDetail._id,\n      amount: this.state.choiceProductDetail.amount,\n      price: this.state.choiceProductDetail.price,\n      spec: this.state.specChoice.map((v, n) => ({\n        specName: this.props.specName[n].specName,\n        specValue: this.props.specValue.find(val => val.indexx === v).specValue\n      }))\n    }]\n    this.props.setBuyProductsAction(buyProduct)\n    this.props.history.push('/order')\n  }\n\n  // 添加到购物车\n  addShopCar() {\n    // 如果商品未选择，或选择数量大于库存量\n    if (this.state.choiceProductDetail.amount === undefined || this.state.choiceProductDetail.amount < this.state.choiceNumber) {\n      return this.setState({\n        showMustChoice: true\n      })\n    }\n    // 未登录跳转到登录页\n    if (!this.props.isLogin) {\n      let prev = transURL(this.props.location.pathname + this.props.location.search)\n      return this.props.history.push(`/login?prev=${prev}`)\n    }\n\n    if (socket.status !== 'open') {\n      return this.setState({\n        errors: {\n          ...this.state.errors,\n          addShopCar: '网络未连接'\n        }\n      })\n    }\n\n    // webSocket 发送添加购物车请求\n    socket.ws.send(JSON.stringify({\n      type: 'add_shopcar_product',\n      target: 'koa',\n      content: {\n        goodDetailId: this.state.choiceProductDetail._id,\n        number: this.state.choiceNumber\n      }\n    }))\n  }\n\n  render() {\n    const goodInfo = this.props.goodInfo\n    const smaillPicture = this.props.smaillPicture\n    return (\n      <div className=\"spec-wrap\">\n        {/*图片组*/}\n        <div className=\"spec-smail-picture-wrap\">\n          <div ref=\"magnifier\" className=\"spec-smail-bigone-wrap\">\n            <img className=\"spec-smail-bigone\" height=\"430px\" src={`${HOST}/image/goods/smaill/${this.state.selectImg}_430x430q90.jpg`}/>\n            <div ref=\"magnifyGlass\" style={{\n              position: 'absolute',\n              top: '0',\n              left: '0',\n              zIndex: '100',\n              width: '200px',\n              height: '200px',\n              display: 'none',\n              background: `url(${HOST}/image/ui/magnify_glass.png)`\n            }}></div>\n          </div>\n          <div className=\"spec-smaill-item-wrap\">\n            {\n              this.props.smaillPicture.map((item, index) => (\n                <div key={index} className=\"spec-priture-item\">\n                  <div className={this.state.selectImg === item.link ? \"spec-img-selected\" : \"spec-item-img-box\"}\n                      onMouseOver={this.onSmaillMouseOver(item.link)}\n                  >\n                    <img src={`${HOST}/image/goods/smaill/${item.link}_60x60q90.jpg`} alt=\"\"/>\n                  </div>\n                </div>\n              ))\n            }\n          </div>\n          <div ref=\"bigImageBox\" style={{display: 'none'}} className=\"sepc-bigglass\"><img ref=\"bigImage\" className=\"spec-bigimage\"/></div>\n        </div>\n        {/*spec属性信息*/}\n        <div className=\"spec-goodinfo\">\n          <h3 className=\"spec-good-name\">{goodInfo.goodName}</h3>\n          <div className=\"spec-good-price\" style={{background: `url(${HOST}/image/ui/price_background.png) left top`}}>\n            <span className=\"sgp-f1\">价格</span>\n            <span className=\"sgp-f2\">￥</span>\n            <span className=\"sgp-f3\">{transPrice(this.state.choiceProductDetail.price || this.state.nowPrice)}</span>\n          </div>\n          <div className=\"sell-count\">\n            <div className=\"sell-count-l\"><span className=\"sc-f1\">总销量</span><span className=\"sc-f2\">{goodInfo.number}</span></div>\n            <div className=\"sell-count-r\"><span className=\"sc-f1\">累计评价</span><span className=\"sc-f2\">{this.props.comments.length}</span></div>\n          </div>\n          <div className={classnames({\"show-choice\": this.state.showMustChoice})}>\n            <div style={{display: this.state.showMustChoice ? 'block':'none'}} className=\"show-choice-title\">\n              <div className=\"sct-l\">请选择您要的商品信息</div>\n              <div onClick={this.closeMustChoice.bind(this)} className=\"sct-r\">X</div>\n            </div>\n            {\n              this.props.specName && this.props.specName.map((name, index) => (\n                <div className=\"specName-wrap\" key={index}>\n                  <div className=\"spec-name\">{name.specName}</div>\n                  <div className=\"spec-value\">\n                  {\n                    this.props.specValue && this.props.specValue.map((value, index) => {\n                      return value.specNameIndex === name.indexx ?  (\n                        <div\n                          className={classnames('spec-value-item', {'value-item-selected':this.state.specChoice[name.indexx-1] === value.indexx})}\n                          onClick={this.specValueClick(value)}\n                          key={index}\n                        >\n                          <span>{value.specValue}</span>\n                          <i className=\"item-selected-i\" style={{\n                            background: `url(${HOST}/image/ui/background_selected.png) 0px 0px no-repeat`\n                          }}></i>\n                        </div>\n                      ) : null\n                    })\n                  }\n                  </div>\n                </div>\n              ))\n            }\n            <div className=\"g-num-wrap\">\n              <div className=\"good-number-name\">数量</div>\n              <div className=\"good-number-wrap\">\n                <div className=\"spec-num-input-wrap\">\n                  <input className=\"spec-number-input\" value={this.state.choiceNumber} onChange={this.choiceNumberChange.bind(this)} type=\"text\"/>\n\n                </div>\n                <div className=\"good-number-plus-minus\">\n                  <div onClick={this.plusNumber.bind(this)} className=\"spec-number-plus\" style={{background: `url(${HOST}/image/ui/plus.png) no-repeat`, backgroundSize: '11px 11px', marginBottom: '4px', border: '1px solid #a7a6ab'}}></div>\n                  <div onClick={this.minusNumber.bind(this)} className=\"spec-number-minus\" style={{background: `url(${HOST}/image/ui/minus.png) no-repeat`, backgroundSize: '11px 11px', border: '1px solid #a7a6ab'}}></div>\n                </div>\n              </div>\n              <div className=\"good-num-unit\">件</div>\n              <div className=\"good-num-kucun\">库存{this.state.choiceProductDetail.amount === undefined ? this.state.allAmount : this.state.choiceProductDetail.amount}件</div>\n            </div>\n            <div\n              style={{\n                display: this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount ? 'block' : 'none') : (this.state.choiceNumber > this.state.allAmount ? 'block' : 'none'),\n                marginTop: '10px',\n                marginLeft: '70px',\n              }}\n            >\n              <span className=\"good-num-over\">\n                <span style={{\n                  display: 'inline-block',\n                  background: `url(${HOST}/image/ui/msg.png) -61px -1px no-repeat`,\n                  width: '23px',\n                  height: '22px',\n                  marginBottom: '-5px'\n                }}></span>\n                <span>您所填写数量商品超过库存！</span>\n              </span>\n            </div>\n          </div>\n          <div className=\"good-buy-wrap\">\n            <button onClick={this.buyNow.bind(this)}\n              className={classnames(\"good-buy-now\", {\n                'buy-now-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\n              })} to=\"/\">立即购买</button>\n            <button onClick={this.addShopCar.bind(this)} className={classnames(\"add-shopcat\", {\n                'add-shopcat-noPost': this.state.choiceProductDetail.amount !== undefined ? (this.state.choiceNumber > this.state.choiceProductDetail.amount || this.state.choiceProductDetail.amount === 0) : (this.state.choiceNumber > this.state.allAmount)\n              })}>加入购物车</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nSpec.propTypes = {\n  goodId: PropTypes.string.isRequired,\n  goodDetail: PropTypes.array.isRequired,\n  goodInfo: PropTypes.object.isRequired,\n  smaillPicture: PropTypes.array.isRequired,\n  specConfig: PropTypes.array,\n  specName: PropTypes.array,\n  specValue: PropTypes.array,\n  comments: PropTypes.array.isRequired,\n  setBuyProductsAction: PropTypes.func.isRequired,\n  storeInfo: PropTypes.object.isRequired,\n  isLogin: PropTypes.bool.isRequired,\n  shopCar: PropTypes.array.isRequired,\n}\nfunction mapStateToProps(state) {\n  return {\n    isLogin: state.auth.isLogin,\n    shopCar: state.auth.shopCar,\n    goodDetail: state.product.productDetail.goodDetail,\n    goodInfo: state.product.productDetail.goodInfo,\n    smaillPicture: state.product.productDetail.smaillPicture,\n    specConfig: state.product.productDetail.specConfig,\n    specName: state.product.productDetail.specName,\n    specValue: state.product.productDetail.specValue,\n    comments: state.product.productDetail.comments,\n    goodId: state.product.productDetail.goodId,\n  }\n}\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction, alertMessageAction })(Spec))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport LazyLoad from 'react-lazyload'\nimport config from '../../../utils/config'\nimport { formatDate } from '../../../utils/tools'\nconst HOST = config.HOST\n\nclass ProductInfo extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showDetail: true,\n      showMagnify: false,\n      magnifyCommPicture: ''\n    }\n  }\n\n  showDetial(showDetail) {\n    return function() {\n      this.setState({\n        showDetail\n      })\n    }\n  }\n\n  commentPictureClick(e) {\n    var bigsrc = e.target.getAttribute('bigsrc')\n    if (bigsrc) {\n      if (this.state.magnifyCommPicture === bigsrc) {\n        return this.setState({ showMagnify: false, magnifyCommPicture: '' })\n      }\n      this.setState({\n        showMagnify: true,\n        magnifyCommPicture: bigsrc\n      })\n    }\n  }\n\n  hideMagnify() {\n    this.setState({ showMagnify: false, magnifyCommPicture: '' })\n  }\n\n  render() {\n    return (\n      <div className=\"product-info-wrap\">\n        <div className=\"product-info-box\">\n          <div className=\"product-info-nav\">\n            <div className={classnames(\"pin-1\", {\n              'product-info-selected': this.state.showDetail\n            })} onClick={this.showDetial(true).bind(this)}>商品详情</div>\n            <div className={classnames(\"pin-2\", {\n              'product-info-selected': !this.state.showDetail\n            })} onClick={this.showDetial(false).bind(this)}>累计评价<span className=\"spec-comment-count\">{this.props.comments.length}</span></div>\n          </div>\n          {\n            /*商品详情图*/\n            this.state.showDetail && this.props.infoPicture.map((item, index) => (\n              <div key={index} className=\"info-picture-item\">\n                <LazyLoad height={700} once>\n                  <img src={`${HOST}/image/goods/info/${item.link}`}/>\n                </LazyLoad>\n              </div>\n            ))\n          }\n          {\n            /*评论*/\n            this.props.comments.map((item, index) => (\n              <div className=\"f_wrap comm-item\" key={index}>\n                <div className=\"f_l\">\n                  <div className=\"comm-i-content\">{item.content}</div>\n                  <div className=\"f_wrap comm-i-pics\" onClick={this.commentPictureClick.bind(this)}>\n                    {\n                      item.pictures.map((pic, index) => (\n                        <div className=\"f_l comm-i-pic-i\" key={index}>\n                          <img src={`${HOST}/image/goods/comment/${pic}_w40.jpg`} bigsrc={pic}/>\n                        </div>\n                      ))\n                    }\n                  </div>\n                  <div className=\"comm-i-creaTime\">{formatDate(item.creaTime)}</div>\n                </div>\n                <div className=\"f_r f_wrap\">\n                  <div className=\"f_r comm-i-nickname\">{item.nickname}</div>\n                  <div className=\"f_r comm-spec-wrap\">\n                    {\n                      item.spec.map((item, index) => (\n                        <div className=\"comm-spec\" key={index}>\n                          <span className=\"comm-spec-name\">{item.name}：</span>\n                          <span className=\"comm-spec-val\">{item.value}</span>\n                        </div>\n                      ))\n                    }\n                  </div>\n                </div>\n              </div>\n            ))\n          }\n          {\n            <div className=\"comm-bigimg\" onClick={this.hideMagnify.bind(this)} style={{ display: this.state.showMagnify ? 'block' : 'none' }}>\n              <img src={`${HOST}/image/goods/comment/${this.state.magnifyCommPicture}`} />\n            </div>\n          }\n        </div>\n      </div>\n    )\n  }\n}\nProductInfo.propTypes = {\n  infoPicture: PropTypes.array.isRequired,\n  comments: PropTypes.array.isRequired,\n}\n\nexport default ProductInfo\n","import React from 'react'\nimport queryString from 'query-string'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport { setProductDetailAction } from '../../flux/actions/productActions'\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport StoreHeader from '../../components/StoreHeader'\nimport Spec from './subpage/Spec'\nimport ProductInfo from './subpage/ProductInfo'\nimport Footer from '../../components/Footer'\n\nclass ProductDetail extends React.Component {\n  componentWillMount() {\n    const info = queryString.parse(this.props.location.search)\n    // 没有 goodId 返回上一级路由\n    if (!/^\\d+/.test(info.goodId)) {this.props.history.push(this.props.auth.location || '/')}\n    this.props.setProductDetailAction(info.goodId)\n\n    this.props.setRouterLocationAction('/product_detail' + this.props.location.search)\n  }\n  componentWillUnmount() {\n    // 将 store 中的 productDetail，变成初始状态\n    this.props.setProductDetailAction(-1)\n  }\n  render() {\n    const product = this.props.productDetail\n    if (!product || !product.goodDetail) {\n      return <div>发生了意外的错误！</div>\n    }\n    return (\n      <div>\n        <Header />\n        {\n          product.goodDetail.length < 1 ?\n            <div>{product.error || product.message || '商品还没有详情'}</div> :\n            <div>\n              {/*店铺头信息*/}\n              <StoreHeader storeInfo={product.goodInfo} />\n              <hr className=\"store-hr\" />\n              {/*商品信息属性*/}\n              <Spec storeInfo={product.goodInfo} />\n              {/*商品介绍信息*/}\n              <ProductInfo comments={product.comments} infoPicture={product.infoPicture} />\n            </div>\n        }\n        <Footer />\n      </div>\n    )\n  }\n}\n\n\nProductDetail.propTypes = {\n  productDetail: PropTypes.object.isRequired,\n  setProductDetailAction: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    productDetail: state.product.productDetail\n  }\n}\nexport default connect(mapStateToProps, { setProductDetailAction,setRouterLocationAction })(ProductDetail)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport SparkMD5 from 'spark-md5'\n\nimport config from '../../../utils/config'\nimport { isEmail, isPhone } from '../../../utils/validator'\nconst HOST = config.HOST\n\nclass Safety extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      edit: '',  // email or phone or success or password\n      newEmail: '',\n      newPhone: '',\n      newPhone2: '',\n      smsCode1: '',\n      smsCode2: '',\n      password: '',\n      newPassword: '',\n      smsCode3: '',\n      smsState: 'normal', // wait or normal\n      property: 0,\n      pay: 100,  // 充值金额\n      showProperty: false,\n      errors: {}\n    }\n  }\n\n  componentDidMount() {\n    window.document.title = '我的优选-安全设置'\n  }\n\n  // 切换修改手机和修改邮箱\n  editChange(_, edit) {\n    this.setState({\n      edit: edit,\n      smsState: 'normal'\n    })\n  }\n\n  editInputChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  // 发短信\n  sendSMS(e) {\n    if (this.state.smsState !== 'normal') return;\n    const btn = e.target\n    var _this = this\n    axios.get(`${HOST}/api/operator/testsms`)\n      .then(res => {\n        console.log(res.data)\n        if (res.data.success) {\n          this.setState({smsState: 'wait'}, function() {\n            var count = 60\n            var interval = setInterval(function() {\n              count--\n              if (btn)\n                btn.innerText = `重发 ${count}...`\n              if (count == 0) {\n                clearInterval(interval)\n                _this.setState({smsState: 'normal'}, function() {\n                  if (btn)\n                    btn.innerText = '点击发送';\n                })\n              }\n            }, 1000)\n          })\n        }else {\n          this.setState({\n            errors: {...this.state.errors, [btn.name]: res.data.message}\n          })\n        }\n      })\n      .catch(err => {\n        this.setState({\n          errors: {...this.state.errors, [btn.name]: err.message}\n        })\n      })\n  }\n\n  // 修改邮箱\n  editEmailSubmit() {\n    var errors = {}\n    if (!isEmail(this.state.newEmail)) {\n      errors.newEmail = \"邮箱格式有误\"\n    }\n    if (!/^\\d{5,6}$/.test(this.state.smsCode1)) {\n      errors.smsCode1 = '验证码有误'\n    }\n    if (Object.keys(errors).length > 0) {\n      return this.setState({\n        errors\n      })\n    }\n    axios.post(`${HOST}/api/users/modify_safety`, {\n      newEmail: this.state.newEmail,\n      smsCode: this.state.smsCode1,\n    }).then(res => {\n      if (res.data.success) {\n        return this.setState({\n          edit: 'success',\n          newEmail: '',\n          smsCode1: '',\n          errors: {}\n        })\n      }\n      this.setState({\n        errors: {...this.state.errors, emailSubmit: res.data.message}\n      })\n    }).catch(err => {\n      this.setState({\n        errors: {...this.state.errors, phoneSubmit: err.message}\n      })\n    })\n  }\n\n  // 修改手机\n  editPhoneSubmit() {\n    var errors = {}\n    if (!isPhone(this.state.newPhone)) {\n      errors.newPhone = '手机格式有误'\n    }\n    if (this.state.newPhone !== this.state.newPhone2) {\n      errors.newPhone2 = '两次输入不一致'\n    }\n    if (!/^\\d{5,6}$/.test(this.state.smsCode2)) {\n      errors.smsCode2 = '验证码有误'\n    }\n    if (Object.keys(errors).length > 0) {\n      return this.setState({\n        errors\n      })\n    }\n    axios.post(`${HOST}/api/users/modify_safety`, {\n      newPhone: this.state.newPhone,\n      smsCode: this.state.smsCode2\n    }).then(res => {\n      if (!res.data.success) {\n        return this.setState({\n          errors: {...this.state.errors, phoneSubmit: res.data.message}\n        })\n      }\n      this.setState({\n        edit: 'success',\n        newPhone: '',\n        newPhone2: '',\n        smsCode2: '',\n        errors: {}\n      })\n    }).catch(err => {\n      this.setState({\n        errors: {...this.state.errors, phoneSubmit: err.message}\n      })\n    })\n  }\n\n  // 修改密码\n  editPasswordSubmit() {\n    var errors = {}\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.password)) {\n      errors.password = '密码格式有误，6-20位，可包含,\\';)(!~·`\\/\\\\{}\"<>?+-=_.特殊字符'\n    }\n    if (!/^[\\w,';)(!~·`\\/\\\\{}\"<>?+-=_.]{6,25}$/.test(this.state.newPassword)) {\n      errors.newPassword = '密码格式有误，6-20位，可包含,\\';)(!~·`\\/\\\\{}\"<>?+-=_.特殊字符'\n    }\n    if (!/^\\d{5,6}$/.test(this.state.smsCode3)) {\n      errors.smsCode3 = '验证码有误'\n    }\n    if (Object.keys(errors).length > 0) {\n      return this.setState({\n        errors\n      })\n    }\n    axios.post(`${HOST}/api/users/modify_safety`, {\n      password: SparkMD5.hash(this.state.password),\n      newPassword: this.state.newPassword,\n      smsCode: this.state.smsCode3\n    }).then(res => {\n      if (!res.data.success) {\n        return this.setState({\n          errors: {...this.state.errors, passwordSubmit: res.data.message}\n        })\n      }\n      this.setState({\n        edit: 'success',\n        password: '',\n        newPassword: '',\n        smsCode3: '',\n        errors: {}\n      })\n    })\n    .catch(err => {\n      this.setState({\n        errors: {...this.state.errors, passwordSubmit: err.message}\n      })\n    })\n  }\n\n  // 立即充值\n  paySubmit() {\n    console.log(this.state.pay)\n  }\n\n  // 查看余额\n  checkProperty() {\n    if (this.state.showProperty) return;\n    if (!this.state.property) {\n      axios.get(`${HOST}/api/users/get_property`)\n        .then(res => {\n          if (!res.data.success) {\n            this.setState({\n              errors: {...this.state.errors, property: res.data.message}\n            })\n          }\n          this.setState({\n            showProperty: true,\n            property: res.data.payload\n          })\n        })\n        .catch(err => {\n          this.setState({\n            errors: {...this.state.errors, property: err.message}\n          })\n        })\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"user-safe-wrap\">\n        <div className=\"uis-title\">你的基础信息</div>\n        <div>\n          <div className=\"uis-item\">\n            <span>会员名：</span>\n            <span>{this.props.user.nickname}</span>\n          </div>\n          <div className=\"uis-item\">\n            <span>登录邮箱：</span>\n            <span>{this.props.user.email || '空'}</span>\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"email\")}>修改邮箱</span>\n          </div>\n          <div className=\"uis-item\">\n            <span>绑定手机：</span>\n            <span>{this.props.user.phone}</span>\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"phone\")}>修改手机</span>\n          </div>\n          <div className=\"uis-item\">\n            <span>我的密码：</span>\n            <span className=\"uis-i-modify\" onClick={this.editChange.bind(this, null, \"password\")}>修改密码</span>\n          </div>\n          <div className=\"uis-item\">\n            <span>账户余额：</span>\n            {\n              this.state.showProperty\n              ? <span className=\"uis-i-property\">￥{this.state.property}</span>\n              : <span onClick={this.checkProperty.bind(this)} className=\"uis-i-modify\">点击查看</span>\n            }\n            <span onClick={this.editChange.bind(this, null, \"pay\")} className=\"uis-i-modify\">立即充值</span>\n          </div>\n          {\n            this.state.errors.property && <div className=\"tit-err\">{this.state.errors.property}</div>\n          }\n        </div>\n        <div className=\"uis-edit-wrap\">\n          {\n            this.state.edit === 'email' ? (  // 修改邮箱\n              <div>\n                <div className=\"uis-title\">修改您的邮箱</div>\n                <div className=\"uis-e-content uis-e-email\">\n                {\n                  /*this.props.user.email && <div className=\"uis-item uis-edit-item\">\n                    <label htmlFor=\"old-email\">*旧的邮箱：</label>\n                    <input onChange={this.editInputChange.bind(this)} name=\"oldEmail\" value={this.state.oldEmail} className=\"uis-modify-text\" id=\"old-email\" type=\"text\"/>\n                  </div>*/\n                }\n                  <div className=\"uis-item uis-edit-item\">\n                    <label htmlFor=\"new-email\">*新的邮箱：</label>\n                    <input onChange={this.editInputChange.bind(this)} name=\"newEmail\" value={this.state.newEmail}  className=\"uis-modify-text\" id=\"new-email\" type=\"text\"/>\n                  </div>\n                  {\n                    this.state.errors.newEmail && <div className=\"form-err\">{this.state.errors.newEmail}</div>\n                  }\n                  <div className=\"uis-sms-wrap\">\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code1\">*验证码：</label></div>\n                    <div className=\"uis-sms-item\">\n                      <input onChange={this.editInputChange.bind(this)} name=\"smsCode1\" value={this.state.smsCode1}  id=\"sms-code1\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\n                    </div>\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode1\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\n                  </div>\n                  {\n                    this.state.errors.smsCode1 && <div className=\"form-err\">{this.state.errors.smsCode1}</div>\n                  }\n                  <div className=\"uis-btn-submit\"><button onClick={this.editEmailSubmit.bind(this)}>提交</button></div>\n                  {\n                    this.state.errors.emailSubmit && <div className=\"form-err\">{this.state.errors.emailSubmit}</div>\n                  }\n                </div>\n              </div>\n            ) : this.state.edit === 'phone' ? (  // 修改手机号码\n              <div>\n                <div className=\"uis-title\">修改您的手机</div>\n                <div className=\"uis-e-content uis-e-phone\">\n                  <div className=\"uis-item uis-edit-item\">\n                    <label htmlFor=\"new-phone\">*新的手机号码：</label>\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone\" value={this.state.newPhone} className=\"uis-modify-text\" id=\"new-phone\" type=\"text\"/>\n                  </div>\n                  {\n                    this.state.errors.newPhone && <div className=\"form-err\">{this.state.errors.newPhone}</div>\n                  }\n                  <div className=\"uis-item uis-edit-item\">\n                    <label htmlFor=\"new-phone2\">*请再次输入以确认：</label>\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPhone2\" value={this.state.newPhone2} className=\"uis-modify-text\" id=\"new-phone2\" type=\"text\"/>\n                  </div>\n                  {\n                    this.state.errors.newPhone2 && <div className=\"form-err\">{this.state.errors.newPhone2}</div>\n                  }\n                  <div className=\"uis-sms-wrap\">\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code2\">*验证码：</label></div>\n                    <div className=\"uis-sms-item\">\n                      <input id=\"sms-code2\" onChange={this.editInputChange.bind(this)} value={this.state.smsCode2} name=\"smsCode2\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\n                    </div>\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode2\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\n                  </div>\n                  {\n                    this.state.errors.smsCode2 && <div className=\"form-err\">{this.state.errors.smsCode2}</div>\n                  }\n                  <div className=\"uis-btn-submit\"><button onClick={this.editPhoneSubmit.bind(this)}>提交</button></div>\n                  {\n                    this.state.errors.phoneSubmit && <div className=\"form-err\">{this.state.errors.phoneSubmit}</div>\n                  }\n                </div>\n              </div>\n            ): this.state.edit === 'password' ? (  // 修改密码\n              <div>\n                <div className=\"uis-title\">修改您的密码</div>\n                <div className=\"uis-e-content uis-e-phone\">\n                  <div className=\"uis-item uis-edit-item\">\n                    <label htmlFor=\"password\">*输入当前密码：</label>\n                    <input onChange={this.editInputChange.bind(this)} name=\"password\" value={this.state.password} className=\"uis-modify-text\" id=\"password\" type=\"password\"/>\n                  </div>\n                  {\n                    this.state.errors.password && <div className=\"form-err\">{this.state.errors.password}</div>\n                  }\n                  <div className=\"uis-item uis-edit-item\">\n                    <label htmlFor=\"newPassword\">*输入新的密码：</label>\n                    <input onChange={this.editInputChange.bind(this)} name=\"newPassword\" value={this.state.newPassword} className=\"uis-modify-text\" id=\"newPassword\" type=\"password\"/>\n                  </div>\n                  {\n                    this.state.errors.newPassword && <div className=\"form-err\">{this.state.errors.newPassword}</div>\n                  }\n                  <div className=\"uis-sms-wrap\">\n                    <div className=\"uis-sms-item\"><label htmlFor=\"sms-code3\">*验证码：</label></div>\n                    <div className=\"uis-sms-item\">\n                      <input id=\"sms-code3\" onChange={this.editInputChange.bind(this)} value={this.state.smsCode3} name=\"smsCode3\" placeholder={'发送到' + this.props.user.phone} className=\"uis-modify-sms\" type=\"text\"/>\n                    </div>\n                    <div onClick={this.sendSMS.bind(this)} name=\"smsCode3\" className=\"uis-sms-btn uis-sms-item\">点击发送</div>\n                  </div>\n                  {\n                    this.state.errors.smsCode3 && <div className=\"form-err\">{this.state.errors.smsCode3}</div>\n                  }\n                  <div className=\"uis-btn-submit\"><button onClick={this.editPasswordSubmit.bind(this)}>提交</button></div>\n                  {\n                    this.state.errors.passwordSubmit && <div className=\"form-err\">{this.state.errors.passwordSubmit}</div>\n                  }\n                </div>\n              </div>\n            ) : this.state.edit === 'pay' ? (\n              <div>\n                <div className=\"uis-title\">余额充值</div>\n                <div className=\"uis-item uis-edit-item\">\n                  <label htmlFor=\"pay\">*输入充值金额(￥)：</label>\n                  <input onChange={this.editInputChange.bind(this)} name=\"pay\" value={this.state.pay} className=\"uis-modify-text uis-pay-test\" id=\"pay\" type=\"number\"/>\n                </div>\n                {\n                  this.state.errors.pay && <div className=\"form-err\">{this.state.errors.pay}</div>\n                }\n                <div className=\"uis-btn-submit uis-btn-pay\"><button onClick={this.paySubmit.bind(this)}>立即付款</button></div>\n              </div>\n            ) : this.state.edit === 'success' ? (\n              <h3>修改成功</h3>\n            ) : null\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nSafety.propTypes = {\n  user: PropTypes.object.isRequired\n}\n\n\nconst mapStateToProps = state => ({\n   user: state.auth.user || {}\n })\n\nexport default connect(mapStateToProps)(Safety)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport PropTypes from 'prop-types'\n\nimport { getDate, formatDate } from '../../../utils/tools'\nimport { updateUserInfo } from '../../../flux/actions/authActions'\nimport { alertMessageAction } from '../../../flux/actions/messageAction'\nimport config from '../../../utils/config'\nconst HOST = config.HOST\n\nfunction transDate(date, type) {\n  if (typeof(date) !== 'string') return null;\n  date = new Date(date)\n  if (Number.isNaN(date.getDate())) return null;\n  if (type === 'year') return date.getFullYear()\n  if (type === 'month') return date.getMonth() + 1\n  if (type === 'day') return date.getDate()\n  return null\n}\n\nvar sending = false // 记录消息是否发送中\nclass MyInfo extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user: {},\n      birthDate: null,\n      birthMonth: null,\n      birthYear: null,\n      reallyName: '',\n      idCard: '',\n      avatar: '',\n      gender: -1,\n      years: [1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019],\n      month: [1,2,3,4,5,6,7,8,9,10,11,12],\n      days: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],\n      errors: {\n        message: ''\n      }\n    }\n    this.genderRadioChange = this.genderRadioChange.bind(this)\n    this.birthChange = this.birthChange.bind(this)\n    this.diff = this.diff.bind(this)\n  }\n\n  componentWillMount() {\n    // 请求个人资料\n    axios.get(`${HOST}/api/users/user_info`)\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({\n            errors: {...this.state.errors, message: res.data.message}\n          })\n        }\n        var user = res.data.payload.userInfo\n        this.setState({\n          birthYear: transDate(user.birth, 'year'), birthMonth: transDate(user.birth, 'month'), birthDate: transDate(user.birth, 'day'), avatar: user.avatar,\n          gender: user.gender,\n          user,\n        })\n      })\n      .catch(err => {\n        this.setState({\n          errors: {...this.state.errors, message: err.message}\n        })\n      })\n  }\n\n  componentDidMount() {\n    document.title = '我的优选-个人资料'\n  }\n\n  genderRadioChange(e) {\n    this.setState({\n      gender: parseInt(e.target.value)\n    })\n  }\n\n  reallyNameInputChange(e) {\n    this.setState({\n      reallyName: e.target.value\n    })\n  }\n\n  idCardInputChange(e) {\n    this.setState({\n      idCard: e.target.value\n    })\n  }\n\n  birthChange(e) {\n    var name = e.target.name\n    var value = e.target.value\n    var days = null\n    // 年份和日期已选择，计算天数\n    if (name === 'birthMonth' && this.state.birthYear) {\n      days = getDate(this.state.birthYear, value)\n\n    }else if (name === 'birthYear' && this.state.birthMonth) {\n      days = getDate(value, this.state.birthMonth)\n    }\n    this.setState({\n      [name]: Number(value),\n      days: days || this.state.days\n    })\n  }\n\n  avatarChange(e) {\n    var avatar = e.target.files[0]\n    var errors = {}\n    if (avatar && !/^image\\/(jpeg|png|gif|x-icon)$/.test(avatar.type)) {\n      errors.avatar = \"选择的文件类型不是图片\"\n    }\n    if (avatar && avatar.size > 5000000) {\n      errors.avatar = \"图片大小不能超过5M\"\n    }\n    if (Object.keys(errors).length > 0) {\n      return this.setState({\n        errors: {...this.state.errors, avatar: errors.avatar}\n      })\n    }\n\n    var formData = new FormData()\n    formData.append('picture', avatar)\n    formData.append('type', 'avatar')\n    axios.post(`${HOST}/api/users/save_chat_image`, formData)\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({\n            errors: {...this.state.errors, avatar: res.data.message}\n          })\n        }\n        this.setState({\n          avatar: res.data.payload\n        })\n      })\n      .catch(err => {\n        return this.setState({\n            errors: {...this.state.errors, avatar: err.message}\n          })\n      })\n  }\n\n  // 用户信息是否改变\n  diff() {\n    var birth = new Date(this.state.user.birth)\n    var diff = {}\n    if (this.state.reallyName !== \"\")\n        diff.reallyName = this.state.reallyName\n    if (this.state.idCard !== \"\")\n        diff.idCard = this.state.idCard\n    if (this.state.avatar !== this.state.user.avatar)\n        diff.avatar = this.state.avatar\n    if (this.state.gender !== this.state.user.gender)\n      diff.gender = this.state.gender\n    if (\n      this.state.birthYear !== birth.getFullYear() ||\n      this.state.birthMonth !== birth.getMonth() +1 ||\n      this.state.birthDate !== birth.getDate()\n    ) {\n      diff.birthYear = this.state.birthYear\n      diff.birthMonth = this.state.birthMonth\n      diff.birthDate = this.state.birthDate\n    }\n    return Object.keys(diff).length > 0 ? diff : false\n  }\n\n  formSubmit(e) {\n    e.preventDefault()\n    var diff = this.diff()\n    if (!diff) {\n      return;\n    }\n    if (sending) {\n      return this.props.alertMessageAction(\"更改中。。。\")\n    }\n    var errors = {}\n    if (diff.reallyName && !/^[\\u4e00-\\u9fa5]{2,5}$/.test(diff.reallyName)) {\n      errors.reallyName = '真实姓名格式有误'\n    }\n    if (diff.idCard && !/^\\d{18}$/.test(diff.idCard)) {\n      errors.idCard = '身份证格式有误'\n    }\n    if (diff.avatar && this.state.avatar !== \"default.jpg\" && !/^\\w{10}_\\d{8}\\.(jpg|jpeg|png|icon|gif)$/.test(diff.avatar)) {\n      errors.avatar = '头像有误'\n    }\n    if (diff.gender && !/^[012]$/.test(diff.gender)) {\n      errors.gender = '请选择性别'\n    }\n    if (diff.birthYear && (!/^(19|20)\\d{2}$/.test(diff.birthYear) || !/^([1-9]|1[012])$/.test(diff.birthMonth) || !/^([1-9]|[1-2][0-9]|3[01])$/.test(diff.birthDate))) {\n      errors.birth = '日期格式有误'\n    }else if (diff.birthYear) {\n      diff.birth = `${diff.birthYear}-${diff.birthMonth}-${diff.birthDate}`\n      delete diff.birthYear\n      delete diff.birthMonth\n      delete diff.birthDate\n    }\n    if (Object.keys(errors).length > 0) {\n      return this.setState({ errors })\n    }\n\n    sending = true\n    axios.post(`${HOST}/api/users/modify_userinfo`, diff)\n      .then(res => {\n        sending = false\n        if (!res.data.success) {\n          return this.setState({\n            errors: {...this.state.errors, submit: res.data.message}\n          })\n        }\n        var user = res.data.payload.userInfo\n        this.setState({\n          birthYear: transDate(user.birth, 'year'), birthMonth: transDate(user.birth, 'month'), birthDate: transDate(user.birth, 'day'), avatar: user.avatar,\n          gender: user.gender,\n          reallyName: '',\n          idCard: '',\n          user\n        }, () => {\n          this.props.alertMessageAction('修改成功！')\n          this.props.updateUserInfo(user)\n        })\n      })\n      .catch(err => {\n        sending = false\n        this.setState({\n          errors: {submit: err.message}\n        })\n      })\n  }\n\n  render() {\n    return (\n      <div className=\"my-info-wrap\">\n        <div className=\"mi-base-tit\">基本资料</div>\n        {\n          this.state.errors.message && <div className=\"mi-err\">{this.state.errors.message}</div>\n        }\n        <form className=\"mi-form\" name=\"baseInfoForm\" method=\"post\" onSubmit={this.formSubmit.bind(this)}>\n          <div className=\"mi-nickname\">\n            <span>亲爱的</span>\n            <span className=\"mi-nickname-b\">{this.state.user.nickname}</span>\n            <span>，填写真实的资料，有助于好友找到你哦。</span>\n          </div>\n          <div className=\"mi-avatar mi-item\">\n            <div className=\"mi-item-sub\">当前头像：</div>\n            <div className=\"mi-avatar-wrap mi-item-body\">\n              <img src={`${HOST}/image/member/avatar/${this.state.avatar}`} alt=\"当前头像\"/>\n              <div className=\"mi-avatar-btn\">\n                <input onChange={this.avatarChange.bind(this)} type=\"file\" hidefocus=\"true\"/>\n              </div>\n            </div>\n          </div>\n          {\n            this.state.errors.avatar && <div className=\"mi-err\">{this.state.errors.avatar}</div>\n          }\n          <div className=\"mi-reallyName mi-item\">\n            <div className=\"mi-r-a mi-item-sub\">真实姓名：</div>\n            <div className=\"mi-item-body mi-r-input\">\n              <input onChange={this.reallyNameInputChange.bind(this)} placeholder={this.state.user.reallyName} value={this.state.reallyName} type=\"text\"/>\n            </div>\n          </div>\n          {\n            this.state.errors.reallyName && <div className=\"mi-err\">{this.state.errors.reallyName}</div>\n          }\n          <div className=\"mi-reallyName mi-item\">\n            <div className=\"mi-r-a mi-item-sub\">身份证号：</div>\n            <div className=\"mi-item-body mi-r-input\">\n              <input onChange={this.idCardInputChange.bind(this)} placeholder={this.state.user.idCard} value={this.state.idCard} type=\"text\"/>\n            </div>\n          </div>\n          {\n            this.state.errors.idCard && <div className=\"mi-err\">{this.state.errors.idCard}</div>\n          }\n          <div className=\"mi-gender mi-item\">\n            <div className=\"mi-gender-l mi-item-sub\">性别：</div>\n            <div className=\"mi-gender-r mi-item-body\">\n              <label htmlFor=\"gender0\">\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 0} id=\"gender0\" value=\"0\" name=\"gender\" type=\"radio\"/>\n                男\n              </label>\n              <label htmlFor=\"gender1\">\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 1} id=\"gender1\" value=\"1\" name=\"gender\" type=\"radio\"/>\n                女\n              </label>\n              <label htmlFor=\"gender2\">\n                <input onChange={this.genderRadioChange} checked={this.state.gender === 2} id=\"gender2\" value=\"2\" name=\"gender\" type=\"radio\"/>\n                保密\n              </label>\n            </div>\n          </div>\n          {\n            this.state.errors.gender && <div className=\"mi-err\">{this.state.errors.gender}</div>\n          }\n          <div className=\"mi-birth-wrap mi-item\">\n            <div className=\"mi-item-sub\">生日：</div>\n            <div className=\"mi-birth-body mi-item-body\">\n              <select className=\"mi-birth-year\" onChange={this.birthChange} value={this.state.birthYear || '0'} name=\"birthYear\" id=\"birth_year\">\n                <option defaultValue=\"0\">年</option>\n                {\n                  this.state.years.map((year, index) => (\n                    <option key={index} defaultValue={year}>{year}</option>\n                  ))\n                }\n              </select>\n              <select onChange={this.birthChange} value={this.state.birthMonth || '0'} name=\"birthMonth\" id=\"birth_year\">\n                <option defaultValue=\"0\">月</option>\n                {\n                  this.state.month.map((month, index) => (\n                    <option key={index} defaultValue={month}>{month}</option>\n                  ))\n                }\n              </select>\n              <select onChange={this.birthChange} value={this.state.birthDate || '0'} name=\"birthDate\" id=\"birth_year\">\n                <option defaultValue=\"0\">日</option>\n                {\n                  this.state.days.map((day, index) => (\n                    <option key={index} defaultValue={day}>{day}</option>\n                  ))\n                }\n              </select>\n            </div>\n          </div>\n          {\n            this.state.errors.birth && <div className=\"mi-err\">{this.state.errors.birth}</div>\n          }\n          <div className=\"mi-reallyName mi-item\">\n            <div className=\"mi-r-a mi-item-sub\">最后登录时间：</div>\n            <div className=\"mi-item-body\">{formatDate(this.state.user.lastLogin, true)}</div>\n          </div>\n          {\n            !this.diff() ? null: <div>\n              <button type=\"submit\" className=\"mi-submit\">保存</button>\n              {\n                this.state.errors.submit ? <div className=\"mi-err\">{this.state.errors.submit}</div> : null\n              }\n            </div>\n\n          }\n        </form>\n      </div>\n    )\n  }\n}\n\nMyInfo.propTypes = {\n  user: PropTypes.object.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.auth.user || {}\n  }\n}\n\nexport default connect(mapStateToProps, { updateUserInfo, alertMessageAction })(MyInfo)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\nimport socket from '../../../utils/socket'\nimport {\n  isEmpty,\n  isPhone,\n  isLength,\n  isEmail\n} from '../../../utils/validator'\nimport { setRouterLocationAction } from '../../../flux/actions/authActions'\n\nconst HOST = config.HOST\n\nvar initState = {\n  editState: -1, // >-1编辑 || -1添加\n  detailAddress: '',\n  postcode: '',\n  receiveName: '',\n  receivePhone: '',\n  isDefault: false,\n  errors: {}\n}\n\nclass Address extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = initState\n  }\n  componentWillMount() {\n    this.props.setRouterLocationAction('/member/address')\n    // if (this.props.memberId === -1) return;\n    if (socket.status === 'open') {\n      socket.ws.send(JSON.stringify({\n        type: 'get_address'\n      }))\n    }\n  }\n\n  componentDidMount() {\n    window.document.title = '我的优选-收货地址'\n  }\n\n  setDefailtChange(e) {\n    this.setState({\n      isDefault: e.target.checked\n    })\n  }\n\n  formInputChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  editStateChange(_, item) {\n    this.setState({\n      editState: item._id,\n      isDefault: !!item.isDefault,\n      detailAddress: item.address,\n      postcode: item.postcode,\n      receivePhone: item.phone,\n      receiveName: item.receiveName,\n    })\n  }\n  deleteAddress(_, item) {\n    if (socket.status !== 'open') {\n      return this.setState({\n        errors: { submit: '网络未连接' }\n      })\n    }\n    if (this.state.editState === item._id) {\n      this.setState(initState)\n    }\n    socket.ws.send(JSON.stringify({\n      type: 'delete_address',\n      content: item._id\n    }))\n  }\n\n  cancelEdit() {\n    this.setState(initState)\n  }\n\n  saveAddress() {\n    var errors = {}\n    if (!/^[\\w\\D]{5,200}$/.test(this.state.detailAddress)) {\n      errors.detailAddress = '详细地址最少5位，最多200位'\n    }\n    if (!/^[1-9]\\d{5}$/.test(this.state.postcode)) {\n      errors.postcode = '邮编格式有误'\n    }\n    if (!isLength(this.state.receiveName, {min:2,max:10})) {\n      errors.receiveName = '姓名填写有误'\n    }\n    if (!isPhone(this.state.receivePhone)) {\n      errors.receivePhone = '手机号码填写有误'\n    }\n    if (socket.status !== 'open') {\n      errors.submit = '网络未连接'\n    }\n    if (!isEmpty(errors)) {\n      return this.setState({\n        errors\n      })\n    }\n    socket.ws.send(JSON.stringify({\n      type: 'save_address',\n      content: {\n        ...this.state,\n        errors: null\n      }\n    }))\n    this.setState(initState)\n  }\n\n  render() {\n    return (\n      <div className=\"u-info\">\n        <div className=\"u-info-title\">收货地址</div>\n        <div className=\"u-add-form\">\n          <div className=\"u-add-sub\">编辑收货地址</div>\n          <div className=\"u-add-form-item u-add-textarea\">\n            <span>*详细地址:</span>\n            <textarea onChange={this.formInputChange.bind(this)} value={this.state.detailAddress} name=\"detailAddress\" placeholder=\"请输入详细地址信息，如道路、门牌号、小区、楼栋号、单元等信息\" className=\"u-add-i-text\"></textarea>\n          </div>\n          {\n            this.state.errors.detailAddress && <div className=\"u-add-err\">{this.state.errors.detailAddress}</div>\n          }\n          <div className=\"u-add-form-item\">\n            <span>*邮政编码:</span>\n            <input onChange={this.formInputChange.bind(this)} value={this.state.postcode} name=\"postcode\" placeholder=\"请编写邮编\" className=\"u-add-i-text\" type=\"text\"/>\n          </div>\n          {\n            this.state.errors.postcode && <div className=\"u-add-err\">{this.state.errors.postcode}</div>\n          }\n          <div className=\"u-add-form-item\">\n            <span>*收货人姓名:</span>\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receiveName} name=\"receiveName\" placeholder=\"长度不超过10个字符\" className=\"u-add-i-text\" type=\"text\"/>\n          </div>\n          {\n            this.state.errors.receiveName && <div className=\"u-add-err\">{this.state.errors.receiveName}</div>\n          }\n          <div className=\"u-add-form-item\">\n            <span>*手机号码:</span>\n            <input onChange={this.formInputChange.bind(this)} value={this.state.receivePhone} name=\"receivePhone\" placeholder=\"收货时的手机号码\" className=\"u-add-i-text\" type=\"text\"/>\n          </div>\n          {\n            this.state.errors.receivePhone && <div className=\"u-add-err\">{this.state.errors.receivePhone}</div>\n          }\n          <div className=\"default-check\">\n             <input className=\"u-add-checkbox\" onChange={this.setDefailtChange.bind(this)} checked={this.state.isDefault} type=\"checkbox\"/>\n            <div className=\"u-add-text\">默认收货地址：</div>\n          </div>\n          <div>\n            <button onClick={this.saveAddress.bind(this)} className=\"save-btn\">{this.state.editState === -1 ? '添加': '保存'}</button>\n            {\n              this.state.editState === -1 ? null : <button onClick={this.cancelEdit.bind(this)} className=\"save-btn cancel-btn\">取消</button>\n            }\n          </div>\n          {\n            this.state.errors.submit && <div className=\"u-add-err\">{this.state.errors.submit}</div>\n          }\n        </div>\n        <div className=\"u-address-table-wrap\">\n          <div className=\"u-add-sub\">我的收货地址</div>\n          <table border=\"1\" width=\"750\" style={{borderColor: '#eee', textAlign: 'center'}} cellSpacing=\"0\" cellPadding=\"0\">\n            <thead>\n              <tr>\n                <th>收货人</th>\n                <th>详细地址</th>\n                <th>邮编</th>\n                <th>电话/手机</th>\n                <th>操作</th>\n              </tr>\n            </thead>\n            <tbody>\n            {\n              this.props.address.map((item, index) => {\n                return (\n                  <tr className={classnames({'default-ads': item.isDefault === 1})} key={index}>\n                    <td>{item.receiveName}</td>\n                    <td className=\"detail-address\">{item.address}</td>\n                    <td>{item.postcode}</td>\n                    <td>{item.phone}</td>\n                    <td>\n                      <span onClick={this.editStateChange.bind(this, null, item)} className=\"add-edit-state\">编辑</span>\n                      <span> / </span>\n                      <span onClick={this.deleteAddress.bind(this, null, item)} className=\"add-edit-state\">删除</span>\n                    </td>\n                  </tr>\n                )\n              })\n            }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    address: state.auth.address || [],\n    memberId: state.auth.user._id === undefined ? -1 : state.auth.user._id\n  }\n}\nAddress.propTypes = {\n  address: PropTypes.array.isRequired,\n  memberId: PropTypes.number.isRequired\n}\nexport default connect(mapStateToProps, { setRouterLocationAction })(Address)\n","import React from 'react'\nimport { formatDate } from '../../utils/tools'\nimport { Link } from 'react-router-dom'\nimport { contactItemToChatAction } from '../../flux/actions/chatActions'\nimport './index.scss'\n\nfunction hasNullArray(products) {\n  for (var i = 0, len = products.length; i < len; i++) {\n    if (products[i] === null) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction splitGoodName(name) {\n  return typeof(name) !== 'string' ? '' : name.length < 35 ? name : name.substring(0,34) + '...'\n}\n\n// 点击联系商家\nfunction contactSeller(userId, nickname, avatar) {\n  return function () {\n    contactItemToChatAction({ userId, nickname, avatar })\n  }\n}\n\nconst OrderItem = (props) => {\n  var order = props.order\n  return order === null ? <div></div> : (\n    <div className=\"order-item\">\n      <div className=\"o-i-head\">\n        <div className=\"oih-i oi-date\">{formatDate(order.creaTime, true)}</div>\n        <div className=\"oih-i oi-no\">订单号：{order.orderno}</div>\n        <div className=\"oih-i oi-sumprice\">￥{order.sumPrice}</div>\n        <div className=\"oih-i oi-storename\">{order.storeName}</div>\n        {\n          order.sellerId !== props.userId && <div onClick={contactSeller(order.sellerId, order.sellerName, order.sellerAvatar)} className=\"oih-i oi-callseller\">\n            <div className=\"oi-call-logo\"></div>\n            <div className=\"oi-contact\">和我联系</div>\n          </div>\n        }\n        {\n          /*订单收货*/\n          props.nav === 3 && !hasNullArray(order.products) ?\n          <div className=\"oih-i oih-sign\" onClick={() => { props.handler('signOrder', order) }}>签收订单</div> : null\n        }\n      </div>\n      <div className=\"oi-product\">\n        {\n          order.products.map((item, i) => {\n            return item === null ? null : (\n              <div className=\"oip-i-wrap\" key={i}>\n                <div className=\"oip-i oip-i-logo\"><img width=\"80px\" src={`${'http://118.126.108.36'}/image/goods/logo/${item.logo}_210x210q90.jpg`} alt={item.goodName}/></div>\n                <div className=\"oip-i oip-i-info\">\n                  <div className=\"oip-i-goodname\"><Link to={`/product_detail?goodId=${item.goodId}`}>{splitGoodName(item.goodName)}</Link></div>\n                </div>\n                <div className=\"oip-i oip-i-price\">￥{item.price}</div>\n                <div className=\"oip-i oip-i-number\">{item.number}</div>\n                <div className=\"oip-i oip-exp\">\n                  {\n                    item.postWay && <div>\n                      <div className=\"oip-exp-post\">{item.postWay}</div>\n                      <p title={item.expNumber} className=\"oip-exp-num\">{item.expNumber}</p>\n                    </div>\n                  }\n                </div>\n                <div className=\"oip-i oip-i-operator\">\n                 {\n                  order.isPay !== 1 ? null :\n                  item.isComment === 1 && item.isSign === 1 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\n                    <span className=\"opre-i-finish\">订单已完成</span>\n                  </div>) : item.isComment === 0 && item.isSign === 1 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\n                    <button className=\"opre-i-comment\" onClick={() => { props.handler('comment', order, item) }}>评价</button>\n                  </div>) : item.isSign === 0 && item.isSend === 1 ? (<div className=\"opre-i-wrap\">\n                    <button className=\"opre-i-sign\" onClick={() => { props.handler('sign', order, item) }}>确认收货</button>\n                  </div>) : item.isSend === 0 ? (<div className=\"opre-i-wrap\">\n                    <span className=\"opre-i-waitsend\">等待卖家发货</span>\n                  </div>) : null\n                 }\n                </div>\n              </div>\n            )\n          })\n        }\n        {\n          order.isPay !== 0 ? null : <div className=\"order-i-pay\">\n            <button onClick={() => { props.handler('pay', order) }}>立即付款</button>\n          </div>\n        }\n      </div>\n\n    </div>\n  )\n}\nexport default OrderItem\n","/**\n * 评论组件\n */\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport config from '../../utils/config'\nimport socket from '../../utils/socket'\nimport { alertMessageAction } from '../../flux/actions/messageAction'\n\nimport './index.scss'\nconst HOST = config.HOST\n\nclass CommentBox extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      type: -1, // 0 好评，1中评，2差评\n      comment: '',\n      pictures: [],\n      errors: {}\n    }\n    this.commentTypeChange = this.commentTypeChange.bind(this)\n  }\n\n  componentWillMount() {\n    if (this.props.orderDetailId === -1) {\n      this.props.closeCommentBox()\n    }\n  }\n\n  commentChange(e) {\n    var comment = e.target.value\n    if (comment.length > 200) return;\n    this.setState({\n      comment\n    })\n  }\n\n  pictureChange(e) {\n    var picture = e.target.files[0]\n    if (!picture || this.state.pictures.length >= 5) return;\n    if (!/^image\\//.test(picture.type)) {\n      return this.setState({ errors:{...this.state.errors, picture: '文件类型不是图片'} })\n    }else if (picture.size > 5000000) {\n      return this.setState({ errors:{...this.state.errors, picture: '图片超过5M，无法上传'} })\n    }\n    var formData = new FormData()\n    formData.append('picture', picture)\n    this.setState({\n      pictures: [...this.state.pictures, 'wait.gif']\n    }, () => {\n      axios.post(`${HOST}/api/order/comment_picture`, formData)\n        .then(res => {\n          if (!res.data.success) {\n            this.setState({ pictures: this.state.pictures.filter(p => p !== 'wait.gif'), errors:{...this.state.errors, picture: res.data.message} })\n          }\n          this.setState({\n            pictures: this.state.pictures.map((picture, i) => {\n              return picture === 'wait.gif' ? res.data.payload.picture : picture\n            }),\n            errors: {...this.state.errors, picture: ''}\n          })\n        })\n        .catch(err => {\n          this.setState({\n            errors: {...this.state.errors, picture: err.message}\n          })\n        })\n    })\n  }\n\n  choicePicture(e) {\n    if (this.state.pictures.length >= 5) {\n      e.preventDefault()\n    }\n  }\n\n  deletePicture(picture) {\n    this.setState({\n      pictures: this.state.pictures.filter(item => item !== picture)\n    })\n  }\n\n  commentTypeChange(e) {\n    this.setState({\n      type: e.target.value\n    })\n  }\n\n  submitComment() {\n    var errors = {}\n    if (['0', '1', '2'].indexOf(this.state.type) === -1) {\n      errors.type = '亲，请选择评论类型'\n    }\n    if (this.state.comment.length > 200) {\n      errors.comment = '字数不能超过200字'\n    }\n    if (Object.keys(errors).length > 0) {\n      return this.setState({ errors })\n    }\n    axios.post(`${HOST}/api/order/submit_comment`, {\n      type: this.state.type,\n      comment: this.state.comment,\n      pictures: this.state.pictures,\n      orderDetailId: this.props.orderDetailId\n    }).then(res => {\n      if (!res.data.success) {\n        return this.setState({ errors: {submit: res.data.message} })\n      }\n      // 评论成功\n      if (socket.status === 'open') {\n        socket.ws.send(JSON.stringify({\n          type: 'get_orders',\n          content: {limit: this.props.limit}\n        }))\n      }\n      this.props.alertMessageAction('评论已提交')\n      this.props.closeCommentBox()\n\n    }).catch(err => {\n      return this.setState({ errors: {submit: err.message} })\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"comment-box\">\n        <div className=\"cb-com-wrap\">\n          <div className=\"cb-com-0\">\n            <input onChange={this.commentTypeChange} id=\"type0\" name=\"type\" value=\"0\" type=\"radio\"/>\n            <label htmlFor=\"type0\">好评</label>\n          </div>\n          <div className=\"cb-com-1\">\n            <input onChange={this.commentTypeChange} id=\"type1\" name=\"type\" value=\"1\" type=\"radio\"/>\n            <label htmlFor=\"type1\">中评</label>\n          </div>\n          <div className=\"cb-com-2\">\n            <input onChange={this.commentTypeChange} id=\"type2\" name=\"type\" value=\"2\" type=\"radio\"/>\n            <label htmlFor=\"type2\">差评</label>\n          </div>\n        </div>\n        {\n          this.state.errors.type && <div className=\"cb-err\">{this.state.errors.type}</div>\n        }\n        <div className=\"text-wrap\">\n          <textarea onChange={this.commentChange.bind(this)} value={this.state.comment} placeholder=\"亲，写点评价吧。\" name=\"comment\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\n          <div className=\"text-len\">{200 - this.state.comment.length} 字</div>\n        </div>\n        {\n          this.state.errors.comment && <div className=\"cb-err\">{this.state.errors.comment}</div>\n        }\n        <div className=\"cb-img-wrap\">\n          <div className=\"cb-file\">\n            <input onClick={this.choicePicture.bind(this)} onChange={this.pictureChange.bind(this)} hidefocus=\"true\" className=\"file-input\" type=\"file\"/>\n            <span>晒照片</span>\n          </div>\n          <div className=\"cb-pic-wrap\">\n          {\n            this.state.pictures.map((picture, index) => {\n              return (<div className=\"cb-pic-item\" onClick={this.deletePicture.bind(this, picture)} key={index}>\n                  <img src={`${HOST}/image/${picture === 'wait.gif' ? 'ui/wait.gif' : 'goods/comment/' + picture + '_w40.jpg'}`}/>\n              </div>)\n            })\n          }\n          </div>\n          <div className=\"cb-pic-last\">{this.state.pictures.length === 0 ? '限5张' : 5-this.state.pictures.length + '/5'}</div>\n        </div>\n        {\n          this.state.errors.picture && <div className=\"cb-err\">{this.state.errors.picture}</div>\n        }\n        <div className=\"cb-btn-wrap\">\n          <div className=\"cb-btn-sub\" onClick={this.submitComment.bind(this)}>提交评论</div>\n          <div className=\"cb-btn-cancel\" onClick={this.props.closeCommentBox}>取消</div>\n        </div>\n        {\n          this.state.errors.submit && <div className=\"cb-err\">{this.state.errors.submit}</div>\n        }\n      </div>\n    )\n  }\n}\n\nexport default connect(null, { alertMessageAction })(CommentBox)\n","/**\n * 我的订单\n */\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport classnames from 'classnames'\nimport config from '../../../utils/config'\nimport socket from '../../../utils/socket'\nimport { setPayOrderAction, prevPageOrdersAction } from '../../../flux/actions/orderActions'\nimport { alertMessageAction, confirmMessageAction } from '../../../flux/actions/messageAction'\n\nimport OrderItem from '../../../components/OrderItem'\nimport CommentBox from '../../../components/CommentBox'\n\n\nconst HOST = config.HOST\n\nfunction isNullArray(productArray) {\n  for (var i = 0, len = productArray.length; i < len; i++) {\n    if (productArray[i])\n      return false\n  }\n  return true\n}\n\nclass Order extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      nav: 0,  // 0 all, 1 waitPay, 2 waitSend, 3 waitSign, 4 waitComment\n      errors: {},\n      limit: 0,\n      showCommentBox: false,\n      commentOrderDetailId: -1\n    }\n    this.closeCommentBox = this.closeCommentBox.bind(this)\n  }\n  componentWillMount() {\n    if (socket.status === 'open') {\n      socket.ws.send(JSON.stringify({\n        type: 'get_orders',\n        content: { limit: this.state.limit }\n      }))\n    }else if (typeof(window) === 'object') {  // 页面刷新后需要时间验证本地token，\n      setTimeout(() => {\n        if (socket.status === 'open') {\n          socket.ws.send(JSON.stringify({\n            type: 'get_orders',\n            content: { limit: this.state.limit }\n          }))\n        }\n      }, 200)\n    }\n  }\n\n  componentDidMount() {\n    window.document.title = '我的优选-我的订单'\n  }\n\n  routeChangeHandler(route) {\n    if (this.state.nav === route) return;\n    this.setState({\n      nav: route\n    })\n  }\n\n  closeCommentBox() {\n    this.setState({ showCommentBox: false })\n  }\n\n  // 付款，签收，评论\n  orderItemOperatorHandler(nav, order, orderDetail) {\n    if (nav === 'pay') {\n      axios.post(`${HOST}/api/order/pay_order`, { orderno: order.orderno })\n        .then(res => {\n          if (!res.data.success) {\n            return this.setState({\n              errors: {...this.state.errors, pay: res.data.message}\n            })\n          }\n          this.props.setPayOrderAction(res.data.payload)\n          // 跳转到支付页面\n          this.props.history.push('/payorder')\n        })\n        .catch(err => {\n          this.setState({\n            errors: {...this.state.errors, pay: err.message}\n          })\n        })\n\n    }else if (nav === 'sign') {\n      if (socket.status !== 'open') {\n        return this.setState({ errors: {...this.state.errors, sign: '网络未连接'} })\n      }\n      // 弹出确认框\n      this.props.confirmMessageAction(`确认签收商品：${orderDetail.goodName}`, () => {\n        socket.ws.send(JSON.stringify({\n          type: 'sign_order',\n          content: {\n            orderno: order.orderno,\n            detailId: [orderDetail.orderDetailId],\n            limit: this.state.limit\n          }\n        }))\n      })\n    }else if (nav === 'signOrder') {\n      // console.log(order.orderno)\n      if (socket.status !== 'open') {\n        return this.setState({ errors: {...this.state.errors, sign: '网络未连接'} })\n      }\n      // 弹出确认框\n      this.props.confirmMessageAction(`确认签收订单：${order.orderno}`, () => {\n        socket.ws.send(JSON.stringify({\n          type: 'sign_order',\n          content: {\n            orderno: order.orderno,\n            detailId: order.products.map((item) => item.orderDetailId),\n            limit: this.state.limit\n          }\n        }))\n      })\n    }else if (nav === 'comment') {\n      this.setState({\n        showCommentBox: true,\n        commentOrderDetailId: orderDetail.orderDetailId\n      })\n    }\n  }\n\n  nextPage() {\n    if(this.props.myOrders.end) return;\n    if (socket.status === 'open') {\n      this.setState({\n        limit: this.state.limit + 1\n      }, () => {\n        socket.ws.send(JSON.stringify({\n          type: 'get_orders',\n          content: { limit: this.state.limit * 20 }\n        }))\n      })\n    }\n  }\n\n  prevPage() {\n    if(this.state.limit <= 0) return;\n    if (socket.status === 'open') {\n      this.setState({\n        limit: this.state.limit - 1\n      }, () => {\n        this.props.prevPageOrdersAction()\n        socket.ws.send(JSON.stringify({\n          type: 'get_orders',\n          content: { limit: this.state.limit * 20 }\n        }))\n      })\n    }\n  }\n\n  render() {\n    let orders = this.props.myOrders.orders.map((item, index) => {\n        if (this.state.nav === 0) {\n          return item\n        }else if (this.state.nav === 1) {\n          return item.isPay === 0 ? item : null\n        }else if (item.isPay === 1) {\n          var products = item.products.map((prod) => {\n            return this.state.nav === 2 && prod.isSend === 0 ? prod :\n              this.state.nav === 3 && prod.isSend === 1 && prod.isSign === 0 ? prod :\n              this.state.nav === 4 && prod.isSend === 1 && prod.isSign === 1 && prod.isComment === 0 ? prod : null\n          })\n          return isNullArray(products) ? null : {...item, products}\n        }\n        return null\n      })\n    let {waitPay, waitSend, waitSign, waitComment} = this.props.myOrders.status\n    return (\n      <div>\n        <div className=\"u-order-wrap\">\n          <div onClick={this.routeChangeHandler.bind(this, 0)} className={classnames(\"u-o-item\", {\n            'uoi-hit': this.state.nav === 0\n          })}><span className=\"uoi-nav\">全部订单</span></div>\n          <div onClick={this.routeChangeHandler.bind(this, 1)} className={classnames(\"u-o-item\", {\n            'uoi-hit': this.state.nav === 1\n          })}>\n            <span className=\"uoi-nav\">待付款</span>\n            { waitPay > 0 && <span className=\"uoi-hit uoi-count\">{waitPay}</span> }\n          </div>\n          <div onClick={this.routeChangeHandler.bind(this, 2)} className={classnames(\"u-o-item\", {\n            'uoi-hit': this.state.nav === 2\n          })}>\n            <span className=\"uoi-nav\">待发货</span>\n            { waitSend > 0 && <span className=\"uoi-hit uoi-count\">{waitSend}</span> }\n          </div>\n          <div onClick={this.routeChangeHandler.bind(this, 3)} className={classnames(\"u-o-item\", {\n            'uoi-hit': this.state.nav === 3\n          })}>\n            <span className=\"uoi-nav\">待收货</span>\n            { waitSign > 0 && <span className=\"uoi-hit uoi-count\">{waitSign}</span> }\n          </div>\n          <div onClick={this.routeChangeHandler.bind(this, 4)} className={classnames(\"u-o-item u-o-item-last\", {\n            'uoi-hit': this.state.nav === 4\n          })}>\n            <span className=\"uoi-nav\">待评价</span>\n            { waitComment > 0 && <span className=\"uoi-hit uoi-count\">{waitComment}</span> }\n          </div>\n        </div>\n        <div className=\"u-o-page\">\n          <div onClick={this.nextPage.bind(this)} className={classnames(\"u-o-next\", {\n            'u-o-next-void': this.props.myOrders.end\n          })}>下一页</div>\n          <div onClick={this.prevPage.bind(this)} className={classnames(\"u-o-prev\", {\n            'u-o-prev-void': this.state.limit === 0\n          })}>上一页</div>\n        </div>\n        <div className=\"uo-i-wrap\">\n          {\n            orders.map((item, index) => {\n              return <OrderItem key={index}\n                        handler={this.orderItemOperatorHandler.bind(this)}\n                        nav={this.state.nav}\n                        userId={this.props.userId}\n                        order={item} />\n            })\n          }\n        </div>\n        {\n          this.state.showCommentBox && this.state.commentOrderDetailId !== -1 && <CommentBox orderDetailId={this.state.commentOrderDetailId} closeCommentBox={this.closeCommentBox} limit={this.state.limit} />\n        }\n      </div>\n    )\n  }\n}\n\nOrder.propTypes = {\n  myOrders: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n  myOrders: state.myOrders,  // || {status: {}, orders:[]},\n  userId: state.auth.user.userId\n})\n\nexport default connect(mapStateToProps, {\n  setPayOrderAction,\n  alertMessageAction,\n  confirmMessageAction,\n  prevPageOrdersAction\n})(Order)\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, Route, Switch } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport config from '../../utils/config'\r\nimport PrivateRoute from '../../components/PrivateRoute'\r\n\r\nimport './index.scss'\r\nimport Header from '../../components/Header'\r\nimport Safety from './subpage/Safety'\r\nimport MyInfo from './subpage/MyInfo'\r\nimport Address from './subpage/Address'\r\nimport MyOrder from './subpage/MyOrder'\r\n\r\nconst HOST = config.HOST\r\n/**\r\n * 安全设置\r\n *    修改手机，关闭手机登陆\r\n * 个人资料\r\n * 编辑资料\r\n * 收货地址\r\n * 资金管理\r\n */\r\n\r\nclass UserInfo extends React.Component {\r\n  render() {\r\n    // 未登陆，并且未在验证中\r\n    // warning无法在现有状态转换期间更新(如在“render”中)。渲染方法应该是道具和状态的纯函数。\r\n    // if (!this.props.auth.isLogin && !this.props.auth.isVerify) { this.props.history.push('/login') }\r\n\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"member-header\">\r\n          {/*头部*/}\r\n          <div className=\"member-header-wrap\">\r\n            <div><img height=\"34px\" width=\"140px\" src={`${HOST}/image/ui/member-logo.png`} alt=\"\"/></div>\r\n            <div className=\"mh-choice-box\">\r\n              <Link to=\"/member\">\r\n                <div className=\"member-header-home\">首页</div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {\r\n          !this.props.auth.isLogin ?\r\n          <div>加载中。。。</div> :\r\n          <div className=\"member-wrap\">\r\n            {/*导航区*/}\r\n            <div className=\"member-nav\">\r\n              <div className=\"mn-avatar\"><img src={`${HOST}/image/member/avatar/${this.props.auth.user.avatar}`} alt=\"\"/></div>\r\n              <ul className=\"mn-navselect\">\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/safety'\r\n                })}><Link to=\"/member/safety\">安全设置</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member'\r\n                })}><Link to=\"/member\">个人资料</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': /^\\/member\\/myorder/.test(this.props.location.pathname)\r\n                })}><Link to=\"/member/myorder\">我的订单</Link></li>\r\n                <li className={classnames({\r\n                  'mn-navselected': this.props.location.pathname === '/member/address'\r\n                })}><Link to=\"/member/address\">收货地址</Link></li>\r\n              </ul>\r\n            </div>\r\n            {/*信息展示区*/}\r\n            <div className=\"member-info\">\r\n              <Switch>\r\n                <PrivateRoute path=\"/member\" exact component={MyInfo} />\r\n                <PrivateRoute path=\"/member/safety\" component={Safety} />\r\n                <PrivateRoute path=\"/member/address\" component={Address} />\r\n                <PrivateRoute path=\"/member/myorder\" component={MyOrder} />\r\n              </Switch>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n  }\r\n}\r\nUserInfo.propTypes = {\r\n  auth: PropTypes.object.isRequired\r\n}\r\nexport default connect(mapStateToProps)(UserInfo)\r\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport classnames from 'classnames'\nimport socket from '../../utils/socket'\nimport config from '../../utils/config'\nimport { isEmpty } from '../../utils/validator'\n\nimport { setRouterLocationAction, setAddressAction } from '../../flux/actions/authActions'\nimport { setPayOrderAction } from '../../flux/actions/orderActions'\nimport { transPrice, intMultiplication, intAdd, cutString } from '../../utils/tools'\n\nimport './index.scss'\nimport Header from '../../components/Header'\nimport Footer from '../../components/Footer'\n\nconst HOST = config.HOST\n\nclass Order extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      choiceAddress: {},\n      numbers: [],\n      totalPrice: 0,  // 总计金额\n      comments: [],\n      errors: {}\n    }\n    this.computeTotal = this.computeTotal.bind(this)\n  }\n  componentWillMount() {\n    // 没有要购买的商品\n    if (!Array.isArray(this.props.buyProducts) || this.props.buyProducts.length < 1) {\n      // 跳转到上一级\n      this.props.history.push(this.props.auth.location || '/')\n    }\n    this.props.setRouterLocationAction('/order')\n\n    var buyProducts = this.props.buyProducts\n    var numbers = [];\n    var comments = [];\n    var totalPrice = 0;\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\n      comments[i] = ''\n      numbers[i] = buyProducts[i].number\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, buyProducts[i].number))\n    }\n    // 初始化购买数据量\n    this.setState({\n      numbers,\n      totalPrice,\n      comments\n    }, function () {\n      if (socket.status === 'open') {\n        socket.ws.send(JSON.stringify({ type: 'get_address' })) // socket 获取收货地址\n      }else {\n        axios.get(`${HOST}/api/users/user_address`)  // api 端口获取收货地址\n          .then(res => {\n            if (res.data.success) {\n              setAddressAction(res.data.payload)\n            }\n          })\n          .catch(err => {\n            console.log(err)\n          })\n      }\n    })\n  }\n\n  componentDidMount() {\n    window.document.title = '优选--确认订单'\n  }\n\n  componentWillReceiveProps() {\n    if (isEmpty(this.state.choiceAddress) && Array.isArray(this.props.auth.address)) {\n      console.log(2)\n      var defaultAddress = this.props.auth.address.find(i => i.isDefault === 1)\n      if (defaultAddress) {\n        // console.log(defaultAddress)\n        this.setState({\n          choiceAddress: defaultAddress\n        })\n      }\n    }\n  }\n\n  // 计算总价\n  computeTotal(index, number) {\n    var buyProducts = this.props.buyProducts\n    var totalPrice = 0;\n    for (var i = 0, len = buyProducts.length; i < len; i++) {\n      totalPrice = intAdd(totalPrice, intMultiplication(buyProducts[i].price, i === index ? number : this.state.numbers[i]))\n    }\n    return totalPrice\n  }\n\n  addressChoice(address) {\n    return function() {\n      this.setState({\n        choiceAddress: address\n      })\n    }\n  }\n  numberChange(index, amount) {\n    return function(e) {\n      var number = e.target.value\n      if (!/^[1-9]\\d{0,}$/.test(number) || Number(number) > Number(amount))\n        return;\n      var nums = [...this.state.numbers]\n      nums[index] = number\n      this.setState({\n        numbers: nums,\n        totalPrice: this.computeTotal(index, number) // 重新计算总价\n      })\n    }\n  }\n  // 数量减减\n  numberMinus(index, amount) {\n    return function() {\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])-1}})\n    }\n  }\n  // 数量加加\n  numberPlus(index, amount) {\n    return function() {\n      this.numberChange(index,amount).call(this, {target:{value: Number(this.state.numbers[index])+1}})\n    }\n  }\n  commentChange(index) {\n    return function(e) {\n      if (e.target.value.length > 200) return;\n      var comments = [...this.state.comments]\n      comments[index] = e.target.value\n      this.setState({\n        comments\n      })\n    }\n  }\n\n  commentFocus(e) {\n    e.target.style.width = '400px'\n  }\n\n  commentBlur(e) {\n    e.target.style.width = '200px'\n  }\n\n  submitOrder() {\n    if (!/^[1-9]\\d*$/.test(this.state.choiceAddress._id)) {\n      return this.setState({\n        errors: {\n          ...this.state.errors,\n          submitOrder: '请选择收货地址'\n        }\n      })\n    }\n    // 商品 Ids, 数量s, detailIds, addressId\n    var request = {\n      // goodIds: [],\n      goodDetailIds: [],\n      numbers: this.state.numbers,\n      addressId: this.state.choiceAddress._id,\n      messages: this.state.comments\n    }\n    var shopCarIds = []\n    for (var i = 0, len = this.props.buyProducts.length; i < len; i++) {\n      // request.goodIds.push(this.props.buyProducts[i].goodId)\n      request.goodDetailIds.push(this.props.buyProducts[i].goodDetailId)\n      if (/^[1-9]\\d*$/.test(this.props.buyProducts[i].shopCarId)) {\n        shopCarIds.push(this.props.buyProducts[i].shopCarId)\n      }\n    }\n    if (shopCarIds.length > 0) {  // 如果有购物车 Id\n      request.shopCarIds = shopCarIds\n    }\n    axios.post(`${HOST}/api/order/submit_order`, request)\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({\n            errors: {\n              ...this.state.errors,\n              submitOrder: res.data.message\n            }\n          })\n        }\n\n        this.props.setPayOrderAction(res.data.payload)\n        // 跳转到支付页面\n        this.props.history.push('/payorder')\n      })\n      .catch(err => {\n        this.setState({\n          errors: {\n            ...this.state.errors,\n            submitOrder: err.message\n          }\n        })\n      })\n  }\n  render() {\n    return (\n      <div>\n        <Header />\n        {/*收货地址*/}\n        <div className=\"worder-wrap\">\n          <div className=\"wo-logo-wrap\">\n            <div className=\"worder-logo\"></div>\n            <ul className=\"order-stepbar\">\n              <li className=\"wo-step-i wo-step-1\">\n                <div className=\"step-t\">拍下商品</div>\n                <div className=\"step-b\"></div>\n              </li>\n              <li className=\"wo-step-i wo-step-2\">\n                <div className=\"step-t\">付款</div>\n                <div className=\"step-b\">2</div>\n              </li>\n              <li className=\"wo-step-i wo-step-3\">\n                <div className=\"step-t\">确认收货</div>\n                <div className=\"step-b\">3</div>\n              </li>\n              <li className=\"wo-step-i wo-step-4\">\n                <div className=\"step-t\">评价</div>\n                <div className=\"step-b\">4</div>\n              </li>\n            </ul>\n          </div>\n          <h3 className=\"wo-tit\">选择收货地址</h3>\n          <div className=\"wo-add-wrap\">\n            {\n              this.props.auth.address.length === 0 ? <div className=\"wo-add-info\">你还没有收获地址哦！<Link className=\"wo-linkto-add\" to=\"/member/address\">点击添加</Link></div>\n              : this.props.auth.address.map((item, index) => (\n                <div key={index} className={classnames(\"wo-add-item-wrap\", {\n                  'wo-add-item-choi': this.state.choiceAddress._id === item._id\n                })}>\n                  <div className=\"wo-add-item\" onClick={this.addressChoice(item).bind(this)}>\n                    <div className=\"wo-add-i-recename\">\n                      <span className=\"wo-add-i-sub\">收货人：</span>\n                      <span className=\"wo-add-i-body\">{item.receiveName}</span>\n                      <span className=\"wo-add-i-sub\">（收）</span>\n                    </div>\n                    <p title={item.address} className=\"wo-add-i-address\">\n                      <span className=\"wo-add-i-body\">{cutString(item.address, 32)}</span>\n                    </p>\n                    <div className=\"wo-add-i-pcode\">\n                      <span className=\"wo-add-i-sub\">邮编：</span>\n                      <span className=\"wo-add-i-body\">{item.postcode}</span>\n                    </div>\n                    <div className=\"wo-add-i-phone\">\n                      <span className=\"wo-add-i-sub\">收货人电话：</span>\n                      <span className=\"wo-add-i-body\">{item.phone}</span>\n                    </div>\n                  </div>\n                </div>\n              ))\n            }\n          </div>\n          <Link className=\"wo-add-address\" to=\"/member/address\">添加收货地址</Link>\n          <h3 className=\"wo-affirm\">确认订单信息</h3>\n          {\n            this.props.buyProducts.map((item, index) => {\n              return (\n                <div className=\"wo-order-wrap\" key={index}>\n                  <div className=\"wo-o-i wo-o-storename\">店铺：{item.storeName}</div>\n                  <div className=\"wo-o-i wo-o-logo\"><img width=\"50px\" height=\"50px\" src={item.logo ? `${HOST}/image/goods/logo/${item.logo}_210x210q90.jpg` : `${HOST}/api/goods/product_logo?goodId=${item.goodId}`} alt=\"\"/></div>\n                  <p title={item.goodName} className=\"wo-o-i wo-o-prod-name\">{cutString(item.goodName, 29)}</p>\n                  <div className=\"wo-o-i wo-o-spec-wrap\">\n                  {\n                    Array.isArray(item.spec) ? item.spec.map((spec, index) => {\n                      return (\n                        // 顺序排列 index = config -1\n                        <div className=\"wo-o-spec\" key={index}>{cutString(spec.specName, 4)}：{cutString(spec.specValue, 7)}</div>\n                      )\n                    }) : null\n                  }\n                  </div>\n                  <div className=\"wo-o-i wo-o-price\">单价：{transPrice(item.price)}</div>\n                  <div className=\"wo-o-i wo-o-operat\">\n                    <span className=\"wo-o-minus\" onClick={this.numberMinus(index, item.amount).bind(this)}>-</span>\n                    <input className=\"wo-o-num\" onChange={this.numberChange(index, item.amount).bind(this)} value={this.state.numbers[index]} type=\"text\"/>\n                    <span className=\"wo-o-plus\" onClick={this.numberPlus(index, item.amount).bind(this)}>+</span>\n                  </div>\n                  <div className=\"wo-o-i wo-o-amount\">库存：{item.amount}</div>\n                  <div className=\"wo-o-i wo-o-subtotal\"><span>小计：</span><span className=\"wo-o-total\">￥{transPrice(intMultiplication(item.price, this.state.numbers[index]))}</span></div>\n                  <div className=\"wo-o-comment\">\n                    <span className=\"wo-add-i-sub\">给卖家留言：</span>\n                    <input onFocus={this.commentFocus} onBlur={this.commentBlur} className=\"wo-o-com-inp\" onChange={this.commentChange(index).bind(this)} value={this.state.comments[index]} placeholder=\"选填，请先和卖家商议一致\" type=\"text\"/>\n                  </div>\n                </div>\n              )\n            })\n          }\n          <div className=\"wo-o-submit-wrap\">\n            <div className=\"wo-o-float-r\">\n              <div className=\"wo-o-sub-price-wrap\">\n                <div className=\"wo-o-sub-shadow\">\n                  <div className=\"wo-o-sumprice\">\n                    <span className=\"wo-o-sub-itit\">实付款：</span>\n                    <span className=\"wo-o-sub-ib\">￥{transPrice(this.state.totalPrice)}</span>\n                  </div>\n                  <p className=\"wo-o-sub-i\">\n                    <span className=\"wo-o-sub-itit\">寄送至：</span>\n                    <span className=\"wo-o-sub-ib\">{this.state.choiceAddress.address}</span>\n                  </p>\n                  <p className=\"wo-o-sub-i\">\n                    <span className=\"wo-o-sub-itit\">收货人：</span>\n                    <span className=\"wo-o-sub-ib\">{this.state.choiceAddress.receiveName}</span>\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div className=\"wo-sub-btn-wrap\">\n              <button className=\"wo-o-submit\" onClick={this.submitOrder.bind(this)}>提交订单</button>\n            </div>\n            {\n              this.state.errors.submitOrder && (\n                <div className=\"wo-o-err-wrap\">\n                  <div className=\"wo-o-err\">{this.state.errors.submitOrder}</div>\n                </div>\n              )\n            }\n          </div>\n        </div>\n        <Footer />\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    buyProducts: state.order.buyProducts || []\n  }\n}\nOrder.propTypes = {\n  auth: PropTypes.object.isRequired,\n  buyProducts: PropTypes.array.isRequired\n}\nexport default connect(mapStateToProps, { setRouterLocationAction, setPayOrderAction })(Order)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport config from '../../../utils/config'\n\nconst HOST = config.HOST\n\nconst PayHeader = (props) => {\n  return (\n    <header className=\"pay-header\">\n      <div className=\"pay-head-box\">\n        <div className=\"pay-head-tit f_wrap\">\n          <div className=\"pay-logo f_l\"><img src={`${HOST}/image/ui/logo_60x60.png`} /></div>\n          <div className=\"pay-logo-font f_r\">优选 收银台</div>\n        </div>\n        <div className=\"pay-user\">账户：{props.nickname}</div>\n      </div>\n    </header>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    nickname: state.auth.user.nickname\n  }\n}\nexport default connect(mapStateToProps)(PayHeader)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport config from '../../../utils/config'\n\nconst HOST = config.HOST\n\nvar payEnd = false\n\nclass Success extends React.Component {\n\n  componentWillUnmount() {\n    if (!payEnd) {\n      this.props.payOrderEnd()\n    }\n  }\n\n  render() {\n    return <div className=\"pay-success-wrap\">\n      {/*<div style={{textAlign: 'center', marginTop: '30px'}}><span className=\"main_font1\">付款成功</span></div>*/}\n      <div className=\"pays-body\">\n        <div className=\"f_wrap pays-logo\">\n          <div className=\"f_l pays-logo-l\"><img src={`${HOST}/image/ui/success2.png`} /></div>\n          <div className=\"f_l pays-logo-r\">您已成功付款</div>\n        </div>\n        <div className=\"pays-opera\">\n          <div className=\"pays-circle pays-info\">您的包裹已整装待发。。。</div>\n          <div className=\"pays-circle pays-price\">\n            <span className=\"pays-f1\">实付款：</span>\n            <span className=\"pays-f2\">￥{this.props.sumPrice}</span>\n          </div>\n          <div className=\"pays-end\">\n            <span className=\"pays-f1\">您可以</span>\n            <span className=\"\"><Link className=\"pays-f3\" onClick={this.props.payOrderEnd} to=\"/member/myorder\">查看已买到的宝贝</Link></span>\n            <span className=\"\"><Link className=\"pays-f3\" onClick={this.props.payOrderEnd} to=\"/\">继续逛逛</Link></span>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  }\n}\n\n\nfunction mapActionToProps(dispatch) {\n  return {\n    payOrderEnd: function() {\n      payEnd = true\n      dispatch({\n        type: 'PAY_ORDER_SUCCESS'\n      })\n    }\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    sumPrice: state.order.payOrder.sumPrice\n  }\n}\nexport default connect(mapStateToProps, mapActionToProps)(Success)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { isEmpty } from '../../utils/validator'\nimport axios from 'axios'\nimport classnames from 'classnames'\nimport SparkMD5 from 'spark-md5'\nimport { transPrice } from '../../utils/tools'\nimport config from '../../utils/config'\n\nimport './index.scss'\nimport { setRouterLocationAction } from '../../flux/actions/authActions'\nimport { alertMessageAction } from '../../flux/actions/messageAction'\nimport { payOrderSuccessAction } from '../../flux/actions/orderActions'\nimport PayHeader from './subpage/PayHeader'\nimport Success from './subpage/Success'\n\nconst HOST = config.HOST\n\nclass PayOrder extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      payway: 'alipay', // 余额 或 支付宝\n      property: -1,  // 余额\n      smsCode: '',\n      errors: {}\n    }\n    this.myState = {\n      smsSending: false,\n      second: 0\n    }\n\n    this.paywayChange = this.paywayChange.bind(this)\n  }\n\n  componentWillMount() {\n    if (typeof(window) !== 'object') return;\n    /**\n     * 判断上一级页面是否 /order，跳到主页\n     */\n    this.props.setRouterLocationAction('/payorder')\n    if (!this.props.isLogin) {\n      this.props.history.push('/login')\n    }\n    axios.get(`${HOST}/api/users/get_property`)\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({\n            errors: {...this.state.errors, wallet: res.data.message}\n          })\n        }\n        this.setState({\n          property: res.data.payload,\n          errors: {...this.state.errors, wallet: ''}\n        })\n      })\n      .catch(err => {\n        this.setState({\n          errors: {...this.state.errors, wallet: '服务器忙'}\n        })\n      })\n  }\n\n  componentDidMount() {\n    window.document.title = '优选--订单付款'\n    if (this.refs.payBody) {\n      var _this = this\n      this.refs.payBody.style.height = document.documentElement.clientHeight + 'px'\n      window.onresize = function() {\n        _this.refs.payBody.style.height = document.documentElement.clientHeight + 'px'\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    if (typeof window === 'object') {\n      window.onresize = null\n    }\n  }\n\n  paywayChange(e) {\n    this.setState({\n      payway: e.target.value\n    })\n  }\n  setPayway(way) {\n    return function() {\n      this.setState({\n        payway: way\n      })\n    }\n  }\n\n  SMSInputChange(e) {\n    if (!/^\\d{0,6}$/.test(e.target.value)) return;\n    this.setState({smsCode: e.target.value})\n  }\n\n  sendSMS(e) {\n    if (this.myState.smsSending) {\n      return this.props.alertMessageAction(`验证码发送中`)\n    }\n    if (this.myState.second > 0) {\n      return this.props.alertMessageAction(`请(${this.myState.second})秒后重试`)\n    }\n    var target = e.currentTarget\n    target.style.backgroundColor = \"#ccc\"\n    this.myState.second = 59\n    var _this = this\n    var interval = setInterval(function() {\n      _this.myState.second--\n      target.innerText = `再次发送(${_this.myState.second})`\n    }, 1000)\n    setTimeout(function() {\n      clearInterval(interval)\n      _this.myState.second = 0\n      target.style.backgroundColor = ''\n      target.innerText = '发送验证码'\n    }, 60000)\n\n    this.myState.smsSending = true\n    axios.get(`${HOST}/api/operator/testsms`)\n      .then(res => {\n        this.myState.smsSending = false\n        if (!res.data.success) {\n          this.setState({errors: {...this.state.errors, sms: res.data.message}})\n        }\n        console.log(res.data)\n        this.setState({errors: {...this.state.errors, sms: ''}})\n      })\n      .catch(err => {\n          this.myState.smsSending = false\n          this.setState({errors: {...this.state.errors, sms: err.message}})\n      })\n  }\n\n  submitPay() {\n    if (this.state.property < parseFloat(this.props.order.payOrder.sumPrice)) {\n      return this.props.alertMessageAction('请切换付款方式或充值')\n    }\n\n    if (!/\\d{5,6}/.test(this.state.smsCode)) {\n      return this.setState({ errors: { ...this.state.errors, sms: '验证码格式错误' } })\n    }\n    var ordernos = this.props.order.payOrder.ordernos\n    // console.log(SparkMD5.hash(ordernos.reduce((prev, now) => prev + now, '') + this.props.userId))\n\n\n    // 1. 获取接口参数签名\n   axios.get(`${HOST}/api/order/get_pay_sign`)\n      .then(res => {\n        if (!res.data.success) {\n          return this.setState({ errors: { ...this.state.errors, submit: res.data.message } })\n        }\n        // 2. 根据签名提交订单\n         axios.post(`${HOST}/api/order/property_pay_order`, {\n          smsCode: this.state.smsCode,\n          ordernos: ordernos,\n          sign: SparkMD5.hash(ordernos.reduce((prev, now) => prev + now, '') + res.data.payload.sign)\n        })\n          .then(res => {\n            if (!res.data.success) {\n              return this.setState({ errors: {...this.state.errors, submit: res.data.message} })\n            }\n            // 付款成功\n            this.props.payOrderSuccessAction()\n          })\n          .catch(err => {\n            this.setState({ errors: {...this.state.errors, submit: err.message} })\n          })\n      })\n      .catch(err => {\n        this.setState({ errors: { ...this.state.errors, submit: err.message } })\n      })\n\n  }\n\n  render() {\n    if (this.props.order.payStatus === 'success') {\n      return (<div  ref=\"payBody\" className=\"pay-body\">\n        <PayHeader />\n        <Success />\n      </div>)\n    }\n    const payOrder = this.props.order.payOrder\n    return (\n      <div ref=\"payBody\" className=\"pay-body\">\n        <PayHeader />\n        {/*\n          [isEmpty(buyProducts) ? null : (\n            buyProducts.map((item, index) => (\n              <div key={index}>\n                <div>{item.productName}</div>\n                <div>卖家：{item.nickname}</div>\n                {\n                  // Array.isArray(item.specChoice) && item.specChoice.map((choice, i) => (\n                  //   <div key={i}>\n                  //     <div>{item.specName[i].specName}: {item.specValue[choice].specValue}</div>\n                  //   </div>\n                  // ))\n                }\n              </div>\n            ))\n          ),\n          isEmpty(payOrder) ? null : (\n            <div className=\"pay-sumPrice\">{payOrder.sumPrice}</div>\n          )]*/\n        }\n        <div className=\"pay-wrap\">\n\n          <div className=\"f_wrap\">\n            <div className=\"f_l\">\n              <div className={classnames(\"f_wrap pay-choice\", {\n                'pay-selected': this.state.payway === 'alipay'\n              })} onClick={this.setPayway('alipay').bind(this)}>\n                <div className=\"f_l pay-checkbox\"><input onChange={this.paywayChange} checked={this.state.payway === 'alipay'} name=\"payway\" type=\"radio\" value=\"alipay\"/></div>\n                <div className=\"f_l pay-choi-info\">\n                  <img className=\"pay-choi-logo\" src={`${HOST}/image/ui/alipay.png`} alt=\"支付宝扫码支付\" title=\"支付宝扫码支付\"/>\n                  <span className=\"pay-choi-f\">支付宝扫码支付</span>\n                </div>\n                <div className=\"f_l pay-recommend\">推荐</div>\n              </div>\n              <div className={classnames(\"f_wrap pay-choice\", {\n                'pay-selected': this.state.payway === 'wallet'\n              })} onClick={this.setPayway('wallet').bind(this)}>\n                <div className=\"f_l pay-checkbox\"><input onChange={this.paywayChange} checked={this.state.payway === 'wallet'} name=\"payway\" type=\"radio\" value=\"wallet\"/></div>\n                <div className=\"f_l pay-choi-info\">\n                  <img className=\"pay-choi-logo\" src={`${HOST}/image/ui/wallet.png`} alt=\"钱包余额支付\" title=\"钱包余额支付\"/>\n                  <span className=\"pay-choi-f\">钱包余额支付</span>\n                </div>\n              </div>\n            </div>\n            <div className=\"f_r\">\n              {\n                isEmpty(payOrder) ? null : (\n                  <div className=\"pay-sumPrice\">\n                    <span style={{fontSize: '14px', color: '#444', marginRight: '5px'}}>支付</span>\n                    <span>{transPrice(payOrder.sumPrice)}</span>\n                  </div>\n                )\n              }\n            </div>\n          </div>\n\n          {\n            // 支付宝二维码 || 余额支付\n            isEmpty(payOrder) ? null : this.state.payway === 'alipay' ? (\n              <div>\n                {/*支付宝二维码*/}\n                <iframe title=\"alipay\" height=\"560px\" width=\"100%\" src={payOrder.alipayURL} frameBorder=\"0\"></iframe>\n              </div>\n            ) : (\n              <div className=\"pay-wallet\">\n                { /*余额支付*/\n                  this.state.errors.wallet ? (\n                    <div className=\"pay-error\">{this.state.errors.wallet}</div>\n                  ) : (\n                    this.state.property === -1 ? null : (\n                      <div className=\"pay-wallet-wrap\">\n                        <div className=\"pay-proper\">\n                          <span className=\"pay-p-f1\">账户余额：</span>\n                          <span className=\"pay-p-f2\">￥{transPrice(this.state.property)}</span>\n                        </div>\n                        <div className=\"f_wrap pay-form\">\n                          <div className=\"f_l pay-sms\">\n                            <input onChange={this.SMSInputChange.bind(this)} value={this.state.smsCode} type=\"text\"/>\n                          </div>\n                          <button onClick={this.sendSMS.bind(this)} className=\"f_r pay-smsbtn\">发送验证码</button>\n                        </div>\n                        {\n                          this.state.errors.sms && <div className=\"pay-error\">{this.state.errors.sms}</div>\n                        }\n                        <div className=\"pay-hint\">{\n                          this.myState.second > 0 ? '请输入6位手机验证码' : `点击发送到${this.props.userPhone}`\n                        }</div>\n                        <div onClick={this.submitPay.bind(this)} className={classnames({\n                          \"pay-submit\": this.state.property >= parseFloat(this.props.order.payOrder.sumPrice),\n                          \"pay-suffice\": this.state.property < parseFloat(this.props.order.payOrder.sumPrice)\n                        })}>{\n                          this.state.property < parseFloat(this.props.order.payOrder.sumPrice) ? '余额不足' : '确认付款'\n                        }</div>\n                        {\n                          this.state.errors.submit && <div className=\"pay-error\">{this.state.errors.submit}</div>\n                        }\n\n                      </div>\n                    )\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    order: state.order,\n    userId: state.auth.user.userId,\n    isLogin: state.auth.isLogin,\n    userPhone: state.auth.user.phone\n  }\n}\nexport default connect(mapStateToProps, { setRouterLocationAction, alertMessageAction, payOrderSuccessAction })(PayOrder)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link, withRouter } from 'react-router-dom'\nimport axios from 'axios'\nimport classnames from 'classnames'\nimport PropTypes from 'prop-types'\n\nimport './index.scss'\nimport config from '../../utils/config'\nimport socket from '../../utils/socket'\nimport { setBuyProductsAction } from '../../flux/actions/orderActions'\nimport { toggleChatAction } from '../../flux/actions/chatActions'\nimport { intMultiplication, intAdd, transPrice } from '../../utils/tools'\n\nconst HOST = config.HOST\n\nclass ShopingCart extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      height: 0,\n      bodyStatus: 'hide',\n      navStatus: 'hide',\n      choiceAll: true,\n      choiceStores: [],\n      choiceProducts: [],\n    }\n    this.windowResize = this.windowResize.bind(this)\n  }\n\n  // componentWillMount() {\n\n  // }\n\n  windowResize() {\n    this.setState({\n      height: document.documentElement.clientHeight\n    })\n  }\n\n  componentDidMount() {\n    if (typeof(window) === 'object') {\n      var _this = this\n      this.setState({\n        height: document.documentElement.clientHeight\n      })\n      window.addEventListener(\"resize\", this.windowResize)\n      // window.onresize = function() {\n\n      // }\n    }\n  }\n\n  componentWillUnmount() {\n    if (typeof(window) === 'object') {\n      window.removeEventListener(\"resize\", this.windowResize)\n      // window.onresize = null\n    }\n  }\n\n  // 购物车切换动画\n  showCarBody() {\n    var interval = -1\n    return function() {\n      var isHide = this.state.bodyStatus === 'hide'\n      var width = isHide ? -280 : 0\n      var inter = isHide ? 15 : 20\n      var out = isHide ? 300 : 200\n      var diff = isHide ? 14 : 28\n      var _this = this\n      _this.setState({\n          bodyStatus: isHide ? 'show' : 'hide',\n          navStatus: isHide ? 'show' : 'hide',\n      }, function() {\n        interval = setInterval(function() {\n          width = isHide ? width + diff : width - diff\n          _this.refs.shopCarBody.style.marginRight = width + 'px'\n        }, inter)\n        setTimeout(function() {\n          clearInterval(interval)\n          _this.refs.shopCarBody.style.marginRight = isHide ? '0px' : '-280px'\n        }, out)\n      })\n    }\n  }\n  showNav() {\n    this.setState({\n      navStatus: 'show'\n    })\n  }\n  hideNav() {\n    if (this.state.bodyStatus === 'show') return\n    this.setState({\n      navStatus: 'hide'\n    })\n  }\n\n  // 显示或隐藏聊天窗口\n  toggleChat() {\n    toggleChatAction(!this.props.hideChat)\n  }\n\n  // 购物车商品数量减一\n  numberMinus(product) {\n    var timer = 0;\n    return function() {\n      var now = Date.now()\n      if (now - timer > 800) {\n        if (product.number - 1 < 1 || socket.status !== 'open') return\n        socket.ws.send(JSON.stringify({\n          type: 'shop_car_number_minus',\n          target: 'koa',\n          content: product.shopCarId\n        }))\n      }\n      timer = now\n    }\n  }\n\n  // 购物车商品数量加一\n  numberPlus(product) {\n    var timer = 0;\n    return function() {\n      var now = Date.now()\n      if (now - timer > 800) {\n        if (product.number + 1 > product.amount || socket.status !== 'open') return\n        socket.ws.send(JSON.stringify({\n          type: 'shop_car_number_plus',\n          target: 'koa',\n          content: product.shopCarId\n        }))\n      }\n      timer = now\n    }\n  }\n\n  // 购物车删除商品\n  deleteShopProduct(shopCarId) {\n    var timer = 0;\n    return function() {\n      var now = Date.now()\n      if (now - timer > 800) {\n        if (socket.status !== 'open') return\n        socket.ws.send(JSON.stringify({\n          type: 'delete_shop_car_product',\n          target: 'koa',\n          content: shopCarId\n        }))\n      }\n      timer = now\n    }\n  }\n\n  // 全选单选框改变\n  allCheckboxChange(e) {\n    if (e.target.checked) {\n      this.setState({\n        choiceAll: true\n      })\n    }else {\n      this.setState({\n        choiceAll: false,\n        choiceStores: [],\n        choiceProducts: []\n      })\n    }\n  }\n  // 商店单选框改变\n  storeCheckboxChange(storeId) {\n    return function(e) {\n      if (e.target.checked) {\n        this.setState({\n          choiceStores: [...this.state.choiceStores, storeId]\n        })\n      }else {\n        this.setState({\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\n          choiceAll: false,\n        })\n      }\n    }\n  }\n\n  // 商品单选框改变\n  productCheckboxChange(shopCarId, storeId) {\n    return function(e) {\n      if (e.target.checked) {\n        this.setState({\n          choiceProducts: [...this.state.choiceProducts, shopCarId]\n        })\n      }else {\n        this.setState({\n          choiceProducts: this.state.choiceProducts.filter(i => i !== shopCarId),\n          choiceStores: this.state.choiceStores.filter(i => i !== storeId),\n          choiceAll: false,\n        })\n      }\n    }\n  }\n\n  // 计算选中商品的数量\n  computeChoiceCount() {\n    let count = 0  // 购物车选中商品个数\n    let price = 0  // 购物车选中商品总价格\n    let shopCarProductsLength = 0  // 购物车商品数量\n    let shopCar = this.props.auth.shopCar\n    for (let i = 0, len = shopCar.length; i < len; i++) {\n      shopCarProductsLength += shopCar[i].products.length\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\n        count += shopCar[i].products.length // 计算个数\n        shopCar[i].products.forEach(item => {\n          price = intAdd(price, intMultiplication(item.product.price, item.product.number))  // 计算选中价格\n        })\n        continue\n      }\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\n          count++\n          price = intAdd(price, intMultiplication(shopCar[i].products[j].product.price, shopCar[i].products[j].product.number))  // 计算选中价格\n        }\n      }\n    }\n    return {count, price, shopCarProductsLength}\n  }\n\n  // 点击结算\n  cashierShopCar() {\n    var shopCar = this.props.auth.shopCar\n    var shopCarProductsLength = 0\n    for (let i = 0, len = shopCar.length; i < len; i++) {\n      shopCarProductsLength += shopCar[i].products.length\n    }\n    if (shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)) return // 什么都没选\n    var buyProducts = []\n    for (let i = 0, len = shopCar.length; i < len; i++) {\n      if (this.state.choiceAll || this.state.choiceStores.indexOf(shopCar[i].storeId) !== -1) {\n        shopCar[i].products.forEach(item => {\n          buyProducts.push({\n            ...item.product,\n            spec: item.spec\n          })\n        })\n        continue\n      }\n      for (let j = 0, len2 = shopCar[i].products.length; j < len2; j++) {\n        if (this.state.choiceProducts.indexOf(shopCar[i].products[j].product.shopCarId) !== -1) {\n          buyProducts.push({\n            ...shopCar[i].products[j].product,\n            spec: shopCar[i].products[j].spec\n          })\n        }\n      }\n    }\n    this.props.setBuyProductsAction(buyProducts)\n    this.showCarBody().call(this)\n    this.props.history.push('/order')\n  }\n\n  render() {\n    const auth = this.props.auth\n    // 未登陆，在 App.js 中判断\n    // if (!this.props.auth.isLogin || !Array.isArray(auth.shopCar)) {\n    //   return (\n    //     <div></div>\n    //   )\n    // }\n\n    let computeChoice = this.computeChoiceCount.call(this)\n    return (\n      <div style={{height: this.state.height + 'px'}} className=\"shopcar\">\n        <div className={classnames(\"shopcar-nav\", {\n           'shopcar-nav-transparent': this.state.navStatus === 'hide'\n        })} style={{height: this.state.height + 'px'}}>\n          <div className=\"shopcar-nav-wrap\">\n            <Link to=\"/member\">\n              <div style={{marginTop: this.state.height * 0.3 + 'px'}} className=\"user-logo\">\n                <img src={`${HOST}/image/member/avatar/${auth.user.avatar}`} alt=\"\"/>\n              </div>\n            </Link>\n            <div onMouseOver={this.showNav.bind(this)} onMouseLeave={this.hideNav.bind(this)} onClick={this.showCarBody().bind(this)} className={classnames(\"shop-mab\", {'shop-mab-focus': this.state.bodyStatus === 'show'})}>\n              <div className=\"sp-logo\"><img src={`${HOST}/image/ui/shopingcar_logo.png`} /></div>\n              <div className=\"sp-font\">购物车</div>\n              <div className=\"sp-count\">{computeChoice.shopCarProductsLength}</div>\n            </div>\n            <div className=\"sp-chat-wrap\" onClick={this.toggleChat.bind(this)}>\n              <div className=\"spc-img\"><img width=\"35px\" height=\"35px\" src={`${HOST}/image/ui/${this.props.notRead > 0 ? 'frog_gua.png' : 'frog.png'}`} /></div>\n              {\n                this.props.notRead > 0 ? <div className=\"spc-notread\">{this.props.notRead}</div> : null\n              }\n            </div>\n          </div>\n        </div>\n        {/*购物车商品*/}\n        <div ref=\"shopCarBody\"\n          className=\"shopcar-body\"\n          style={{height: this.state.height + 'px'/*,display: this.state.bodyStatus === 'show' ? 'block' : 'none'*/}}>\n          <div className=\"sc-choice-all-wrap\">\n            <input checked={this.state.choiceAll} onChange={this.allCheckboxChange.bind(this)} type=\"checkbox\"/>\n            <span>全选</span>\n          </div>\n          <div className=\"sc-products-wrap\" style={{height: Number(this.state.height) - 110 + 'px'}}>\n          {\n            auth.shopCar.map((item, index) => {\n              return (\n                <div className=\"sc-store-wrap\" key={index}>\n                  <div className=\"sc-store-title sc-line-box\">\n                    <div className=\"sc-line-item\">\n                      <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.storeId) !== -1} onChange={this.storeCheckboxChange(item.storeId).bind(this)} type=\"checkbox\"/>\n                    </div>\n                    <div className=\"sc-line-item sc-store-name\">{item.storeName}</div>\n                  </div>\n                  {\n                    item.products.map((item, i) => {\n                      return (\n                        <div className=\"sc-line-box sc-product-wrap\" key={i}>\n                          <div className=\"sc-line-item sc-product-checkbox\">\n                            <input checked={this.state.choiceAll || this.state.choiceStores.indexOf(item.product.storeId) !== -1 || this.state.choiceProducts.indexOf(item.product.shopCarId) !== -1}\n                              onChange={this.productCheckboxChange(item.product.shopCarId, item.product.storeId).bind(this)}\n                              type=\"checkbox\"/>\n                          </div>\n                          <div className=\"sc-line-item sc-product-logo\"><img width=\"50px\" src={`${HOST}/image/goods/logo/${item.product.logo}`} title={item.product.goodName} /></div>\n                          <div className=\"sc-line-item sc-product-spec\">{\n                            item.spec.map((spec, j) => {\n                              if (j > 1) return null // 只显示 2 个分类信息\n                              return (\n                                <p className=\"sc-product-spec-item\" title={spec.specName + \"：\" + spec.specValue} key={j}>{spec.specValue}</p>\n                              )\n                            })\n                          }</div>\n                          <div className=\"sc-line-item sc-product-number\">{item.product.number}</div>\n                          <div className=\"sc-line-price\">￥{transPrice(intMultiplication(item.product.price, item.product.number))}</div>\n                          <div className=\"sc-choice-wrap\">\n                            <div onClick={this.numberMinus(item.product).bind(this)} className=\"sc-choice-unlike\"><img title=\"数量减一\" src={`${HOST}/image/ui/unlike.png`} alt=\"\"/></div>\n                            <div onClick={this.numberPlus(item.product).bind(this)} className=\"sc-choice-like\"><img title=\"数量加一\"  src={`${HOST}/image/ui/like.png`} alt=\"\"/></div>\n                            <div onClick={this.deleteShopProduct(item.product.shopCarId).bind(this)} className=\"sc-choice-delete\"><img title=\"删除\" src={`${HOST}/image/ui/delete.png`} alt=\"\"/></div>\n                          </div>\n                        </div>\n                      )\n                    })\n                  }\n                </div>\n              )\n            })\n          }\n          </div>\n          <div className=\"sc-Cashier-wrap\">\n            <div className=\"sc-Cashier-clear\">\n              <div className=\"sc-s-count\">已选 {computeChoice.count} 件</div>\n              <div className=\"sc-s-price\">￥ {transPrice(computeChoice.price)}</div>\n            </div>\n            <div onClick={this.cashierShopCar.bind(this)} className={classnames(\"sc-Cashier\", {\n              'sc-empty': computeChoice.shopCarProductsLength === 0 || (!this.state.choiceAll && this.state.choiceProducts.length === 0 && this.state.choiceStores.length === 0)\n            })}>\n              <span>结算</span>\n              <div className=\"sc-Cashier-icon\"><img width=\"18px\" height=\"18px\" src={`${HOST}/image/ui/package.png`} /></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nShopingCart.propTypes = {\n  auth: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  setBuyProductsAction: PropTypes.func.isRequired,\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    hideChat: state.chat.hideChat,\n    notRead: state.chat.messagesNotRead.reduce(function(prev, next) {\n      return prev + next.notRead\n    }, 0)\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, { setBuyProductsAction })(ShopingCart))\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport classnames from 'classnames'\r\nimport config from '../../../utils/config'\r\nimport { formatDate } from '../../../utils/tools'\r\n\r\nimport { messageNotReadItemToChatAction, messageItemToChatAction } from '../../../flux/actions/chatActions'\r\nconst HOST = config.HOST\r\n\r\nfunction subMessage(message) {\r\n  var msg = message.replace(/{{=\\w+\\.(jpg|png|icon|gif|jpeg)}}/g, '【图片】').replace('&lt;', '<').replace('&gt;', '>')\r\n  return message.length < 19 ? msg : msg.substring(0,18) + '...'\r\n}\r\n\r\nconst Message = props => {\r\n  return (\r\n    <div className=\"chat-msg-wrap\">\r\n      { // 未读消息\r\n        [props.messagesNotRead.map((item, index) => (\r\n          <div onClick={props.messageNotReadItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n            <div className=\"msg-i-userwrap\">\r\n              <div className=\"msg-i-avatar\" style={{\r\n                background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n              }}></div>\r\n              <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n            </div>\r\n            <div className=\"msg-i-wrap\">\r\n              <div className=\"msg-i-disone\">{(Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              <div className=\"msg-i-len\">{item.notRead}</div>\r\n            </div>\r\n              <div className=\"msg-i-time\">{Array.isArray(item.content) && item.content.length > 0 ? formatDate(item.content[item.content.length-1].creaTime) : ''}</div>\r\n          </div>\r\n        )), // 已读消息\r\n          props.messages.map((item, index) => (\r\n            <div onClick={props.messageItemToChatAction(item)} key={index} className={classnames(\"msg-item\", {\r\n              'msg-item-select': item.userId === props.chatnow\r\n            })}>\r\n              <div className=\"msg-i-userwrap\">\r\n                <div className=\"msg-i-avatar\" style={{\r\n                  background: `url(${HOST}/image/member/avatar/${item.avatar}) center center / 35px 35px no-repeat`\r\n                }}></div>\r\n                <div className=\"msg-i-nickname\">{item.nickname}</div>\r\n              </div>\r\n              <div className=\"msg-i-wrap\">\r\n                <div className=\"msg-i-disone\">{props.chatnow !== item.userId && item.wait ? subMessage(item.wait) : (Array.isArray(item.content) && item.content.length > 0 ? subMessage(item.content[item.content.length-1].msg) : '')}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    messagesNotRead: Array.isArray(state.chat.messagesNotRead) ? state.chat.messagesNotRead : [],\r\n    messages: Array.isArray(state.chat.messages) ? state.chat.messages : [],\r\n    chatnow: state.chat.chatnow\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { messageNotReadItemToChatAction, messageItemToChatAction })(Message)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\nimport socket from '../../../utils/socket'\r\nimport config from '../../../utils/config'\r\nconst HOST = config.HOST\r\n\r\n// 点击联系人到聊天框\r\nfunction contactClick(item) {\r\n  return function() {\r\n    contactItemToChatAction(item)\r\n  }\r\n}\r\n\r\nconst Contacts = (props) => {\r\n  if (socket.status === 'open') {\r\n    socket.ws.send(JSON.stringify({\r\n      type: 'get_contacts'\r\n    }))\r\n  }\r\n  const online = []\r\n  const offline = []\r\n  props.contacts.forEach(i => {\r\n    if (i.isOnline) {\r\n      online.push(i)\r\n    }else {\r\n      offline.push(i)\r\n    }\r\n  })\r\n  return (\r\n    <div>\r\n      {\r\n        props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n        [\r\n          online.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          )),\r\n          offline.map((item, index) => (\r\n            <div key={index} onClick={contactClick(item)} className=\"chat-contact-item chat-item-offline\">\r\n              <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n              <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n            </div>\r\n          ))\r\n        ]\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n// class Contacts extends React.Component {\r\n//   componentWillMount() {\r\n//     // socket 请求 联系人列表\r\n//     if (socket.status === 'open') {\r\n//       socket.ws.send(JSON.stringify({\r\n//         type: 'get_contacts'\r\n//       }))\r\n//     }\r\n//   }\r\n//   // 点击联系人到聊天框\r\n//   contactClick(item) {\r\n//     contactItemToChatAction(item)\r\n//   }\r\n//   render() {\r\n//     const online = []\r\n//     const offline = []\r\n//     this.props.contacts.forEach(i => {\r\n//       if (i.isOnline) {\r\n//         online.push(i)\r\n//       }else {\r\n//         offline.push(i)\r\n//       }\r\n//     })\r\n//     return (\r\n//       <div>\r\n//         {\r\n//           this.props.contacts.length < 1 ? <div>你还没有联系人哦...</div> :\r\n//           [\r\n//             online.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             )),\r\n//             offline.map((item, index) => (\r\n//               <div key={index} onClick={this.contactClick.bind(this, item)} className=\"chat-contact-item chat-item-offline\">\r\n//                 <div className=\"chatcon-il\"><img src={`${HOST}/image/member/avatar/${item.avatar}`}/></div>\r\n//                 <p title={item.nickname} className=\"chatcon-ir\">{item.nickname}</p>\r\n//               </div>\r\n//             ))\r\n//           ]\r\n//         }\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    contacts: Array.isArray(state.chat.contacts) ? state.chat.contacts : []\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Contacts)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport config from '../../../utils/config'\r\nimport socket from '../../../utils/socket'\r\nimport { contactItemToChatAction } from '../../../flux/actions/chatActions'\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Search extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      searchAns: [],\r\n      keyword: '',\r\n      message: ''\r\n    }\r\n    this.shakeGetAns = this.shakeGetAns().bind(this)\r\n  }\r\n\r\n  // 防抖获取结果\r\n  shakeGetAns() {\r\n    var timer = 0\r\n    var timeout = -1;\r\n    return function(keyword) {\r\n      var _this = this\r\n      clearTimeout(timeout) // 清除前一个定时器\r\n      timeout = setTimeout(function() {\r\n        _this.setState({\r\n          message: '搜索中...'\r\n        })\r\n        axios.get(`${HOST}/api/users/search_contacts?keyword=${_this.state.keyword}`)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              _this.setState({\r\n                searchAns: res.data.payload,\r\n                message: res.data.payload.length === 0 ? '未搜索到联系人...' : ''\r\n              })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n          })\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  keywordChange(e) {\r\n    var _this = this\r\n    var keyword = e.target.value\r\n    this.setState({\r\n      keyword\r\n    }, function() {\r\n      _this.shakeGetAns(keyword)\r\n    })\r\n  }\r\n\r\n  contactsClick(item) {\r\n    contactItemToChatAction(item)\r\n  }\r\n\r\n  addContactsClick(item) {\r\n    return function(e) {\r\n      e.stopPropagation()\r\n      if (socket.status === 'open') {\r\n        socket.ws.send(JSON.stringify({\r\n          type: 'add_contacts',\r\n          content: item.userId\r\n        }))\r\n        this.setState({\r\n          searchAns: this.state.searchAns.filter(i => i.userId !== item.userId)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-search-wrap\">\r\n        <div className=\"chat-s-input\">\r\n          <div className=\"chat-s-i-l\"><input value={this.state.keyword} placeholder=\"输入联系人昵称\" onChange={this.keywordChange.bind(this)} type=\"text\"/></div>\r\n          <div className=\"chat-s-i-r\">点击搜索</div>\r\n        </div>\r\n        <div className=\"chat-s-ans\">\r\n          {\r\n            Array.isArray(this.state.searchAns) && this.state.searchAns.length === 0 ? <div className=\"con-search-miss\">{this.state.message}</div> : this.state.searchAns.map((item, index) => (\r\n              <div onClick={this.contactsClick.bind(this, item)} className=\"c-s-item\" key={index}>\r\n                <div className=\"c-s-i-avatar\"><img src={`${HOST}/image/member/avatar/${item.avatar}`} /></div>\r\n                <div className=\"c-s-i-nickname\">{item.nickname}</div>\r\n                <div onClick={this.addContactsClick(item).bind(this)} className=\"c-s-i-btn-add\">加好友</div>\r\n              </div>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\n\nimport config from '../../../utils/config'\nimport wss from '../../../utils/socket'\nimport { swingChatWindowAction, setWaitMessageAction, sendingMessageAction } from '../../../flux/actions/chatActions'\nconst HOST = config.HOST\n\n// function readFile(file, callback) {\n//   var reader = new FileReader()\n//   //以二进制形式读取文件\n//   reader.readAsArrayBuffer(file)\n//   reader.onload = function(e) {\n//     callback(e.target.result)\n//   }\n// }\n\nfunction transMessage(msg) {\n  if (msg === '' || typeof(msg) !== 'string') return msg\n    // firefox 不支持正则前置断言\n    // images = msg.match(/(?<!{{=)\\w+\\.(jpg|jpeg|gif|png|icon)(?=}})/g)\n  var images = msg.match(/[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)(?=}})/g)\n  if (images) {\n    // var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.(jpg|jpeg|gif|png|ico)}}/)\n    var msgs = msg.split(/{{\\=[A-z0-9]{10}_\\d{8}\\.[jpgenifco]{3,4}}}/i)\n    msg = msgs[0]\n    for (var i = 1, len = msgs.length; i < len; i++) {\n      msg += `<img chat=\"${images[i-1]}\" src=\"${HOST}/image/member/chat/${/\\.gif$/.test(images[i-1]) ? images[i-1] : images[i-1] + '_w80.jpg'}\">${msgs[i]}`\n    }\n  }\n  return msg\n}\n\nclass ChatWindow extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      message: '',\n      waitMessage: '',\n      showChatImage: false,\n      chatImage: ''\n    }\n    this.scrollToButton = this.scrollToButton.bind(this)\n  }\n\n  static getDerivedStateFromError(error) {\n    // console.log(error)\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // console.log(error, info)\n    // logErrorToMyService(error, info);\n  }\n\n  componentDidMount() {\n    if (typeof(window) !== 'object') return;\n    this.refs.textarea.ondragenter = function (e) {\n      e.preventDefault()\n    }\n    this.refs.textarea.ondragleave = function(e) {\n      e.preventDefault()\n    }\n    this.refs.textarea.ondragover = function(e) {\n        e.preventDefault();\n    }\n    var _this = this\n    this.refs.textarea.ondrop = function(e) {\n      e.preventDefault()\n      e.stopPropagation() // 火狐浏览器，拖动时打开新页面\n      if (!_this.props.chat.chatnow) return;\n      var file = e.dataTransfer.files[0]\n      if (!file || file.size > '5048576‬') {\n        return; // 5M 以下的文件\n      }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\n        return; // 不支持的格式\n      }\n      var formData = new FormData()\n      formData.append('picture', file)\n      var waitImg = `<waitimg size=\"${file.size}\"><img src=\"${HOST}/image/ui/wait.gif\"></waitimg>`\n      _this.setState({\n        waitMessage: _this.refs.textarea.innerHTML += waitImg\n      })\n\n      axios.post(`${HOST}/api/users/save_chat_image`, formData)\n        .then(res => {\n          if (res.data.success) {//new RegExp(`<waitimg size=\"${file.size}\">[\\\\d\\\\D]+</waitimg>`)\n            var nowMessage = _this.refs.textarea.innerHTML.replace(waitImg,`<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\n            return _this.setState({\n              waitMessage: nowMessage\n            }, function() {\n              _this.props.setWaitMessageAction(nowMessage)\n            })\n\n          }\n          // 失败了\n          _this.setState({\n            waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\n          })\n        })\n        .catch(err => {\n          console.error(err)\n          _this.setState({\n            waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\n          })\n        })\n    }\n    document.getElementsByClassName(\"chatw-show-wrap\")[0].onclick = function(e) {\n      var img = e.target.getAttribute('chat')\n      if (img && /^\\w{10}_\\d{7,9}\\.(jpg|png|gif|icon|jpeg)$/.test(img)) {\n        _this.setState({\n          showChatImage: true,\n          chatImage: img\n        })\n      }\n    }\n  }\n\n  chatImageChange(e) {\n    var _this = this\n    if (!_this.props.chat.chatnow) return;\n    var file = e.currentTarget.files[0]\n    if (!file || file.size > '5048576‬') {\n      return; // 5M 以下的文件\n    }else if (!/^image\\/(jpeg|png|gif|x-icon)$/.test(file.type)) {\n      return; // 不支持的格式\n    }\n    var formData = new FormData()\n    formData.append('picture', file)\n    var waitImg = `<waitimg size=\"${file.size}\"><img src=\"${HOST}/image/ui/wait.gif\"></waitimg>`\n    _this.setState({\n      waitMessage: _this.refs.textarea.innerHTML += waitImg\n    })\n\n    axios.post(`${HOST}/api/users/save_chat_image`, formData)\n      .then(res => {\n        if (res.data.success) {//new RegExp(`<waitimg size=\"${file.size}\">[\\\\d\\\\D]+</waitimg>`)\n          var nowMessage = _this.refs.textarea.innerHTML.replace(waitImg,`<img src=\"${HOST}/image/member/chat/${res.data.payload}_w80.jpg\">`)\n          return _this.setState({\n            waitMessage: nowMessage\n          }, function() {\n            _this.props.setWaitMessageAction(nowMessage)\n          })\n\n        }\n        // 失败了\n        _this.setState({\n          waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\n        })\n      })\n      .catch(err => {\n        console.error(err)\n        _this.setState({\n          waitMessage: _this.refs.textarea.innerHTML.replace(waitImg, '')\n        })\n      })\n\n  }\n\n  componentWillUnmount() {\n    if (typeof(window) !== 'object') return;\n    this.refs.textarea.ondragenter = null\n    this.refs.textarea.ondragleave = null\n    this.refs.textarea.ondragover = null\n    this.refs.textarea.ondrop = null\n  }\n\n  // 聊天对象改变时，拿出未发送消息\n  componentWillReceiveProps(nextProps, b) {\n    // console.log(nextProps, b)\n    if (typeof(window) !== 'object') { return }\n    var chat = this.props.chat\n    // 将消息中的 wait 提取出\n    if (chat.chatnow !== nextProps.chat.chatnow) {\n      var now = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\n      if (now && now.wait) {\n        // this.refs.textarea.classList.remove('textarea-f1')\n        this.refs.textarea.innerHTML = now.wait\n      }else {\n        this.refs.textarea.innerText = ''\n      }\n      // 将消息滚动条，到最低\n      this.scrollToButton()\n    }else {\n      var msgNow = chat.messages.find(i => i.userId === chat.chatnow)\n      var msgNext = nextProps.chat.messages.find(i => i.userId === nextProps.chat.chatnow)\n      if (msgNow && msgNext && Array.isArray(msgNow.content) && Array.isArray(msgNext.content) && msgNow.content.length !== msgNext.content.length) {\n        // 将消息滚动条，到最低\n        this.scrollToButton()\n      }\n    }\n    this.refs.textarea.focus()\n  }\n\n  scrollToButton() {\n      var _this = this\n        // 这里 render 还没执行，页面中组件\n      setTimeout(function() {\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\n        _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\n        setTimeout(function() {\n        // console.log(_this.refs.chatMessageBox.scrollTop, _this.refs.chatMessageBox.scrollHeight)\n          _this.refs.chatMessageBox.scrollTop = _this.refs.chatMessageBox.scrollHeight\n        }, 200)\n      }, 100)\n  }\n\n  closeChatImage() {\n    this.setState({\n      showChatImage: false,\n      chatImage: ''\n    })\n  }\n\n  // 隐藏这个窗口\n  swingChatWindow() {\n    this.props.swingChatWindowAction(true)\n  }\n\n  sendMessage() {\n    var message = this.refs.textarea.innerHTML.trim().replace(new RegExp(`<waitimg>[\\\\d\\\\D]+</waitimg>`), '')\n    if (message === '' || !this.props.chat.chatnow) return;\n    // var images = message.match(/\\w+?\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\">)/g)\n    // 取出图片\n    var images = message.match(/[A-z0-9]{10}_\\d{8}\\.(gif|png|jpg|jpeg|ico)(?=_w80\\.jpg\")/g)\n\n    if (images) {\n      var msgs = message.split(/<img [\\w\\W]+?>/) // 根据图片分割消息，非贪婪匹配\n      // console.log(msgs)\n      message = msgs[0]\n      for (var i = 1, len = msgs.length; i < len; i++) {\n        message += `{{=${images[i-1]}}}${msgs[i]}`\n      }\n    }\n    message = message.replace(/<(span|font|div|br|img)[\\d\\D]*?>/g, '').replace(/<\\/(div|span|font)>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    // console.log(images)\n    // return console.log(message)\n    //message = message.replace(/(<\\/span>|<span[^>]+?>)/g, '').replace(/(<\\/div>|<div[^>]*?>)/g, '').replace(/<br>/g, '').replace(/&nbsp;/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    if (message === '') return;\n    if (wss.status !== 'open') {\n      return this.setState({\n        messages: '与服务器断开连接'\n      })\n    }\n    this.props.sendingMessageAction(message)\n    wss.ws.send(JSON.stringify({\n      type: 'send_chat_message',\n      origin: this.props.user.userId,\n      target: this.props.chat.chatnow,\n      content: message\n    }))\n    this.refs.textarea.innerText = '' // 清空消息\n    this.props.setWaitMessageAction('')\n  }\n\n  // textareaFocus(e) {\n\n  // }\n  // textareaBlur(e) {\n\n  // }\n\n  textareaInput(e) {\n    this.props.setWaitMessageAction(e.target.innerHTML.trim().replace(/<div><br><\\/div>/g, ''))\n  }\n\n  textareaPress(e) {\n    var html = e.target.innerHTML\n    if (e.key === 'Enter') {\n      e.target.innerHTML = html.replace(/<div><br><\\/div>$/g, '')\n      this.sendMessage()\n    }\n  }\n\n  render() {\n    let chat = this.props.chat\n    let chatnow = undefined\n    if (chat.chatnow && Array.isArray(chat.messages)) {\n      chatnow = chat.messages.find(i => i.userId === chat.chatnow)\n    }\n    return (\n      <div className=\"chat-window\" style={{\n        display: chat.hideWindow ? 'none' : 'block'\n      }}>\n        <div className=\"chatw-header\">\n          <div onClick={this.swingChatWindow.bind(this)} className=\"charw-hide\" style={{\n            background: `url(${HOST}/image/ui/left.png) center center / 25px 25px no-repeat #628ef9`\n          }}></div>\n          <div className=\"chatw-h-targetname\">{chatnow && chatnow.nickname}</div>\n        </div>\n        <div className=\"chatw-show-scroll-wrap\">\n          <div ref=\"chatMessageBox\" className=\"chatw-show-wrap\">\n          {\n            [chatnow && chatnow.content.map((item, index) => (\n              <div className=\"chat-chatnow-wrap\" key={index}>\n                {\n                  item.sender === chatnow.userId ? (\n                    <div className=\"chat-target-wrap\">\n                      <div className=\"chat-target\" key=\"1\">\n                        <div className=\"chat-ta-avatar\" style={{\n                          background: `url(${HOST}/image/member/avatar/${chatnow.avatar}) center center / 30px 30px no-repeat`\n                        }}></div>\n                        <div className=\"chat-ta-nickname\">{chatnow.nickname}</div>\n                      </div>\n                      <div className=\"chat-msg-target\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\n                    </div>\n                  ) : (\n                    <div className=\"chat-me-wrap\">\n                      <div className=\"chat-me\" key=\"1\">\n                        <div className=\"chat-me-avatar\" style={{\n                          background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\n                        }}></div>\n                        <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\n                      </div>\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.msg)}} key=\"2\"></div>\n                    </div>\n                  )\n                }\n              </div>\n            )),\n              chatnow && chat.sendingMessages.map((item, index) => {\n                return item.target !== chatnow.userId ? null : (\n                <div className=\"chat-chatnow-wrap\" key={index}>\n                  <div className=\"chat-me-wrap\">\n                    <div className=\"chat-me\" key=\"1\">\n                      <div className=\"chat-me-avatar\" style={{\n                        background: `url(${HOST}/image/member/avatar/${this.props.user.avatar}) center center / 30px 30px no-repeat`\n                      }}></div>\n                      <div className=\"chat-me-nickname\">{this.props.user.nickname}</div>\n                    </div>\n                    <div className=\"wait-msg-box\">\n                      <div className=\"chat-msg-me\" dangerouslySetInnerHTML={{__html: transMessage(item.message)}} key=\"2\"></div>\n                      <div className=\"wait-logo\"></div>\n                    </div>\n                  </div>\n                </div>\n              )})]\n          }\n          </div>\n        </div>\n        <div className=\"chatw-send-wrap\">\n          <div className=\"chatw-s-textarea\">\n            <div id=\"textarea\"\n              ref=\"textarea\"\n              // onFocus={this.textareaFocus.bind(this)}\n              // onBlur={this.textareaBlur.bind(this)}\n              onInput={this.textareaInput.bind(this)}\n              contentEditable={!!chatnow}\n              suppressContentEditableWarning=\"true\"\n              onKeyPress={this.textareaPress.bind(this)}\n              dangerouslySetInnerHTML={{__html: this.state.waitMessage}}\n            ></div>\n          </div>\n          <div className=\"chatw-s-sendbox\">\n            <div className=\"chat-add-img\">\n              <input onChange={this.chatImageChange.bind(this)} className=\"add-img-file\" type=\"file\"/>\n              <img src={`${HOST}/image/ui/plus-circle.png`} title=\"添加图片\"/>\n            </div>\n            {\n              this.state.message && <div className=\"char-err\">{this.state.message}</div>\n            }\n            <div onClick={this.sendMessage.bind(this)} className=\"chatw-s-sendbtn\">发送</div>\n\n          </div>\n        </div>\n        {\n          this.state.showChatImage && <div onClick={this.closeChatImage.bind(this)} className=\"chat-img-wrap\">\n            <img src={`${HOST}/image/member/chat/${this.state.chatImage}`}/>\n          </div>\n        }\n      </div>\n    )\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    user: state.auth.user,\n    chat: state.chat\n  }\n}\n\nChatWindow.propTypes = {\n  user: PropTypes.object.isRequired,\n  chat: PropTypes.object.isRequired,\n  setWaitMessageAction: PropTypes.func.isRequired,\n  swingChatWindowAction: PropTypes.func.isRequired\n}\nexport default connect(mapStateToProps, { swingChatWindowAction, setWaitMessageAction, sendingMessageAction })(ChatWindow)\n","/**\r\n * 在 App.js 中判断显示 store 中是否显示聊天功能，购物车点击青蛙显示\r\n * 请求消息记录，显示条数\r\n * 系统消息，用户消息\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport config from '../../utils/config'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\n\r\nimport './index.scss'\r\nimport Message from './subpage/Message'\r\nimport Contacts from './subpage/Contacts'\r\nimport Search from './subpage/Search'\r\nimport ChatWindow from './subpage/ChatWindow'\r\n\r\nimport { initContacts } from '../../flux/actions/chatActions'\r\n\r\n\r\nconst HOST = config.HOST\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      route: 'message',  // 显示 message，contacts，search\r\n      message: '',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof(window) === 'object') {\r\n      var chat = document.getElementById('chat')\r\n      var chatMove = document.getElementById('chat-move')\r\n\r\n      chatMove.onmousedown = function(e) {\r\n        var startX = e.clientX\r\n        var startY = e.clientY\r\n        var top = parseInt(window.getComputedStyle(chat)['top'])\r\n        var left = parseInt(window.getComputedStyle(chat)['left'])\r\n        // var X = document.documentElement.clientWidth  // 窗口高宽\r\n        // var Y = document.documentElement.clientHeight\r\n        document.onmousemove = function(e) {\r\n          /**\r\n           * 判断将窗口拖出文档\r\n           */\r\n          chat.style.left = left + (e.clientX - startX) + 'px'\r\n          chat.style.top = top + (e.clientY - startY) + 'px'\r\n        }\r\n\r\n        document.onmouseup = function() {\r\n          // chat.onmousedown = null\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n        }\r\n      }\r\n      document.onmouseleave = function() {\r\n          document.onmousemove = null\r\n          document.onmouseup = null\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (typeof(window) === 'object') {\r\n      document.getElementById('chat-move').onmousedown = null\r\n      document.onmouseleave = null\r\n    }\r\n  }\r\n\r\n  routeChange(route) {\r\n    this.setState({\r\n      route\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (typeof(window) !== 'object') {\r\n      return <div></div>\r\n    }\r\n\r\n    return (\r\n      <div id=\"chat\">\r\n        <div className=\"chat-route\">\r\n          <div id=\"chat-move\" className=\"cr-user-wrap\">\r\n            <div className=\"cr-user-avatar\" style={{\r\n              'background': `url(${HOST}/image/member/avatar/${this.props.auth.user.avatar}) center center / 30px 30px no-repeat`\r\n            }}></div>\r\n           <div className=\"cr-user-name\">{this.props.auth.user.nickname}</div>\r\n          </div>\r\n          <div className=\"cr-routes-wrap\">\r\n            <div onClick={this.routeChange.bind(this, 'message')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'message'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/message.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>消息</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'contacts')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'contacts'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/user.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>联系人</span></div>\r\n            </div>\r\n            <div onClick={this.routeChange.bind(this, 'search')} className={classnames(\"crr-item\", {\r\n              'crr-select-bg': this.state.route === 'search'\r\n            })}>\r\n              <div className=\"crr-item-img\"><img src={`${HOST}/image/ui/monitor.png`} /></div>\r\n              <div className=\"crr-item-f\"><span>找人</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-body\">\r\n          <div className=\"chat-body-box\">\r\n            {\r\n              this.state.route === 'message' ? <Message /> :\r\n              this.state.route === 'contacts' ? <Contacts /> :\r\n              this.state.route === 'search' ? <Search /> : null\r\n            }\r\n          </div>\r\n        </div>\r\n        <ChatWindow />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    // chat: state.chat\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  // chat: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, { initContacts })(Chat)\r\n","/**\r\n * 在页面中显示消息，显示 1.5 秒后消失\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { closeAlertAction } from '../..//flux/actions/messageAction'\r\nimport './index.scss'\r\n\r\nclass MessageBox extends React.Component {\r\n\r\n  componentDidMount() {\r\n    var box = this.refs.messageBox\r\n    var _this = this\r\n    setTimeout(function() {\r\n      var opacity = 1\r\n      var interval = setInterval(function() {\r\n        opacity -= 0.1\r\n        box.style.opacity = opacity\r\n      }, 100)\r\n      setTimeout(function() {\r\n        clearInterval(interval)\r\n        _this.props.closeAlertAction()\r\n      }, 1000)\r\n    }, 500)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref=\"messageBox\" className=\"message-box\">\r\n        {this.props.messageBox.message}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messageBox: state.messageBox\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { closeAlertAction })(MessageBox)\r\n","/**\r\n * 确认或取消\r\n */\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { closeConfirmAction } from '../../flux/actions/messageAction'\r\n\r\nfunction limitMessage(message) {\r\n  if (typeof(message) !== 'string') {\r\n    return ''\r\n  }\r\n  return message.length < 31 ? message : message.substring(0,30) + '...'\r\n}\r\n\r\nconst Confirm = props => {\r\n\r\n  var sureBtnClick = function() {\r\n    if (typeof(props.sure) === 'function') {\r\n      props.sure()\r\n    }\r\n    props.closeConfirmAction()\r\n  }\r\n\r\n  var cancelBtnClick = function() {\r\n    props.closeConfirmAction()\r\n    if (typeof(props.cancel) === 'function') {\r\n      props.cancel()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"confirm-box\">\r\n      <div className=\"msg-content\">{limitMessage(props.confirmMessage)}</div>\r\n      <div className=\"btn-wrap\">\r\n        <div onClick={sureBtnClick} className=\"btn-yes\">确认</div>\r\n        <div onClick={cancelBtnClick} className=\"btn-cancel\">取消</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    confirmMessage: state.messageBox.confirmMessage,\r\n    sure: state.messageBox.sure,\r\n    cancel: state.messageBox.cancel,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { closeConfirmAction })(Confirm)\r\n","import React from 'react'\r\nimport config from '../../utils/config'\r\nconst HOST = config.HOST\r\n\r\nconst style = {\r\n  width: '400px',\r\n  height: '200px',\r\n  background: `url(${HOST}/image/ui/loading.gif) center center / 400px 200px no-repeat`,\r\n  position: 'fixed',\r\n  left:'50%',\r\n  top: '50%',\r\n  zIndex: '99999',\r\n  margin: '-100px 0 0 -200px'\r\n}\r\n\r\nconst Loading = props => {\r\n  return (<div style={style} className=\"loading-box\">\r\n\r\n  </div>)\r\n}\r\n\r\nexport default Loading\r\n","import React from 'react';\nimport {Route, withRouter, Switch} from 'react-router-dom';\nimport axios from 'axios'\nimport { connect } from 'react-redux'\n\nimport config from './utils/config.js'\n\nimport \"./App.scss\"\nimport PrivateRoute from './components/PrivateRoute'\nimport Home from './containers/Home'\nimport Register from './containers/Register'\nimport Login from './containers/Login'\nimport SearchProduct from './containers/SearchProduct'\nimport GotoSearchProduct from './containers/SearchProduct/GotoSearchProduct'\nimport ProductDetail from './containers/ProductDetail'\nimport UserInfo from './containers/UserInfo'\nimport Order from './containers/Order'\nimport PayOrder from './containers/PayOrder'\nimport ShopingCart from './containers/ShopingCart'\nimport Chat from './components/Chat'\nimport MessageBox from './components/MessageBox'\nimport Confirm from './components/MessageBox/Confirm'\nimport Loading from './components/MessageBox/Loading'\nimport Footer from './components/Footer'\n\nimport { setAuthToken, setCurrentUser } from './utils/setAuth'\nif (typeof(window) === 'object') {\n  // 彩蛋\n  console.log('%c优选提示！','color:red;font-size:30px;')\n  console.log('%c此浏览器功能专供开发者使用。请不要在此粘贴执行任何内容，这可能会导致您的账户受到攻击，给您带来损失 ！','font-size:20px;color:#777777;font-weight:400;')\n  // 验证本地 token\n  const jwtToken = window.localStorage.jwtToken;\n  if (!jwtToken) {\n    setAuthToken(false);\n    setCurrentUser({});\n  }else {\n    axios.defaults.headers.common[\"Authorization\"] = jwtToken; // 设置请求头 token\n    // 验证请求头token\n    axios.get(`${config.HOST}/api/users/current`)\n      .then(res => {\n        if (!res.data.success) {\n          setAuthToken(false);\n          setCurrentUser({});\n        } else {\n          // token 验证成功\n          setAuthToken(res.data.payload.token);\n          setCurrentUser(res.data.payload.user);\n        }\n      })\n      .catch(err => {\n        setAuthToken(false);\n        setCurrentUser({});\n      });\n  }\n\n}\n\nconst App = (props) => {\n  return (\n    <div className=\"App\">\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/register\" component={Register} />\n        <Route path=\"/login\" component={Login} />\n        {/*参数变化路径不变不会触发组件刷新，此处需要跳转*/}\n        <Route path=\"/search_product\" component={GotoSearchProduct} />\n        <Route path=\"/search_products\" component={SearchProduct} />\n        <Route path=\"/product_detail\" component={ProductDetail} />\n        <PrivateRoute path=\"/order\" component={Order} />\n        <PrivateRoute path=\"/member\" component={UserInfo} />\n        <PrivateRoute path=\"/payorder\" component={PayOrder} />\n      </Switch>\n      {\n        // 购物车\n        props.isLogin ? <ShopingCart /> : null\n      }\n      {\n        // 聊天框\n        props.hideChat ? null : <Chat />\n      }\n      {\n        // 消息框\n        props.showAlert ? <MessageBox /> : null\n      }\n      {\n        // 确认框\n        props.showConfirm ? <Confirm /> : null\n      }\n      {\n        //<Loading />\n      }\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    isLogin: state.auth.isLogin,\n    hideChat: state.chat.hideChat,\n    showAlert: state.messageBox.showAlert,\n    showConfirm: state.messageBox.showConfirm\n  }\n}\n\nexport default withRouter(connect(mapStateToProps)(App))\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\n\nimport App from './App';\nimport store from './flux/store'\n\nconst ReactBody = () => {\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  )\n}\n// hydrate\nReactDOM.hydrate(<ReactBody />, document.getElementById('react-body'));\n"],"sourceRoot":""}